"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./hooks/useCardStudioRefactored.ts":
/*!******************************************!*\
  !*** ./hooks/useCardStudioRefactored.ts ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCardStudio: function() { return /* binding */ useCardStudio; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sonner */ \"(app-pages-browser)/./node_modules/sonner/dist/index.mjs\");\n/* harmony import */ var _cardStudio_useWebSocket__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cardStudio/useWebSocket */ \"(app-pages-browser)/./hooks/cardStudio/useWebSocket.ts\");\n/* harmony import */ var _cardStudio_useJobManagementSimplified__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cardStudio/useJobManagementSimplified */ \"(app-pages-browser)/./hooks/cardStudio/useJobManagementSimplified.ts\");\n/* harmony import */ var _cardStudio_useMessageGeneration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cardStudio/useMessageGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useMessageGeneration.ts\");\n/* harmony import */ var _cardStudio_useFileHandling__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cardStudio/useFileHandling */ \"(app-pages-browser)/./hooks/cardStudio/useFileHandling.ts\");\n/* harmony import */ var _cardStudio_useDraftGeneration__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./cardStudio/useDraftGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useDraftGeneration.ts\");\n/* harmony import */ var _cardStudio_useCardGeneration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./cardStudio/useCardGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useCardGeneration.ts\");\n/* harmony import */ var _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./cardStudio/constants */ \"(app-pages-browser)/./hooks/cardStudio/constants.ts\");\n/* harmony import */ var _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./cardStudio/utils */ \"(app-pages-browser)/./hooks/cardStudio/utils.ts\");\n/* harmony import */ var _lib_storageManager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/lib/storageManager */ \"(app-pages-browser)/./lib/storageManager.ts\");\n/* __next_internal_client_entry_do_not_use__ useCardStudio auto */ \n\n// Import modular hooks\n\n\n\n\n\n\n// Import constants and utils\n\n\n\nfunction useCardStudio() {\n    // Core form state\n    const [prompt, setPrompt] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [toField, setToField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [fromField, setFromField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [relationshipField, setRelationshipField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [personalTraits, setPersonalTraits] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedType, setSelectedType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"birthday\");\n    const [customCardType, setCustomCardType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedTone, setSelectedTone] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"funny\");\n    // Advanced options state\n    const [showAdvanced, setShowAdvanced] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [selectedArtisticStyle, setSelectedArtisticStyle] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"ai-smart-style\");\n    const [customStyleDescription, setCustomStyleDescription] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedImageModel, setSelectedImageModel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"gpt-image-1\");\n    const [selectedDraftModel, setSelectedDraftModel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"gpt-image-1\");\n    const [fastPreviewMode, setFastPreviewMode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    // Email state\n    const [userEmail, setUserEmail] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    // Card options\n    const [numberOfCards, setNumberOfCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1);\n    const [isHandwrittenMessage, setIsHandwrittenMessage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isFrontBackOnly, setIsFrontBackOnly] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [selectedPaperSize, setSelectedPaperSize] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"standard\");\n    // UI state\n    const [isTextareaExpanded, setIsTextareaExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isMessageExpanded, setIsMessageExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showSettings, setShowSettings] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showTemplateGallery, setShowTemplateGallery] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showPrintConfirmation, setShowPrintConfirmation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showTemplateCustomization, setShowTemplateCustomization] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Restoration state\n    const [isRestoringJobs, setIsRestoringJobs] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [selectedTemplate, setSelectedTemplate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isInitialLoadComplete, setIsInitialLoadComplete] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Template state\n    const [templateSearchQuery, setTemplateSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [isSearchingTemplates, setIsSearchingTemplates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [aiFilteredCards, setAiFilteredCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [searchMode, setSearchMode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"text\");\n    const [textFilteredCards, setTextFilteredCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [showPrompts, setShowPrompts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [printOption, setPrintOption] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"physical\");\n    // Template customization state\n    const [templateCustomizations, setTemplateCustomizations] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        promptChanges: \"\",\n        messageChanges: \"\",\n        useReferenceImage: false,\n        referenceImageFile: null,\n        referenceImageUrls: [],\n        referenceImageTransformation: \"\"\n    });\n    // Section loading states\n    const [sectionLoadingStates, setSectionLoadingStates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        frontCover: \"idle\",\n        backCover: \"idle\",\n        leftInterior: \"idle\",\n        rightInterior: \"idle\"\n    });\n    // Countdown state\n    const [countdown, setCountdown] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [countdownInterval, setCountdownInterval] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    // Use modular hooks\n    const webSocket = (0,_cardStudio_useWebSocket__WEBPACK_IMPORTED_MODULE_2__.useWebSocket)();\n    const jobManagement = (0,_cardStudio_useJobManagementSimplified__WEBPACK_IMPORTED_MODULE_3__.useJobManagement)();\n    const fileHandling = (0,_cardStudio_useFileHandling__WEBPACK_IMPORTED_MODULE_5__.useFileHandling)();\n    const messageGeneration = (0,_cardStudio_useMessageGeneration__WEBPACK_IMPORTED_MODULE_4__.useMessageGeneration)(selectedType, customCardType, selectedTone, prompt, toField, fromField, relationshipField, fileHandling.photoReferences);\n    // Draft generation props\n    const draftGenerationProps = {\n        selectedType,\n        customCardType,\n        selectedTone,\n        selectedArtisticStyle,\n        customStyleDescription,\n        selectedDraftModel,\n        selectedImageModel,\n        selectedPaperSize,\n        prompt,\n        personalTraits,\n        toField,\n        fromField,\n        userEmail,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        isHandwrittenMessage,\n        isFrontBackOnly,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        photoReferences: fileHandling.photoReferences,\n        relationshipField,\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        subscribeToJob: webSocket.subscribeToJob,\n        unsubscribeFromAllJobs: webSocket.unsubscribeFromAllJobs,\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking\n    };\n    const draftGeneration = (0,_cardStudio_useDraftGeneration__WEBPACK_IMPORTED_MODULE_6__.useDraftGeneration)(draftGenerationProps);\n    // Card generation props\n    const cardGenerationProps = {\n        selectedType,\n        customCardType,\n        selectedTone,\n        selectedArtisticStyle,\n        customStyleDescription,\n        selectedImageModel,\n        selectedPaperSize,\n        prompt,\n        personalTraits,\n        toField,\n        fromField,\n        userEmail,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        isHandwrittenMessage,\n        isFrontBackOnly,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        photoReferences: fileHandling.photoReferences,\n        relationshipField,\n        numberOfCards,\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        removeJobFromStorage: jobManagement.removeJobFromStorage,\n        subscribeToJob: webSocket.subscribeToJob,\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking,\n        setCurrentJobId: jobManagement.setCurrentJobId,\n        setIsDraftMode: draftGeneration.setIsDraftMode,\n        setDraftCards: draftGeneration.setDraftCards,\n        setSelectedDraftIndex: draftGeneration.setSelectedDraftIndex,\n        setIsGeneratingFinalCard: draftGeneration.setIsGeneratingFinalCard,\n        setPreviewingDraftIndex: draftGeneration.setPreviewingDraftIndex,\n        setDraftCompletionShown: draftGeneration.setDraftCompletionShown,\n        setDraftCompletionCount: draftGeneration.setDraftCompletionCount\n    };\n    const cardGeneration = (0,_cardStudio_useCardGeneration__WEBPACK_IMPORTED_MODULE_7__.useCardGeneration)(cardGenerationProps);\n    // Handle job updates from WebSocket\n    const handleJobUpdate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((data)=>{\n        const { job_id, status, progress, cardData, error, completedAt } = data;\n        if (!job_id) return;\n        // Skip updates if we're still restoring jobs from localStorage\n        if (isRestoringJobs) {\n            console.log(\"⏳ Skipping job update during restoration:\", job_id);\n            return;\n        }\n        // Check if this is a draft job\n        const isDraftJob = job_id.startsWith(\"draft-\");\n        const draftIndex = isDraftJob ? parseInt(job_id.split(\"-\")[1]) : -1;\n        // Filter out updates from wrong job type\n        // If we're in draft mode, only process draft jobs\n        // If we're in final mode, only process non-draft jobs\n        const isInDraftMode = draftGeneration.isDraftMode;\n        if (isInDraftMode && !isDraftJob) {\n            console.log(\"\\uD83D\\uDEAB Ignoring non-draft job update in draft mode:\", job_id);\n            return;\n        }\n        if (!isInDraftMode && isDraftJob) {\n            console.log(\"\\uD83D\\uDEAB Ignoring draft job update in final mode:\", job_id);\n            return;\n        }\n        console.log(\"\\uD83D\\uDD04 Processing job update:\", {\n            job_id,\n            status,\n            isDraftJob,\n            draftIndex,\n            progress\n        });\n        // Handle status transitions\n        if (status === \"processing\" && !cardGeneration.isGenerating && !draftGeneration.isGenerating) {\n            console.log(\"\\uD83D\\uDD04 Job is processing, setting generation state\");\n            if (isDraftJob) {\n                draftGeneration.setIsGenerating(true);\n                draftGeneration.setIsDraftMode(true);\n                jobManagement.startElapsedTimeTracking(\"draft\");\n            } else {\n                cardGeneration.setIsGenerating(true);\n                jobManagement.startElapsedTimeTracking(\"final\");\n            }\n        }\n        // Update progress if provided\n        if (progress) {\n            // IMPORTANT: Don't show \"Generation complete!\" until we've actually processed the card\n            // This prevents the UI from showing completion before the card is ready\n            if (progress.includes(\"Generation complete!\") && status === \"completed\" && !isDraftJob) {\n                console.log('⏸️ Holding \"Generation complete!\" message until card is processed');\n            // Don't update the progress message yet - it will be set in handleFinalCardCompletion\n            } else {\n                cardGeneration.setGenerationProgress(progress);\n                draftGeneration.setGenerationProgress(progress);\n                console.log(\"\\uD83D\\uDCCA Progress message: \".concat(progress));\n            }\n        }\n        if (status === \"completed\" && cardData) {\n            console.log(\"\\uD83C\\uDF89 Job completed! Card data:\", cardData, \"isDraftJob:\", isDraftJob);\n            // If this is the first update for a recovery job, ensure generation state is set properly\n            if (isDraftJob && !draftGeneration.isGenerating && draftGeneration.draftCards.filter(Boolean).length === 0) {\n                console.log(\"\\uD83D\\uDCE5 Recovered completed draft job - not setting as generating\");\n            // Don't set isGenerating for already completed jobs during recovery\n            }\n            if (isDraftJob && draftIndex >= 0) {\n                var _cardData_generatedPrompts, _cardData_generatedPrompts1, _cardData_generatedPrompts2, _cardData_generatedPrompts3;\n                // Handle draft card completion\n                console.log(\"\\uD83C\\uDFA8 Draft variation \".concat(draftIndex + 1, \" completed!\"));\n                // Get style info for smart style mode\n                let styleInfo = undefined;\n                if (selectedArtisticStyle === \"ai-smart-style\") {\n                    const predefinedStyles = [\n                        \"watercolor\",\n                        \"botanical\",\n                        \"comic-book\",\n                        \"dreamy-fantasy\",\n                        \"minimalist\"\n                    ];\n                    const styleLabels = [\n                        \"\\uD83C\\uDFA8 Watercolor\",\n                        \"\\uD83C\\uDF3F Botanical\",\n                        \"\\uD83D\\uDCA5 Comic Book\",\n                        \"\\uD83C\\uDF38 Dreamy Fantasy\",\n                        \"✨ Minimalist\"\n                    ];\n                    if (draftIndex >= 0 && draftIndex < predefinedStyles.length) {\n                        styleInfo = {\n                            styleName: predefinedStyles[draftIndex],\n                            styleLabel: styleLabels[draftIndex]\n                        };\n                    }\n                }\n                const draftCard = {\n                    id: \"draft-\".concat(draftIndex + 1, \"-\").concat(Date.now()),\n                    prompt: cardData.prompt || \"Draft Variation \".concat(draftIndex + 1),\n                    frontCover: cardData.frontCover || \"\",\n                    backCover: cardData.backCover || \"\",\n                    leftPage: cardData.leftInterior || cardData.leftPage || \"\",\n                    rightPage: cardData.rightInterior || cardData.rightPage || \"\",\n                    createdAt: new Date(),\n                    generatedPrompts: cardData.generatedPrompts || {\n                        frontCover: ((_cardData_generatedPrompts = cardData.generatedPrompts) === null || _cardData_generatedPrompts === void 0 ? void 0 : _cardData_generatedPrompts.frontCover) || \"\",\n                        backCover: ((_cardData_generatedPrompts1 = cardData.generatedPrompts) === null || _cardData_generatedPrompts1 === void 0 ? void 0 : _cardData_generatedPrompts1.backCover) || \"\",\n                        leftInterior: ((_cardData_generatedPrompts2 = cardData.generatedPrompts) === null || _cardData_generatedPrompts2 === void 0 ? void 0 : _cardData_generatedPrompts2.leftInterior) || \"\",\n                        rightInterior: ((_cardData_generatedPrompts3 = cardData.generatedPrompts) === null || _cardData_generatedPrompts3 === void 0 ? void 0 : _cardData_generatedPrompts3.rightInterior) || \"\"\n                    },\n                    styleInfo: styleInfo\n                };\n                // Simplified draft tracking - use fixed array positions\n                draftGeneration.setDraftCards((prev)=>{\n                    const updated = [\n                        ...prev\n                    ];\n                    // Ensure array has 5 slots\n                    while(updated.length < 5){\n                        updated.push(null);\n                    }\n                    // Place draft at its correct index\n                    updated[draftIndex] = draftCard;\n                    console.log(\"✅ Draft \".concat(draftIndex + 1, \" completed and stored at index \").concat(draftIndex));\n                    // No longer save individual drafts to localStorage\n                    return updated;\n                });\n                // Simplified completion tracking - count the updated array including the new draft\n                const updatedDrafts = [\n                    ...draftGeneration.draftCards\n                ];\n                updatedDrafts[draftIndex] = draftCard;\n                const completedCount = updatedDrafts.filter(Boolean).length;\n                console.log(\"\\uD83D\\uDCCA Draft progress: \".concat(completedCount, \"/5 variations complete\"));\n                // Update progress\n                const progressMsg = completedCount === 5 ? \"All 5 variations ready! Choose your favorite below.\" : \"\".concat(completedCount, \"/5 variations complete...\").concat(completedCount >= 2 ? \" You can select one now!\" : \"\");\n                draftGeneration.setGenerationProgress(progressMsg);\n                // Override time-based progress with real progress when drafts complete\n                // Don't override time-based progress\n                console.log(\"\\uD83C\\uDFA8 Draft \".concat(completedCount, \"/5 completed\"));\n                // Handle milestones\n                if (completedCount === 1) {\n                    (0,_cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.scrollToCardPreview)();\n                }\n                if (completedCount === 5 && !draftGeneration.isGeneratingFinalCard) {\n                    draftGeneration.setIsGenerating(false);\n                    jobManagement.stopElapsedTimeTracking();\n                    // Clear recovery data for completed draft jobs\n                    _lib_storageManager__WEBPACK_IMPORTED_MODULE_10__.storage.clearRecovery();\n                    console.log(\"\\uD83E\\uDDF9 Cleared recovery data for completed draft job\");\n                    sonner__WEBPACK_IMPORTED_MODULE_1__.toast.success(\"\\uD83C\\uDFA8 All 5 front cover variations ready! Choose your favorite below.\");\n                }\n                // Keep draft jobs in storage for later retrieval\n                // Only unsubscribe from WebSocket\n                webSocket.unsubscribeFromJob(job_id);\n                console.log(\"✅ Keeping draft job \".concat(job_id, \" in storage for future access\"));\n            } else {\n                // Handle final card completion\n                console.log(\"\\uD83D\\uDD0D Final card completion detected. Card data structure:\", {\n                    hasCardData: !!cardData,\n                    cardDataKeys: Object.keys(cardData || {}),\n                    frontCover: (cardData === null || cardData === void 0 ? void 0 : cardData.frontCover) ? \"Present\" : \"Missing\",\n                    backCover: (cardData === null || cardData === void 0 ? void 0 : cardData.backCover) ? \"Present\" : \"Missing\",\n                    leftInterior: (cardData === null || cardData === void 0 ? void 0 : cardData.leftInterior) ? \"Present\" : \"Missing\",\n                    rightInterior: (cardData === null || cardData === void 0 ? void 0 : cardData.rightInterior) ? \"Present\" : \"Missing\",\n                    leftPage: (cardData === null || cardData === void 0 ? void 0 : cardData.leftPage) ? \"Present\" : \"Missing\",\n                    rightPage: (cardData === null || cardData === void 0 ? void 0 : cardData.rightPage) ? \"Present\" : \"Missing\"\n                });\n                console.log(\"\\uD83D\\uDCDD Full card data:\", JSON.stringify(cardData, null, 2));\n                // Map backend field names to frontend field names\n                const mappedCardData = {\n                    ...cardData,\n                    leftInterior: cardData.leftInterior || cardData.leftPage,\n                    rightInterior: cardData.rightInterior || cardData.rightPage,\n                    // Keep original fields for backward compatibility\n                    leftPage: cardData.leftPage || cardData.leftInterior,\n                    rightPage: cardData.rightPage || cardData.rightInterior\n                };\n                console.log(\"\\uD83D\\uDD04 Mapped card data for frontend compatibility:\", {\n                    frontCover: mappedCardData.frontCover ? \"Present\" : \"Missing\",\n                    backCover: mappedCardData.backCover ? \"Present\" : \"Missing\",\n                    leftInterior: mappedCardData.leftInterior ? \"Present\" : \"Missing\",\n                    rightInterior: mappedCardData.rightInterior ? \"Present\" : \"Missing\"\n                });\n                // Call the completion handler\n                console.log(\"\\uD83D\\uDE80 Calling handleFinalCardCompletion...\");\n                cardGeneration.handleFinalCardCompletion(mappedCardData);\n                // Card is automatically added to recent cards by markJobComplete\n                // Only clear recovery if we're not in the middle of restoring\n                if (!isRestoringJobs) {\n                    jobManagement.removeJobFromStorage(job_id);\n                }\n                jobManagement.setCurrentJobId(null);\n                webSocket.unsubscribeFromJob(job_id);\n            }\n        } else if (status === \"failed\") {\n            console.error(\"❌ Job failed:\", error);\n            if (isDraftJob && draftIndex >= 0) {\n                sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Draft variation \".concat(draftIndex + 1, \" failed. Continuing with others...\"));\n            } else {\n                sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"❌ Card generation failed. Please try again.\");\n                cardGeneration.setIsGenerating(false);\n                draftGeneration.setIsGeneratingFinalCard(false);\n                jobManagement.stopElapsedTimeTracking();\n                cardGeneration.setGenerationProgress(\"\");\n                // Don't reset progress - let time-based progress continue\n                // jobManagement.setProgressPercentage(0);\n                jobManagement.setCurrentJobId(null);\n                webSocket.unsubscribeFromJob(job_id);\n            }\n            // Only clear recovery if we're not in the middle of restoring\n            if (!isRestoringJobs) {\n                jobManagement.removeJobFromStorage(job_id);\n            }\n        } else if (status === \"not_found\") {\n            console.warn(\"⚠️ Job not found on server, cleaning up stale reference:\", job_id);\n            // Clean up stale job reference\n            if (webSocket.currentJobRef.current === job_id) {\n                webSocket.currentJobRef.current = null;\n            }\n            // Reset UI state if this was the current job\n            if (jobManagement.currentJobId === job_id) {\n                jobManagement.setCurrentJobId(null);\n                cardGeneration.setIsGenerating(false);\n                draftGeneration.setIsGeneratingFinalCard(false);\n                cardGeneration.setGenerationProgress(\"\");\n                // Don't reset progress - let time-based progress continue\n                // jobManagement.setProgressPercentage(0);\n                jobManagement.stopElapsedTimeTracking();\n            }\n            // Clean up storage\n            // Only clear recovery if we're not in the middle of restoring\n            if (!isRestoringJobs) {\n                jobManagement.removeJobFromStorage(job_id);\n            }\n            webSocket.unsubscribeFromJob(job_id);\n        }\n    }, [\n        selectedArtisticStyle,\n        draftGeneration,\n        cardGeneration,\n        jobManagement,\n        webSocket,\n        isRestoringJobs\n    ]);\n    // Set up WebSocket job update handler\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        webSocket.setJobUpdateHandler(handleJobUpdate);\n    }, [\n        webSocket,\n        handleJobUpdate\n    ]);\n    // Track if we've already logged the stale job message\n    const staleJobLoggedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    // Auto-reconnect WebSocket if disconnected during active generation\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!webSocket.isSocketConnected && (cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) && webSocket.currentJobRef.current) {\n            // Check if the generation has been running for more than 5 minutes\n            if (jobManagement.generationStartTime) {\n                const jobAge = Date.now() - jobManagement.generationStartTime;\n                if (jobAge > 5 * 60 * 1000) {\n                    if (!staleJobLoggedRef.current) {\n                        console.log(\"⏰ Job is older than 5 minutes, stopping reconnection attempts\");\n                        staleJobLoggedRef.current = true;\n                        // Clean up stale job\n                        const jobId = webSocket.currentJobRef.current;\n                        if (jobId) {\n                            console.log(\"\\uD83E\\uDDF9 Cleaning up stale job:\", jobId);\n                            // Remove from localStorage (only if not a draft job)\n                            if (!jobId.startsWith(\"draft-\")) {\n                                jobManagement.removeJobFromStorage(jobId);\n                            }\n                            // Reset generation states\n                            cardGeneration.setIsGenerating(false);\n                            draftGeneration.setIsGeneratingFinalCard(false);\n                            draftGeneration.setIsDraftMode(false);\n                            draftGeneration.setDraftCards([]);\n                            draftGeneration.setDraftCompletionCount(0);\n                            draftGeneration.setDraftCompletionShown(false);\n                            jobManagement.setCurrentJobId(null);\n                            jobManagement.setGenerationProgress(\"\");\n                            // Don't reset progress - let time-based progress continue\n                            // jobManagement.setProgressPercentage(0);\n                            jobManagement.stopElapsedTimeTracking();\n                            // Unsubscribe from job\n                            webSocket.unsubscribeFromJob(jobId);\n                            // Show error toast\n                            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Card generation timed out. Please try again.\");\n                        }\n                    }\n                    return;\n                }\n            }\n            console.log(\"\\uD83D\\uDD04 WebSocket disconnected during generation, attempting reconnect...\");\n            const reconnectTimer = setTimeout(()=>{\n                webSocket.connectWebSocket();\n                // Re-subscribe to current job after reconnection\n                const jobId = webSocket.currentJobRef.current;\n                if (jobId) {\n                    setTimeout(()=>{\n                        console.log(\"\\uD83D\\uDCE1 Re-subscribing to job after reconnect:\", jobId);\n                        webSocket.subscribeToJob(jobId);\n                    }, 1000);\n                }\n            }, 2000);\n            return ()=>clearTimeout(reconnectTimer);\n        }\n    }, [\n        webSocket,\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard,\n        jobManagement.generationStartTime\n    ]);\n    // Reset stale job flag when generation starts\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) {\n            staleJobLoggedRef.current = false;\n        }\n    }, [\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard\n    ]);\n    // Monitor for stale job updates\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if ((cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) && webSocket.currentJobRef.current) {\n            const checkInterval = setInterval(async ()=>{\n                const timeSinceLastUpdate = Date.now() - webSocket.lastJobUpdateRef.current;\n                const jobId = webSocket.currentJobRef.current;\n                // Very aggressive checking when at 95%+ progress\n                if (jobManagement.progressPercentage >= 95 && timeSinceLastUpdate > 5000) {\n                    console.warn(\"⚠️ No updates for \".concat(Math.round(timeSinceLastUpdate / 1000), \"s at \").concat(jobManagement.progressPercentage, \"% progress - checking job status...\"));\n                    if (jobId) {\n                        try {\n                            const response = await fetch(\"/api/job-status/\".concat(jobId));\n                            if (response.ok) {\n                                const jobStatus = await response.json();\n                                console.log(\"\\uD83D\\uDCCA Direct job status check:\", jobStatus);\n                                if (jobStatus.status === \"completed\" && jobStatus.cardData) {\n                                    console.log(\"✅ Job is actually completed! Processing result...\");\n                                    handleJobUpdate({\n                                        job_id: jobId,\n                                        status: \"completed\",\n                                        progress: \"Card generation complete!\",\n                                        cardData: jobStatus.cardData\n                                    });\n                                    return; // Exit early on completion\n                                }\n                            }\n                        } catch (error) {\n                            console.error(\"Failed to check job status:\", error);\n                        }\n                    }\n                } else if (jobManagement.progressPercentage >= 90 && timeSinceLastUpdate > 10000) {\n                    console.warn(\"⚠️ No updates for \".concat(Math.round(timeSinceLastUpdate / 1000), \"s at \").concat(jobManagement.progressPercentage, \"% progress\"));\n                    if (jobId) {\n                        try {\n                            const response = await fetch(\"/api/job-status/\".concat(jobId));\n                            if (response.ok) {\n                                const jobStatus = await response.json();\n                                console.log(\"\\uD83D\\uDCCA Direct job status check:\", jobStatus);\n                                if (jobStatus.status === \"completed\" && jobStatus.cardData) {\n                                    console.log(\"✅ Job is actually completed! Processing result...\");\n                                    handleJobUpdate({\n                                        job_id: jobId,\n                                        status: \"completed\",\n                                        progress: \"Card generation complete!\",\n                                        cardData: jobStatus.cardData\n                                    });\n                                    return; // Exit early on completion\n                                }\n                            }\n                        } catch (error) {\n                            console.error(\"Failed to check job status:\", error);\n                        }\n                    }\n                }\n                // Standard stale update check\n                if (timeSinceLastUpdate > 30000) {\n                    console.warn(\"⚠️ No job updates for 30 seconds, checking connection...\");\n                    if (!webSocket.isSocketConnected) {\n                        console.log(\"\\uD83D\\uDD04 WebSocket disconnected, reconnecting...\");\n                        webSocket.connectWebSocket();\n                    } else if (jobId) {\n                        console.log(\"\\uD83D\\uDCE1 Re-subscribing to job due to stale updates:\", jobId);\n                        webSocket.subscribeToJob(jobId);\n                    }\n                    // Reset the timer\n                    webSocket.lastJobUpdateRef.current = Date.now();\n                }\n            }, 3000); // Check every 3 seconds for faster detection at high progress\n            return ()=>clearInterval(checkInterval);\n        }\n    }, [\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard,\n        webSocket,\n        jobManagement.progressPercentage,\n        handleJobUpdate\n    ]);\n    // Simplified job restoration using new storage manager\n    const checkPendingJobs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        var _recovery_jobId;\n        console.log(\"\\uD83D\\uDD04 Checking for recovery data...\");\n        setIsRestoringJobs(true);\n        // Check for active recovery job\n        const recovery = _lib_storageManager__WEBPACK_IMPORTED_MODULE_10__.storage.getRecovery();\n        if (!recovery) {\n            console.log(\"✅ No active job to recover\");\n            setIsRestoringJobs(false);\n            return;\n        }\n        console.log(\"\\uD83D\\uDD04 Found recovery data:\", recovery);\n        // In our simplified system, we only track one active job at a time\n        // Recovery is meant for browser crashes during generation\n        const isRecoveryDraft = (_recovery_jobId = recovery.jobId) === null || _recovery_jobId === void 0 ? void 0 : _recovery_jobId.startsWith(\"draft-\");\n        if (isRecoveryDraft) {\n            console.log(\"\\uD83C\\uDFA8 Recovering from draft generation\");\n            // For draft recovery, we can't restore the exact state\n            // User will need to restart the draft generation\n            setIsRestoringJobs(false);\n            return;\n        }\n        // For final card recovery, we can try to restore the job\n        console.log(\"\\uD83C\\uDFAF Recovering from final card generation\");\n        // Restore generation state\n        jobManagement.setCurrentJobId(recovery.jobId);\n        cardGeneration.setIsGenerating(true);\n        cardGeneration.setGenerationProgress(\"\\uD83D\\uDD04 Resuming generation...\");\n        jobManagement.startElapsedTimeTracking(\"final\");\n        // Subscribe to the job to get updates\n        webSocket.subscribeToJob(recovery.jobId);\n        setIsRestoringJobs(false);\n    }, [\n        webSocket,\n        _lib_storageManager__WEBPACK_IMPORTED_MODULE_10__.storage\n    ]);\n    // Load recovery data on component mount\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        console.log(\"\\uD83D\\uDE80 useCardStudio mounted, checking for recovery...\");\n        // Check for active recovery job\n        const recovery = _lib_storageManager__WEBPACK_IMPORTED_MODULE_10__.storage.getRecovery();\n        console.log(\"\\uD83D\\uDCE6 Recovery data:\", recovery);\n        if (recovery) {\n            console.log(\"\\uD83D\\uDD04 Found active job to recover:\", recovery.jobId);\n            // For draft jobs, check if we already have completed drafts\n            const isDraft = recovery.jobId.startsWith(\"draft-\");\n            if (isDraft) {\n                // Check if we already have completed draft cards\n                const hasCompletedDrafts = draftGeneration.draftCards.filter((card)=>card !== null).length > 0;\n                if (hasCompletedDrafts) {\n                    console.log(\"✅ Draft job already completed, not setting as generating\");\n                    // Just restore the job ID for reference, but don't set as generating\n                    jobManagement.setCurrentJobId(recovery.jobId);\n                    draftGeneration.setIsDraftMode(true);\n                } else {\n                    console.log(\"\\uD83C\\uDFA8 Resuming incomplete draft generation\");\n                    // Subscribe to the job to check its status\n                    jobManagement.setCurrentJobId(recovery.jobId);\n                    webSocket.subscribeToJob(recovery.jobId);\n                    draftGeneration.setIsDraftMode(true);\n                    // Don't set as generating yet - wait for WebSocket to tell us the actual status\n                    // This prevents navigation to Step 5 for already completed jobs\n                    console.log(\"⏳ Waiting for job status update before setting generation state...\");\n                }\n            } else {\n                // For final card recovery, check if already completed\n                if (cardGeneration.generatedCard && cardGeneration.isCardCompleted) {\n                    console.log(\"✅ Final card already completed, not setting as generating\");\n                    jobManagement.setCurrentJobId(recovery.jobId);\n                } else {\n                    console.log(\"\\uD83C\\uDFAF Resuming incomplete final card generation\");\n                    jobManagement.setCurrentJobId(recovery.jobId);\n                    webSocket.subscribeToJob(recovery.jobId);\n                    cardGeneration.setIsGenerating(true);\n                    cardGeneration.setGenerationProgress(\"\\uD83C\\uDFA8 Resuming card generation...\");\n                    jobManagement.startElapsedTimeTracking(\"final\");\n                    // If this is a final card generation from a draft, set the appropriate state\n                    if (recovery.formData && recovery.formData.selectedDraftIndex !== undefined) {\n                        draftGeneration.setIsGeneratingFinalCard(true);\n                        draftGeneration.setSelectedDraftIndex(recovery.formData.selectedDraftIndex);\n                    }\n                }\n            }\n        }\n        // Always mark restoration as complete\n        setIsRestoringJobs(false);\n        // Mark restoration as complete after a small delay\n        setTimeout(()=>{\n            setIsRestoringJobs(false);\n        }, 100);\n    }, []);\n    // Return all the state and functions that the UI needs\n    return {\n        // Core state\n        prompt,\n        setPrompt,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        setFinalCardMessage: messageGeneration.setFinalCardMessage,\n        toField,\n        setToField,\n        fromField,\n        setFromField,\n        relationshipField,\n        setRelationshipField,\n        personalTraits,\n        setPersonalTraits,\n        selectedType,\n        setSelectedType,\n        customCardType,\n        setCustomCardType,\n        selectedTone,\n        setSelectedTone,\n        isGenerating: cardGeneration.isGenerating || draftGeneration.isGenerating,\n        setIsGenerating: cardGeneration.setIsGenerating,\n        isGeneratingMessage: messageGeneration.isGeneratingMessage,\n        setIsGeneratingMessage: messageGeneration.setIsGeneratingMessage,\n        generatedCard: cardGeneration.generatedCard,\n        setGeneratedCard: cardGeneration.setGeneratedCard,\n        numberOfCards,\n        setNumberOfCards,\n        generatedCards: cardGeneration.generatedCards,\n        setGeneratedCards: cardGeneration.setGeneratedCards,\n        selectedCardIndex: cardGeneration.selectedCardIndex,\n        setSelectedCardIndex: cardGeneration.setSelectedCardIndex,\n        // Advanced options\n        showAdvanced,\n        setShowAdvanced,\n        selectedArtisticStyle,\n        setSelectedArtisticStyle,\n        customStyleDescription,\n        setCustomStyleDescription,\n        selectedImageModel,\n        setSelectedImageModel,\n        selectedDraftModel,\n        setSelectedDraftModel,\n        // Draft mode\n        isDraftMode: draftGeneration.isDraftMode,\n        setIsDraftMode: draftGeneration.setIsDraftMode,\n        draftCards: draftGeneration.draftCards,\n        setDraftCards: draftGeneration.setDraftCards,\n        selectedDraftIndex: draftGeneration.selectedDraftIndex,\n        setSelectedDraftIndex: draftGeneration.setSelectedDraftIndex,\n        isGeneratingFinalCard: draftGeneration.isGeneratingFinalCard,\n        setIsGeneratingFinalCard: draftGeneration.setIsGeneratingFinalCard,\n        previewingDraftIndex: draftGeneration.previewingDraftIndex,\n        setPreviewingDraftIndex: draftGeneration.setPreviewingDraftIndex,\n        draftCompletionShown: draftGeneration.draftCompletionShown,\n        setDraftCompletionShown: draftGeneration.setDraftCompletionShown,\n        draftCompletionCount: draftGeneration.draftCompletionCount,\n        setDraftCompletionCount: draftGeneration.setDraftCompletionCount,\n        // Progress tracking\n        generationProgress: draftGeneration.isGenerating ? draftGeneration.generationProgress : cardGeneration.generationProgress,\n        setGenerationProgress: cardGeneration.setGenerationProgress,\n        progressPercentage: jobManagement.progressPercentage,\n        setProgressPercentage: jobManagement.setProgressPercentage,\n        isCardCompleted: cardGeneration.isCardCompleted,\n        setIsCardCompleted: cardGeneration.setIsCardCompleted,\n        // Upload and personalization\n        referenceImages: fileHandling.referenceImages,\n        setReferenceImages: fileHandling.setReferenceImages,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        setReferenceImageUrls: fileHandling.setReferenceImageUrls,\n        isUploading: fileHandling.isUploading,\n        setIsUploading: fileHandling.setIsUploading,\n        // Email and settings\n        userEmail,\n        setUserEmail,\n        isHandwrittenMessage,\n        setIsHandwrittenMessage,\n        isFrontBackOnly,\n        setIsFrontBackOnly,\n        selectedPaperSize,\n        setSelectedPaperSize,\n        // UI state\n        isTextareaExpanded,\n        setIsTextareaExpanded,\n        isMessageExpanded,\n        setIsMessageExpanded,\n        showSettings,\n        setShowSettings,\n        showTemplateGallery,\n        setShowTemplateGallery,\n        showPrintConfirmation,\n        setShowPrintConfirmation,\n        // Generation time\n        generationDuration: cardGeneration.generationDuration,\n        setGenerationDuration: cardGeneration.setGenerationDuration,\n        currentElapsedTime: jobManagement.currentElapsedTime,\n        // Helper functions\n        formatGenerationTime: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.formatGenerationTime,\n        formatCountdown: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.formatCountdown,\n        sendThankYouEmail: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.sendThankYouEmail,\n        chatWithAI: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.chatWithAI,\n        scrollToCardPreview: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.scrollToCardPreview,\n        // Time tracking functions\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking,\n        // File handling functions\n        handleFileUpload: fileHandling.handleFileUpload,\n        handleRemoveReferenceImage: fileHandling.handleRemoveReferenceImage,\n        // Simplified photo references\n        photoReferences: fileHandling.photoReferences,\n        setPhotoReferences: fileHandling.setPhotoReferences,\n        updatePhotoDescription: fileHandling.updatePhotoDescription,\n        // Message functions\n        handleGetMessageHelp: messageGeneration.handleGetMessageHelp,\n        addMessageToHistory: messageGeneration.addMessageToHistory,\n        undoMessage: messageGeneration.undoMessage,\n        redoMessage: messageGeneration.redoMessage,\n        // Job management\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        removeJobFromStorage: jobManagement.removeJobFromStorage,\n        checkPendingJobs,\n        isRestoringJobs,\n        // Main generation functions\n        handleGenerateDraftCards: draftGeneration.handleGenerateDraftCards,\n        handleGenerateFinalFromDraft: draftGeneration.handleGenerateFinalFromDraft,\n        // Additional state for message refinement\n        messageHistory: messageGeneration.messageHistory,\n        setMessageHistory: messageGeneration.setMessageHistory,\n        currentMessageIndex: messageGeneration.currentMessageIndex,\n        setCurrentMessageIndex: messageGeneration.setCurrentMessageIndex,\n        refinementPrompt: messageGeneration.refinementPrompt,\n        setRefinementPrompt: messageGeneration.setRefinementPrompt,\n        isRefiningMessage: messageGeneration.isRefiningMessage,\n        setIsRefiningMessage: messageGeneration.setIsRefiningMessage,\n        showRefinementBox: messageGeneration.showRefinementBox,\n        setShowRefinementBox: messageGeneration.setShowRefinementBox,\n        // Template state\n        showTemplateCustomization,\n        setShowTemplateCustomization,\n        selectedTemplate,\n        setSelectedTemplate,\n        templateCustomizations,\n        setTemplateCustomizations,\n        templateSearchQuery,\n        setTemplateSearchQuery,\n        isSearchingTemplates,\n        setIsSearchingTemplates,\n        aiFilteredCards,\n        setAiFilteredCards,\n        searchMode,\n        setSearchMode,\n        textFilteredCards,\n        setTextFilteredCards,\n        showPrompts,\n        setShowPrompts,\n        // Print state\n        printOption,\n        setPrintOption,\n        // Additional draft mode state\n        handwritingSample: fileHandling.handwritingSample,\n        setHandwritingSample: fileHandling.setHandwritingSample,\n        handwritingSampleUrl: fileHandling.handwritingSampleUrl,\n        setHandwritingSampleUrl: fileHandling.setHandwritingSampleUrl,\n        // Job tracking\n        currentJobId: jobManagement.currentJobId,\n        setCurrentJobId: jobManagement.setCurrentJobId,\n        countdown,\n        setCountdown,\n        countdownInterval,\n        setCountdownInterval,\n        // Section loading states\n        sectionLoadingStates,\n        setSectionLoadingStates,\n        // Fast preview mode\n        fastPreviewMode,\n        setFastPreviewMode,\n        // Additional tracking\n        currentCardId: cardGeneration.currentCardId,\n        setCurrentCardId: cardGeneration.setCurrentCardId,\n        isInitialLoadComplete,\n        setIsInitialLoadComplete,\n        // Elapsed time tracking\n        generationStartTime: jobManagement.generationStartTime,\n        // Constants for UI\n        cardTones: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.cardTones,\n        artisticStyles: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.artisticStyles,\n        paperSizes: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.paperSizes,\n        // WebSocket functions and state\n        isSocketConnected: webSocket.isSocketConnected,\n        connectWebSocket: webSocket.connectWebSocket,\n        disconnectWebSocket: webSocket.disconnectWebSocket,\n        subscribeToJob: webSocket.subscribeToJob,\n        unsubscribeFromJob: webSocket.unsubscribeFromJob,\n        unsubscribeFromAllJobs: webSocket.unsubscribeFromAllJobs,\n        handleJobUpdate,\n        handleFinalCardCompletion: cardGeneration.handleFinalCardCompletion\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZUNhcmRTdHVkaW9SZWZhY3RvcmVkLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7bUVBRWlFO0FBQ2xDO0FBRy9CLHVCQUF1QjtBQUNrQztBQUNrQjtBQUNGO0FBQ1Y7QUFDTTtBQUNGO0FBRW5FLDZCQUE2QjtBQVFHO0FBQ3dEO0FBQ3pDO0FBRXhDLFNBQVNvQjtJQUNkLGtCQUFrQjtJQUNsQixNQUFNLENBQUNDLFFBQVFDLFVBQVUsR0FBR3RCLCtDQUFRQSxDQUFDO0lBQ3JDLE1BQU0sQ0FBQ3VCLFNBQVNDLFdBQVcsR0FBR3hCLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ3lCLFdBQVdDLGFBQWEsR0FBRzFCLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQzJCLG1CQUFtQkMscUJBQXFCLEdBQUc1QiwrQ0FBUUEsQ0FBQztJQUMzRCxNQUFNLENBQUM2QixnQkFBZ0JDLGtCQUFrQixHQUFHOUIsK0NBQVFBLENBQUM7SUFDckQsTUFBTSxDQUFDK0IsY0FBY0MsZ0JBQWdCLEdBQUdoQywrQ0FBUUEsQ0FBUztJQUN6RCxNQUFNLENBQUNpQyxnQkFBZ0JDLGtCQUFrQixHQUFHbEMsK0NBQVFBLENBQVM7SUFDN0QsTUFBTSxDQUFDbUMsY0FBY0MsZ0JBQWdCLEdBQUdwQywrQ0FBUUEsQ0FBUztJQUV6RCx5QkFBeUI7SUFDekIsTUFBTSxDQUFDcUMsY0FBY0MsZ0JBQWdCLEdBQUd0QywrQ0FBUUEsQ0FBQztJQUNqRCxNQUFNLENBQUN1Qyx1QkFBdUJDLHlCQUF5QixHQUFHeEMsK0NBQVFBLENBQVM7SUFDM0UsTUFBTSxDQUFDeUMsd0JBQXdCQywwQkFBMEIsR0FBRzFDLCtDQUFRQSxDQUFTO0lBQzdFLE1BQU0sQ0FBQzJDLG9CQUFvQkMsc0JBQXNCLEdBQUc1QywrQ0FBUUEsQ0FBUztJQUNyRSxNQUFNLENBQUM2QyxvQkFBb0JDLHNCQUFzQixHQUFHOUMsK0NBQVFBLENBQVM7SUFDckUsTUFBTSxD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dkRDLHlCQUF5QmxLLGFBQWFrSyx1QkFBdUI7UUFFN0QsZUFBZTtRQUNmaEYsY0FBY25GLGNBQWNtRixZQUFZO1FBQ3hDckUsaUJBQWlCZCxjQUFjYyxlQUFlO1FBQzlDbkI7UUFDQUM7UUFDQUM7UUFDQUM7UUFFQSx5QkFBeUI7UUFDekJUO1FBQ0FDO1FBRUEsb0JBQW9CO1FBQ3BCckQ7UUFDQUM7UUFFQSxzQkFBc0I7UUFDdEJrTyxlQUFlOUksZUFBZThJLGFBQWE7UUFDM0NDLGtCQUFrQi9JLGVBQWUrSSxnQkFBZ0I7UUFDakR4TTtRQUNBQztRQUVBLHdCQUF3QjtRQUN4QnlILHFCQUFxQnZGLGNBQWN1RixtQkFBbUI7UUFFdEQsbUJBQW1CO1FBQ25CMUwsU0FBU0EsOERBQUFBO1FBQ1RDLGNBQWNBLG1FQUFBQTtRQUNkQyxVQUFVQSwrREFBQUE7UUFFVixnQ0FBZ0M7UUFDaEN1TCxtQkFBbUJ2RixVQUFVdUYsaUJBQWlCO1FBQzlDTSxrQkFBa0I3RixVQUFVNkYsZ0JBQWdCO1FBQzVDMEUscUJBQXFCdkssVUFBVXVLLG1CQUFtQjtRQUNsRC9KLGdCQUFnQlIsVUFBVVEsY0FBYztRQUN4Q2dFLG9CQUFvQnhFLFVBQVV3RSxrQkFBa0I7UUFDaEQvRCx3QkFBd0JULFVBQVVTLHNCQUFzQjtRQUN4RGU7UUFDQXdELDJCQUEyQnpELGVBQWV5RCx5QkFBeUI7SUFDckU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ob29rcy91c2VDYXJkU3R1ZGlvUmVmYWN0b3JlZC50cz85Y2M5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gXCJzb25uZXJcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG4vLyBJbXBvcnQgbW9kdWxhciBob29rc1xuaW1wb3J0IHsgdXNlV2ViU29ja2V0IH0gZnJvbSAnLi9jYXJkU3R1ZGlvL3VzZVdlYlNvY2tldCc7XG5pbXBvcnQgeyB1c2VKb2JNYW5hZ2VtZW50IH0gZnJvbSAnLi9jYXJkU3R1ZGlvL3VzZUpvYk1hbmFnZW1lbnRTaW1wbGlmaWVkJztcbmltcG9ydCB7IHVzZU1lc3NhZ2VHZW5lcmF0aW9uIH0gZnJvbSAnLi9jYXJkU3R1ZGlvL3VzZU1lc3NhZ2VHZW5lcmF0aW9uJztcbmltcG9ydCB7IHVzZUZpbGVIYW5kbGluZyB9IGZyb20gJy4vY2FyZFN0dWRpby91c2VGaWxlSGFuZGxpbmcnO1xuaW1wb3J0IHsgdXNlRHJhZnRHZW5lcmF0aW9uIH0gZnJvbSAnLi9jYXJkU3R1ZGlvL3VzZURyYWZ0R2VuZXJhdGlvbic7XG5pbXBvcnQgeyB1c2VDYXJkR2VuZXJhdGlvbiB9IGZyb20gJy4vY2FyZFN0dWRpby91c2VDYXJkR2VuZXJhdGlvbic7XG5cbi8vIEltcG9ydCBjb25zdGFudHMgYW5kIHV0aWxzXG5pbXBvcnQgeyBcbiAgY2FyZFRvbmVzLCBcbiAgYXJ0aXN0aWNTdHlsZXMsIFxuICBwYXBlclNpemVzLCBcbiAgZm9ybWF0R2VuZXJhdGlvblRpbWUsIFxuICBmb3JtYXRDb3VudGRvd24sXG4gIEdlbmVyYXRlZENhcmQgXG59IGZyb20gJy4vY2FyZFN0dWRpby9jb25zdGFudHMnO1xuaW1wb3J0IHsgc2VuZFRoYW5rWW91RW1haWwsIGNoYXRXaXRoQUksIHNjcm9sbFRvQ2FyZFByZXZpZXcgfSBmcm9tICcuL2NhcmRTdHVkaW8vdXRpbHMnO1xuaW1wb3J0IHsgc3RvcmFnZSB9IGZyb20gJ0AvbGliL3N0b3JhZ2VNYW5hZ2VyJztcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNhcmRTdHVkaW8oKSB7XG4gIC8vIENvcmUgZm9ybSBzdGF0ZVxuICBjb25zdCBbcHJvbXB0LCBzZXRQcm9tcHRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt0b0ZpZWxkLCBzZXRUb0ZpZWxkXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZnJvbUZpZWxkLCBzZXRGcm9tRmllbGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZWxhdGlvbnNoaXBGaWVsZCwgc2V0UmVsYXRpb25zaGlwRmllbGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtwZXJzb25hbFRyYWl0cywgc2V0UGVyc29uYWxUcmFpdHNdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzZWxlY3RlZFR5cGUsIHNldFNlbGVjdGVkVHlwZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiYmlydGhkYXlcIik7XG4gIGNvbnN0IFtjdXN0b21DYXJkVHlwZSwgc2V0Q3VzdG9tQ2FyZFR5cGVdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgY29uc3QgW3NlbGVjdGVkVG9uZSwgc2V0U2VsZWN0ZWRUb25lXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJmdW5ueVwiKTtcbiAgXG4gIC8vIEFkdmFuY2VkIG9wdGlvbnMgc3RhdGVcbiAgY29uc3QgW3Nob3dBZHZhbmNlZCwgc2V0U2hvd0FkdmFuY2VkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkQXJ0aXN0aWNTdHlsZSwgc2V0U2VsZWN0ZWRBcnRpc3RpY1N0eWxlXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJhaS1zbWFydC1zdHlsZVwiKTtcbiAgY29uc3QgW2N1c3RvbVN0eWxlRGVzY3JpcHRpb24sIHNldEN1c3RvbVN0eWxlRGVzY3JpcHRpb25dID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgY29uc3QgW3NlbGVjdGVkSW1hZ2VNb2RlbCwgc2V0U2VsZWN0ZWRJbWFnZU1vZGVsXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJncHQtaW1hZ2UtMVwiKTtcbiAgY29uc3QgW3NlbGVjdGVkRHJhZnRNb2RlbCwgc2V0U2VsZWN0ZWREcmFmdE1vZGVsXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJncHQtaW1hZ2UtMVwiKTtcbiAgY29uc3QgW2Zhc3RQcmV2aWV3TW9kZSwgc2V0RmFzdFByZXZpZXdNb2RlXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHRydWUpO1xuICBcbiAgLy8gRW1haWwgc3RhdGVcbiAgY29uc3QgW3VzZXJFbWFpbCwgc2V0VXNlckVtYWlsXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIFxuICAvLyBDYXJkIG9wdGlvbnNcbiAgY29uc3QgW251bWJlck9mQ2FyZHMsIHNldE51bWJlck9mQ2FyZHNdID0gdXNlU3RhdGU8bnVtYmVyPigxKTtcbiAgY29uc3QgW2lzSGFuZHdyaXR0ZW5NZXNzYWdlLCBzZXRJc0hhbmR3cml0dGVuTWVzc2FnZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0Zyb250QmFja09ubHksIHNldElzRnJvbnRCYWNrT25seV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzZWxlY3RlZFBhcGVyU2l6ZSwgc2V0U2VsZWN0ZWRQYXBlclNpemVdID0gdXNlU3RhdGU8c3RyaW5nPihcInN0YW5kYXJkXCIpO1xuICBcbiAgLy8gVUkgc3RhdGVcbiAgY29uc3QgW2lzVGV4dGFyZWFFeHBhbmRlZCwgc2V0SXNUZXh0YXJlYUV4cGFuZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzTWVzc2FnZUV4cGFuZGVkLCBzZXRJc01lc3NhZ2VFeHBhbmRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93U2V0dGluZ3MsIHNldFNob3dTZXR0aW5nc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93VGVtcGxhdGVHYWxsZXJ5LCBzZXRTaG93VGVtcGxhdGVHYWxsZXJ5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dQcmludENvbmZpcm1hdGlvbiwgc2V0U2hvd1ByaW50Q29uZmlybWF0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dUZW1wbGF0ZUN1c3RvbWl6YXRpb24sIHNldFNob3dUZW1wbGF0ZUN1c3RvbWl6YXRpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBcbiAgLy8gUmVzdG9yYXRpb24gc3RhdGVcbiAgY29uc3QgW2lzUmVzdG9yaW5nSm9icywgc2V0SXNSZXN0b3JpbmdKb2JzXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbc2VsZWN0ZWRUZW1wbGF0ZSwgc2V0U2VsZWN0ZWRUZW1wbGF0ZV0gPSB1c2VTdGF0ZTxHZW5lcmF0ZWRDYXJkIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0luaXRpYWxMb2FkQ29tcGxldGUsIHNldElzSW5pdGlhbExvYWRDb21wbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICAvLyBUZW1wbGF0ZSBzdGF0ZVxuICBjb25zdCBbdGVtcGxhdGVTZWFyY2hRdWVyeSwgc2V0VGVtcGxhdGVTZWFyY2hRdWVyeV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2lzU2VhcmNoaW5nVGVtcGxhdGVzLCBzZXRJc1NlYXJjaGluZ1RlbXBsYXRlc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthaUZpbHRlcmVkQ2FyZHMsIHNldEFpRmlsdGVyZWRDYXJkc10gPSB1c2VTdGF0ZTxhbnlbXT4oW10pO1xuICBjb25zdCBbc2VhcmNoTW9kZSwgc2V0U2VhcmNoTW9kZV0gPSB1c2VTdGF0ZTwndGV4dCcgfCAnYWknIHwgJ2h5YnJpZCc+KCd0ZXh0Jyk7XG4gIGNvbnN0IFt0ZXh0RmlsdGVyZWRDYXJkcywgc2V0VGV4dEZpbHRlcmVkQ2FyZHNdID0gdXNlU3RhdGU8YW55W10+KFtdKTtcbiAgY29uc3QgW3Nob3dQcm9tcHRzLCBzZXRTaG93UHJvbXB0c10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwcmludE9wdGlvbiwgc2V0UHJpbnRPcHRpb25dID0gdXNlU3RhdGU8J3BoeXNpY2FsJyB8ICdlbWFpbCc+KCdwaHlzaWNhbCcpO1xuICBcbiAgLy8gVGVtcGxhdGUgY3VzdG9taXphdGlvbiBzdGF0ZVxuICBjb25zdCBbdGVtcGxhdGVDdXN0b21pemF0aW9ucywgc2V0VGVtcGxhdGVDdXN0b21pemF0aW9uc10gPSB1c2VTdGF0ZSh7XG4gICAgcHJvbXB0Q2hhbmdlczogXCJcIixcbiAgICBtZXNzYWdlQ2hhbmdlczogXCJcIixcbiAgICB1c2VSZWZlcmVuY2VJbWFnZTogZmFsc2UsXG4gICAgcmVmZXJlbmNlSW1hZ2VGaWxlOiBudWxsIGFzIEZpbGUgfCBudWxsLFxuICAgIHJlZmVyZW5jZUltYWdlVXJsczogW10gYXMgc3RyaW5nW10sXG4gICAgcmVmZXJlbmNlSW1hZ2VUcmFuc2Zvcm1hdGlvbjogXCJcIlxuICB9KTtcbiAgXG4gIC8vIFNlY3Rpb24gbG9hZGluZyBzdGF0ZXNcbiAgY29uc3QgW3NlY3Rpb25Mb2FkaW5nU3RhdGVzLCBzZXRTZWN0aW9uTG9hZGluZ1N0YXRlc10gPSB1c2VTdGF0ZTx7XG4gICAgZnJvbnRDb3ZlcjogJ2lkbGUnIHwgJ2xvYWRpbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZXJyb3InO1xuICAgIGJhY2tDb3ZlcjogJ2lkbGUnIHwgJ2xvYWRpbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZXJyb3InO1xuICAgIGxlZnRJbnRlcmlvcjogJ2lkbGUnIHwgJ2xvYWRpbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZXJyb3InO1xuICAgIHJpZ2h0SW50ZXJpb3I6ICdpZGxlJyB8ICdsb2FkaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2Vycm9yJztcbiAgfT4oe1xuICAgIGZyb250Q292ZXI6ICdpZGxlJyxcbiAgICBiYWNrQ292ZXI6ICdpZGxlJyxcbiAgICBsZWZ0SW50ZXJpb3I6ICdpZGxlJyxcbiAgICByaWdodEludGVyaW9yOiAnaWRsZScsXG4gIH0pO1xuICBcbiAgLy8gQ291bnRkb3duIHN0YXRlXG4gIGNvbnN0IFtjb3VudGRvd24sIHNldENvdW50ZG93bl0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuICBjb25zdCBbY291bnRkb3duSW50ZXJ2YWwsIHNldENvdW50ZG93bkludGVydmFsXSA9IHVzZVN0YXRlPE5vZGVKUy5UaW1lb3V0IHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gVXNlIG1vZHVsYXIgaG9va3NcbiAgY29uc3Qgd2ViU29ja2V0ID0gdXNlV2ViU29ja2V0KCk7XG4gIGNvbnN0IGpvYk1hbmFnZW1lbnQgPSB1c2VKb2JNYW5hZ2VtZW50KCk7XG4gIGNvbnN0IGZpbGVIYW5kbGluZyA9IHVzZUZpbGVIYW5kbGluZygpO1xuICBjb25zdCBtZXNzYWdlR2VuZXJhdGlvbiA9IHVzZU1lc3NhZ2VHZW5lcmF0aW9uKFxuICAgIHNlbGVjdGVkVHlwZSxcbiAgICBjdXN0b21DYXJkVHlwZSxcbiAgICBzZWxlY3RlZFRvbmUsXG4gICAgcHJvbXB0LFxuICAgIHRvRmllbGQsXG4gICAgZnJvbUZpZWxkLFxuICAgIHJlbGF0aW9uc2hpcEZpZWxkLFxuICAgIGZpbGVIYW5kbGluZy5waG90b1JlZmVyZW5jZXNcbiAgKTtcbiAgXG4gIC8vIERyYWZ0IGdlbmVyYXRpb24gcHJvcHNcbiAgY29uc3QgZHJhZnRHZW5lcmF0aW9uUHJvcHMgPSB7XG4gICAgc2VsZWN0ZWRUeXBlLFxuICAgIGN1c3RvbUNhcmRUeXBlLFxuICAgIHNlbGVjdGVkVG9uZSxcbiAgICBzZWxlY3RlZEFydGlzdGljU3R5bGUsXG4gICAgY3VzdG9tU3R5bGVEZXNjcmlwdGlvbixcbiAgICBzZWxlY3RlZERyYWZ0TW9kZWwsXG4gICAgc2VsZWN0ZWRJbWFnZU1vZGVsLFxuICAgIHNlbGVjdGVkUGFwZXJTaXplLFxuICAgIHByb21wdCxcbiAgICBwZXJzb25hbFRyYWl0cyxcbiAgICB0b0ZpZWxkLFxuICAgIGZyb21GaWVsZCxcbiAgICB1c2VyRW1haWwsXG4gICAgZmluYWxDYXJkTWVzc2FnZTogbWVzc2FnZUdlbmVyYXRpb24uZmluYWxDYXJkTWVzc2FnZSxcbiAgICBpc0hhbmR3cml0dGVuTWVzc2FnZSxcbiAgICBpc0Zyb250QmFja09ubHksXG4gICAgcmVmZXJlbmNlSW1hZ2VVcmxzOiBmaWxlSGFuZGxpbmcucmVmZXJlbmNlSW1hZ2VVcmxzLFxuICAgIHBob3RvUmVmZXJlbmNlczogZmlsZUhhbmRsaW5nLnBob3RvUmVmZXJlbmNlcyxcbiAgICByZWxhdGlvbnNoaXBGaWVsZCxcbiAgICBzYXZlSm9iVG9TdG9yYWdlOiBqb2JNYW5hZ2VtZW50LnNhdmVKb2JUb1N0b3JhZ2UsXG4gICAgc3Vic2NyaWJlVG9Kb2I6IHdlYlNvY2tldC5zdWJzY3JpYmVUb0pvYixcbiAgICB1bnN1YnNjcmliZUZyb21BbGxKb2JzOiB3ZWJTb2NrZXQudW5zdWJzY3JpYmVGcm9tQWxsSm9icyxcbiAgICBzdGFydEVsYXBzZWRUaW1lVHJhY2tpbmc6IGpvYk1hbmFnZW1lbnQuc3RhcnRFbGFwc2VkVGltZVRyYWNraW5nLFxuICAgIHN0b3BFbGFwc2VkVGltZVRyYWNraW5nOiBqb2JNYW5hZ2VtZW50LnN0b3BFbGFwc2VkVGltZVRyYWNraW5nLFxuICB9O1xuICBcbiAgY29uc3QgZHJhZnRHZW5lcmF0aW9uID0gdXNlRHJhZnRHZW5lcmF0aW9uKGRyYWZ0R2VuZXJhdGlvblByb3BzKTtcbiAgXG4gIC8vIENhcmQgZ2VuZXJhdGlvbiBwcm9wc1xuICBjb25zdCBjYXJkR2VuZXJhdGlvblByb3BzID0ge1xuICAgIHNlbGVjdGVkVHlwZSxcbiAgICBjdXN0b21DYXJkVHlwZSxcbiAgICBzZWxlY3RlZFRvbmUsXG4gICAgc2VsZWN0ZWRBcnRpc3RpY1N0eWxlLFxuICAgIGN1c3RvbVN0eWxlRGVzY3JpcHRpb24sXG4gICAgc2VsZWN0ZWRJbWFnZU1vZGVsLFxuICAgIHNlbGVjdGVkUGFwZXJTaXplLFxuICAgIHByb21wdCxcbiAgICBwZXJzb25hbFRyYWl0cyxcbiAgICB0b0ZpZWxkLFxuICAgIGZyb21GaWVsZCxcbiAgICB1c2VyRW1haWwsXG4gICAgZmluYWxDYXJkTWVzc2FnZTogbWVzc2FnZUdlbmVyYXRpb24uZmluYWxDYXJkTWVzc2FnZSxcbiAgICBpc0hhbmR3cml0dGVuTWVzc2FnZSxcbiAgICBpc0Zyb250QmFja09ubHksXG4gICAgcmVmZXJlbmNlSW1hZ2VVcmxzOiBmaWxlSGFuZGxpbmcucmVmZXJlbmNlSW1hZ2VVcmxzLFxuICAgIHBob3RvUmVmZXJlbmNlczogZmlsZUhhbmRsaW5nLnBob3RvUmVmZXJlbmNlcyxcbiAgICByZWxhdGlvbnNoaXBGaWVsZCxcbiAgICBudW1iZXJPZkNhcmRzLFxuICAgIHNhdmVKb2JUb1N0b3JhZ2U6IGpvYk1hbmFnZW1lbnQuc2F2ZUpvYlRvU3RvcmFnZSxcbiAgICByZW1vdmVKb2JGcm9tU3RvcmFnZTogam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZSxcbiAgICBzdWJzY3JpYmVUb0pvYjogd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iLFxuICAgIHN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZzogam9iTWFuYWdlbWVudC5zdGFydEVsYXBzZWRUaW1lVHJhY2tpbmcsXG4gICAgc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmc6IGpvYk1hbmFnZW1lbnQuc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmcsXG4gICAgc2V0Q3VycmVudEpvYklkOiBqb2JNYW5hZ2VtZW50LnNldEN1cnJlbnRKb2JJZCxcbiAgICBzZXRJc0RyYWZ0TW9kZTogZHJhZnRHZW5lcmF0aW9uLnNldElzRHJhZnRNb2RlLFxuICAgIHNldERyYWZ0Q2FyZHM6IGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENhcmRzLFxuICAgIHNldFNlbGVjdGVkRHJhZnRJbmRleDogZHJhZnRHZW5lcmF0aW9uLnNldFNlbGVjdGVkRHJhZnRJbmRleCxcbiAgICBzZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQ6IGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQsXG4gICAgc2V0UHJldmlld2luZ0RyYWZ0SW5kZXg6IGRyYWZ0R2VuZXJhdGlvbi5zZXRQcmV2aWV3aW5nRHJhZnRJbmRleCxcbiAgICBzZXREcmFmdENvbXBsZXRpb25TaG93bjogZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvblNob3duLFxuICAgIHNldERyYWZ0Q29tcGxldGlvbkNvdW50OiBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uQ291bnQsXG4gIH07XG4gIFxuICBjb25zdCBjYXJkR2VuZXJhdGlvbiA9IHVzZUNhcmRHZW5lcmF0aW9uKGNhcmRHZW5lcmF0aW9uUHJvcHMpO1xuXG4gIC8vIEhhbmRsZSBqb2IgdXBkYXRlcyBmcm9tIFdlYlNvY2tldFxuICBjb25zdCBoYW5kbGVKb2JVcGRhdGUgPSB1c2VDYWxsYmFjaygoZGF0YTogYW55KSA9PiB7XG4gICAgY29uc3QgeyBqb2JfaWQsIHN0YXR1cywgcHJvZ3Jlc3MsIGNhcmREYXRhLCBlcnJvciwgY29tcGxldGVkQXQgfSA9IGRhdGE7XG4gICAgXG4gICAgaWYgKCFqb2JfaWQpIHJldHVybjtcbiAgICBcbiAgICAvLyBTa2lwIHVwZGF0ZXMgaWYgd2UncmUgc3RpbGwgcmVzdG9yaW5nIGpvYnMgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICBpZiAoaXNSZXN0b3JpbmdKb2JzKSB7XG4gICAgICBjb25zb2xlLmxvZygn4o+zIFNraXBwaW5nIGpvYiB1cGRhdGUgZHVyaW5nIHJlc3RvcmF0aW9uOicsIGpvYl9pZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBkcmFmdCBqb2JcbiAgICBjb25zdCBpc0RyYWZ0Sm9iID0gam9iX2lkLnN0YXJ0c1dpdGgoJ2RyYWZ0LScpO1xuICAgIGNvbnN0IGRyYWZ0SW5kZXggPSBpc0RyYWZ0Sm9iID8gcGFyc2VJbnQoam9iX2lkLnNwbGl0KCctJylbMV0pIDogLTE7XG4gICAgXG4gICAgLy8gRmlsdGVyIG91dCB1cGRhdGVzIGZyb20gd3Jvbmcgam9iIHR5cGVcbiAgICAvLyBJZiB3ZSdyZSBpbiBkcmFmdCBtb2RlLCBvbmx5IHByb2Nlc3MgZHJhZnQgam9ic1xuICAgIC8vIElmIHdlJ3JlIGluIGZpbmFsIG1vZGUsIG9ubHkgcHJvY2VzcyBub24tZHJhZnQgam9ic1xuICAgIGNvbnN0IGlzSW5EcmFmdE1vZGUgPSBkcmFmdEdlbmVyYXRpb24uaXNEcmFmdE1vZGU7XG4gICAgaWYgKGlzSW5EcmFmdE1vZGUgJiYgIWlzRHJhZnRKb2IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5qrIElnbm9yaW5nIG5vbi1kcmFmdCBqb2IgdXBkYXRlIGluIGRyYWZ0IG1vZGU6Jywgam9iX2lkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFpc0luRHJhZnRNb2RlICYmIGlzRHJhZnRKb2IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5qrIElnbm9yaW5nIGRyYWZ0IGpvYiB1cGRhdGUgaW4gZmluYWwgbW9kZTonLCBqb2JfaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+UhCBQcm9jZXNzaW5nIGpvYiB1cGRhdGU6JywgeyBqb2JfaWQsIHN0YXR1cywgaXNEcmFmdEpvYiwgZHJhZnRJbmRleCwgcHJvZ3Jlc3MgfSk7XG4gICAgXG4gICAgLy8gSGFuZGxlIHN0YXR1cyB0cmFuc2l0aW9uc1xuICAgIGlmIChzdGF0dXMgPT09ICdwcm9jZXNzaW5nJyAmJiAhY2FyZEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nICYmICFkcmFmdEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBKb2IgaXMgcHJvY2Vzc2luZywgc2V0dGluZyBnZW5lcmF0aW9uIHN0YXRlJyk7XG4gICAgICBpZiAoaXNEcmFmdEpvYikge1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNEcmFmdE1vZGUodHJ1ZSk7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQuc3RhcnRFbGFwc2VkVGltZVRyYWNraW5nKCdkcmFmdCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICBqb2JNYW5hZ2VtZW50LnN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZygnZmluYWwnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIHByb2dyZXNzIGlmIHByb3ZpZGVkXG4gICAgaWYgKHByb2dyZXNzKSB7XG4gICAgICAvLyBJTVBPUlRBTlQ6IERvbid0IHNob3cgXCJHZW5lcmF0aW9uIGNvbXBsZXRlIVwiIHVudGlsIHdlJ3ZlIGFjdHVhbGx5IHByb2Nlc3NlZCB0aGUgY2FyZFxuICAgICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgVUkgZnJvbSBzaG93aW5nIGNvbXBsZXRpb24gYmVmb3JlIHRoZSBjYXJkIGlzIHJlYWR5XG4gICAgICBpZiAocHJvZ3Jlc3MuaW5jbHVkZXMoJ0dlbmVyYXRpb24gY29tcGxldGUhJykgJiYgc3RhdHVzID09PSAnY29tcGxldGVkJyAmJiAhaXNEcmFmdEpvYikge1xuICAgICAgICBjb25zb2xlLmxvZygn4o+477iPIEhvbGRpbmcgXCJHZW5lcmF0aW9uIGNvbXBsZXRlIVwiIG1lc3NhZ2UgdW50aWwgY2FyZCBpcyBwcm9jZXNzZWQnKTtcbiAgICAgICAgLy8gRG9uJ3QgdXBkYXRlIHRoZSBwcm9ncmVzcyBtZXNzYWdlIHlldCAtIGl0IHdpbGwgYmUgc2V0IGluIGhhbmRsZUZpbmFsQ2FyZENvbXBsZXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhwcm9ncmVzcyk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+TiiBQcm9ncmVzcyBtZXNzYWdlOiAke3Byb2dyZXNzfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGVkJyAmJiBjYXJkRGF0YSkge1xuICAgICAgY29uc29sZS5sb2coJ/CfjokgSm9iIGNvbXBsZXRlZCEgQ2FyZCBkYXRhOicsIGNhcmREYXRhLCAnaXNEcmFmdEpvYjonLCBpc0RyYWZ0Sm9iKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdXBkYXRlIGZvciBhIHJlY292ZXJ5IGpvYiwgZW5zdXJlIGdlbmVyYXRpb24gc3RhdGUgaXMgc2V0IHByb3Blcmx5XG4gICAgICBpZiAoaXNEcmFmdEpvYiAmJiAhZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZyAmJiBkcmFmdEdlbmVyYXRpb24uZHJhZnRDYXJkcy5maWx0ZXIoQm9vbGVhbikubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OlIFJlY292ZXJlZCBjb21wbGV0ZWQgZHJhZnQgam9iIC0gbm90IHNldHRpbmcgYXMgZ2VuZXJhdGluZycpO1xuICAgICAgICAvLyBEb24ndCBzZXQgaXNHZW5lcmF0aW5nIGZvciBhbHJlYWR5IGNvbXBsZXRlZCBqb2JzIGR1cmluZyByZWNvdmVyeVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoaXNEcmFmdEpvYiAmJiBkcmFmdEluZGV4ID49IDApIHtcbiAgICAgICAgLy8gSGFuZGxlIGRyYWZ0IGNhcmQgY29tcGxldGlvblxuICAgICAgICBjb25zb2xlLmxvZyhg8J+OqCBEcmFmdCB2YXJpYXRpb24gJHtkcmFmdEluZGV4ICsgMX0gY29tcGxldGVkIWApO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IHN0eWxlIGluZm8gZm9yIHNtYXJ0IHN0eWxlIG1vZGVcbiAgICAgICAgbGV0IHN0eWxlSW5mbzogeyBzdHlsZU5hbWU6IHN0cmluZzsgc3R5bGVMYWJlbDogc3RyaW5nIH0gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzZWxlY3RlZEFydGlzdGljU3R5bGUgPT09IFwiYWktc21hcnQtc3R5bGVcIikge1xuICAgICAgICAgIGNvbnN0IHByZWRlZmluZWRTdHlsZXMgPSBbXG4gICAgICAgICAgICBcIndhdGVyY29sb3JcIiwgXCJib3RhbmljYWxcIiwgXCJjb21pYy1ib29rXCIsIFwiZHJlYW15LWZhbnRhc3lcIiwgXCJtaW5pbWFsaXN0XCJcbiAgICAgICAgICBdO1xuICAgICAgICAgIGNvbnN0IHN0eWxlTGFiZWxzID0gW1xuICAgICAgICAgICAgXCLwn46oIFdhdGVyY29sb3JcIiwgXCLwn4y/IEJvdGFuaWNhbFwiLCBcIvCfkqUgQ29taWMgQm9va1wiLCBcIvCfjLggRHJlYW15IEZhbnRhc3lcIiwgXCLinKggTWluaW1hbGlzdFwiXG4gICAgICAgICAgXTtcbiAgICAgICAgICBpZiAoZHJhZnRJbmRleCA+PSAwICYmIGRyYWZ0SW5kZXggPCBwcmVkZWZpbmVkU3R5bGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3R5bGVJbmZvID0ge1xuICAgICAgICAgICAgICBzdHlsZU5hbWU6IHByZWRlZmluZWRTdHlsZXNbZHJhZnRJbmRleF0sXG4gICAgICAgICAgICAgIHN0eWxlTGFiZWw6IHN0eWxlTGFiZWxzW2RyYWZ0SW5kZXhdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRyYWZ0Q2FyZDogR2VuZXJhdGVkQ2FyZCA9IHtcbiAgICAgICAgICBpZDogYGRyYWZ0LSR7ZHJhZnRJbmRleCArIDF9LSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIHByb21wdDogY2FyZERhdGEucHJvbXB0IHx8IGBEcmFmdCBWYXJpYXRpb24gJHtkcmFmdEluZGV4ICsgMX1gLFxuICAgICAgICAgIGZyb250Q292ZXI6IGNhcmREYXRhLmZyb250Q292ZXIgfHwgXCJcIixcbiAgICAgICAgICBiYWNrQ292ZXI6IGNhcmREYXRhLmJhY2tDb3ZlciB8fCBcIlwiLFxuICAgICAgICAgIGxlZnRQYWdlOiBjYXJkRGF0YS5sZWZ0SW50ZXJpb3IgfHwgY2FyZERhdGEubGVmdFBhZ2UgfHwgXCJcIixcbiAgICAgICAgICByaWdodFBhZ2U6IGNhcmREYXRhLnJpZ2h0SW50ZXJpb3IgfHwgY2FyZERhdGEucmlnaHRQYWdlIHx8IFwiXCIsXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGdlbmVyYXRlZFByb21wdHM6IGNhcmREYXRhLmdlbmVyYXRlZFByb21wdHMgfHwge1xuICAgICAgICAgICAgZnJvbnRDb3ZlcjogY2FyZERhdGEuZ2VuZXJhdGVkUHJvbXB0cz8uZnJvbnRDb3ZlciB8fCBcIlwiLFxuICAgICAgICAgICAgYmFja0NvdmVyOiBjYXJkRGF0YS5nZW5lcmF0ZWRQcm9tcHRzPy5iYWNrQ292ZXIgfHwgXCJcIixcbiAgICAgICAgICAgIGxlZnRJbnRlcmlvcjogY2FyZERhdGEuZ2VuZXJhdGVkUHJvbXB0cz8ubGVmdEludGVyaW9yIHx8IFwiXCIsXG4gICAgICAgICAgICByaWdodEludGVyaW9yOiBjYXJkRGF0YS5nZW5lcmF0ZWRQcm9tcHRzPy5yaWdodEludGVyaW9yIHx8IFwiXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0eWxlSW5mbzogc3R5bGVJbmZvXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBTaW1wbGlmaWVkIGRyYWZ0IHRyYWNraW5nIC0gdXNlIGZpeGVkIGFycmF5IHBvc2l0aW9uc1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDYXJkcyhwcmV2ID0+IHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXZdO1xuICAgICAgICAgIC8vIEVuc3VyZSBhcnJheSBoYXMgNSBzbG90c1xuICAgICAgICAgIHdoaWxlICh1cGRhdGVkLmxlbmd0aCA8IDUpIHtcbiAgICAgICAgICAgIHVwZGF0ZWQucHVzaChudWxsIGFzIGFueSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFBsYWNlIGRyYWZ0IGF0IGl0cyBjb3JyZWN0IGluZGV4XG4gICAgICAgICAgdXBkYXRlZFtkcmFmdEluZGV4XSA9IGRyYWZ0Q2FyZDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIERyYWZ0ICR7ZHJhZnRJbmRleCArIDF9IGNvbXBsZXRlZCBhbmQgc3RvcmVkIGF0IGluZGV4ICR7ZHJhZnRJbmRleH1gKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBObyBsb25nZXIgc2F2ZSBpbmRpdmlkdWFsIGRyYWZ0cyB0byBsb2NhbFN0b3JhZ2VcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaW1wbGlmaWVkIGNvbXBsZXRpb24gdHJhY2tpbmcgLSBjb3VudCB0aGUgdXBkYXRlZCBhcnJheSBpbmNsdWRpbmcgdGhlIG5ldyBkcmFmdFxuICAgICAgICBjb25zdCB1cGRhdGVkRHJhZnRzID0gWy4uLmRyYWZ0R2VuZXJhdGlvbi5kcmFmdENhcmRzXTtcbiAgICAgICAgdXBkYXRlZERyYWZ0c1tkcmFmdEluZGV4XSA9IGRyYWZ0Q2FyZDtcbiAgICAgICAgY29uc3QgY29tcGxldGVkQ291bnQgPSB1cGRhdGVkRHJhZnRzLmZpbHRlcihCb29sZWFuKS5sZW5ndGg7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OKIERyYWZ0IHByb2dyZXNzOiAke2NvbXBsZXRlZENvdW50fS81IHZhcmlhdGlvbnMgY29tcGxldGVgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBwcm9ncmVzc1xuICAgICAgICBjb25zdCBwcm9ncmVzc01zZyA9IGNvbXBsZXRlZENvdW50ID09PSA1IFxuICAgICAgICAgID8gXCJBbGwgNSB2YXJpYXRpb25zIHJlYWR5ISBDaG9vc2UgeW91ciBmYXZvcml0ZSBiZWxvdy5cIlxuICAgICAgICAgIDogYCR7Y29tcGxldGVkQ291bnR9LzUgdmFyaWF0aW9ucyBjb21wbGV0ZS4uLiR7Y29tcGxldGVkQ291bnQgPj0gMiA/IFwiIFlvdSBjYW4gc2VsZWN0IG9uZSBub3chXCIgOiBcIlwifWA7XG4gICAgICAgIFxuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKHByb2dyZXNzTXNnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE92ZXJyaWRlIHRpbWUtYmFzZWQgcHJvZ3Jlc3Mgd2l0aCByZWFsIHByb2dyZXNzIHdoZW4gZHJhZnRzIGNvbXBsZXRlXG4gICAgICAgIC8vIERvbid0IG92ZXJyaWRlIHRpbWUtYmFzZWQgcHJvZ3Jlc3NcbiAgICAgICAgY29uc29sZS5sb2coYPCfjqggRHJhZnQgJHtjb21wbGV0ZWRDb3VudH0vNSBjb21wbGV0ZWRgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBtaWxlc3RvbmVzXG4gICAgICAgIGlmIChjb21wbGV0ZWRDb3VudCA9PT0gMSkge1xuICAgICAgICAgIHNjcm9sbFRvQ2FyZFByZXZpZXcoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGNvbXBsZXRlZENvdW50ID09PSA1ICYmICFkcmFmdEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nRmluYWxDYXJkKSB7XG4gICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgICAgam9iTWFuYWdlbWVudC5zdG9wRWxhcHNlZFRpbWVUcmFja2luZygpO1xuICAgICAgICAgIC8vIENsZWFyIHJlY292ZXJ5IGRhdGEgZm9yIGNvbXBsZXRlZCBkcmFmdCBqb2JzXG4gICAgICAgICAgc3RvcmFnZS5jbGVhclJlY292ZXJ5KCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/Cfp7kgQ2xlYXJlZCByZWNvdmVyeSBkYXRhIGZvciBjb21wbGV0ZWQgZHJhZnQgam9iJyk7XG4gICAgICAgICAgdG9hc3Quc3VjY2VzcyhcIvCfjqggQWxsIDUgZnJvbnQgY292ZXIgdmFyaWF0aW9ucyByZWFkeSEgQ2hvb3NlIHlvdXIgZmF2b3JpdGUgYmVsb3cuXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBLZWVwIGRyYWZ0IGpvYnMgaW4gc3RvcmFnZSBmb3IgbGF0ZXIgcmV0cmlldmFsXG4gICAgICAgIC8vIE9ubHkgdW5zdWJzY3JpYmUgZnJvbSBXZWJTb2NrZXRcbiAgICAgICAgd2ViU29ja2V0LnVuc3Vic2NyaWJlRnJvbUpvYihqb2JfaWQpO1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEtlZXBpbmcgZHJhZnQgam9iICR7am9iX2lkfSBpbiBzdG9yYWdlIGZvciBmdXR1cmUgYWNjZXNzYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgZmluYWwgY2FyZCBjb21wbGV0aW9uXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEZpbmFsIGNhcmQgY29tcGxldGlvbiBkZXRlY3RlZC4gQ2FyZCBkYXRhIHN0cnVjdHVyZTonLCB7XG4gICAgICAgICAgaGFzQ2FyZERhdGE6ICEhY2FyZERhdGEsXG4gICAgICAgICAgY2FyZERhdGFLZXlzOiBPYmplY3Qua2V5cyhjYXJkRGF0YSB8fCB7fSksXG4gICAgICAgICAgZnJvbnRDb3ZlcjogY2FyZERhdGE/LmZyb250Q292ZXIgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgYmFja0NvdmVyOiBjYXJkRGF0YT8uYmFja0NvdmVyID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgIGxlZnRJbnRlcmlvcjogY2FyZERhdGE/LmxlZnRJbnRlcmlvciA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgICByaWdodEludGVyaW9yOiBjYXJkRGF0YT8ucmlnaHRJbnRlcmlvciA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgICBsZWZ0UGFnZTogY2FyZERhdGE/LmxlZnRQYWdlID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgIHJpZ2h0UGFnZTogY2FyZERhdGE/LnJpZ2h0UGFnZSA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OdIEZ1bGwgY2FyZCBkYXRhOicsIEpTT04uc3RyaW5naWZ5KGNhcmREYXRhLCBudWxsLCAyKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBNYXAgYmFja2VuZCBmaWVsZCBuYW1lcyB0byBmcm9udGVuZCBmaWVsZCBuYW1lc1xuICAgICAgICBjb25zdCBtYXBwZWRDYXJkRGF0YSA9IHtcbiAgICAgICAgICAuLi5jYXJkRGF0YSxcbiAgICAgICAgICBsZWZ0SW50ZXJpb3I6IGNhcmREYXRhLmxlZnRJbnRlcmlvciB8fCBjYXJkRGF0YS5sZWZ0UGFnZSxcbiAgICAgICAgICByaWdodEludGVyaW9yOiBjYXJkRGF0YS5yaWdodEludGVyaW9yIHx8IGNhcmREYXRhLnJpZ2h0UGFnZSxcbiAgICAgICAgICAvLyBLZWVwIG9yaWdpbmFsIGZpZWxkcyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgICAgICAgIGxlZnRQYWdlOiBjYXJkRGF0YS5sZWZ0UGFnZSB8fCBjYXJkRGF0YS5sZWZ0SW50ZXJpb3IsXG4gICAgICAgICAgcmlnaHRQYWdlOiBjYXJkRGF0YS5yaWdodFBhZ2UgfHwgY2FyZERhdGEucmlnaHRJbnRlcmlvcixcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIE1hcHBlZCBjYXJkIGRhdGEgZm9yIGZyb250ZW5kIGNvbXBhdGliaWxpdHk6Jywge1xuICAgICAgICAgIGZyb250Q292ZXI6IG1hcHBlZENhcmREYXRhLmZyb250Q292ZXIgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgYmFja0NvdmVyOiBtYXBwZWRDYXJkRGF0YS5iYWNrQ292ZXIgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgbGVmdEludGVyaW9yOiBtYXBwZWRDYXJkRGF0YS5sZWZ0SW50ZXJpb3IgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgcmlnaHRJbnRlcmlvcjogbWFwcGVkQ2FyZERhdGEucmlnaHRJbnRlcmlvciA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDYWxsIHRoZSBjb21wbGV0aW9uIGhhbmRsZXJcbiAgICAgICAgY29uc29sZS5sb2coJ/CfmoAgQ2FsbGluZyBoYW5kbGVGaW5hbENhcmRDb21wbGV0aW9uLi4uJyk7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLmhhbmRsZUZpbmFsQ2FyZENvbXBsZXRpb24obWFwcGVkQ2FyZERhdGEpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FyZCBpcyBhdXRvbWF0aWNhbGx5IGFkZGVkIHRvIHJlY2VudCBjYXJkcyBieSBtYXJrSm9iQ29tcGxldGVcbiAgICAgICAgXG4gICAgICAgIC8vIE9ubHkgY2xlYXIgcmVjb3ZlcnkgaWYgd2UncmUgbm90IGluIHRoZSBtaWRkbGUgb2YgcmVzdG9yaW5nXG4gICAgICAgIGlmICghaXNSZXN0b3JpbmdKb2JzKSB7XG4gICAgICAgICAgam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZShqb2JfaWQpO1xuICAgICAgICB9XG4gICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEpvYklkKG51bGwpO1xuICAgICAgICB3ZWJTb2NrZXQudW5zdWJzY3JpYmVGcm9tSm9iKGpvYl9pZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICdmYWlsZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgSm9iIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIGlmIChpc0RyYWZ0Sm9iICYmIGRyYWZ0SW5kZXggPj0gMCkge1xuICAgICAgICB0b2FzdC5lcnJvcihgRHJhZnQgdmFyaWF0aW9uICR7ZHJhZnRJbmRleCArIDF9IGZhaWxlZC4gQ29udGludWluZyB3aXRoIG90aGVycy4uLmApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9hc3QuZXJyb3IoXCLinYwgQ2FyZCBnZW5lcmF0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQoZmFsc2UpO1xuICAgICAgICBqb2JNYW5hZ2VtZW50LnN0b3BFbGFwc2VkVGltZVRyYWNraW5nKCk7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhcIlwiKTtcbiAgICAgICAgLy8gRG9uJ3QgcmVzZXQgcHJvZ3Jlc3MgLSBsZXQgdGltZS1iYXNlZCBwcm9ncmVzcyBjb250aW51ZVxuICAgICAgICAvLyBqb2JNYW5hZ2VtZW50LnNldFByb2dyZXNzUGVyY2VudGFnZSgwKTtcbiAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQobnVsbCk7XG4gICAgICAgIHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21Kb2Ioam9iX2lkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gT25seSBjbGVhciByZWNvdmVyeSBpZiB3ZSdyZSBub3QgaW4gdGhlIG1pZGRsZSBvZiByZXN0b3JpbmdcbiAgICAgIGlmICghaXNSZXN0b3JpbmdKb2JzKSB7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQucmVtb3ZlSm9iRnJvbVN0b3JhZ2Uoam9iX2lkKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ25vdF9mb3VuZCcpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIEpvYiBub3QgZm91bmQgb24gc2VydmVyLCBjbGVhbmluZyB1cCBzdGFsZSByZWZlcmVuY2U6Jywgam9iX2lkKTtcbiAgICAgIFxuICAgICAgLy8gQ2xlYW4gdXAgc3RhbGUgam9iIHJlZmVyZW5jZVxuICAgICAgaWYgKHdlYlNvY2tldC5jdXJyZW50Sm9iUmVmLmN1cnJlbnQgPT09IGpvYl9pZCkge1xuICAgICAgICB3ZWJTb2NrZXQuY3VycmVudEpvYlJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVzZXQgVUkgc3RhdGUgaWYgdGhpcyB3YXMgdGhlIGN1cnJlbnQgam9iXG4gICAgICBpZiAoam9iTWFuYWdlbWVudC5jdXJyZW50Sm9iSWQgPT09IGpvYl9pZCkge1xuICAgICAgICBqb2JNYW5hZ2VtZW50LnNldEN1cnJlbnRKb2JJZChudWxsKTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKGZhbHNlKTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZChmYWxzZSk7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhcIlwiKTtcbiAgICAgICAgLy8gRG9uJ3QgcmVzZXQgcHJvZ3Jlc3MgLSBsZXQgdGltZS1iYXNlZCBwcm9ncmVzcyBjb250aW51ZVxuICAgICAgICAvLyBqb2JNYW5hZ2VtZW50LnNldFByb2dyZXNzUGVyY2VudGFnZSgwKTtcbiAgICAgICAgam9iTWFuYWdlbWVudC5zdG9wRWxhcHNlZFRpbWVUcmFja2luZygpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDbGVhbiB1cCBzdG9yYWdlXG4gICAgICAvLyBPbmx5IGNsZWFyIHJlY292ZXJ5IGlmIHdlJ3JlIG5vdCBpbiB0aGUgbWlkZGxlIG9mIHJlc3RvcmluZ1xuICAgICAgaWYgKCFpc1Jlc3RvcmluZ0pvYnMpIHtcbiAgICAgICAgam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZShqb2JfaWQpO1xuICAgICAgfVxuICAgICAgd2ViU29ja2V0LnVuc3Vic2NyaWJlRnJvbUpvYihqb2JfaWQpO1xuICAgIH1cbiAgfSwgW3NlbGVjdGVkQXJ0aXN0aWNTdHlsZSwgZHJhZnRHZW5lcmF0aW9uLCBjYXJkR2VuZXJhdGlvbiwgam9iTWFuYWdlbWVudCwgd2ViU29ja2V0LCBpc1Jlc3RvcmluZ0pvYnNdKTtcblxuICAvLyBTZXQgdXAgV2ViU29ja2V0IGpvYiB1cGRhdGUgaGFuZGxlclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHdlYlNvY2tldC5zZXRKb2JVcGRhdGVIYW5kbGVyKGhhbmRsZUpvYlVwZGF0ZSk7XG4gIH0sIFt3ZWJTb2NrZXQsIGhhbmRsZUpvYlVwZGF0ZV0pO1xuXG4gIC8vIFRyYWNrIGlmIHdlJ3ZlIGFscmVhZHkgbG9nZ2VkIHRoZSBzdGFsZSBqb2IgbWVzc2FnZVxuICBjb25zdCBzdGFsZUpvYkxvZ2dlZFJlZiA9IHVzZVJlZihmYWxzZSk7XG5cbiAgLy8gQXV0by1yZWNvbm5lY3QgV2ViU29ja2V0IGlmIGRpc2Nvbm5lY3RlZCBkdXJpbmcgYWN0aXZlIGdlbmVyYXRpb25cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXdlYlNvY2tldC5pc1NvY2tldENvbm5lY3RlZCAmJiBcbiAgICAgICAgKGNhcmRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZyB8fCBkcmFmdEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nRmluYWxDYXJkKSAmJiBcbiAgICAgICAgd2ViU29ja2V0LmN1cnJlbnRKb2JSZWYuY3VycmVudCkge1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB0aGUgZ2VuZXJhdGlvbiBoYXMgYmVlbiBydW5uaW5nIGZvciBtb3JlIHRoYW4gNSBtaW51dGVzXG4gICAgICBpZiAoam9iTWFuYWdlbWVudC5nZW5lcmF0aW9uU3RhcnRUaW1lKSB7XG4gICAgICAgIGNvbnN0IGpvYkFnZSA9IERhdGUubm93KCkgLSBqb2JNYW5hZ2VtZW50LmdlbmVyYXRpb25TdGFydFRpbWU7XG4gICAgICAgIGlmIChqb2JBZ2UgPiA1ICogNjAgKiAxMDAwKSB7IC8vIDUgbWludXRlc1xuICAgICAgICAgIGlmICghc3RhbGVKb2JMb2dnZWRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KPsCBKb2IgaXMgb2xkZXIgdGhhbiA1IG1pbnV0ZXMsIHN0b3BwaW5nIHJlY29ubmVjdGlvbiBhdHRlbXB0cycpO1xuICAgICAgICAgICAgc3RhbGVKb2JMb2dnZWRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENsZWFuIHVwIHN0YWxlIGpvYlxuICAgICAgICAgICAgY29uc3Qgam9iSWQgPSB3ZWJTb2NrZXQuY3VycmVudEpvYlJlZi5jdXJyZW50O1xuICAgICAgICAgICAgaWYgKGpvYklkKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn6e5IENsZWFuaW5nIHVwIHN0YWxlIGpvYjonLCBqb2JJZCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBSZW1vdmUgZnJvbSBsb2NhbFN0b3JhZ2UgKG9ubHkgaWYgbm90IGEgZHJhZnQgam9iKVxuICAgICAgICAgICAgICBpZiAoIWpvYklkLnN0YXJ0c1dpdGgoJ2RyYWZ0LScpKSB7XG4gICAgICAgICAgICAgICAgam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZShqb2JJZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFJlc2V0IGdlbmVyYXRpb24gc3RhdGVzXG4gICAgICAgICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQoZmFsc2UpO1xuICAgICAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNEcmFmdE1vZGUoZmFsc2UpO1xuICAgICAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDYXJkcyhbXSk7XG4gICAgICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25Db3VudCgwKTtcbiAgICAgICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvblNob3duKGZhbHNlKTtcbiAgICAgICAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQobnVsbCk7XG4gICAgICAgICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0R2VuZXJhdGlvblByb2dyZXNzKCcnKTtcbiAgICAgICAgICAgICAgLy8gRG9uJ3QgcmVzZXQgcHJvZ3Jlc3MgLSBsZXQgdGltZS1iYXNlZCBwcm9ncmVzcyBjb250aW51ZVxuICAgICAgICAvLyBqb2JNYW5hZ2VtZW50LnNldFByb2dyZXNzUGVyY2VudGFnZSgwKTtcbiAgICAgICAgICAgICAgam9iTWFuYWdlbWVudC5zdG9wRWxhcHNlZFRpbWVUcmFja2luZygpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gVW5zdWJzY3JpYmUgZnJvbSBqb2JcbiAgICAgICAgICAgICAgd2ViU29ja2V0LnVuc3Vic2NyaWJlRnJvbUpvYihqb2JJZCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBTaG93IGVycm9yIHRvYXN0XG4gICAgICAgICAgICAgIHRvYXN0LmVycm9yKCdDYXJkIGdlbmVyYXRpb24gdGltZWQgb3V0LiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/CflIQgV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCBkdXJpbmcgZ2VuZXJhdGlvbiwgYXR0ZW1wdGluZyByZWNvbm5lY3QuLi4nKTtcbiAgICAgIGNvbnN0IHJlY29ubmVjdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHdlYlNvY2tldC5jb25uZWN0V2ViU29ja2V0KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZS1zdWJzY3JpYmUgdG8gY3VycmVudCBqb2IgYWZ0ZXIgcmVjb25uZWN0aW9uXG4gICAgICAgIGNvbnN0IGpvYklkID0gd2ViU29ja2V0LmN1cnJlbnRKb2JSZWYuY3VycmVudDtcbiAgICAgICAgaWYgKGpvYklkKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+ToSBSZS1zdWJzY3JpYmluZyB0byBqb2IgYWZ0ZXIgcmVjb25uZWN0OicsIGpvYklkKTtcbiAgICAgICAgICAgIHdlYlNvY2tldC5zdWJzY3JpYmVUb0pvYihqb2JJZCk7XG4gICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDIwMDApO1xuICAgICAgXG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHJlY29ubmVjdFRpbWVyKTtcbiAgICB9XG4gIH0sIFt3ZWJTb2NrZXQsIGNhcmRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZywgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCwgam9iTWFuYWdlbWVudC5nZW5lcmF0aW9uU3RhcnRUaW1lXSk7XG5cbiAgLy8gUmVzZXQgc3RhbGUgam9iIGZsYWcgd2hlbiBnZW5lcmF0aW9uIHN0YXJ0c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcgfHwgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCkge1xuICAgICAgc3RhbGVKb2JMb2dnZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIH1cbiAgfSwgW2NhcmRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZywgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZF0pO1xuXG4gIC8vIE1vbml0b3IgZm9yIHN0YWxlIGpvYiB1cGRhdGVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKChjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcgfHwgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCkgJiYgXG4gICAgICAgIHdlYlNvY2tldC5jdXJyZW50Sm9iUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGNoZWNrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RVcGRhdGUgPSBEYXRlLm5vdygpIC0gd2ViU29ja2V0Lmxhc3RKb2JVcGRhdGVSZWYuY3VycmVudDtcbiAgICAgICAgY29uc3Qgam9iSWQgPSB3ZWJTb2NrZXQuY3VycmVudEpvYlJlZi5jdXJyZW50O1xuICAgICAgICBcbiAgICAgICAgLy8gVmVyeSBhZ2dyZXNzaXZlIGNoZWNraW5nIHdoZW4gYXQgOTUlKyBwcm9ncmVzc1xuICAgICAgICBpZiAoam9iTWFuYWdlbWVudC5wcm9ncmVzc1BlcmNlbnRhZ2UgPj0gOTUgJiYgdGltZVNpbmNlTGFzdFVwZGF0ZSA+IDUwMDApIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBObyB1cGRhdGVzIGZvciAke01hdGgucm91bmQodGltZVNpbmNlTGFzdFVwZGF0ZS8xMDAwKX1zIGF0ICR7am9iTWFuYWdlbWVudC5wcm9ncmVzc1BlcmNlbnRhZ2V9JSBwcm9ncmVzcyAtIGNoZWNraW5nIGpvYiBzdGF0dXMuLi5gKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoam9iSWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvam9iLXN0YXR1cy8ke2pvYklkfWApO1xuICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqb2JTdGF0dXMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/Cfk4ogRGlyZWN0IGpvYiBzdGF0dXMgY2hlY2s6Jywgam9iU3RhdHVzKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoam9iU3RhdHVzLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgJiYgam9iU3RhdHVzLmNhcmREYXRhKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIEpvYiBpcyBhY3R1YWxseSBjb21wbGV0ZWQhIFByb2Nlc3NpbmcgcmVzdWx0Li4uJyk7XG4gICAgICAgICAgICAgICAgICBoYW5kbGVKb2JVcGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICBqb2JfaWQ6IGpvYklkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogJ0NhcmQgZ2VuZXJhdGlvbiBjb21wbGV0ZSEnLFxuICAgICAgICAgICAgICAgICAgICBjYXJkRGF0YTogam9iU3RhdHVzLmNhcmREYXRhXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRXhpdCBlYXJseSBvbiBjb21wbGV0aW9uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2hlY2sgam9iIHN0YXR1czonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE1vcmUgYWdncmVzc2l2ZSBjaGVja2luZyB3aGVuIGF0IGhpZ2ggcHJvZ3Jlc3NcbiAgICAgICAgZWxzZSBpZiAoam9iTWFuYWdlbWVudC5wcm9ncmVzc1BlcmNlbnRhZ2UgPj0gOTAgJiYgdGltZVNpbmNlTGFzdFVwZGF0ZSA+IDEwMDAwKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gTm8gdXBkYXRlcyBmb3IgJHtNYXRoLnJvdW5kKHRpbWVTaW5jZUxhc3RVcGRhdGUvMTAwMCl9cyBhdCAke2pvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlfSUgcHJvZ3Jlc3NgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoam9iSWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvam9iLXN0YXR1cy8ke2pvYklkfWApO1xuICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqb2JTdGF0dXMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/Cfk4ogRGlyZWN0IGpvYiBzdGF0dXMgY2hlY2s6Jywgam9iU3RhdHVzKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoam9iU3RhdHVzLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgJiYgam9iU3RhdHVzLmNhcmREYXRhKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIEpvYiBpcyBhY3R1YWxseSBjb21wbGV0ZWQhIFByb2Nlc3NpbmcgcmVzdWx0Li4uJyk7XG4gICAgICAgICAgICAgICAgICBoYW5kbGVKb2JVcGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICBqb2JfaWQ6IGpvYklkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogJ0NhcmQgZ2VuZXJhdGlvbiBjb21wbGV0ZSEnLFxuICAgICAgICAgICAgICAgICAgICBjYXJkRGF0YTogam9iU3RhdHVzLmNhcmREYXRhXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRXhpdCBlYXJseSBvbiBjb21wbGV0aW9uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2hlY2sgam9iIHN0YXR1czonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTdGFuZGFyZCBzdGFsZSB1cGRhdGUgY2hlY2tcbiAgICAgICAgaWYgKHRpbWVTaW5jZUxhc3RVcGRhdGUgPiAzMDAwMCkgeyAvLyAzMCBzZWNvbmRzIHdpdGhvdXQgdXBkYXRlXG4gICAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gTm8gam9iIHVwZGF0ZXMgZm9yIDMwIHNlY29uZHMsIGNoZWNraW5nIGNvbm5lY3Rpb24uLi4nKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIXdlYlNvY2tldC5pc1NvY2tldENvbm5lY3RlZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflIQgV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCwgcmVjb25uZWN0aW5nLi4uJyk7XG4gICAgICAgICAgICB3ZWJTb2NrZXQuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoam9iSWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OhIFJlLXN1YnNjcmliaW5nIHRvIGpvYiBkdWUgdG8gc3RhbGUgdXBkYXRlczonLCBqb2JJZCk7XG4gICAgICAgICAgICB3ZWJTb2NrZXQuc3Vic2NyaWJlVG9Kb2Ioam9iSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZXNldCB0aGUgdGltZXJcbiAgICAgICAgICB3ZWJTb2NrZXQubGFzdEpvYlVwZGF0ZVJlZi5jdXJyZW50ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgfVxuICAgICAgfSwgMzAwMCk7IC8vIENoZWNrIGV2ZXJ5IDMgc2Vjb25kcyBmb3IgZmFzdGVyIGRldGVjdGlvbiBhdCBoaWdoIHByb2dyZXNzXG4gICAgICBcbiAgICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGNoZWNrSW50ZXJ2YWwpO1xuICAgIH1cbiAgfSwgW2NhcmRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZywgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCwgXG4gICAgICB3ZWJTb2NrZXQsIGpvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlLCBoYW5kbGVKb2JVcGRhdGVdKTtcblxuICAvLyBTaW1wbGlmaWVkIGpvYiByZXN0b3JhdGlvbiB1c2luZyBuZXcgc3RvcmFnZSBtYW5hZ2VyXG4gIGNvbnN0IGNoZWNrUGVuZGluZ0pvYnMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ/CflIQgQ2hlY2tpbmcgZm9yIHJlY292ZXJ5IGRhdGEuLi4nKTtcbiAgICBzZXRJc1Jlc3RvcmluZ0pvYnModHJ1ZSk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIGFjdGl2ZSByZWNvdmVyeSBqb2JcbiAgICBjb25zdCByZWNvdmVyeSA9IHN0b3JhZ2UuZ2V0UmVjb3ZlcnkoKTtcbiAgICBcbiAgICBpZiAoIXJlY292ZXJ5KSB7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIE5vIGFjdGl2ZSBqb2IgdG8gcmVjb3ZlcicpO1xuICAgICAgc2V0SXNSZXN0b3JpbmdKb2JzKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/CflIQgRm91bmQgcmVjb3ZlcnkgZGF0YTonLCByZWNvdmVyeSk7XG4gICAgXG4gICAgLy8gSW4gb3VyIHNpbXBsaWZpZWQgc3lzdGVtLCB3ZSBvbmx5IHRyYWNrIG9uZSBhY3RpdmUgam9iIGF0IGEgdGltZVxuICAgIC8vIFJlY292ZXJ5IGlzIG1lYW50IGZvciBicm93c2VyIGNyYXNoZXMgZHVyaW5nIGdlbmVyYXRpb25cbiAgICBjb25zdCBpc1JlY292ZXJ5RHJhZnQgPSByZWNvdmVyeS5qb2JJZD8uc3RhcnRzV2l0aCgnZHJhZnQtJyk7XG4gICAgXG4gICAgaWYgKGlzUmVjb3ZlcnlEcmFmdCkge1xuICAgICAgY29uc29sZS5sb2coJ/CfjqggUmVjb3ZlcmluZyBmcm9tIGRyYWZ0IGdlbmVyYXRpb24nKTtcbiAgICAgIC8vIEZvciBkcmFmdCByZWNvdmVyeSwgd2UgY2FuJ3QgcmVzdG9yZSB0aGUgZXhhY3Qgc3RhdGVcbiAgICAgIC8vIFVzZXIgd2lsbCBuZWVkIHRvIHJlc3RhcnQgdGhlIGRyYWZ0IGdlbmVyYXRpb25cbiAgICAgIHNldElzUmVzdG9yaW5nSm9icyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBmaW5hbCBjYXJkIHJlY292ZXJ5LCB3ZSBjYW4gdHJ5IHRvIHJlc3RvcmUgdGhlIGpvYlxuICAgIGNvbnNvbGUubG9nKCfwn46vIFJlY292ZXJpbmcgZnJvbSBmaW5hbCBjYXJkIGdlbmVyYXRpb24nKTtcbiAgICBcbiAgICAvLyBSZXN0b3JlIGdlbmVyYXRpb24gc3RhdGVcbiAgICBqb2JNYW5hZ2VtZW50LnNldEN1cnJlbnRKb2JJZChyZWNvdmVyeS5qb2JJZCk7XG4gICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhcIvCflIQgUmVzdW1pbmcgZ2VuZXJhdGlvbi4uLlwiKTtcbiAgICBqb2JNYW5hZ2VtZW50LnN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZygnZmluYWwnKTtcbiAgICBcbiAgICAvLyBTdWJzY3JpYmUgdG8gdGhlIGpvYiB0byBnZXQgdXBkYXRlc1xuICAgIHdlYlNvY2tldC5zdWJzY3JpYmVUb0pvYihyZWNvdmVyeS5qb2JJZCk7XG4gICAgc2V0SXNSZXN0b3JpbmdKb2JzKGZhbHNlKTtcbiAgfSwgW3dlYlNvY2tldCwgc3RvcmFnZV0pO1xuXG4gIC8vIExvYWQgcmVjb3ZlcnkgZGF0YSBvbiBjb21wb25lbnQgbW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygn8J+agCB1c2VDYXJkU3R1ZGlvIG1vdW50ZWQsIGNoZWNraW5nIGZvciByZWNvdmVyeS4uLicpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBhY3RpdmUgcmVjb3Zlcnkgam9iXG4gICAgY29uc3QgcmVjb3ZlcnkgPSBzdG9yYWdlLmdldFJlY292ZXJ5KCk7XG4gICAgY29uc29sZS5sb2coJ/Cfk6YgUmVjb3ZlcnkgZGF0YTonLCByZWNvdmVyeSk7XG4gICAgXG4gICAgaWYgKHJlY292ZXJ5KSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBGb3VuZCBhY3RpdmUgam9iIHRvIHJlY292ZXI6JywgcmVjb3Zlcnkuam9iSWQpO1xuICAgICAgXG4gICAgICAvLyBGb3IgZHJhZnQgam9icywgY2hlY2sgaWYgd2UgYWxyZWFkeSBoYXZlIGNvbXBsZXRlZCBkcmFmdHNcbiAgICAgIGNvbnN0IGlzRHJhZnQgPSByZWNvdmVyeS5qb2JJZC5zdGFydHNXaXRoKCdkcmFmdC0nKTtcbiAgICAgIFxuICAgICAgaWYgKGlzRHJhZnQpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UgYWxyZWFkeSBoYXZlIGNvbXBsZXRlZCBkcmFmdCBjYXJkc1xuICAgICAgICBjb25zdCBoYXNDb21wbGV0ZWREcmFmdHMgPSBkcmFmdEdlbmVyYXRpb24uZHJhZnRDYXJkcy5maWx0ZXIoY2FyZCA9PiBjYXJkICE9PSBudWxsKS5sZW5ndGggPiAwO1xuICAgICAgICBcbiAgICAgICAgaWYgKGhhc0NvbXBsZXRlZERyYWZ0cykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgRHJhZnQgam9iIGFscmVhZHkgY29tcGxldGVkLCBub3Qgc2V0dGluZyBhcyBnZW5lcmF0aW5nJyk7XG4gICAgICAgICAgLy8gSnVzdCByZXN0b3JlIHRoZSBqb2IgSUQgZm9yIHJlZmVyZW5jZSwgYnV0IGRvbid0IHNldCBhcyBnZW5lcmF0aW5nXG4gICAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQocmVjb3Zlcnkuam9iSWQpO1xuICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0RyYWZ0TW9kZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+OqCBSZXN1bWluZyBpbmNvbXBsZXRlIGRyYWZ0IGdlbmVyYXRpb24nKTtcbiAgICAgICAgICAvLyBTdWJzY3JpYmUgdG8gdGhlIGpvYiB0byBjaGVjayBpdHMgc3RhdHVzXG4gICAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQocmVjb3Zlcnkuam9iSWQpO1xuICAgICAgICAgIHdlYlNvY2tldC5zdWJzY3JpYmVUb0pvYihyZWNvdmVyeS5qb2JJZCk7XG4gICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzRHJhZnRNb2RlKHRydWUpO1xuICAgICAgICAgIC8vIERvbid0IHNldCBhcyBnZW5lcmF0aW5nIHlldCAtIHdhaXQgZm9yIFdlYlNvY2tldCB0byB0ZWxsIHVzIHRoZSBhY3R1YWwgc3RhdHVzXG4gICAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyBuYXZpZ2F0aW9uIHRvIFN0ZXAgNSBmb3IgYWxyZWFkeSBjb21wbGV0ZWQgam9ic1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfij7MgV2FpdGluZyBmb3Igam9iIHN0YXR1cyB1cGRhdGUgYmVmb3JlIHNldHRpbmcgZ2VuZXJhdGlvbiBzdGF0ZS4uLicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3IgZmluYWwgY2FyZCByZWNvdmVyeSwgY2hlY2sgaWYgYWxyZWFkeSBjb21wbGV0ZWRcbiAgICAgICAgaWYgKGNhcmRHZW5lcmF0aW9uLmdlbmVyYXRlZENhcmQgJiYgY2FyZEdlbmVyYXRpb24uaXNDYXJkQ29tcGxldGVkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBGaW5hbCBjYXJkIGFscmVhZHkgY29tcGxldGVkLCBub3Qgc2V0dGluZyBhcyBnZW5lcmF0aW5nJyk7XG4gICAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQocmVjb3Zlcnkuam9iSWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn46vIFJlc3VtaW5nIGluY29tcGxldGUgZmluYWwgY2FyZCBnZW5lcmF0aW9uJyk7XG4gICAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQocmVjb3Zlcnkuam9iSWQpO1xuICAgICAgICAgIHdlYlNvY2tldC5zdWJzY3JpYmVUb0pvYihyZWNvdmVyeS5qb2JJZCk7XG4gICAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcygn8J+OqCBSZXN1bWluZyBjYXJkIGdlbmVyYXRpb24uLi4nKTtcbiAgICAgICAgICBqb2JNYW5hZ2VtZW50LnN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZygnZmluYWwnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgZmluYWwgY2FyZCBnZW5lcmF0aW9uIGZyb20gYSBkcmFmdCwgc2V0IHRoZSBhcHByb3ByaWF0ZSBzdGF0ZVxuICAgICAgICAgIGlmIChyZWNvdmVyeS5mb3JtRGF0YSAmJiByZWNvdmVyeS5mb3JtRGF0YS5zZWxlY3RlZERyYWZ0SW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZCh0cnVlKTtcbiAgICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRTZWxlY3RlZERyYWZ0SW5kZXgocmVjb3ZlcnkuZm9ybURhdGEuc2VsZWN0ZWREcmFmdEluZGV4KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQWx3YXlzIG1hcmsgcmVzdG9yYXRpb24gYXMgY29tcGxldGVcbiAgICBzZXRJc1Jlc3RvcmluZ0pvYnMoZmFsc2UpO1xuICAgIFxuICAgIC8vIE1hcmsgcmVzdG9yYXRpb24gYXMgY29tcGxldGUgYWZ0ZXIgYSBzbWFsbCBkZWxheVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2V0SXNSZXN0b3JpbmdKb2JzKGZhbHNlKTtcbiAgICB9LCAxMDApO1xuICB9LCBbXSk7XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgc3RhdGUgYW5kIGZ1bmN0aW9ucyB0aGF0IHRoZSBVSSBuZWVkc1xuICByZXR1cm4ge1xuICAgIC8vIENvcmUgc3RhdGVcbiAgICBwcm9tcHQsXG4gICAgc2V0UHJvbXB0LFxuICAgIGZpbmFsQ2FyZE1lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLmZpbmFsQ2FyZE1lc3NhZ2UsXG4gICAgc2V0RmluYWxDYXJkTWVzc2FnZTogbWVzc2FnZUdlbmVyYXRpb24uc2V0RmluYWxDYXJkTWVzc2FnZSxcbiAgICB0b0ZpZWxkLFxuICAgIHNldFRvRmllbGQsXG4gICAgZnJvbUZpZWxkLFxuICAgIHNldEZyb21GaWVsZCxcbiAgICByZWxhdGlvbnNoaXBGaWVsZCxcbiAgICBzZXRSZWxhdGlvbnNoaXBGaWVsZCxcbiAgICBwZXJzb25hbFRyYWl0cyxcbiAgICBzZXRQZXJzb25hbFRyYWl0cyxcbiAgICBzZWxlY3RlZFR5cGUsXG4gICAgc2V0U2VsZWN0ZWRUeXBlLFxuICAgIGN1c3RvbUNhcmRUeXBlLFxuICAgIHNldEN1c3RvbUNhcmRUeXBlLFxuICAgIHNlbGVjdGVkVG9uZSxcbiAgICBzZXRTZWxlY3RlZFRvbmUsXG4gICAgaXNHZW5lcmF0aW5nOiBjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcgfHwgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZyxcbiAgICBzZXRJc0dlbmVyYXRpbmc6IGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyxcbiAgICBpc0dlbmVyYXRpbmdNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdNZXNzYWdlLFxuICAgIHNldElzR2VuZXJhdGluZ01lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZ01lc3NhZ2UsXG4gICAgZ2VuZXJhdGVkQ2FyZDogY2FyZEdlbmVyYXRpb24uZ2VuZXJhdGVkQ2FyZCxcbiAgICBzZXRHZW5lcmF0ZWRDYXJkOiBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0ZWRDYXJkLFxuICAgIG51bWJlck9mQ2FyZHMsXG4gICAgc2V0TnVtYmVyT2ZDYXJkcyxcbiAgICBnZW5lcmF0ZWRDYXJkczogY2FyZEdlbmVyYXRpb24uZ2VuZXJhdGVkQ2FyZHMsXG4gICAgc2V0R2VuZXJhdGVkQ2FyZHM6IGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRlZENhcmRzLFxuICAgIHNlbGVjdGVkQ2FyZEluZGV4OiBjYXJkR2VuZXJhdGlvbi5zZWxlY3RlZENhcmRJbmRleCxcbiAgICBzZXRTZWxlY3RlZENhcmRJbmRleDogY2FyZEdlbmVyYXRpb24uc2V0U2VsZWN0ZWRDYXJkSW5kZXgsXG4gICAgXG4gICAgLy8gQWR2YW5jZWQgb3B0aW9uc1xuICAgIHNob3dBZHZhbmNlZCxcbiAgICBzZXRTaG93QWR2YW5jZWQsXG4gICAgc2VsZWN0ZWRBcnRpc3RpY1N0eWxlLFxuICAgIHNldFNlbGVjdGVkQXJ0aXN0aWNTdHlsZSxcbiAgICBjdXN0b21TdHlsZURlc2NyaXB0aW9uLFxuICAgIHNldEN1c3RvbVN0eWxlRGVzY3JpcHRpb24sXG4gICAgc2VsZWN0ZWRJbWFnZU1vZGVsLFxuICAgIHNldFNlbGVjdGVkSW1hZ2VNb2RlbCxcbiAgICBzZWxlY3RlZERyYWZ0TW9kZWwsXG4gICAgc2V0U2VsZWN0ZWREcmFmdE1vZGVsLFxuICAgIFxuICAgIC8vIERyYWZ0IG1vZGVcbiAgICBpc0RyYWZ0TW9kZTogZHJhZnRHZW5lcmF0aW9uLmlzRHJhZnRNb2RlLFxuICAgIHNldElzRHJhZnRNb2RlOiBkcmFmdEdlbmVyYXRpb24uc2V0SXNEcmFmdE1vZGUsXG4gICAgZHJhZnRDYXJkczogZHJhZnRHZW5lcmF0aW9uLmRyYWZ0Q2FyZHMsXG4gICAgc2V0RHJhZnRDYXJkczogZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMsXG4gICAgc2VsZWN0ZWREcmFmdEluZGV4OiBkcmFmdEdlbmVyYXRpb24uc2VsZWN0ZWREcmFmdEluZGV4LFxuICAgIHNldFNlbGVjdGVkRHJhZnRJbmRleDogZHJhZnRHZW5lcmF0aW9uLnNldFNlbGVjdGVkRHJhZnRJbmRleCxcbiAgICBpc0dlbmVyYXRpbmdGaW5hbENhcmQ6IGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQsXG4gICAgc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkOiBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkLFxuICAgIHByZXZpZXdpbmdEcmFmdEluZGV4OiBkcmFmdEdlbmVyYXRpb24ucHJldmlld2luZ0RyYWZ0SW5kZXgsXG4gICAgc2V0UHJldmlld2luZ0RyYWZ0SW5kZXg6IGRyYWZ0R2VuZXJhdGlvbi5zZXRQcmV2aWV3aW5nRHJhZnRJbmRleCxcbiAgICBkcmFmdENvbXBsZXRpb25TaG93bjogZHJhZnRHZW5lcmF0aW9uLmRyYWZ0Q29tcGxldGlvblNob3duLFxuICAgIHNldERyYWZ0Q29tcGxldGlvblNob3duOiBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uU2hvd24sXG4gICAgZHJhZnRDb21wbGV0aW9uQ291bnQ6IGRyYWZ0R2VuZXJhdGlvbi5kcmFmdENvbXBsZXRpb25Db3VudCxcbiAgICBzZXREcmFmdENvbXBsZXRpb25Db3VudDogZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvbkNvdW50LFxuICAgIFxuICAgIC8vIFByb2dyZXNzIHRyYWNraW5nXG4gICAgZ2VuZXJhdGlvblByb2dyZXNzOiBkcmFmdEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nID8gZHJhZnRHZW5lcmF0aW9uLmdlbmVyYXRpb25Qcm9ncmVzcyA6IGNhcmRHZW5lcmF0aW9uLmdlbmVyYXRpb25Qcm9ncmVzcyxcbiAgICBzZXRHZW5lcmF0aW9uUHJvZ3Jlc3M6IGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyxcbiAgICBwcm9ncmVzc1BlcmNlbnRhZ2U6IGpvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlLFxuICAgIHNldFByb2dyZXNzUGVyY2VudGFnZTogam9iTWFuYWdlbWVudC5zZXRQcm9ncmVzc1BlcmNlbnRhZ2UsXG4gICAgaXNDYXJkQ29tcGxldGVkOiBjYXJkR2VuZXJhdGlvbi5pc0NhcmRDb21wbGV0ZWQsXG4gICAgc2V0SXNDYXJkQ29tcGxldGVkOiBjYXJkR2VuZXJhdGlvbi5zZXRJc0NhcmRDb21wbGV0ZWQsXG4gICAgXG4gICAgLy8gVXBsb2FkIGFuZCBwZXJzb25hbGl6YXRpb25cbiAgICByZWZlcmVuY2VJbWFnZXM6IGZpbGVIYW5kbGluZy5yZWZlcmVuY2VJbWFnZXMsXG4gICAgc2V0UmVmZXJlbmNlSW1hZ2VzOiBmaWxlSGFuZGxpbmcuc2V0UmVmZXJlbmNlSW1hZ2VzLFxuICAgIHJlZmVyZW5jZUltYWdlVXJsczogZmlsZUhhbmRsaW5nLnJlZmVyZW5jZUltYWdlVXJscyxcbiAgICBzZXRSZWZlcmVuY2VJbWFnZVVybHM6IGZpbGVIYW5kbGluZy5zZXRSZWZlcmVuY2VJbWFnZVVybHMsXG4gICAgaXNVcGxvYWRpbmc6IGZpbGVIYW5kbGluZy5pc1VwbG9hZGluZyxcbiAgICBzZXRJc1VwbG9hZGluZzogZmlsZUhhbmRsaW5nLnNldElzVXBsb2FkaW5nLFxuICAgIFxuICAgIC8vIEVtYWlsIGFuZCBzZXR0aW5nc1xuICAgIHVzZXJFbWFpbCxcbiAgICBzZXRVc2VyRW1haWwsXG4gICAgaXNIYW5kd3JpdHRlbk1lc3NhZ2UsXG4gICAgc2V0SXNIYW5kd3JpdHRlbk1lc3NhZ2UsXG4gICAgaXNGcm9udEJhY2tPbmx5LFxuICAgIHNldElzRnJvbnRCYWNrT25seSxcbiAgICBzZWxlY3RlZFBhcGVyU2l6ZSxcbiAgICBzZXRTZWxlY3RlZFBhcGVyU2l6ZSxcbiAgICBcbiAgICAvLyBVSSBzdGF0ZVxuICAgIGlzVGV4dGFyZWFFeHBhbmRlZCxcbiAgICBzZXRJc1RleHRhcmVhRXhwYW5kZWQsXG4gICAgaXNNZXNzYWdlRXhwYW5kZWQsXG4gICAgc2V0SXNNZXNzYWdlRXhwYW5kZWQsXG4gICAgc2hvd1NldHRpbmdzLFxuICAgIHNldFNob3dTZXR0aW5ncyxcbiAgICBzaG93VGVtcGxhdGVHYWxsZXJ5LFxuICAgIHNldFNob3dUZW1wbGF0ZUdhbGxlcnksXG4gICAgc2hvd1ByaW50Q29uZmlybWF0aW9uLFxuICAgIHNldFNob3dQcmludENvbmZpcm1hdGlvbixcbiAgICBcbiAgICAvLyBHZW5lcmF0aW9uIHRpbWVcbiAgICBnZW5lcmF0aW9uRHVyYXRpb246IGNhcmRHZW5lcmF0aW9uLmdlbmVyYXRpb25EdXJhdGlvbixcbiAgICBzZXRHZW5lcmF0aW9uRHVyYXRpb246IGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25EdXJhdGlvbixcbiAgICBjdXJyZW50RWxhcHNlZFRpbWU6IGpvYk1hbmFnZW1lbnQuY3VycmVudEVsYXBzZWRUaW1lLFxuICAgIFxuICAgIC8vIEhlbHBlciBmdW5jdGlvbnNcbiAgICBmb3JtYXRHZW5lcmF0aW9uVGltZSxcbiAgICBmb3JtYXRDb3VudGRvd24sXG4gICAgc2VuZFRoYW5rWW91RW1haWwsXG4gICAgY2hhdFdpdGhBSSxcbiAgICBzY3JvbGxUb0NhcmRQcmV2aWV3LFxuICAgIFxuICAgIC8vIFRpbWUgdHJhY2tpbmcgZnVuY3Rpb25zXG4gICAgc3RhcnRFbGFwc2VkVGltZVRyYWNraW5nOiBqb2JNYW5hZ2VtZW50LnN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZyxcbiAgICBzdG9wRWxhcHNlZFRpbWVUcmFja2luZzogam9iTWFuYWdlbWVudC5zdG9wRWxhcHNlZFRpbWVUcmFja2luZyxcbiAgICBcbiAgICAvLyBGaWxlIGhhbmRsaW5nIGZ1bmN0aW9uc1xuICAgIGhhbmRsZUZpbGVVcGxvYWQ6IGZpbGVIYW5kbGluZy5oYW5kbGVGaWxlVXBsb2FkLFxuICAgIGhhbmRsZVJlbW92ZVJlZmVyZW5jZUltYWdlOiBmaWxlSGFuZGxpbmcuaGFuZGxlUmVtb3ZlUmVmZXJlbmNlSW1hZ2UsXG4gICAgXG4gICAgLy8gU2ltcGxpZmllZCBwaG90byByZWZlcmVuY2VzXG4gICAgcGhvdG9SZWZlcmVuY2VzOiBmaWxlSGFuZGxpbmcucGhvdG9SZWZlcmVuY2VzLFxuICAgIHNldFBob3RvUmVmZXJlbmNlczogZmlsZUhhbmRsaW5nLnNldFBob3RvUmVmZXJlbmNlcyxcbiAgICB1cGRhdGVQaG90b0Rlc2NyaXB0aW9uOiBmaWxlSGFuZGxpbmcudXBkYXRlUGhvdG9EZXNjcmlwdGlvbixcbiAgICBcbiAgICAvLyBNZXNzYWdlIGZ1bmN0aW9uc1xuICAgIGhhbmRsZUdldE1lc3NhZ2VIZWxwOiBtZXNzYWdlR2VuZXJhdGlvbi5oYW5kbGVHZXRNZXNzYWdlSGVscCxcbiAgICBhZGRNZXNzYWdlVG9IaXN0b3J5OiBtZXNzYWdlR2VuZXJhdGlvbi5hZGRNZXNzYWdlVG9IaXN0b3J5LFxuICAgIHVuZG9NZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi51bmRvTWVzc2FnZSxcbiAgICByZWRvTWVzc2FnZTogbWVzc2FnZUdlbmVyYXRpb24ucmVkb01lc3NhZ2UsXG4gICAgXG4gICAgLy8gSm9iIG1hbmFnZW1lbnRcbiAgICBzYXZlSm9iVG9TdG9yYWdlOiBqb2JNYW5hZ2VtZW50LnNhdmVKb2JUb1N0b3JhZ2UsXG4gICAgcmVtb3ZlSm9iRnJvbVN0b3JhZ2U6IGpvYk1hbmFnZW1lbnQucmVtb3ZlSm9iRnJvbVN0b3JhZ2UsXG4gICAgY2hlY2tQZW5kaW5nSm9icyxcbiAgICBpc1Jlc3RvcmluZ0pvYnMsXG4gICAgXG4gICAgLy8gTWFpbiBnZW5lcmF0aW9uIGZ1bmN0aW9uc1xuICAgIGhhbmRsZUdlbmVyYXRlRHJhZnRDYXJkczogZHJhZnRHZW5lcmF0aW9uLmhhbmRsZUdlbmVyYXRlRHJhZnRDYXJkcyxcbiAgICBoYW5kbGVHZW5lcmF0ZUZpbmFsRnJvbURyYWZ0OiBkcmFmdEdlbmVyYXRpb24uaGFuZGxlR2VuZXJhdGVGaW5hbEZyb21EcmFmdCxcbiAgICBcbiAgICAvLyBBZGRpdGlvbmFsIHN0YXRlIGZvciBtZXNzYWdlIHJlZmluZW1lbnRcbiAgICBtZXNzYWdlSGlzdG9yeTogbWVzc2FnZUdlbmVyYXRpb24ubWVzc2FnZUhpc3RvcnksXG4gICAgc2V0TWVzc2FnZUhpc3Rvcnk6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldE1lc3NhZ2VIaXN0b3J5LFxuICAgIGN1cnJlbnRNZXNzYWdlSW5kZXg6IG1lc3NhZ2VHZW5lcmF0aW9uLmN1cnJlbnRNZXNzYWdlSW5kZXgsXG4gICAgc2V0Q3VycmVudE1lc3NhZ2VJbmRleDogbWVzc2FnZUdlbmVyYXRpb24uc2V0Q3VycmVudE1lc3NhZ2VJbmRleCxcbiAgICByZWZpbmVtZW50UHJvbXB0OiBtZXNzYWdlR2VuZXJhdGlvbi5yZWZpbmVtZW50UHJvbXB0LFxuICAgIHNldFJlZmluZW1lbnRQcm9tcHQ6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldFJlZmluZW1lbnRQcm9tcHQsXG4gICAgaXNSZWZpbmluZ01lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLmlzUmVmaW5pbmdNZXNzYWdlLFxuICAgIHNldElzUmVmaW5pbmdNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5zZXRJc1JlZmluaW5nTWVzc2FnZSxcbiAgICBzaG93UmVmaW5lbWVudEJveDogbWVzc2FnZUdlbmVyYXRpb24uc2hvd1JlZmluZW1lbnRCb3gsXG4gICAgc2V0U2hvd1JlZmluZW1lbnRCb3g6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldFNob3dSZWZpbmVtZW50Qm94LFxuICAgIFxuICAgIC8vIFRlbXBsYXRlIHN0YXRlXG4gICAgc2hvd1RlbXBsYXRlQ3VzdG9taXphdGlvbixcbiAgICBzZXRTaG93VGVtcGxhdGVDdXN0b21pemF0aW9uLFxuICAgIHNlbGVjdGVkVGVtcGxhdGUsXG4gICAgc2V0U2VsZWN0ZWRUZW1wbGF0ZSxcbiAgICB0ZW1wbGF0ZUN1c3RvbWl6YXRpb25zLFxuICAgIHNldFRlbXBsYXRlQ3VzdG9taXphdGlvbnMsXG4gICAgdGVtcGxhdGVTZWFyY2hRdWVyeSxcbiAgICBzZXRUZW1wbGF0ZVNlYXJjaFF1ZXJ5LFxuICAgIGlzU2VhcmNoaW5nVGVtcGxhdGVzLFxuICAgIHNldElzU2VhcmNoaW5nVGVtcGxhdGVzLFxuICAgIGFpRmlsdGVyZWRDYXJkcyxcbiAgICBzZXRBaUZpbHRlcmVkQ2FyZHMsXG4gICAgc2VhcmNoTW9kZSxcbiAgICBzZXRTZWFyY2hNb2RlLFxuICAgIHRleHRGaWx0ZXJlZENhcmRzLFxuICAgIHNldFRleHRGaWx0ZXJlZENhcmRzLFxuICAgIHNob3dQcm9tcHRzLFxuICAgIHNldFNob3dQcm9tcHRzLFxuICAgIFxuICAgIC8vIFByaW50IHN0YXRlXG4gICAgcHJpbnRPcHRpb24sXG4gICAgc2V0UHJpbnRPcHRpb24sXG4gICAgXG4gICAgLy8gQWRkaXRpb25hbCBkcmFmdCBtb2RlIHN0YXRlXG4gICAgaGFuZHdyaXRpbmdTYW1wbGU6IGZpbGVIYW5kbGluZy5oYW5kd3JpdGluZ1NhbXBsZSxcbiAgICBzZXRIYW5kd3JpdGluZ1NhbXBsZTogZmlsZUhhbmRsaW5nLnNldEhhbmR3cml0aW5nU2FtcGxlLFxuICAgIGhhbmR3cml0aW5nU2FtcGxlVXJsOiBmaWxlSGFuZGxpbmcuaGFuZHdyaXRpbmdTYW1wbGVVcmwsXG4gICAgc2V0SGFuZHdyaXRpbmdTYW1wbGVVcmw6IGZpbGVIYW5kbGluZy5zZXRIYW5kd3JpdGluZ1NhbXBsZVVybCxcbiAgICBcbiAgICAvLyBKb2IgdHJhY2tpbmdcbiAgICBjdXJyZW50Sm9iSWQ6IGpvYk1hbmFnZW1lbnQuY3VycmVudEpvYklkLFxuICAgIHNldEN1cnJlbnRKb2JJZDogam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQsXG4gICAgY291bnRkb3duLFxuICAgIHNldENvdW50ZG93bixcbiAgICBjb3VudGRvd25JbnRlcnZhbCxcbiAgICBzZXRDb3VudGRvd25JbnRlcnZhbCxcbiAgICBcbiAgICAvLyBTZWN0aW9uIGxvYWRpbmcgc3RhdGVzXG4gICAgc2VjdGlvbkxvYWRpbmdTdGF0ZXMsXG4gICAgc2V0U2VjdGlvbkxvYWRpbmdTdGF0ZXMsXG4gICAgXG4gICAgLy8gRmFzdCBwcmV2aWV3IG1vZGVcbiAgICBmYXN0UHJldmlld01vZGUsXG4gICAgc2V0RmFzdFByZXZpZXdNb2RlLFxuICAgIFxuICAgIC8vIEFkZGl0aW9uYWwgdHJhY2tpbmdcbiAgICBjdXJyZW50Q2FyZElkOiBjYXJkR2VuZXJhdGlvbi5jdXJyZW50Q2FyZElkLFxuICAgIHNldEN1cnJlbnRDYXJkSWQ6IGNhcmRHZW5lcmF0aW9uLnNldEN1cnJlbnRDYXJkSWQsXG4gICAgaXNJbml0aWFsTG9hZENvbXBsZXRlLFxuICAgIHNldElzSW5pdGlhbExvYWRDb21wbGV0ZSxcbiAgICBcbiAgICAvLyBFbGFwc2VkIHRpbWUgdHJhY2tpbmdcbiAgICBnZW5lcmF0aW9uU3RhcnRUaW1lOiBqb2JNYW5hZ2VtZW50LmdlbmVyYXRpb25TdGFydFRpbWUsXG4gICAgXG4gICAgLy8gQ29uc3RhbnRzIGZvciBVSVxuICAgIGNhcmRUb25lcyxcbiAgICBhcnRpc3RpY1N0eWxlcyxcbiAgICBwYXBlclNpemVzLFxuICAgIFxuICAgIC8vIFdlYlNvY2tldCBmdW5jdGlvbnMgYW5kIHN0YXRlXG4gICAgaXNTb2NrZXRDb25uZWN0ZWQ6IHdlYlNvY2tldC5pc1NvY2tldENvbm5lY3RlZCxcbiAgICBjb25uZWN0V2ViU29ja2V0OiB3ZWJTb2NrZXQuY29ubmVjdFdlYlNvY2tldCxcbiAgICBkaXNjb25uZWN0V2ViU29ja2V0OiB3ZWJTb2NrZXQuZGlzY29ubmVjdFdlYlNvY2tldCxcbiAgICBzdWJzY3JpYmVUb0pvYjogd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iLFxuICAgIHVuc3Vic2NyaWJlRnJvbUpvYjogd2ViU29ja2V0LnVuc3Vic2NyaWJlRnJvbUpvYixcbiAgICB1bnN1YnNjcmliZUZyb21BbGxKb2JzOiB3ZWJTb2NrZXQudW5zdWJzY3JpYmVGcm9tQWxsSm9icyxcbiAgICBoYW5kbGVKb2JVcGRhdGUsXG4gICAgaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvbjogY2FyZEdlbmVyYXRpb24uaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvbixcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwidXNlUmVmIiwidG9hc3QiLCJ1c2VXZWJTb2NrZXQiLCJ1c2VKb2JNYW5hZ2VtZW50IiwidXNlTWVzc2FnZUdlbmVyYXRpb24iLCJ1c2VGaWxlSGFuZGxpbmciLCJ1c2VEcmFmdEdlbmVyYXRpb24iLCJ1c2VDYXJkR2VuZXJhdGlvbiIsImNhcmRUb25lcyIsImFydGlzdGljU3R5bGVzIiwicGFwZXJTaXplcyIsImZvcm1hdEdlbmVyYXRpb25UaW1lIiwiZm9ybWF0Q291bnRkb3duIiwic2VuZFRoYW5rWW91RW1haWwiLCJjaGF0V2l0aEFJIiwic2Nyb2xsVG9DYXJkUHJldmlldyIsInN0b3JhZ2UiLCJ1c2VDYXJkU3R1ZGlvIiwicHJvbXB0Iiwic2V0UHJvbXB0IiwidG9GaWVsZCIsInNldFRvRmllbGQiLCJmcm9tRmllbGQiLCJzZXRGcm9tRmllbGQiLCJyZWxhdGlvbnNoaXBGaWVsZCIsInNldFJlbGF0aW9uc2hpcEZpZWxkIiwicGVyc29uYWxUcmFpdHMiLCJzZXRQZXJzb25hbFRyYWl0cyIsInNlbGVjdGVkVHlwZSIsInNldFNlbGVjdGVkVHlwZSIsImN1c3RvbUNhcmRUeXBlIiwic2V0Q3VzdG9tQ2FyZFR5cGUiLCJzZWxlY3RlZFRvbmUiLCJzZXRTZWxlY3RlZFRvbmUiLCJzaG93QWR2YW5jZWQiLCJzZXRTaG93QWR2YW5jZWQiLCJzZWxlY3RlZEFydGlzdGljU3R5bGUiLCJzZXRTZWxlY3RlZEFydGlzdGljU3R5bGUiLCJjdXN0b21TdHlsZURlc2NyaXB0aW9uIiwic2V0Q3VzdG9tU3R5bGVEZXNjcmlwdGlvbiIsInNlbGVjdGVkSW1hZ2VNb2RlbCIsInNldFNlbGVjdGVkSW1hZ2VNb2RlbCIsInNlbGVjdGVkRHJhZnRNb2RlbCIsInNldFNlbGVjdGVkRHJhZnRNb2RlbCIsImZhc3RQcmV2aWV3TW9kZSIsInNldEZhc3RQcmV2aWV3TW9kZSIsInVzZXJFbWFpbCIsInNldFVzZXJFbWFpbCIsIm51bWJlck9mQ2FyZHMiLCJzZXROdW1iZXJPZkNhcmRzIiwiaXNIYW5kd3JpdHRlbk1lc3NhZ2UiLCJzZXRJc0hhbmR3cml0dGVuTWVzc2FnZSIsImlzRnJvbnRCYWNrT25seSIsInNldElzRnJvbnRCYWNrT25seSIsInNlbGVjdGVkUGFwZXJTaXplIiwic2V0U2VsZWN0ZWRQYXBlclNpemUiLCJpc1RleHRhcmVhRXhwYW5kZWQiLCJzZXRJc1RleHRhcmVhRXhwYW5kZWQiLCJpc01lc3NhZ2VFeHBhbmRlZCIsInNldElzTWVzc2FnZUV4cGFuZGVkIiwic2hvd1NldHRpbmdzIiwic2V0U2hvd1NldHRpbmdzIiwic2hvd1RlbXBsYXRlR2FsbGVyeSIsInNldFNob3dUZW1wbGF0ZUdhbGxlcnkiLCJzaG93UHJpbnRDb25maXJtYXRpb24iLCJzZXRTaG93UHJpbnRDb25maXJtYXRpb24iLCJzaG93VGVtcGxhdGVDdXN0b21pemF0aW9uIiwic2V0U2hvd1RlbXBsYXRlQ3VzdG9taXphdGlvbiIsImlzUmVzdG9yaW5nSm9icyIsInNldElzUmVzdG9yaW5nSm9icyIsInNlbGVjdGVkVGVtcGxhdGUiLCJzZXRTZWxlY3RlZFRlbXBsYXRlIiwiaXNJbml0aWFsTG9hZENvbXBsZXRlIiwic2V0SXNJbml0aWFsTG9hZENvbXBsZXRlIiwidGVtcGxhdGVTZWFyY2hRdWVyeSIsInNldFRlbXBsYXRlU2VhcmNoUXVlcnkiLCJpc1NlYXJjaGluZ1RlbXBsYXRlcyIsInNldElzU2VhcmNoaW5nVGVtcGxhdGVzIiwiYWlGaWx0ZXJlZENhcmRzIiwic2V0QWlGaWx0ZXJlZENhcmRzIiwic2VhcmNoTW9kZSIsInNldFNlYXJjaE1vZGUiLCJ0ZXh0RmlsdGVyZWRDYXJkcyIsInNldFRleHRGaWx0ZXJlZENhcmRzIiwic2hvd1Byb21wdHMiLCJzZXRTaG93UHJvbXB0cyIsInByaW50T3B0aW9uIiwic2V0UHJpbnRPcHRpb24iLCJ0ZW1wbGF0ZUN1c3RvbWl6YXRpb25zIiwic2V0VGVtcGxhdGVDdXN0b21pemF0aW9ucyIsInByb21wdENoYW5nZXMiLCJtZXNzYWdlQ2hhbmdlcyIsInVzZVJlZmVyZW5jZUltYWdlIiwicmVmZXJlbmNlSW1hZ2VGaWxlIiwicmVmZXJlbmNlSW1hZ2VVcmxzIiwicmVmZXJlbmNlSW1hZ2VUcmFuc2Zvcm1hdGlvbiIsInNlY3Rpb25Mb2FkaW5nU3RhdGVzIiwic2V0U2VjdGlvbkxvYWRpbmdTdGF0ZXMiLCJmcm9udENvdmVyIiwiYmFja0NvdmVyIiwibGVmdEludGVyaW9yIiwicmlnaHRJbnRlcmlvciIsImNvdW50ZG93biIsInNldENvdW50ZG93biIsImNvdW50ZG93bkludGVydmFsIiwic2V0Q291bnRkb3duSW50ZXJ2YWwiLCJ3ZWJTb2NrZXQiLCJqb2JNYW5hZ2VtZW50IiwiZmlsZUhhbmRsaW5nIiwibWVzc2FnZUdlbmVyYXRpb24iLCJwaG90b1JlZmVyZW5jZXMiLCJkcmFmdEdlbmVyYXRpb25Qcm9wcyIsImZpbmFsQ2FyZE1lc3NhZ2UiLCJzYXZlSm9iVG9TdG9yYWdlIiwic3Vic2NyaWJlVG9Kb2IiLCJ1bnN1YnNjcmliZUZyb21BbGxKb2JzIiwic3RhcnRFbGFwc2VkVGltZVRyYWNraW5nIiwic3RvcEVsYXBzZWRUaW1lVHJhY2tpbmciLCJkcmFmdEdlbmVyYXRpb24iLCJjYXJkR2VuZXJhdGlvblByb3BzIiwicmVtb3ZlSm9iRnJvbVN0b3JhZ2UiLCJzZXRDdXJyZW50Sm9iSWQiLCJzZXRJc0RyYWZ0TW9kZSIsInNldERyYWZ0Q2FyZHMiLCJzZXRTZWxlY3RlZERyYWZ0SW5kZXgiLCJzZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQiLCJzZXRQcmV2aWV3aW5nRHJhZnRJbmRleCIsInNldERyYWZ0Q29tcGxldGlvblNob3duIiwic2V0RHJhZnRDb21wbGV0aW9uQ291bnQiLCJjYXJkR2VuZXJhdGlvbiIsImhhbmRsZUpvYlVwZGF0ZSIsImRhdGEiLCJqb2JfaWQiLCJzdGF0dXMiLCJwcm9ncmVzcyIsImNhcmREYXRhIiwiZXJyb3IiLCJjb21wbGV0ZWRBdCIsImNvbnNvbGUiLCJsb2ciLCJpc0RyYWZ0Sm9iIiwic3RhcnRzV2l0aCIsImRyYWZ0SW5kZXgiLCJwYXJzZUludCIsInNwbGl0IiwiaXNJbkRyYWZ0TW9kZSIsImlzRHJhZnRNb2RlIiwiaXNHZW5lcmF0aW5nIiwic2V0SXNHZW5lcmF0aW5nIiwiaW5jbHVkZXMiLCJzZXRHZW5lcmF0aW9uUHJvZ3Jlc3MiLCJkcmFmdENhcmRzIiwiZmlsdGVyIiwiQm9vbGVhbiIsImxlbmd0aCIsInN0eWxlSW5mbyIsInVuZGVmaW5lZCIsInByZWRlZmluZWRTdHlsZXMiLCJzdHlsZUxhYmVscyIsInN0eWxlTmFtZSIsInN0eWxlTGFiZWwiLCJkcmFmdENhcmQiLCJpZCIsIkRhdGUiLCJub3ciLCJsZWZ0UGFnZSIsInJpZ2h0UGFnZSIsImNyZWF0ZWRBdCIsImdlbmVyYXRlZFByb21wdHMiLCJwcmV2IiwidXBkYXRlZCIsInB1c2giLCJ1cGRhdGVkRHJhZnRzIiwiY29tcGxldGVkQ291bnQiLCJwcm9ncmVzc01zZyIsImlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCIsImNsZWFyUmVjb3ZlcnkiLCJzdWNjZXNzIiwidW5zdWJzY3JpYmVGcm9tSm9iIiwiaGFzQ2FyZERhdGEiLCJjYXJkRGF0YUtleXMiLCJPYmplY3QiLCJrZXlzIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1hcHBlZENhcmREYXRhIiwiaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvbiIsIndhcm4iLCJjdXJyZW50Sm9iUmVmIiwiY3VycmVudCIsImN1cnJlbnRKb2JJZCIsInNldEpvYlVwZGF0ZUhhbmRsZXIiLCJzdGFsZUpvYkxvZ2dlZFJlZiIsImlzU29ja2V0Q29ubmVjdGVkIiwiZ2VuZXJhdGlvblN0YXJ0VGltZSIsImpvYkFnZSIsImpvYklkIiwicmVjb25uZWN0VGltZXIiLCJzZXRUaW1lb3V0IiwiY29ubmVjdFdlYlNvY2tldCIsImNsZWFyVGltZW91dCIsImNoZWNrSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInRpbWVTaW5jZUxhc3RVcGRhdGUiLCJsYXN0Sm9iVXBkYXRlUmVmIiwicHJvZ3Jlc3NQZXJjZW50YWdlIiwiTWF0aCIsInJvdW5kIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiam9iU3RhdHVzIiwianNvbiIsImNsZWFySW50ZXJ2YWwiLCJjaGVja1BlbmRpbmdKb2JzIiwicmVjb3ZlcnkiLCJnZXRSZWNvdmVyeSIsImlzUmVjb3ZlcnlEcmFmdCIsImlzRHJhZnQiLCJoYXNDb21wbGV0ZWREcmFmdHMiLCJjYXJkIiwiZ2VuZXJhdGVkQ2FyZCIsImlzQ2FyZENvbXBsZXRlZCIsImZvcm1EYXRhIiwic2VsZWN0ZWREcmFmdEluZGV4Iiwic2V0RmluYWxDYXJkTWVzc2FnZSIsImlzR2VuZXJhdGluZ01lc3NhZ2UiLCJzZXRJc0dlbmVyYXRpbmdNZXNzYWdlIiwic2V0R2VuZXJhdGVkQ2FyZCIsImdlbmVyYXRlZENhcmRzIiwic2V0R2VuZXJhdGVkQ2FyZHMiLCJzZWxlY3RlZENhcmRJbmRleCIsInNldFNlbGVjdGVkQ2FyZEluZGV4IiwicHJldmlld2luZ0RyYWZ0SW5kZXgiLCJkcmFmdENvbXBsZXRpb25TaG93biIsImRyYWZ0Q29tcGxldGlvbkNvdW50IiwiZ2VuZXJhdGlvblByb2dyZXNzIiwic2V0UHJvZ3Jlc3NQZXJjZW50YWdlIiwic2V0SXNDYXJkQ29tcGxldGVkIiwicmVmZXJlbmNlSW1hZ2VzIiwic2V0UmVmZXJlbmNlSW1hZ2VzIiwic2V0UmVmZXJlbmNlSW1hZ2VVcmxzIiwiaXNVcGxvYWRpbmciLCJzZXRJc1VwbG9hZGluZyIsImdlbmVyYXRpb25EdXJhdGlvbiIsInNldEdlbmVyYXRpb25EdXJhdGlvbiIsImN1cnJlbnRFbGFwc2VkVGltZSIsImhhbmRsZUZpbGVVcGxvYWQiLCJoYW5kbGVSZW1vdmVSZWZlcmVuY2VJbWFnZSIsInNldFBob3RvUmVmZXJlbmNlcyIsInVwZGF0ZVBob3RvRGVzY3JpcHRpb24iLCJoYW5kbGVHZXRNZXNzYWdlSGVscCIsImFkZE1lc3NhZ2VUb0hpc3RvcnkiLCJ1bmRvTWVzc2FnZSIsInJlZG9NZXNzYWdlIiwiaGFuZGxlR2VuZXJhdGVEcmFmdENhcmRzIiwiaGFuZGxlR2VuZXJhdGVGaW5hbEZyb21EcmFmdCIsIm1lc3NhZ2VIaXN0b3J5Iiwic2V0TWVzc2FnZUhpc3RvcnkiLCJjdXJyZW50TWVzc2FnZUluZGV4Iiwic2V0Q3VycmVudE1lc3NhZ2VJbmRleCIsInJlZmluZW1lbnRQcm9tcHQiLCJzZXRSZWZpbmVtZW50UHJvbXB0IiwiaXNSZWZpbmluZ01lc3NhZ2UiLCJzZXRJc1JlZmluaW5nTWVzc2FnZSIsInNob3dSZWZpbmVtZW50Qm94Iiwic2V0U2hvd1JlZmluZW1lbnRCb3giLCJoYW5kd3JpdGluZ1NhbXBsZSIsInNldEhhbmR3cml0aW5nU2FtcGxlIiwiaGFuZHdyaXRpbmdTYW1wbGVVcmwiLCJzZXRIYW5kd3JpdGluZ1NhbXBsZVVybCIsImN1cnJlbnRDYXJkSWQiLCJzZXRDdXJyZW50Q2FyZElkIiwiZGlzY29ubmVjdFdlYlNvY2tldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useCardStudioRefactored.ts\n"));

/***/ })

});