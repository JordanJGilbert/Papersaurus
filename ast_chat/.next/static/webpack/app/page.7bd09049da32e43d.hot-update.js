"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./hooks/useCardStudioRefactored.ts":
/*!******************************************!*\
  !*** ./hooks/useCardStudioRefactored.ts ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCardStudio: function() { return /* binding */ useCardStudio; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sonner */ \"(app-pages-browser)/./node_modules/sonner/dist/index.mjs\");\n/* harmony import */ var _cardStudio_useWebSocket__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cardStudio/useWebSocket */ \"(app-pages-browser)/./hooks/cardStudio/useWebSocket.ts\");\n/* harmony import */ var _cardStudio_useJobManagement__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cardStudio/useJobManagement */ \"(app-pages-browser)/./hooks/cardStudio/useJobManagement.ts\");\n/* harmony import */ var _cardStudio_useMessageGeneration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cardStudio/useMessageGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useMessageGeneration.ts\");\n/* harmony import */ var _cardStudio_useFileHandling__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cardStudio/useFileHandling */ \"(app-pages-browser)/./hooks/cardStudio/useFileHandling.ts\");\n/* harmony import */ var _cardStudio_useDraftGeneration__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./cardStudio/useDraftGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useDraftGeneration.ts\");\n/* harmony import */ var _cardStudio_useCardGeneration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./cardStudio/useCardGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useCardGeneration.ts\");\n/* harmony import */ var _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./cardStudio/constants */ \"(app-pages-browser)/./hooks/cardStudio/constants.ts\");\n/* harmony import */ var _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./cardStudio/utils */ \"(app-pages-browser)/./hooks/cardStudio/utils.ts\");\n/* __next_internal_client_entry_do_not_use__ useCardStudio auto */ \n\n// Import modular hooks\n\n\n\n\n\n\n// Import constants and utils\n\n\nfunction useCardStudio() {\n    // Core form state\n    const [prompt, setPrompt] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [toField, setToField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [fromField, setFromField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [relationshipField, setRelationshipField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedType, setSelectedType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"birthday\");\n    const [customCardType, setCustomCardType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedTone, setSelectedTone] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"funny\");\n    // Advanced options state\n    const [showAdvanced, setShowAdvanced] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [selectedArtisticStyle, setSelectedArtisticStyle] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"watercolor\");\n    const [customStyleDescription, setCustomStyleDescription] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedImageModel, setSelectedImageModel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"gpt-image-1\");\n    const [selectedDraftModel, setSelectedDraftModel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"gpt-image-1\");\n    const [fastPreviewMode, setFastPreviewMode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    // Email state\n    const [userEmail, setUserEmail] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    // Card options\n    const [numberOfCards, setNumberOfCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1);\n    const [isHandwrittenMessage, setIsHandwrittenMessage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isFrontBackOnly, setIsFrontBackOnly] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [selectedPaperSize, setSelectedPaperSize] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"standard\");\n    // UI state\n    const [isTextareaExpanded, setIsTextareaExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isMessageExpanded, setIsMessageExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showSettings, setShowSettings] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showTemplateGallery, setShowTemplateGallery] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showPrintConfirmation, setShowPrintConfirmation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showTemplateCustomization, setShowTemplateCustomization] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Restoration state\n    const [isRestoringJobs, setIsRestoringJobs] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [selectedTemplate, setSelectedTemplate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isInitialLoadComplete, setIsInitialLoadComplete] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Template state\n    const [templateSearchQuery, setTemplateSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [isSearchingTemplates, setIsSearchingTemplates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [aiFilteredCards, setAiFilteredCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [searchMode, setSearchMode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"text\");\n    const [textFilteredCards, setTextFilteredCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [showPrompts, setShowPrompts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [printOption, setPrintOption] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"physical\");\n    // Template customization state\n    const [templateCustomizations, setTemplateCustomizations] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        promptChanges: \"\",\n        messageChanges: \"\",\n        useReferenceImage: false,\n        referenceImageFile: null,\n        referenceImageUrls: [],\n        referenceImageTransformation: \"\"\n    });\n    // Section loading states\n    const [sectionLoadingStates, setSectionLoadingStates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        frontCover: \"idle\",\n        backCover: \"idle\",\n        leftInterior: \"idle\",\n        rightInterior: \"idle\"\n    });\n    // Countdown state\n    const [countdown, setCountdown] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [countdownInterval, setCountdownInterval] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    // Use modular hooks\n    const webSocket = (0,_cardStudio_useWebSocket__WEBPACK_IMPORTED_MODULE_2__.useWebSocket)();\n    const jobManagement = (0,_cardStudio_useJobManagement__WEBPACK_IMPORTED_MODULE_3__.useJobManagement)();\n    const fileHandling = (0,_cardStudio_useFileHandling__WEBPACK_IMPORTED_MODULE_5__.useFileHandling)();\n    const messageGeneration = (0,_cardStudio_useMessageGeneration__WEBPACK_IMPORTED_MODULE_4__.useMessageGeneration)(selectedType, customCardType, selectedTone, prompt, toField, fromField, relationshipField, fileHandling.photoReferences);\n    // Draft generation props\n    const draftGenerationProps = {\n        selectedType,\n        customCardType,\n        selectedTone,\n        selectedArtisticStyle,\n        customStyleDescription,\n        selectedDraftModel,\n        selectedImageModel,\n        selectedPaperSize,\n        prompt,\n        toField,\n        fromField,\n        userEmail,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        isHandwrittenMessage,\n        isFrontBackOnly,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        photoReferences: fileHandling.photoReferences,\n        relationshipField,\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        subscribeToJob: webSocket.subscribeToJob,\n        unsubscribeFromAllJobs: webSocket.unsubscribeFromAllJobs,\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking\n    };\n    const draftGeneration = (0,_cardStudio_useDraftGeneration__WEBPACK_IMPORTED_MODULE_6__.useDraftGeneration)(draftGenerationProps);\n    // Card generation props\n    const cardGenerationProps = {\n        selectedType,\n        customCardType,\n        selectedTone,\n        selectedArtisticStyle,\n        customStyleDescription,\n        selectedImageModel,\n        selectedPaperSize,\n        prompt,\n        toField,\n        fromField,\n        userEmail,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        isHandwrittenMessage,\n        isFrontBackOnly,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        photoReferences: fileHandling.photoReferences,\n        relationshipField,\n        numberOfCards,\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        removeJobFromStorage: jobManagement.removeJobFromStorage,\n        subscribeToJob: webSocket.subscribeToJob,\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking,\n        setCurrentJobId: jobManagement.setCurrentJobId,\n        setIsDraftMode: draftGeneration.setIsDraftMode,\n        setDraftCards: draftGeneration.setDraftCards,\n        setSelectedDraftIndex: draftGeneration.setSelectedDraftIndex,\n        setIsGeneratingFinalCard: draftGeneration.setIsGeneratingFinalCard,\n        setPreviewingDraftIndex: draftGeneration.setPreviewingDraftIndex,\n        setDraftCompletionShown: draftGeneration.setDraftCompletionShown,\n        setDraftCompletionCount: draftGeneration.setDraftCompletionCount\n    };\n    const cardGeneration = (0,_cardStudio_useCardGeneration__WEBPACK_IMPORTED_MODULE_7__.useCardGeneration)(cardGenerationProps);\n    // Handle job updates from WebSocket\n    const handleJobUpdate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((data)=>{\n        const { job_id, status, progress, cardData, error, completedAt } = data;\n        if (!job_id) return;\n        // Skip updates if we're still restoring jobs from localStorage\n        if (isRestoringJobs) {\n            console.log(\"⏳ Skipping job update during restoration:\", job_id);\n            return;\n        }\n        // Check if this is a draft job\n        const isDraftJob1 = job_id.startsWith(\"draft-\");\n        const draftIndex = isDraftJob1 ? parseInt(job_id.split(\"-\")[1]) : -1;\n        // Filter out updates from wrong job type\n        // If we're in draft mode, only process draft jobs\n        // If we're in final mode, only process non-draft jobs\n        const isInDraftMode = draftGeneration.isDraftMode;\n        if (isInDraftMode && !isDraftJob1) {\n            console.log(\"\\uD83D\\uDEAB Ignoring non-draft job update in draft mode:\", job_id);\n            return;\n        }\n        if (!isInDraftMode && isDraftJob1) {\n            console.log(\"\\uD83D\\uDEAB Ignoring draft job update in final mode:\", job_id);\n            return;\n        }\n        console.log(\"\\uD83D\\uDD04 Processing job update:\", {\n            job_id,\n            status,\n            isDraftJob: isDraftJob1,\n            draftIndex,\n            progress\n        });\n        // Update progress if provided\n        if (progress) {\n            // IMPORTANT: Don't show \"Generation complete!\" until we've actually processed the card\n            // This prevents the UI from showing completion before the card is ready\n            if (progress.includes(\"Generation complete!\") && status === \"completed\" && !isDraftJob1) {\n                console.log('⏸️ Holding \"Generation complete!\" message until card is processed');\n            // Don't update the progress message yet - it will be set in handleFinalCardCompletion\n            } else {\n                cardGeneration.setGenerationProgress(progress);\n                draftGeneration.setGenerationProgress(progress);\n                console.log(\"\\uD83D\\uDCCA Progress message: \".concat(progress));\n            }\n        }\n        if (status === \"completed\" && cardData) {\n            console.log(\"\\uD83C\\uDF89 Job completed! Card data:\", cardData, \"isDraftJob:\", isDraftJob1);\n            if (isDraftJob1 && draftIndex >= 0) {\n                var _cardData_generatedPrompts;\n                // Handle draft card completion\n                console.log(\"\\uD83C\\uDFA8 Draft variation \".concat(draftIndex + 1, \" completed!\"));\n                // Get style info for smart style mode\n                let styleInfo = undefined;\n                if (selectedArtisticStyle === \"ai-smart-style\") {\n                    const predefinedStyles = [\n                        \"watercolor\",\n                        \"botanical\",\n                        \"comic-book\",\n                        \"dreamy-fantasy\",\n                        \"minimalist\"\n                    ];\n                    const styleLabels = [\n                        \"\\uD83C\\uDFA8 Watercolor\",\n                        \"\\uD83C\\uDF3F Botanical\",\n                        \"\\uD83D\\uDCA5 Comic Book\",\n                        \"\\uD83C\\uDF38 Dreamy Fantasy\",\n                        \"✨ Minimalist\"\n                    ];\n                    if (draftIndex >= 0 && draftIndex < predefinedStyles.length) {\n                        styleInfo = {\n                            styleName: predefinedStyles[draftIndex],\n                            styleLabel: styleLabels[draftIndex]\n                        };\n                    }\n                }\n                const draftCard = {\n                    id: \"draft-\".concat(draftIndex + 1, \"-\").concat(Date.now()),\n                    prompt: cardData.prompt || \"Draft Variation \".concat(draftIndex + 1),\n                    frontCover: cardData.frontCover || \"\",\n                    backCover: \"\",\n                    leftPage: \"\",\n                    rightPage: \"\",\n                    createdAt: new Date(),\n                    generatedPrompts: {\n                        frontCover: ((_cardData_generatedPrompts = cardData.generatedPrompts) === null || _cardData_generatedPrompts === void 0 ? void 0 : _cardData_generatedPrompts.frontCover) || \"\"\n                    },\n                    styleInfo: styleInfo\n                };\n                // Simplified draft tracking - use fixed array positions\n                draftGeneration.setDraftCards((prev)=>{\n                    const updated = [\n                        ...prev\n                    ];\n                    // Ensure array has 5 slots\n                    while(updated.length < 5){\n                        updated.push(null);\n                    }\n                    // Place draft at its correct index\n                    updated[draftIndex] = draftCard;\n                    console.log(\"✅ Draft \".concat(draftIndex + 1, \" completed and stored at index \").concat(draftIndex));\n                    // Save draft to localStorage with expiration\n                    if (true) {\n                        try {\n                            const jobData = localStorage.getItem(\"cardJob_\".concat(job_id));\n                            if (jobData) {\n                                const job = JSON.parse(jobData);\n                                job.draftCards = [\n                                    draftCard\n                                ];\n                                job.draftIndex = draftIndex;\n                                job.lastUpdate = Date.now();\n                                job.expiresAt = Date.now() + 30 * 24 * 60 * 60 * 1000; // 30 days\n                                localStorage.setItem(\"cardJob_\".concat(job_id), JSON.stringify(job));\n                            }\n                        } catch (error) {\n                            console.error(\"Failed to save draft:\", error);\n                        }\n                    }\n                    return updated;\n                });\n                // Simplified completion tracking - count the updated array including the new draft\n                const updatedDrafts = [\n                    ...draftGeneration.draftCards\n                ];\n                updatedDrafts[draftIndex] = draftCard;\n                const completedCount = updatedDrafts.filter(Boolean).length;\n                console.log(\"\\uD83D\\uDCCA Draft progress: \".concat(completedCount, \"/5 variations complete\"));\n                // Update progress\n                const progressMsg = completedCount === 5 ? \"All 5 variations ready! Choose your favorite below.\" : \"\".concat(completedCount, \"/5 variations complete...\").concat(completedCount >= 2 ? \" You can select one now!\" : \"\");\n                draftGeneration.setGenerationProgress(progressMsg);\n                // Override time-based progress with real progress when drafts complete\n                // Don't override time-based progress\n                console.log(\"\\uD83C\\uDFA8 Draft \".concat(completedCount, \"/5 completed\"));\n                // Handle milestones\n                if (completedCount === 1) {\n                    (0,_cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.scrollToCardPreview)();\n                }\n                if (completedCount === 5 && !draftGeneration.isGeneratingFinalCard) {\n                    draftGeneration.setIsGenerating(false);\n                    jobManagement.stopElapsedTimeTracking();\n                    sonner__WEBPACK_IMPORTED_MODULE_1__.toast.success(\"\\uD83C\\uDFA8 All 5 front cover variations ready! Choose your favorite below.\");\n                }\n                // Keep draft jobs in storage for later retrieval\n                // Only unsubscribe from WebSocket\n                webSocket.unsubscribeFromJob(job_id);\n                console.log(\"✅ Keeping draft job \".concat(job_id, \" in storage for future access\"));\n            } else {\n                // Handle final card completion\n                console.log(\"\\uD83D\\uDD0D Final card completion detected. Card data structure:\", {\n                    hasCardData: !!cardData,\n                    cardDataKeys: Object.keys(cardData || {}),\n                    frontCover: (cardData === null || cardData === void 0 ? void 0 : cardData.frontCover) ? \"Present\" : \"Missing\",\n                    backCover: (cardData === null || cardData === void 0 ? void 0 : cardData.backCover) ? \"Present\" : \"Missing\",\n                    leftInterior: (cardData === null || cardData === void 0 ? void 0 : cardData.leftInterior) ? \"Present\" : \"Missing\",\n                    rightInterior: (cardData === null || cardData === void 0 ? void 0 : cardData.rightInterior) ? \"Present\" : \"Missing\",\n                    leftPage: (cardData === null || cardData === void 0 ? void 0 : cardData.leftPage) ? \"Present\" : \"Missing\",\n                    rightPage: (cardData === null || cardData === void 0 ? void 0 : cardData.rightPage) ? \"Present\" : \"Missing\"\n                });\n                console.log(\"\\uD83D\\uDCDD Full card data:\", JSON.stringify(cardData, null, 2));\n                // Map backend field names to frontend field names\n                const mappedCardData = {\n                    ...cardData,\n                    leftInterior: cardData.leftInterior || cardData.leftPage,\n                    rightInterior: cardData.rightInterior || cardData.rightPage,\n                    // Keep original fields for backward compatibility\n                    leftPage: cardData.leftPage || cardData.leftInterior,\n                    rightPage: cardData.rightPage || cardData.rightInterior\n                };\n                console.log(\"\\uD83D\\uDD04 Mapped card data for frontend compatibility:\", {\n                    frontCover: mappedCardData.frontCover ? \"Present\" : \"Missing\",\n                    backCover: mappedCardData.backCover ? \"Present\" : \"Missing\",\n                    leftInterior: mappedCardData.leftInterior ? \"Present\" : \"Missing\",\n                    rightInterior: mappedCardData.rightInterior ? \"Present\" : \"Missing\"\n                });\n                // Call the completion handler\n                console.log(\"\\uD83D\\uDE80 Calling handleFinalCardCompletion...\");\n                cardGeneration.handleFinalCardCompletion(mappedCardData);\n                // Save final card metadata to localStorage for recovery (without large images)\n                try {\n                    const finalCardMetadata = {\n                        jobId: job_id,\n                        completedAt: Date.now(),\n                        isFinalCard: true,\n                        prompt: cardData.prompt,\n                        id: cardData.id,\n                        createdAt: cardData.createdAt,\n                        // Don't save base64 images to avoid quota issues\n                        hasImages: {\n                            frontCover: !!cardData.frontCover,\n                            backCover: !!cardData.backCover,\n                            leftPage: !!cardData.leftPage,\n                            rightPage: !!cardData.rightPage\n                        }\n                    };\n                    localStorage.setItem(\"lastCompletedCard\", JSON.stringify(finalCardMetadata));\n                    console.log(\"\\uD83D\\uDCBE Saved final card metadata to localStorage (without images)\");\n                } catch (error) {\n                    console.error(\"Failed to save final card metadata:\", error);\n                }\n                jobManagement.removeJobFromStorage(job_id);\n                jobManagement.setCurrentJobId(null);\n                webSocket.unsubscribeFromJob(job_id);\n            }\n        } else if (status === \"failed\") {\n            console.error(\"❌ Job failed:\", error);\n            if (isDraftJob1 && draftIndex >= 0) {\n                sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Draft variation \".concat(draftIndex + 1, \" failed. Continuing with others...\"));\n            } else {\n                sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"❌ Card generation failed. Please try again.\");\n                cardGeneration.setIsGenerating(false);\n                draftGeneration.setIsGeneratingFinalCard(false);\n                jobManagement.stopElapsedTimeTracking();\n                cardGeneration.setGenerationProgress(\"\");\n                // Don't reset progress - let time-based progress continue\n                // jobManagement.setProgressPercentage(0);\n                jobManagement.setCurrentJobId(null);\n                webSocket.unsubscribeFromJob(job_id);\n            }\n            jobManagement.removeJobFromStorage(job_id);\n        } else if (status === \"not_found\") {\n            console.warn(\"⚠️ Job not found on server, cleaning up stale reference:\", job_id);\n            // Clean up stale job reference\n            if (webSocket.currentJobRef.current === job_id) {\n                webSocket.currentJobRef.current = null;\n            }\n            // Reset UI state if this was the current job\n            if (jobManagement.currentJobId === job_id) {\n                jobManagement.setCurrentJobId(null);\n                cardGeneration.setIsGenerating(false);\n                draftGeneration.setIsGeneratingFinalCard(false);\n                cardGeneration.setGenerationProgress(\"\");\n                // Don't reset progress - let time-based progress continue\n                // jobManagement.setProgressPercentage(0);\n                jobManagement.stopElapsedTimeTracking();\n            }\n            // Clean up storage\n            jobManagement.removeJobFromStorage(job_id);\n            webSocket.unsubscribeFromJob(job_id);\n        }\n    }, [\n        selectedArtisticStyle,\n        draftGeneration,\n        cardGeneration,\n        jobManagement,\n        webSocket,\n        isRestoringJobs\n    ]);\n    // Set up WebSocket job update handler\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        webSocket.setJobUpdateHandler(handleJobUpdate);\n    }, [\n        webSocket,\n        handleJobUpdate\n    ]);\n    // Track if we've already logged the stale job message\n    const staleJobLoggedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    // Auto-reconnect WebSocket if disconnected during active generation\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!webSocket.isSocketConnected && (cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) && webSocket.currentJobRef.current) {\n            // Check if the generation has been running for more than 5 minutes\n            if (jobManagement.generationStartTime) {\n                const jobAge = Date.now() - jobManagement.generationStartTime;\n                if (jobAge > 5 * 60 * 1000) {\n                    if (!staleJobLoggedRef.current) {\n                        console.log(\"⏰ Job is older than 5 minutes, stopping reconnection attempts\");\n                        staleJobLoggedRef.current = true;\n                        // Clean up stale job\n                        const jobId = webSocket.currentJobRef.current;\n                        if (jobId) {\n                            console.log(\"\\uD83E\\uDDF9 Cleaning up stale job:\", jobId);\n                            // Remove from localStorage (only if not a draft job)\n                            if (!jobId.startsWith(\"draft-\")) {\n                                jobManagement.removeJobFromStorage(jobId);\n                            }\n                            // Reset generation states\n                            cardGeneration.setIsGenerating(false);\n                            draftGeneration.setIsGeneratingFinalCard(false);\n                            draftGeneration.setIsDraftMode(false);\n                            draftGeneration.setDraftCards([]);\n                            draftGeneration.setDraftCompletionCount(0);\n                            draftGeneration.setDraftCompletionShown(false);\n                            jobManagement.setCurrentJobId(null);\n                            jobManagement.setGenerationProgress(\"\");\n                            // Don't reset progress - let time-based progress continue\n                            // jobManagement.setProgressPercentage(0);\n                            jobManagement.stopElapsedTimeTracking();\n                            // Unsubscribe from job\n                            webSocket.unsubscribeFromJob(jobId);\n                            // Show error toast\n                            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Card generation timed out. Please try again.\");\n                        }\n                    }\n                    return;\n                }\n            }\n            console.log(\"\\uD83D\\uDD04 WebSocket disconnected during generation, attempting reconnect...\");\n            const reconnectTimer = setTimeout(()=>{\n                webSocket.connectWebSocket();\n                // Re-subscribe to current job after reconnection\n                const jobId = webSocket.currentJobRef.current;\n                if (jobId) {\n                    setTimeout(()=>{\n                        console.log(\"\\uD83D\\uDCE1 Re-subscribing to job after reconnect:\", jobId);\n                        webSocket.subscribeToJob(jobId);\n                    }, 1000);\n                }\n            }, 2000);\n            return ()=>clearTimeout(reconnectTimer);\n        }\n    }, [\n        webSocket,\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard,\n        jobManagement.generationStartTime\n    ]);\n    // Reset stale job flag when generation starts\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) {\n            staleJobLoggedRef.current = false;\n        }\n    }, [\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard\n    ]);\n    // Monitor for stale job updates\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if ((cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) && webSocket.currentJobRef.current) {\n            const checkInterval = setInterval(async ()=>{\n                const timeSinceLastUpdate = Date.now() - webSocket.lastJobUpdateRef.current;\n                const jobId = webSocket.currentJobRef.current;\n                // Very aggressive checking when at 95%+ progress\n                if (jobManagement.progressPercentage >= 95 && timeSinceLastUpdate > 5000) {\n                    console.warn(\"⚠️ No updates for \".concat(Math.round(timeSinceLastUpdate / 1000), \"s at \").concat(jobManagement.progressPercentage, \"% progress - checking job status...\"));\n                    if (jobId) {\n                        try {\n                            const response = await fetch(\"/api/job-status/\".concat(jobId));\n                            if (response.ok) {\n                                const jobStatus = await response.json();\n                                console.log(\"\\uD83D\\uDCCA Direct job status check:\", jobStatus);\n                                if (jobStatus.status === \"completed\" && jobStatus.cardData) {\n                                    console.log(\"✅ Job is actually completed! Processing result...\");\n                                    handleJobUpdate({\n                                        job_id: jobId,\n                                        status: \"completed\",\n                                        progress: \"Card generation complete!\",\n                                        cardData: jobStatus.cardData\n                                    });\n                                    return; // Exit early on completion\n                                }\n                            }\n                        } catch (error) {\n                            console.error(\"Failed to check job status:\", error);\n                        }\n                    }\n                } else if (jobManagement.progressPercentage >= 90 && timeSinceLastUpdate > 10000) {\n                    console.warn(\"⚠️ No updates for \".concat(Math.round(timeSinceLastUpdate / 1000), \"s at \").concat(jobManagement.progressPercentage, \"% progress\"));\n                    if (jobId) {\n                        try {\n                            const response = await fetch(\"/api/job-status/\".concat(jobId));\n                            if (response.ok) {\n                                const jobStatus = await response.json();\n                                console.log(\"\\uD83D\\uDCCA Direct job status check:\", jobStatus);\n                                if (jobStatus.status === \"completed\" && jobStatus.cardData) {\n                                    console.log(\"✅ Job is actually completed! Processing result...\");\n                                    handleJobUpdate({\n                                        job_id: jobId,\n                                        status: \"completed\",\n                                        progress: \"Card generation complete!\",\n                                        cardData: jobStatus.cardData\n                                    });\n                                    return; // Exit early on completion\n                                }\n                            }\n                        } catch (error) {\n                            console.error(\"Failed to check job status:\", error);\n                        }\n                    }\n                }\n                // Standard stale update check\n                if (timeSinceLastUpdate > 30000) {\n                    console.warn(\"⚠️ No job updates for 30 seconds, checking connection...\");\n                    if (!webSocket.isSocketConnected) {\n                        console.log(\"\\uD83D\\uDD04 WebSocket disconnected, reconnecting...\");\n                        webSocket.connectWebSocket();\n                    } else if (jobId) {\n                        console.log(\"\\uD83D\\uDCE1 Re-subscribing to job due to stale updates:\", jobId);\n                        webSocket.subscribeToJob(jobId);\n                    }\n                    // Reset the timer\n                    webSocket.lastJobUpdateRef.current = Date.now();\n                }\n            }, 3000); // Check every 3 seconds for faster detection at high progress\n            return ()=>clearInterval(checkInterval);\n        }\n    }, [\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard,\n        webSocket,\n        jobManagement.progressPercentage,\n        handleJobUpdate\n    ]);\n    // OLD: Complex job restoration - keeping for reference but not using\n    const checkPendingJobs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        console.log(\"\\uD83D\\uDD04 Starting job restoration...\");\n        setIsRestoringJobs(true);\n        const pendingJobs = await jobManagement.checkPendingJobs();\n        if (pendingJobs.length === 0) {\n            console.log(\"✅ No pending jobs to restore\");\n            setIsRestoringJobs(false);\n            return;\n        }\n        console.log(\"\\uD83D\\uDD04 Found pending jobs to restore:\", pendingJobs);\n        // Separate draft jobs from final jobs\n        const draftJobs = pendingJobs.filter((param)=>{\n            let { jobId } = param;\n            return jobId.startsWith(\"draft-\");\n        });\n        const finalJobs = pendingJobs.filter((param)=>{\n            let { jobId } = param;\n            return !jobId.startsWith(\"draft-\");\n        });\n        // Process draft jobs first to restore draft state\n        if (draftJobs.length > 0) {\n            console.log(\"\\uD83C\\uDFA8 Found \".concat(draftJobs.length, \" draft jobs to restore\"));\n            // Collect all draft cards from all draft jobs\n            const draftsByIndex = new Array(5).fill(null);\n            for (const { job } of draftJobs){\n                if (job.draftCards && Array.isArray(job.draftCards) && job.draftCards.length > 0) {\n                    const draftCard = job.draftCards[0]; // Each job stores one draft\n                    const draftIndex = job.draftIndex;\n                    if (draftIndex >= 0 && draftIndex < 5) {\n                        draftsByIndex[draftIndex] = draftCard;\n                    }\n                }\n            }\n            // Get non-null drafts for counting\n            const allDraftCards = draftsByIndex.filter(Boolean);\n            // Restore all draft cards at once\n            if (allDraftCards.length > 0) {\n                console.log(\"\\uD83D\\uDD04 Restoring \".concat(allDraftCards.length, \" draft cards from \").concat(draftJobs.length, \" jobs\"));\n                // Only set draft mode when we have actual cards\n                console.log(\"\\uD83C\\uDFAF Setting isDraftMode to true - draft cards found\");\n                draftGeneration.setIsDraftMode(true);\n                // Use the draftsByIndex which already has drafts at correct positions\n                draftGeneration.setDraftCards(draftsByIndex);\n                draftGeneration.setDraftCompletionCount(allDraftCards.length);\n                // Set appropriate progress state\n                if (allDraftCards.length === 5) {\n                    draftGeneration.setDraftCompletionShown(true);\n                    draftGeneration.setIsGenerating(false);\n                    cardGeneration.setIsGenerating(false);\n                    draftGeneration.setGenerationProgress(\"\");\n                    cardGeneration.setGenerationProgress(\"\");\n                // Time-based progress will be cleared above\n                } else {\n                    draftGeneration.setIsGenerating(true);\n                    cardGeneration.setIsGenerating(true);\n                    const progressMsg = \"✨ \".concat(allDraftCards.length, \"/5 front cover variations complete... \").concat(allDraftCards.length >= 2 ? \"You can select one now to proceed!\" : \"\");\n                    draftGeneration.setGenerationProgress(progressMsg);\n                    cardGeneration.setGenerationProgress(progressMsg);\n                // Don't override time-based progress\n                }\n            }\n            // If no draft cards were found but we have draft jobs, set appropriate state\n            if (allDraftCards.length === 0 && draftJobs.length > 0) {\n                console.log(\"\\uD83D\\uDD04 Draft jobs found but no cards yet - setting generation state\");\n                // Set draft mode and initialize empty array for draft jobs in progress\n                draftGeneration.setIsDraftMode(true);\n                draftGeneration.setDraftCards([\n                    null,\n                    null,\n                    null,\n                    null,\n                    null\n                ]);\n                draftGeneration.setIsGenerating(true);\n                cardGeneration.setIsGenerating(true);\n                draftGeneration.setGenerationProgress(\"\\uD83C\\uDFA8 Creating 5 front cover variations for you to choose from...\");\n                cardGeneration.setGenerationProgress(\"\\uD83C\\uDFA8 Creating 5 front cover variations for you to choose from...\");\n            // Don't reset progress - let time-based progress continue\n            // jobManagement.setProgressPercentage(0);\n            }\n            // Subscribe to all non-stale draft jobs\n            for (const { jobId, job } of draftJobs){\n                const jobAge = Date.now() - (job.createdAt || Date.now());\n                const isStale = jobAge > 5 * 60 * 1000;\n                if (!isStale) {\n                    var _job_draftCards;\n                    console.log(\"\\uD83D\\uDCE1 Subscribing to draft job: \".concat(jobId, \" (has \").concat(((_job_draftCards = job.draftCards) === null || _job_draftCards === void 0 ? void 0 : _job_draftCards.length) || 0, \" cards)\"));\n                    webSocket.subscribeToJob(jobId);\n                }\n            }\n        }\n        // Process remaining jobs (final card generation)\n        for (const { jobId, job } of finalJobs){\n            console.log(\"\\uD83D\\uDCCB Processing job \".concat(jobId, \":\"), {\n                isDraft: jobId.startsWith(\"draft-\"),\n                status: job.status,\n                hasProgress: !!job.lastProgress,\n                createdAt: job.createdAt\n            });\n            // Check if job is stale (older than 5 minutes without completion)\n            const jobAge = Date.now() - (job.createdAt || Date.now());\n            const isStale = jobAge > 5 * 60 * 1000 && job.status !== \"completed\";\n            if (isStale) {\n                console.log(\"\\uD83E\\uDDF9 Cleaning up stale job: \".concat(jobId, \" (age: \").concat(Math.round(jobAge / 1000), \"s)\"));\n                jobManagement.removeJobFromStorage(jobId);\n                continue;\n            }\n            // Restore progress and state\n            // Don't restore progress - let time-based progress handle it\n            // if (job.lastProgress !== undefined) {\n            //   jobManagement.setProgressPercentage(job.lastProgress);\n            //   cardGeneration.setProgressPercentage(job.lastProgress);\n            //   draftGeneration.setProgressPercentage(job.lastProgress);\n            // }\n            // Only restore progress text if the job is not completed\n            // This prevents showing \"Generation complete! (100%)\" from old completed jobs\n            if (job.lastProgressText && job.status !== \"completed\") {\n                jobManagement.setGenerationProgress(job.lastProgressText);\n                cardGeneration.setGenerationProgress(job.lastProgressText);\n                draftGeneration.setGenerationProgress(job.lastProgressText);\n            }\n            // Restore final card generation state\n            cardGeneration.setIsGenerating(true);\n            draftGeneration.setIsGeneratingFinalCard(true);\n            // If we have a selected draft, restore it\n            if (job.selectedDraftIndex !== undefined) {\n                draftGeneration.setSelectedDraftIndex(job.selectedDraftIndex);\n            }\n            jobManagement.setCurrentJobId(jobId);\n            // Calculate elapsed time since job started\n            const jobStartTime = job.createdAt || Date.now();\n            const elapsedSinceStart = (Date.now() - jobStartTime) / 1000;\n            // Start elapsed time tracking\n            jobManagement.startElapsedTimeTracking();\n            // Subscribe to the job updates\n            webSocket.subscribeToJob(jobId);\n            // Verify job exists on backend\n            try {\n                const response = await fetch(\"\".concat(BACKEND_API_BASE_URL, \"/api/job-status/\").concat(jobId));\n                const result = await response.json();\n                console.log(\"\\uD83D\\uDCE1 Job status check for \".concat(jobId, \":\"), {\n                    ok: response.ok,\n                    status: response.status,\n                    resultStatus: result.status,\n                    url: \"\".concat(BACKEND_API_BASE_URL, \"/api/job-status/\").concat(jobId)\n                });\n                if (result.status === \"not_found\") {\n                    // Job doesn't exist on backend, clean up and notify user\n                    console.log(\"⚠️ Job \".concat(jobId, \" not found on backend, cleaning up...\"));\n                    jobManagement.removeJobFromStorage(jobId);\n                    // Reset generation state\n                    if (isDraftJob) {\n                        draftGeneration.setIsGenerating(false);\n                    } else {\n                        cardGeneration.setIsGenerating(false);\n                        draftGeneration.setIsGeneratingFinalCard(false);\n                    }\n                    // Show helpful message to user\n                    sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Previous \".concat(isDraftJob ? \"draft\" : \"card\", \" generation expired. Please start a new one.\"), {\n                        duration: 5000\n                    });\n                    continue;\n                } else {\n                    // Job exists, show resuming message\n                    sonner__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Resuming \".concat(isDraftJob ? \"draft\" : \"card\", \" generation...\"));\n                }\n            } catch (error) {\n                console.error(\"Failed to verify job status:\", error);\n                // Continue anyway, WebSocket will handle it\n                sonner__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Attempting to resume \".concat(isDraftJob ? \"draft\" : \"card\", \" generation...\"));\n            }\n        }\n        // Restoration complete - allow WebSocket updates to be processed\n        // Add a small delay to ensure state updates have propagated\n        setTimeout(()=>{\n            console.log(\"✅ Job restoration complete, allowing WebSocket updates\");\n            setIsRestoringJobs(false);\n        }, 100);\n    }, [\n        jobManagement,\n        cardGeneration,\n        draftGeneration,\n        webSocket\n    ]);\n    // Load most recent draft batch and final card on component mount\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        console.log(\"\\uD83D\\uDE80 useCardStudio mounted, loading recent cards...\");\n        // Check for completed final card first\n        try {\n            const savedFinalCard = localStorage.getItem(\"lastCompletedCard\");\n            if (savedFinalCard) {\n                const finalCard = JSON.parse(savedFinalCard);\n                console.log(\"\\uD83D\\uDCBE Found saved final card:\", finalCard);\n                // Restore final card state\n                cardGeneration.setGeneratedCard(finalCard);\n                cardGeneration.setGeneratedCards([\n                    finalCard\n                ]);\n                cardGeneration.setIsCardCompleted(true);\n                draftGeneration.setIsDraftMode(false);\n                // Clear the saved card after restoring\n                localStorage.removeItem(\"lastCompletedCard\");\n                console.log(\"✅ Restored final card from localStorage\");\n                return; // Don't load drafts if we have a final card\n            }\n        } catch (error) {\n            console.error(\"Failed to restore final card:\", error);\n        }\n        // If no final card, check for drafts\n        // First, clear any existing draft state to avoid duplicates\n        draftGeneration.setDraftCards([]);\n        draftGeneration.setDraftCompletionCount(0);\n        const recentDrafts = jobManagement.loadMostRecentDraftBatch();\n        console.log(\"\\uD83D\\uDCCA Draft batch result:\", recentDrafts);\n        if (recentDrafts && recentDrafts.cards.length > 0) {\n            console.log(\"\\uD83D\\uDCCB Found recent draft batch with \".concat(recentDrafts.count, \" cards from \").concat(new Date(recentDrafts.createdAt).toLocaleString()));\n            // Set the draft cards and enable draft mode\n            draftGeneration.setDraftCards(recentDrafts.cards);\n            draftGeneration.setIsDraftMode(true);\n            draftGeneration.setDraftCompletionCount(recentDrafts.count);\n            // If we have all 5 cards, mark as complete\n            if (recentDrafts.count === 5) {\n                draftGeneration.setDraftCompletionShown(true);\n                draftGeneration.setIsGenerating(false);\n                cardGeneration.setIsGenerating(false);\n            } else {\n                // Still generating - set generation state and start timer\n                draftGeneration.setIsGenerating(true);\n                cardGeneration.setIsGenerating(true);\n                // Calculate how long generation has been running\n                const elapsedSeconds = Math.floor((Date.now() - recentDrafts.createdAt) / 1000);\n                jobManagement.setCurrentElapsedTime(elapsedSeconds);\n                jobManagement.startElapsedTimeTracking();\n                // Set progress\n                const progressMsg = \"✨ \".concat(recentDrafts.count, \"/5 front cover variations complete...\");\n                draftGeneration.setGenerationProgress(progressMsg);\n                cardGeneration.setGenerationProgress(progressMsg);\n                // Don't override time-based progress\n                // Check for pending jobs to subscribe to\n                const pendingJobs = JSON.parse(localStorage.getItem(\"pendingCardJobs\") || \"[]\");\n                const activeDraftJobs = pendingJobs.filter((id)=>id.startsWith(\"draft-\"));\n                // Subscribe to active draft jobs for real-time updates\n                activeDraftJobs.forEach((jobId)=>{\n                    console.log(\"\\uD83D\\uDCE1 Subscribing to active draft job: \".concat(jobId));\n                    webSocket.subscribeToJob(jobId);\n                });\n            }\n        }\n        // Mark restoration as complete after a small delay\n        setTimeout(()=>{\n            setIsRestoringJobs(false);\n        }, 100);\n    }, []);\n    // Return all the state and functions that the UI needs\n    return {\n        // Core state\n        prompt,\n        setPrompt,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        setFinalCardMessage: messageGeneration.setFinalCardMessage,\n        toField,\n        setToField,\n        fromField,\n        setFromField,\n        relationshipField,\n        setRelationshipField,\n        selectedType,\n        setSelectedType,\n        customCardType,\n        setCustomCardType,\n        selectedTone,\n        setSelectedTone,\n        isGenerating: cardGeneration.isGenerating || draftGeneration.isGenerating,\n        setIsGenerating: cardGeneration.setIsGenerating,\n        isGeneratingMessage: messageGeneration.isGeneratingMessage,\n        setIsGeneratingMessage: messageGeneration.setIsGeneratingMessage,\n        generatedCard: cardGeneration.generatedCard,\n        setGeneratedCard: cardGeneration.setGeneratedCard,\n        numberOfCards,\n        setNumberOfCards,\n        generatedCards: cardGeneration.generatedCards,\n        setGeneratedCards: cardGeneration.setGeneratedCards,\n        selectedCardIndex: cardGeneration.selectedCardIndex,\n        setSelectedCardIndex: cardGeneration.setSelectedCardIndex,\n        // Advanced options\n        showAdvanced,\n        setShowAdvanced,\n        selectedArtisticStyle,\n        setSelectedArtisticStyle,\n        customStyleDescription,\n        setCustomStyleDescription,\n        selectedImageModel,\n        setSelectedImageModel,\n        selectedDraftModel,\n        setSelectedDraftModel,\n        // Draft mode\n        isDraftMode: draftGeneration.isDraftMode,\n        setIsDraftMode: draftGeneration.setIsDraftMode,\n        draftCards: draftGeneration.draftCards,\n        setDraftCards: draftGeneration.setDraftCards,\n        selectedDraftIndex: draftGeneration.selectedDraftIndex,\n        setSelectedDraftIndex: draftGeneration.setSelectedDraftIndex,\n        isGeneratingFinalCard: draftGeneration.isGeneratingFinalCard,\n        setIsGeneratingFinalCard: draftGeneration.setIsGeneratingFinalCard,\n        previewingDraftIndex: draftGeneration.previewingDraftIndex,\n        setPreviewingDraftIndex: draftGeneration.setPreviewingDraftIndex,\n        draftCompletionShown: draftGeneration.draftCompletionShown,\n        setDraftCompletionShown: draftGeneration.setDraftCompletionShown,\n        draftCompletionCount: draftGeneration.draftCompletionCount,\n        setDraftCompletionCount: draftGeneration.setDraftCompletionCount,\n        // Progress tracking\n        generationProgress: draftGeneration.isGenerating ? draftGeneration.generationProgress : cardGeneration.generationProgress,\n        setGenerationProgress: cardGeneration.setGenerationProgress,\n        progressPercentage: jobManagement.progressPercentage,\n        isCardCompleted: cardGeneration.isCardCompleted,\n        setIsCardCompleted: cardGeneration.setIsCardCompleted,\n        // Upload and personalization\n        referenceImages: fileHandling.referenceImages,\n        setReferenceImages: fileHandling.setReferenceImages,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        setReferenceImageUrls: fileHandling.setReferenceImageUrls,\n        imageTransformation: fileHandling.imageTransformation,\n        setImageTransformation: fileHandling.setImageTransformation,\n        isUploading: fileHandling.isUploading,\n        setIsUploading: fileHandling.setIsUploading,\n        // Email and settings\n        userEmail,\n        setUserEmail,\n        isHandwrittenMessage,\n        setIsHandwrittenMessage,\n        isFrontBackOnly,\n        setIsFrontBackOnly,\n        selectedPaperSize,\n        setSelectedPaperSize,\n        // UI state\n        isTextareaExpanded,\n        setIsTextareaExpanded,\n        isMessageExpanded,\n        setIsMessageExpanded,\n        showSettings,\n        setShowSettings,\n        showTemplateGallery,\n        setShowTemplateGallery,\n        showPrintConfirmation,\n        setShowPrintConfirmation,\n        // Generation time\n        generationDuration: cardGeneration.generationDuration,\n        setGenerationDuration: cardGeneration.setGenerationDuration,\n        currentElapsedTime: jobManagement.currentElapsedTime,\n        setCurrentElapsedTime: jobManagement.setCurrentElapsedTime,\n        // Helper functions\n        formatGenerationTime: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.formatGenerationTime,\n        formatCountdown: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.formatCountdown,\n        sendThankYouEmail: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.sendThankYouEmail,\n        chatWithAI: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.chatWithAI,\n        scrollToCardPreview: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.scrollToCardPreview,\n        // Time tracking functions\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking,\n        // File handling functions\n        handleFileUpload: fileHandling.handleFileUpload,\n        handleRemoveReferenceImage: fileHandling.handleRemoveReferenceImage,\n        // Simplified photo references\n        photoReferences: fileHandling.photoReferences,\n        setPhotoReferences: fileHandling.setPhotoReferences,\n        updatePhotoDescription: fileHandling.updatePhotoDescription,\n        // Message functions\n        handleGetMessageHelp: messageGeneration.handleGetMessageHelp,\n        addMessageToHistory: messageGeneration.addMessageToHistory,\n        undoMessage: messageGeneration.undoMessage,\n        redoMessage: messageGeneration.redoMessage,\n        // Job management\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        removeJobFromStorage: jobManagement.removeJobFromStorage,\n        checkPendingJobs,\n        // Main generation functions\n        handleGenerateCardAsync: cardGeneration.handleGenerateCardAsync,\n        handleGenerateDraftCards: draftGeneration.handleGenerateDraftCards,\n        handleGenerateFinalFromDraft: draftGeneration.handleGenerateFinalFromDraft,\n        // Additional state for message refinement\n        messageHistory: messageGeneration.messageHistory,\n        setMessageHistory: messageGeneration.setMessageHistory,\n        currentMessageIndex: messageGeneration.currentMessageIndex,\n        setCurrentMessageIndex: messageGeneration.setCurrentMessageIndex,\n        refinementPrompt: messageGeneration.refinementPrompt,\n        setRefinementPrompt: messageGeneration.setRefinementPrompt,\n        isRefiningMessage: messageGeneration.isRefiningMessage,\n        setIsRefiningMessage: messageGeneration.setIsRefiningMessage,\n        showRefinementBox: messageGeneration.showRefinementBox,\n        setShowRefinementBox: messageGeneration.setShowRefinementBox,\n        // Template state\n        showTemplateCustomization,\n        setShowTemplateCustomization,\n        selectedTemplate,\n        setSelectedTemplate,\n        templateCustomizations,\n        setTemplateCustomizations,\n        templateSearchQuery,\n        setTemplateSearchQuery,\n        isSearchingTemplates,\n        setIsSearchingTemplates,\n        aiFilteredCards,\n        setAiFilteredCards,\n        searchMode,\n        setSearchMode,\n        textFilteredCards,\n        setTextFilteredCards,\n        showPrompts,\n        setShowPrompts,\n        // Print state\n        printOption,\n        setPrintOption,\n        // Additional draft mode state\n        handwritingSample: fileHandling.handwritingSample,\n        setHandwritingSample: fileHandling.setHandwritingSample,\n        handwritingSampleUrl: fileHandling.handwritingSampleUrl,\n        setHandwritingSampleUrl: fileHandling.setHandwritingSampleUrl,\n        // Job tracking\n        currentJobId: jobManagement.currentJobId,\n        setCurrentJobId: jobManagement.setCurrentJobId,\n        countdown,\n        setCountdown,\n        countdownInterval,\n        setCountdownInterval,\n        // Section loading states\n        sectionLoadingStates,\n        setSectionLoadingStates,\n        // Fast preview mode\n        fastPreviewMode,\n        setFastPreviewMode,\n        // Additional tracking\n        currentCardId: cardGeneration.currentCardId,\n        setCurrentCardId: cardGeneration.setCurrentCardId,\n        isInitialLoadComplete,\n        setIsInitialLoadComplete,\n        // Elapsed time tracking\n        generationStartTime: jobManagement.generationStartTime,\n        setGenerationStartTime: jobManagement.setGenerationStartTime,\n        elapsedTimeInterval: jobManagement.elapsedTimeInterval,\n        setElapsedTimeInterval: jobManagement.setElapsedTimeInterval,\n        // Constants for UI\n        cardTones: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.cardTones,\n        artisticStyles: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.artisticStyles,\n        paperSizes: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.paperSizes,\n        // WebSocket functions and state\n        isSocketConnected: webSocket.isSocketConnected,\n        connectWebSocket: webSocket.connectWebSocket,\n        disconnectWebSocket: webSocket.disconnectWebSocket,\n        subscribeToJob: webSocket.subscribeToJob,\n        unsubscribeFromJob: webSocket.unsubscribeFromJob,\n        handleJobUpdate,\n        handleFinalCardCompletion: cardGeneration.handleFinalCardCompletion\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZUNhcmRTdHVkaW9SZWZhY3RvcmVkLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OzttRUFFaUU7QUFDbEM7QUFHL0IsdUJBQXVCO0FBQ2tDO0FBQ1E7QUFDUTtBQUNWO0FBQ007QUFDRjtBQUVuRSw2QkFBNkI7QUFRRztBQUN3RDtBQUVqRixTQUFTbUI7SUFDZCxrQkFBa0I7SUFDbEIsTUFBTSxDQUFDQyxRQUFRQyxVQUFVLEdBQUdyQiwrQ0FBUUEsQ0FBQztJQUNyQyxNQUFNLENBQUNzQixTQUFTQyxXQUFXLEdBQUd2QiwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLENBQUN3QixXQUFXQyxhQUFhLEdBQUd6QiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUMwQixtQkFBbUJDLHFCQUFxQixHQUFHM0IsK0NBQVFBLENBQUM7SUFDM0QsTUFBTSxDQUFDNEIsY0FBY0MsZ0JBQWdCLEdBQUc3QiwrQ0FBUUEsQ0FBUztJQUN6RCxNQUFNLENBQUM4QixnQkFBZ0JDLGtCQUFrQixHQUFHL0IsK0NBQVFBLENBQVM7SUFDN0QsTUFBTSxDQUFDZ0MsY0FBY0MsZ0JBQWdCLEdBQUdqQywrQ0FBUUEsQ0FBUztJQUV6RCx5QkFBeUI7SUFDekIsTUFBTSxDQUFDa0MsY0FBY0MsZ0JBQWdCLEdBQUduQywrQ0FBUUEsQ0FBQztJQUNqRCxNQUFNLENBQUNvQyx1QkFBdUJDLHlCQUF5QixHQUFHckMsK0NBQVFBLENBQVM7SUFDM0UsTUFBTSxDQUFDc0Msd0JBQXdCQywwQkFBMEIsR0FBR3ZDLCtDQUFRQSxDQUFTO0lBQzdFLE1BQU0sQ0FBQ3dDLG9CQUFvQkMsc0JBQXNCLEdBQUd6QywrQ0FBUUEsQ0FBUztJQUNyRSxNQUFNLENBQUMwQyxvQkFBb0JDLHNCQUFzQixHQUFHM0MsK0NBQVFBLENBQVM7SUFDckUsTUFBTSxDQUFDNEMsaUJBQWlCQyxtQkFBbUIsR0FBRzdDLCtDQUFRQSxDQUFVO0lBRWhFLGNBQWM7SUFDZCxNQUFN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QUFzQjtRQUN0QnlRLGVBQWVyTCxlQUFlcUwsYUFBYTtRQUMzQ0Msa0JBQWtCdEwsZUFBZXNMLGdCQUFnQjtRQUNqRC9PO1FBQ0FDO1FBRUEsd0JBQXdCO1FBQ3hCb0kscUJBQXFCbEcsY0FBY2tHLG1CQUFtQjtRQUN0RDJHLHdCQUF3QjdNLGNBQWM2TSxzQkFBc0I7UUFDNURDLHFCQUFxQjlNLGNBQWM4TSxtQkFBbUI7UUFDdERDLHdCQUF3Qi9NLGNBQWMrTSxzQkFBc0I7UUFFNUQsbUJBQW1CO1FBQ25CL1MsU0FBU0EsOERBQUFBO1FBQ1RDLGNBQWNBLG1FQUFBQTtRQUNkQyxVQUFVQSwrREFBQUE7UUFFVixnQ0FBZ0M7UUFDaEM4TCxtQkFBbUJqRyxVQUFVaUcsaUJBQWlCO1FBQzlDTSxrQkFBa0J2RyxVQUFVdUcsZ0JBQWdCO1FBQzVDMEcscUJBQXFCak4sVUFBVWlOLG1CQUFtQjtRQUNsRHpNLGdCQUFnQlIsVUFBVVEsY0FBYztRQUN4Q3dFLG9CQUFvQmhGLFVBQVVnRixrQkFBa0I7UUFDaER4RDtRQUNBOEQsMkJBQTJCL0QsZUFBZStELHlCQUF5QjtJQUNyRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2hvb2tzL3VzZUNhcmRTdHVkaW9SZWZhY3RvcmVkLnRzPzljYzkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSBcInNvbm5lclwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cbi8vIEltcG9ydCBtb2R1bGFyIGhvb2tzXG5pbXBvcnQgeyB1c2VXZWJTb2NrZXQgfSBmcm9tICcuL2NhcmRTdHVkaW8vdXNlV2ViU29ja2V0JztcbmltcG9ydCB7IHVzZUpvYk1hbmFnZW1lbnQgfSBmcm9tICcuL2NhcmRTdHVkaW8vdXNlSm9iTWFuYWdlbWVudCc7XG5pbXBvcnQgeyB1c2VNZXNzYWdlR2VuZXJhdGlvbiB9IGZyb20gJy4vY2FyZFN0dWRpby91c2VNZXNzYWdlR2VuZXJhdGlvbic7XG5pbXBvcnQgeyB1c2VGaWxlSGFuZGxpbmcgfSBmcm9tICcuL2NhcmRTdHVkaW8vdXNlRmlsZUhhbmRsaW5nJztcbmltcG9ydCB7IHVzZURyYWZ0R2VuZXJhdGlvbiB9IGZyb20gJy4vY2FyZFN0dWRpby91c2VEcmFmdEdlbmVyYXRpb24nO1xuaW1wb3J0IHsgdXNlQ2FyZEdlbmVyYXRpb24gfSBmcm9tICcuL2NhcmRTdHVkaW8vdXNlQ2FyZEdlbmVyYXRpb24nO1xuXG4vLyBJbXBvcnQgY29uc3RhbnRzIGFuZCB1dGlsc1xuaW1wb3J0IHsgXG4gIGNhcmRUb25lcywgXG4gIGFydGlzdGljU3R5bGVzLCBcbiAgcGFwZXJTaXplcywgXG4gIGZvcm1hdEdlbmVyYXRpb25UaW1lLCBcbiAgZm9ybWF0Q291bnRkb3duLFxuICBHZW5lcmF0ZWRDYXJkIFxufSBmcm9tICcuL2NhcmRTdHVkaW8vY29uc3RhbnRzJztcbmltcG9ydCB7IHNlbmRUaGFua1lvdUVtYWlsLCBjaGF0V2l0aEFJLCBzY3JvbGxUb0NhcmRQcmV2aWV3IH0gZnJvbSAnLi9jYXJkU3R1ZGlvL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNhcmRTdHVkaW8oKSB7XG4gIC8vIENvcmUgZm9ybSBzdGF0ZVxuICBjb25zdCBbcHJvbXB0LCBzZXRQcm9tcHRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt0b0ZpZWxkLCBzZXRUb0ZpZWxkXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZnJvbUZpZWxkLCBzZXRGcm9tRmllbGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZWxhdGlvbnNoaXBGaWVsZCwgc2V0UmVsYXRpb25zaGlwRmllbGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzZWxlY3RlZFR5cGUsIHNldFNlbGVjdGVkVHlwZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiYmlydGhkYXlcIik7XG4gIGNvbnN0IFtjdXN0b21DYXJkVHlwZSwgc2V0Q3VzdG9tQ2FyZFR5cGVdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgY29uc3QgW3NlbGVjdGVkVG9uZSwgc2V0U2VsZWN0ZWRUb25lXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJmdW5ueVwiKTtcbiAgXG4gIC8vIEFkdmFuY2VkIG9wdGlvbnMgc3RhdGVcbiAgY29uc3QgW3Nob3dBZHZhbmNlZCwgc2V0U2hvd0FkdmFuY2VkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkQXJ0aXN0aWNTdHlsZSwgc2V0U2VsZWN0ZWRBcnRpc3RpY1N0eWxlXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJ3YXRlcmNvbG9yXCIpO1xuICBjb25zdCBbY3VzdG9tU3R5bGVEZXNjcmlwdGlvbiwgc2V0Q3VzdG9tU3R5bGVEZXNjcmlwdGlvbl0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBbc2VsZWN0ZWRJbWFnZU1vZGVsLCBzZXRTZWxlY3RlZEltYWdlTW9kZWxdID0gdXNlU3RhdGU8c3RyaW5nPihcImdwdC1pbWFnZS0xXCIpO1xuICBjb25zdCBbc2VsZWN0ZWREcmFmdE1vZGVsLCBzZXRTZWxlY3RlZERyYWZ0TW9kZWxdID0gdXNlU3RhdGU8c3RyaW5nPihcImdwdC1pbWFnZS0xXCIpO1xuICBjb25zdCBbZmFzdFByZXZpZXdNb2RlLCBzZXRGYXN0UHJldmlld01vZGVdID0gdXNlU3RhdGU8Ym9vbGVhbj4odHJ1ZSk7XG4gIFxuICAvLyBFbWFpbCBzdGF0ZVxuICBjb25zdCBbdXNlckVtYWlsLCBzZXRVc2VyRW1haWxdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgXG4gIC8vIENhcmQgb3B0aW9uc1xuICBjb25zdCBbbnVtYmVyT2ZDYXJkcywgc2V0TnVtYmVyT2ZDYXJkc10gPSB1c2VTdGF0ZTxudW1iZXI+KDEpO1xuICBjb25zdCBbaXNIYW5kd3JpdHRlbk1lc3NhZ2UsIHNldElzSGFuZHdyaXR0ZW5NZXNzYWdlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzRnJvbnRCYWNrT25seSwgc2V0SXNGcm9udEJhY2tPbmx5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkUGFwZXJTaXplLCBzZXRTZWxlY3RlZFBhcGVyU2l6ZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwic3RhbmRhcmRcIik7XG4gIFxuICAvLyBVSSBzdGF0ZVxuICBjb25zdCBbaXNUZXh0YXJlYUV4cGFuZGVkLCBzZXRJc1RleHRhcmVhRXhwYW5kZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNNZXNzYWdlRXhwYW5kZWQsIHNldElzTWVzc2FnZUV4cGFuZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dTZXR0aW5ncywgc2V0U2hvd1NldHRpbmdzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dUZW1wbGF0ZUdhbGxlcnksIHNldFNob3dUZW1wbGF0ZUdhbGxlcnldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd1ByaW50Q29uZmlybWF0aW9uLCBzZXRTaG93UHJpbnRDb25maXJtYXRpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd1RlbXBsYXRlQ3VzdG9taXphdGlvbiwgc2V0U2hvd1RlbXBsYXRlQ3VzdG9taXphdGlvbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICAvLyBSZXN0b3JhdGlvbiBzdGF0ZVxuICBjb25zdCBbaXNSZXN0b3JpbmdKb2JzLCBzZXRJc1Jlc3RvcmluZ0pvYnNdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtzZWxlY3RlZFRlbXBsYXRlLCBzZXRTZWxlY3RlZFRlbXBsYXRlXSA9IHVzZVN0YXRlPEdlbmVyYXRlZENhcmQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzSW5pdGlhbExvYWRDb21wbGV0ZSwgc2V0SXNJbml0aWFsTG9hZENvbXBsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgXG4gIC8vIFRlbXBsYXRlIHN0YXRlXG4gIGNvbnN0IFt0ZW1wbGF0ZVNlYXJjaFF1ZXJ5LCBzZXRUZW1wbGF0ZVNlYXJjaFF1ZXJ5XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbaXNTZWFyY2hpbmdUZW1wbGF0ZXMsIHNldElzU2VhcmNoaW5nVGVtcGxhdGVzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FpRmlsdGVyZWRDYXJkcywgc2V0QWlGaWx0ZXJlZENhcmRzXSA9IHVzZVN0YXRlPGFueVtdPihbXSk7XG4gIGNvbnN0IFtzZWFyY2hNb2RlLCBzZXRTZWFyY2hNb2RlXSA9IHVzZVN0YXRlPCd0ZXh0JyB8ICdhaScgfCAnaHlicmlkJz4oJ3RleHQnKTtcbiAgY29uc3QgW3RleHRGaWx0ZXJlZENhcmRzLCBzZXRUZXh0RmlsdGVyZWRDYXJkc10gPSB1c2VTdGF0ZTxhbnlbXT4oW10pO1xuICBjb25zdCBbc2hvd1Byb21wdHMsIHNldFNob3dQcm9tcHRzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ByaW50T3B0aW9uLCBzZXRQcmludE9wdGlvbl0gPSB1c2VTdGF0ZTwncGh5c2ljYWwnIHwgJ2VtYWlsJz4oJ3BoeXNpY2FsJyk7XG4gIFxuICAvLyBUZW1wbGF0ZSBjdXN0b21pemF0aW9uIHN0YXRlXG4gIGNvbnN0IFt0ZW1wbGF0ZUN1c3RvbWl6YXRpb25zLCBzZXRUZW1wbGF0ZUN1c3RvbWl6YXRpb25zXSA9IHVzZVN0YXRlKHtcbiAgICBwcm9tcHRDaGFuZ2VzOiBcIlwiLFxuICAgIG1lc3NhZ2VDaGFuZ2VzOiBcIlwiLFxuICAgIHVzZVJlZmVyZW5jZUltYWdlOiBmYWxzZSxcbiAgICByZWZlcmVuY2VJbWFnZUZpbGU6IG51bGwgYXMgRmlsZSB8IG51bGwsXG4gICAgcmVmZXJlbmNlSW1hZ2VVcmxzOiBbXSBhcyBzdHJpbmdbXSxcbiAgICByZWZlcmVuY2VJbWFnZVRyYW5zZm9ybWF0aW9uOiBcIlwiXG4gIH0pO1xuICBcbiAgLy8gU2VjdGlvbiBsb2FkaW5nIHN0YXRlc1xuICBjb25zdCBbc2VjdGlvbkxvYWRpbmdTdGF0ZXMsIHNldFNlY3Rpb25Mb2FkaW5nU3RhdGVzXSA9IHVzZVN0YXRlPHtcbiAgICBmcm9udENvdmVyOiAnaWRsZScgfCAnbG9hZGluZycgfCAnY29tcGxldGVkJyB8ICdlcnJvcic7XG4gICAgYmFja0NvdmVyOiAnaWRsZScgfCAnbG9hZGluZycgfCAnY29tcGxldGVkJyB8ICdlcnJvcic7XG4gICAgbGVmdEludGVyaW9yOiAnaWRsZScgfCAnbG9hZGluZycgfCAnY29tcGxldGVkJyB8ICdlcnJvcic7XG4gICAgcmlnaHRJbnRlcmlvcjogJ2lkbGUnIHwgJ2xvYWRpbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZXJyb3InO1xuICB9Pih7XG4gICAgZnJvbnRDb3ZlcjogJ2lkbGUnLFxuICAgIGJhY2tDb3ZlcjogJ2lkbGUnLFxuICAgIGxlZnRJbnRlcmlvcjogJ2lkbGUnLFxuICAgIHJpZ2h0SW50ZXJpb3I6ICdpZGxlJyxcbiAgfSk7XG4gIFxuICAvLyBDb3VudGRvd24gc3RhdGVcbiAgY29uc3QgW2NvdW50ZG93biwgc2V0Q291bnRkb3duXSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG4gIGNvbnN0IFtjb3VudGRvd25JbnRlcnZhbCwgc2V0Q291bnRkb3duSW50ZXJ2YWxdID0gdXNlU3RhdGU8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcblxuICAvLyBVc2UgbW9kdWxhciBob29rc1xuICBjb25zdCB3ZWJTb2NrZXQgPSB1c2VXZWJTb2NrZXQoKTtcbiAgY29uc3Qgam9iTWFuYWdlbWVudCA9IHVzZUpvYk1hbmFnZW1lbnQoKTtcbiAgY29uc3QgZmlsZUhhbmRsaW5nID0gdXNlRmlsZUhhbmRsaW5nKCk7XG4gIGNvbnN0IG1lc3NhZ2VHZW5lcmF0aW9uID0gdXNlTWVzc2FnZUdlbmVyYXRpb24oXG4gICAgc2VsZWN0ZWRUeXBlLFxuICAgIGN1c3RvbUNhcmRUeXBlLFxuICAgIHNlbGVjdGVkVG9uZSxcbiAgICBwcm9tcHQsXG4gICAgdG9GaWVsZCxcbiAgICBmcm9tRmllbGQsXG4gICAgcmVsYXRpb25zaGlwRmllbGQsXG4gICAgZmlsZUhhbmRsaW5nLnBob3RvUmVmZXJlbmNlc1xuICApO1xuICBcbiAgLy8gRHJhZnQgZ2VuZXJhdGlvbiBwcm9wc1xuICBjb25zdCBkcmFmdEdlbmVyYXRpb25Qcm9wcyA9IHtcbiAgICBzZWxlY3RlZFR5cGUsXG4gICAgY3VzdG9tQ2FyZFR5cGUsXG4gICAgc2VsZWN0ZWRUb25lLFxuICAgIHNlbGVjdGVkQXJ0aXN0aWNTdHlsZSxcbiAgICBjdXN0b21TdHlsZURlc2NyaXB0aW9uLFxuICAgIHNlbGVjdGVkRHJhZnRNb2RlbCxcbiAgICBzZWxlY3RlZEltYWdlTW9kZWwsXG4gICAgc2VsZWN0ZWRQYXBlclNpemUsXG4gICAgcHJvbXB0LFxuICAgIHRvRmllbGQsXG4gICAgZnJvbUZpZWxkLFxuICAgIHVzZXJFbWFpbCxcbiAgICBmaW5hbENhcmRNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5maW5hbENhcmRNZXNzYWdlLFxuICAgIGlzSGFuZHdyaXR0ZW5NZXNzYWdlLFxuICAgIGlzRnJvbnRCYWNrT25seSxcbiAgICByZWZlcmVuY2VJbWFnZVVybHM6IGZpbGVIYW5kbGluZy5yZWZlcmVuY2VJbWFnZVVybHMsXG4gICAgcGhvdG9SZWZlcmVuY2VzOiBmaWxlSGFuZGxpbmcucGhvdG9SZWZlcmVuY2VzLFxuICAgIHJlbGF0aW9uc2hpcEZpZWxkLFxuICAgIHNhdmVKb2JUb1N0b3JhZ2U6IGpvYk1hbmFnZW1lbnQuc2F2ZUpvYlRvU3RvcmFnZSxcbiAgICBzdWJzY3JpYmVUb0pvYjogd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iLFxuICAgIHVuc3Vic2NyaWJlRnJvbUFsbEpvYnM6IHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21BbGxKb2JzLFxuICAgIHN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZzogam9iTWFuYWdlbWVudC5zdGFydEVsYXBzZWRUaW1lVHJhY2tpbmcsXG4gICAgc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmc6IGpvYk1hbmFnZW1lbnQuc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmcsXG4gIH07XG4gIFxuICBjb25zdCBkcmFmdEdlbmVyYXRpb24gPSB1c2VEcmFmdEdlbmVyYXRpb24oZHJhZnRHZW5lcmF0aW9uUHJvcHMpO1xuICBcbiAgLy8gQ2FyZCBnZW5lcmF0aW9uIHByb3BzXG4gIGNvbnN0IGNhcmRHZW5lcmF0aW9uUHJvcHMgPSB7XG4gICAgc2VsZWN0ZWRUeXBlLFxuICAgIGN1c3RvbUNhcmRUeXBlLFxuICAgIHNlbGVjdGVkVG9uZSxcbiAgICBzZWxlY3RlZEFydGlzdGljU3R5bGUsXG4gICAgY3VzdG9tU3R5bGVEZXNjcmlwdGlvbixcbiAgICBzZWxlY3RlZEltYWdlTW9kZWwsXG4gICAgc2VsZWN0ZWRQYXBlclNpemUsXG4gICAgcHJvbXB0LFxuICAgIHRvRmllbGQsXG4gICAgZnJvbUZpZWxkLFxuICAgIHVzZXJFbWFpbCxcbiAgICBmaW5hbENhcmRNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5maW5hbENhcmRNZXNzYWdlLFxuICAgIGlzSGFuZHdyaXR0ZW5NZXNzYWdlLFxuICAgIGlzRnJvbnRCYWNrT25seSxcbiAgICByZWZlcmVuY2VJbWFnZVVybHM6IGZpbGVIYW5kbGluZy5yZWZlcmVuY2VJbWFnZVVybHMsXG4gICAgcGhvdG9SZWZlcmVuY2VzOiBmaWxlSGFuZGxpbmcucGhvdG9SZWZlcmVuY2VzLFxuICAgIHJlbGF0aW9uc2hpcEZpZWxkLFxuICAgIG51bWJlck9mQ2FyZHMsXG4gICAgc2F2ZUpvYlRvU3RvcmFnZTogam9iTWFuYWdlbWVudC5zYXZlSm9iVG9TdG9yYWdlLFxuICAgIHJlbW92ZUpvYkZyb21TdG9yYWdlOiBqb2JNYW5hZ2VtZW50LnJlbW92ZUpvYkZyb21TdG9yYWdlLFxuICAgIHN1YnNjcmliZVRvSm9iOiB3ZWJTb2NrZXQuc3Vic2NyaWJlVG9Kb2IsXG4gICAgc3RhcnRFbGFwc2VkVGltZVRyYWNraW5nOiBqb2JNYW5hZ2VtZW50LnN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZyxcbiAgICBzdG9wRWxhcHNlZFRpbWVUcmFja2luZzogam9iTWFuYWdlbWVudC5zdG9wRWxhcHNlZFRpbWVUcmFja2luZyxcbiAgICBzZXRDdXJyZW50Sm9iSWQ6IGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEpvYklkLFxuICAgIHNldElzRHJhZnRNb2RlOiBkcmFmdEdlbmVyYXRpb24uc2V0SXNEcmFmdE1vZGUsXG4gICAgc2V0RHJhZnRDYXJkczogZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMsXG4gICAgc2V0U2VsZWN0ZWREcmFmdEluZGV4OiBkcmFmdEdlbmVyYXRpb24uc2V0U2VsZWN0ZWREcmFmdEluZGV4LFxuICAgIHNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZDogZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZCxcbiAgICBzZXRQcmV2aWV3aW5nRHJhZnRJbmRleDogZHJhZnRHZW5lcmF0aW9uLnNldFByZXZpZXdpbmdEcmFmdEluZGV4LFxuICAgIHNldERyYWZ0Q29tcGxldGlvblNob3duOiBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uU2hvd24sXG4gICAgc2V0RHJhZnRDb21wbGV0aW9uQ291bnQ6IGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25Db3VudCxcbiAgfTtcbiAgXG4gIGNvbnN0IGNhcmRHZW5lcmF0aW9uID0gdXNlQ2FyZEdlbmVyYXRpb24oY2FyZEdlbmVyYXRpb25Qcm9wcyk7XG5cbiAgLy8gSGFuZGxlIGpvYiB1cGRhdGVzIGZyb20gV2ViU29ja2V0XG4gIGNvbnN0IGhhbmRsZUpvYlVwZGF0ZSA9IHVzZUNhbGxiYWNrKChkYXRhOiBhbnkpID0+IHtcbiAgICBjb25zdCB7IGpvYl9pZCwgc3RhdHVzLCBwcm9ncmVzcywgY2FyZERhdGEsIGVycm9yLCBjb21wbGV0ZWRBdCB9ID0gZGF0YTtcbiAgICBcbiAgICBpZiAoIWpvYl9pZCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIFNraXAgdXBkYXRlcyBpZiB3ZSdyZSBzdGlsbCByZXN0b3Jpbmcgam9icyBmcm9tIGxvY2FsU3RvcmFnZVxuICAgIGlmIChpc1Jlc3RvcmluZ0pvYnMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfij7MgU2tpcHBpbmcgam9iIHVwZGF0ZSBkdXJpbmcgcmVzdG9yYXRpb246Jywgam9iX2lkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIGRyYWZ0IGpvYlxuICAgIGNvbnN0IGlzRHJhZnRKb2IgPSBqb2JfaWQuc3RhcnRzV2l0aCgnZHJhZnQtJyk7XG4gICAgY29uc3QgZHJhZnRJbmRleCA9IGlzRHJhZnRKb2IgPyBwYXJzZUludChqb2JfaWQuc3BsaXQoJy0nKVsxXSkgOiAtMTtcbiAgICBcbiAgICAvLyBGaWx0ZXIgb3V0IHVwZGF0ZXMgZnJvbSB3cm9uZyBqb2IgdHlwZVxuICAgIC8vIElmIHdlJ3JlIGluIGRyYWZ0IG1vZGUsIG9ubHkgcHJvY2VzcyBkcmFmdCBqb2JzXG4gICAgLy8gSWYgd2UncmUgaW4gZmluYWwgbW9kZSwgb25seSBwcm9jZXNzIG5vbi1kcmFmdCBqb2JzXG4gICAgY29uc3QgaXNJbkRyYWZ0TW9kZSA9IGRyYWZ0R2VuZXJhdGlvbi5pc0RyYWZ0TW9kZTtcbiAgICBpZiAoaXNJbkRyYWZ0TW9kZSAmJiAhaXNEcmFmdEpvYikge1xuICAgICAgY29uc29sZS5sb2coJ/CfmqsgSWdub3Jpbmcgbm9uLWRyYWZ0IGpvYiB1cGRhdGUgaW4gZHJhZnQgbW9kZTonLCBqb2JfaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWlzSW5EcmFmdE1vZGUgJiYgaXNEcmFmdEpvYikge1xuICAgICAgY29uc29sZS5sb2coJ/CfmqsgSWdub3JpbmcgZHJhZnQgam9iIHVwZGF0ZSBpbiBmaW5hbCBtb2RlOicsIGpvYl9pZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5SEIFByb2Nlc3Npbmcgam9iIHVwZGF0ZTonLCB7IGpvYl9pZCwgc3RhdHVzLCBpc0RyYWZ0Sm9iLCBkcmFmdEluZGV4LCBwcm9ncmVzcyB9KTtcbiAgICBcbiAgICAvLyBVcGRhdGUgcHJvZ3Jlc3MgaWYgcHJvdmlkZWRcbiAgICBpZiAocHJvZ3Jlc3MpIHtcbiAgICAgIC8vIElNUE9SVEFOVDogRG9uJ3Qgc2hvdyBcIkdlbmVyYXRpb24gY29tcGxldGUhXCIgdW50aWwgd2UndmUgYWN0dWFsbHkgcHJvY2Vzc2VkIHRoZSBjYXJkXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBVSSBmcm9tIHNob3dpbmcgY29tcGxldGlvbiBiZWZvcmUgdGhlIGNhcmQgaXMgcmVhZHlcbiAgICAgIGlmIChwcm9ncmVzcy5pbmNsdWRlcygnR2VuZXJhdGlvbiBjb21wbGV0ZSEnKSAmJiBzdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmICFpc0RyYWZ0Sm9iKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfij7jvuI8gSG9sZGluZyBcIkdlbmVyYXRpb24gY29tcGxldGUhXCIgbWVzc2FnZSB1bnRpbCBjYXJkIGlzIHByb2Nlc3NlZCcpO1xuICAgICAgICAvLyBEb24ndCB1cGRhdGUgdGhlIHByb2dyZXNzIG1lc3NhZ2UgeWV0IC0gaXQgd2lsbCBiZSBzZXQgaW4gaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKHByb2dyZXNzKTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhwcm9ncmVzcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OKIFByb2dyZXNzIG1lc3NhZ2U6ICR7cHJvZ3Jlc3N9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmIGNhcmREYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+OiSBKb2IgY29tcGxldGVkISBDYXJkIGRhdGE6JywgY2FyZERhdGEsICdpc0RyYWZ0Sm9iOicsIGlzRHJhZnRKb2IpO1xuICAgICAgXG4gICAgICBpZiAoaXNEcmFmdEpvYiAmJiBkcmFmdEluZGV4ID49IDApIHtcbiAgICAgICAgLy8gSGFuZGxlIGRyYWZ0IGNhcmQgY29tcGxldGlvblxuICAgICAgICBjb25zb2xlLmxvZyhg8J+OqCBEcmFmdCB2YXJpYXRpb24gJHtkcmFmdEluZGV4ICsgMX0gY29tcGxldGVkIWApO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IHN0eWxlIGluZm8gZm9yIHNtYXJ0IHN0eWxlIG1vZGVcbiAgICAgICAgbGV0IHN0eWxlSW5mbzogeyBzdHlsZU5hbWU6IHN0cmluZzsgc3R5bGVMYWJlbDogc3RyaW5nIH0gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzZWxlY3RlZEFydGlzdGljU3R5bGUgPT09IFwiYWktc21hcnQtc3R5bGVcIikge1xuICAgICAgICAgIGNvbnN0IHByZWRlZmluZWRTdHlsZXMgPSBbXG4gICAgICAgICAgICBcIndhdGVyY29sb3JcIiwgXCJib3RhbmljYWxcIiwgXCJjb21pYy1ib29rXCIsIFwiZHJlYW15LWZhbnRhc3lcIiwgXCJtaW5pbWFsaXN0XCJcbiAgICAgICAgICBdO1xuICAgICAgICAgIGNvbnN0IHN0eWxlTGFiZWxzID0gW1xuICAgICAgICAgICAgXCLwn46oIFdhdGVyY29sb3JcIiwgXCLwn4y/IEJvdGFuaWNhbFwiLCBcIvCfkqUgQ29taWMgQm9va1wiLCBcIvCfjLggRHJlYW15IEZhbnRhc3lcIiwgXCLinKggTWluaW1hbGlzdFwiXG4gICAgICAgICAgXTtcbiAgICAgICAgICBpZiAoZHJhZnRJbmRleCA+PSAwICYmIGRyYWZ0SW5kZXggPCBwcmVkZWZpbmVkU3R5bGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3R5bGVJbmZvID0ge1xuICAgICAgICAgICAgICBzdHlsZU5hbWU6IHByZWRlZmluZWRTdHlsZXNbZHJhZnRJbmRleF0sXG4gICAgICAgICAgICAgIHN0eWxlTGFiZWw6IHN0eWxlTGFiZWxzW2RyYWZ0SW5kZXhdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRyYWZ0Q2FyZDogR2VuZXJhdGVkQ2FyZCA9IHtcbiAgICAgICAgICBpZDogYGRyYWZ0LSR7ZHJhZnRJbmRleCArIDF9LSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIHByb21wdDogY2FyZERhdGEucHJvbXB0IHx8IGBEcmFmdCBWYXJpYXRpb24gJHtkcmFmdEluZGV4ICsgMX1gLFxuICAgICAgICAgIGZyb250Q292ZXI6IGNhcmREYXRhLmZyb250Q292ZXIgfHwgXCJcIixcbiAgICAgICAgICBiYWNrQ292ZXI6IFwiXCIsXG4gICAgICAgICAgbGVmdFBhZ2U6IFwiXCIsXG4gICAgICAgICAgcmlnaHRQYWdlOiBcIlwiLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICBnZW5lcmF0ZWRQcm9tcHRzOiB7XG4gICAgICAgICAgICBmcm9udENvdmVyOiBjYXJkRGF0YS5nZW5lcmF0ZWRQcm9tcHRzPy5mcm9udENvdmVyIHx8IFwiXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0eWxlSW5mbzogc3R5bGVJbmZvXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBTaW1wbGlmaWVkIGRyYWZ0IHRyYWNraW5nIC0gdXNlIGZpeGVkIGFycmF5IHBvc2l0aW9uc1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDYXJkcyhwcmV2ID0+IHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXZdO1xuICAgICAgICAgIC8vIEVuc3VyZSBhcnJheSBoYXMgNSBzbG90c1xuICAgICAgICAgIHdoaWxlICh1cGRhdGVkLmxlbmd0aCA8IDUpIHtcbiAgICAgICAgICAgIHVwZGF0ZWQucHVzaChudWxsIGFzIGFueSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFBsYWNlIGRyYWZ0IGF0IGl0cyBjb3JyZWN0IGluZGV4XG4gICAgICAgICAgdXBkYXRlZFtkcmFmdEluZGV4XSA9IGRyYWZ0Q2FyZDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIERyYWZ0ICR7ZHJhZnRJbmRleCArIDF9IGNvbXBsZXRlZCBhbmQgc3RvcmVkIGF0IGluZGV4ICR7ZHJhZnRJbmRleH1gKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTYXZlIGRyYWZ0IHRvIGxvY2FsU3RvcmFnZSB3aXRoIGV4cGlyYXRpb25cbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGpvYkRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgY2FyZEpvYl8ke2pvYl9pZH1gKTtcbiAgICAgICAgICAgICAgaWYgKGpvYkRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqb2IgPSBKU09OLnBhcnNlKGpvYkRhdGEpO1xuICAgICAgICAgICAgICAgIGpvYi5kcmFmdENhcmRzID0gW2RyYWZ0Q2FyZF07XG4gICAgICAgICAgICAgICAgam9iLmRyYWZ0SW5kZXggPSBkcmFmdEluZGV4O1xuICAgICAgICAgICAgICAgIGpvYi5sYXN0VXBkYXRlID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICBqb2IuZXhwaXJlc0F0ID0gRGF0ZS5ub3coKSArICgzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApOyAvLyAzMCBkYXlzXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGNhcmRKb2JfJHtqb2JfaWR9YCwgSlNPTi5zdHJpbmdpZnkoam9iKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGRyYWZ0OicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gU2ltcGxpZmllZCBjb21wbGV0aW9uIHRyYWNraW5nIC0gY291bnQgdGhlIHVwZGF0ZWQgYXJyYXkgaW5jbHVkaW5nIHRoZSBuZXcgZHJhZnRcbiAgICAgICAgY29uc3QgdXBkYXRlZERyYWZ0cyA9IFsuLi5kcmFmdEdlbmVyYXRpb24uZHJhZnRDYXJkc107XG4gICAgICAgIHVwZGF0ZWREcmFmdHNbZHJhZnRJbmRleF0gPSBkcmFmdENhcmQ7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZENvdW50ID0gdXBkYXRlZERyYWZ0cy5maWx0ZXIoQm9vbGVhbikubGVuZ3RoO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+TiiBEcmFmdCBwcm9ncmVzczogJHtjb21wbGV0ZWRDb3VudH0vNSB2YXJpYXRpb25zIGNvbXBsZXRlYCk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgcHJvZ3Jlc3NcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NNc2cgPSBjb21wbGV0ZWRDb3VudCA9PT0gNSBcbiAgICAgICAgICA/IFwiQWxsIDUgdmFyaWF0aW9ucyByZWFkeSEgQ2hvb3NlIHlvdXIgZmF2b3JpdGUgYmVsb3cuXCJcbiAgICAgICAgICA6IGAke2NvbXBsZXRlZENvdW50fS81IHZhcmlhdGlvbnMgY29tcGxldGUuLi4ke2NvbXBsZXRlZENvdW50ID49IDIgPyBcIiBZb3UgY2FuIHNlbGVjdCBvbmUgbm93IVwiIDogXCJcIn1gO1xuICAgICAgICBcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhwcm9ncmVzc01zZyk7XG4gICAgICAgIFxuICAgICAgICAvLyBPdmVycmlkZSB0aW1lLWJhc2VkIHByb2dyZXNzIHdpdGggcmVhbCBwcm9ncmVzcyB3aGVuIGRyYWZ0cyBjb21wbGV0ZVxuICAgICAgICAvLyBEb24ndCBvdmVycmlkZSB0aW1lLWJhc2VkIHByb2dyZXNzXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn46oIERyYWZ0ICR7Y29tcGxldGVkQ291bnR9LzUgY29tcGxldGVkYCk7XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgbWlsZXN0b25lc1xuICAgICAgICBpZiAoY29tcGxldGVkQ291bnQgPT09IDEpIHtcbiAgICAgICAgICBzY3JvbGxUb0NhcmRQcmV2aWV3KCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjb21wbGV0ZWRDb3VudCA9PT0gNSAmJiAhZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCkge1xuICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcoZmFsc2UpO1xuICAgICAgICAgIGpvYk1hbmFnZW1lbnQuc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmcoKTtcbiAgICAgICAgICB0b2FzdC5zdWNjZXNzKFwi8J+OqCBBbGwgNSBmcm9udCBjb3ZlciB2YXJpYXRpb25zIHJlYWR5ISBDaG9vc2UgeW91ciBmYXZvcml0ZSBiZWxvdy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEtlZXAgZHJhZnQgam9icyBpbiBzdG9yYWdlIGZvciBsYXRlciByZXRyaWV2YWxcbiAgICAgICAgLy8gT25seSB1bnN1YnNjcmliZSBmcm9tIFdlYlNvY2tldFxuICAgICAgICB3ZWJTb2NrZXQudW5zdWJzY3JpYmVGcm9tSm9iKGpvYl9pZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUgS2VlcGluZyBkcmFmdCBqb2IgJHtqb2JfaWR9IGluIHN0b3JhZ2UgZm9yIGZ1dHVyZSBhY2Nlc3NgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEhhbmRsZSBmaW5hbCBjYXJkIGNvbXBsZXRpb25cbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gRmluYWwgY2FyZCBjb21wbGV0aW9uIGRldGVjdGVkLiBDYXJkIGRhdGEgc3RydWN0dXJlOicsIHtcbiAgICAgICAgICBoYXNDYXJkRGF0YTogISFjYXJkRGF0YSxcbiAgICAgICAgICBjYXJkRGF0YUtleXM6IE9iamVjdC5rZXlzKGNhcmREYXRhIHx8IHt9KSxcbiAgICAgICAgICBmcm9udENvdmVyOiBjYXJkRGF0YT8uZnJvbnRDb3ZlciA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgICBiYWNrQ292ZXI6IGNhcmREYXRhPy5iYWNrQ292ZXIgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgbGVmdEludGVyaW9yOiBjYXJkRGF0YT8ubGVmdEludGVyaW9yID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgIHJpZ2h0SW50ZXJpb3I6IGNhcmREYXRhPy5yaWdodEludGVyaW9yID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgIGxlZnRQYWdlOiBjYXJkRGF0YT8ubGVmdFBhZ2UgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgcmlnaHRQYWdlOiBjYXJkRGF0YT8ucmlnaHRQYWdlID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk50gRnVsbCBjYXJkIGRhdGE6JywgSlNPTi5zdHJpbmdpZnkoY2FyZERhdGEsIG51bGwsIDIpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1hcCBiYWNrZW5kIGZpZWxkIG5hbWVzIHRvIGZyb250ZW5kIGZpZWxkIG5hbWVzXG4gICAgICAgIGNvbnN0IG1hcHBlZENhcmREYXRhID0ge1xuICAgICAgICAgIC4uLmNhcmREYXRhLFxuICAgICAgICAgIGxlZnRJbnRlcmlvcjogY2FyZERhdGEubGVmdEludGVyaW9yIHx8IGNhcmREYXRhLmxlZnRQYWdlLFxuICAgICAgICAgIHJpZ2h0SW50ZXJpb3I6IGNhcmREYXRhLnJpZ2h0SW50ZXJpb3IgfHwgY2FyZERhdGEucmlnaHRQYWdlLFxuICAgICAgICAgIC8vIEtlZXAgb3JpZ2luYWwgZmllbGRzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgbGVmdFBhZ2U6IGNhcmREYXRhLmxlZnRQYWdlIHx8IGNhcmREYXRhLmxlZnRJbnRlcmlvcixcbiAgICAgICAgICByaWdodFBhZ2U6IGNhcmREYXRhLnJpZ2h0UGFnZSB8fCBjYXJkRGF0YS5yaWdodEludGVyaW9yLFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ/CflIQgTWFwcGVkIGNhcmQgZGF0YSBmb3IgZnJvbnRlbmQgY29tcGF0aWJpbGl0eTonLCB7XG4gICAgICAgICAgZnJvbnRDb3ZlcjogbWFwcGVkQ2FyZERhdGEuZnJvbnRDb3ZlciA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgICBiYWNrQ292ZXI6IG1hcHBlZENhcmREYXRhLmJhY2tDb3ZlciA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgICBsZWZ0SW50ZXJpb3I6IG1hcHBlZENhcmREYXRhLmxlZnRJbnRlcmlvciA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgICByaWdodEludGVyaW9yOiBtYXBwZWRDYXJkRGF0YS5yaWdodEludGVyaW9yID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGwgdGhlIGNvbXBsZXRpb24gaGFuZGxlclxuICAgICAgICBjb25zb2xlLmxvZygn8J+agCBDYWxsaW5nIGhhbmRsZUZpbmFsQ2FyZENvbXBsZXRpb24uLi4nKTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvbihtYXBwZWRDYXJkRGF0YSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTYXZlIGZpbmFsIGNhcmQgbWV0YWRhdGEgdG8gbG9jYWxTdG9yYWdlIGZvciByZWNvdmVyeSAod2l0aG91dCBsYXJnZSBpbWFnZXMpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZmluYWxDYXJkTWV0YWRhdGEgPSB7XG4gICAgICAgICAgICBqb2JJZDogam9iX2lkLFxuICAgICAgICAgICAgY29tcGxldGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgICAgICBpc0ZpbmFsQ2FyZDogdHJ1ZSxcbiAgICAgICAgICAgIHByb21wdDogY2FyZERhdGEucHJvbXB0LFxuICAgICAgICAgICAgaWQ6IGNhcmREYXRhLmlkLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBjYXJkRGF0YS5jcmVhdGVkQXQsXG4gICAgICAgICAgICAvLyBEb24ndCBzYXZlIGJhc2U2NCBpbWFnZXMgdG8gYXZvaWQgcXVvdGEgaXNzdWVzXG4gICAgICAgICAgICBoYXNJbWFnZXM6IHtcbiAgICAgICAgICAgICAgZnJvbnRDb3ZlcjogISFjYXJkRGF0YS5mcm9udENvdmVyLFxuICAgICAgICAgICAgICBiYWNrQ292ZXI6ICEhY2FyZERhdGEuYmFja0NvdmVyLFxuICAgICAgICAgICAgICBsZWZ0UGFnZTogISFjYXJkRGF0YS5sZWZ0UGFnZSxcbiAgICAgICAgICAgICAgcmlnaHRQYWdlOiAhIWNhcmREYXRhLnJpZ2h0UGFnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xhc3RDb21wbGV0ZWRDYXJkJywgSlNPTi5zdHJpbmdpZnkoZmluYWxDYXJkTWV0YWRhdGEpKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+SviBTYXZlZCBmaW5hbCBjYXJkIG1ldGFkYXRhIHRvIGxvY2FsU3RvcmFnZSAod2l0aG91dCBpbWFnZXMpJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgZmluYWwgY2FyZCBtZXRhZGF0YTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGpvYk1hbmFnZW1lbnQucmVtb3ZlSm9iRnJvbVN0b3JhZ2Uoam9iX2lkKTtcbiAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQobnVsbCk7XG4gICAgICAgIHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21Kb2Ioam9iX2lkKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBKb2IgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgaWYgKGlzRHJhZnRKb2IgJiYgZHJhZnRJbmRleCA+PSAwKSB7XG4gICAgICAgIHRvYXN0LmVycm9yKGBEcmFmdCB2YXJpYXRpb24gJHtkcmFmdEluZGV4ICsgMX0gZmFpbGVkLiBDb250aW51aW5nIHdpdGggb3RoZXJzLi4uYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b2FzdC5lcnJvcihcIuKdjCBDYXJkIGdlbmVyYXRpb24gZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLlwiKTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKGZhbHNlKTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZChmYWxzZSk7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQuc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmcoKTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKFwiXCIpO1xuICAgICAgICAvLyBEb24ndCByZXNldCBwcm9ncmVzcyAtIGxldCB0aW1lLWJhc2VkIHByb2dyZXNzIGNvbnRpbnVlXG4gICAgICAgIC8vIGpvYk1hbmFnZW1lbnQuc2V0UHJvZ3Jlc3NQZXJjZW50YWdlKDApO1xuICAgICAgICBqb2JNYW5hZ2VtZW50LnNldEN1cnJlbnRKb2JJZChudWxsKTtcbiAgICAgICAgd2ViU29ja2V0LnVuc3Vic2NyaWJlRnJvbUpvYihqb2JfaWQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBqb2JNYW5hZ2VtZW50LnJlbW92ZUpvYkZyb21TdG9yYWdlKGpvYl9pZCk7XG4gICAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICdub3RfZm91bmQnKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBKb2Igbm90IGZvdW5kIG9uIHNlcnZlciwgY2xlYW5pbmcgdXAgc3RhbGUgcmVmZXJlbmNlOicsIGpvYl9pZCk7XG4gICAgICBcbiAgICAgIC8vIENsZWFuIHVwIHN0YWxlIGpvYiByZWZlcmVuY2VcbiAgICAgIGlmICh3ZWJTb2NrZXQuY3VycmVudEpvYlJlZi5jdXJyZW50ID09PSBqb2JfaWQpIHtcbiAgICAgICAgd2ViU29ja2V0LmN1cnJlbnRKb2JSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFJlc2V0IFVJIHN0YXRlIGlmIHRoaXMgd2FzIHRoZSBjdXJyZW50IGpvYlxuICAgICAgaWYgKGpvYk1hbmFnZW1lbnQuY3VycmVudEpvYklkID09PSBqb2JfaWQpIHtcbiAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQobnVsbCk7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQoZmFsc2UpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MoXCJcIik7XG4gICAgICAgIC8vIERvbid0IHJlc2V0IHByb2dyZXNzIC0gbGV0IHRpbWUtYmFzZWQgcHJvZ3Jlc3MgY29udGludWVcbiAgICAgICAgLy8gam9iTWFuYWdlbWVudC5zZXRQcm9ncmVzc1BlcmNlbnRhZ2UoMCk7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQuc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmcoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2xlYW4gdXAgc3RvcmFnZVxuICAgICAgam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZShqb2JfaWQpO1xuICAgICAgd2ViU29ja2V0LnVuc3Vic2NyaWJlRnJvbUpvYihqb2JfaWQpO1xuICAgIH1cbiAgfSwgW3NlbGVjdGVkQXJ0aXN0aWNTdHlsZSwgZHJhZnRHZW5lcmF0aW9uLCBjYXJkR2VuZXJhdGlvbiwgam9iTWFuYWdlbWVudCwgd2ViU29ja2V0LCBpc1Jlc3RvcmluZ0pvYnNdKTtcblxuICAvLyBTZXQgdXAgV2ViU29ja2V0IGpvYiB1cGRhdGUgaGFuZGxlclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHdlYlNvY2tldC5zZXRKb2JVcGRhdGVIYW5kbGVyKGhhbmRsZUpvYlVwZGF0ZSk7XG4gIH0sIFt3ZWJTb2NrZXQsIGhhbmRsZUpvYlVwZGF0ZV0pO1xuXG4gIC8vIFRyYWNrIGlmIHdlJ3ZlIGFscmVhZHkgbG9nZ2VkIHRoZSBzdGFsZSBqb2IgbWVzc2FnZVxuICBjb25zdCBzdGFsZUpvYkxvZ2dlZFJlZiA9IHVzZVJlZihmYWxzZSk7XG5cbiAgLy8gQXV0by1yZWNvbm5lY3QgV2ViU29ja2V0IGlmIGRpc2Nvbm5lY3RlZCBkdXJpbmcgYWN0aXZlIGdlbmVyYXRpb25cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXdlYlNvY2tldC5pc1NvY2tldENvbm5lY3RlZCAmJiBcbiAgICAgICAgKGNhcmRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZyB8fCBkcmFmdEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nRmluYWxDYXJkKSAmJiBcbiAgICAgICAgd2ViU29ja2V0LmN1cnJlbnRKb2JSZWYuY3VycmVudCkge1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB0aGUgZ2VuZXJhdGlvbiBoYXMgYmVlbiBydW5uaW5nIGZvciBtb3JlIHRoYW4gNSBtaW51dGVzXG4gICAgICBpZiAoam9iTWFuYWdlbWVudC5nZW5lcmF0aW9uU3RhcnRUaW1lKSB7XG4gICAgICAgIGNvbnN0IGpvYkFnZSA9IERhdGUubm93KCkgLSBqb2JNYW5hZ2VtZW50LmdlbmVyYXRpb25TdGFydFRpbWU7XG4gICAgICAgIGlmIChqb2JBZ2UgPiA1ICogNjAgKiAxMDAwKSB7IC8vIDUgbWludXRlc1xuICAgICAgICAgIGlmICghc3RhbGVKb2JMb2dnZWRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KPsCBKb2IgaXMgb2xkZXIgdGhhbiA1IG1pbnV0ZXMsIHN0b3BwaW5nIHJlY29ubmVjdGlvbiBhdHRlbXB0cycpO1xuICAgICAgICAgICAgc3RhbGVKb2JMb2dnZWRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENsZWFuIHVwIHN0YWxlIGpvYlxuICAgICAgICAgICAgY29uc3Qgam9iSWQgPSB3ZWJTb2NrZXQuY3VycmVudEpvYlJlZi5jdXJyZW50O1xuICAgICAgICAgICAgaWYgKGpvYklkKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn6e5IENsZWFuaW5nIHVwIHN0YWxlIGpvYjonLCBqb2JJZCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBSZW1vdmUgZnJvbSBsb2NhbFN0b3JhZ2UgKG9ubHkgaWYgbm90IGEgZHJhZnQgam9iKVxuICAgICAgICAgICAgICBpZiAoIWpvYklkLnN0YXJ0c1dpdGgoJ2RyYWZ0LScpKSB7XG4gICAgICAgICAgICAgICAgam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZShqb2JJZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFJlc2V0IGdlbmVyYXRpb24gc3RhdGVzXG4gICAgICAgICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQoZmFsc2UpO1xuICAgICAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNEcmFmdE1vZGUoZmFsc2UpO1xuICAgICAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDYXJkcyhbXSk7XG4gICAgICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25Db3VudCgwKTtcbiAgICAgICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvblNob3duKGZhbHNlKTtcbiAgICAgICAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQobnVsbCk7XG4gICAgICAgICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0R2VuZXJhdGlvblByb2dyZXNzKCcnKTtcbiAgICAgICAgICAgICAgLy8gRG9uJ3QgcmVzZXQgcHJvZ3Jlc3MgLSBsZXQgdGltZS1iYXNlZCBwcm9ncmVzcyBjb250aW51ZVxuICAgICAgICAvLyBqb2JNYW5hZ2VtZW50LnNldFByb2dyZXNzUGVyY2VudGFnZSgwKTtcbiAgICAgICAgICAgICAgam9iTWFuYWdlbWVudC5zdG9wRWxhcHNlZFRpbWVUcmFja2luZygpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gVW5zdWJzY3JpYmUgZnJvbSBqb2JcbiAgICAgICAgICAgICAgd2ViU29ja2V0LnVuc3Vic2NyaWJlRnJvbUpvYihqb2JJZCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBTaG93IGVycm9yIHRvYXN0XG4gICAgICAgICAgICAgIHRvYXN0LmVycm9yKCdDYXJkIGdlbmVyYXRpb24gdGltZWQgb3V0LiBQbGVhc2UgdHJ5IGFnYWluLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/CflIQgV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCBkdXJpbmcgZ2VuZXJhdGlvbiwgYXR0ZW1wdGluZyByZWNvbm5lY3QuLi4nKTtcbiAgICAgIGNvbnN0IHJlY29ubmVjdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHdlYlNvY2tldC5jb25uZWN0V2ViU29ja2V0KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZS1zdWJzY3JpYmUgdG8gY3VycmVudCBqb2IgYWZ0ZXIgcmVjb25uZWN0aW9uXG4gICAgICAgIGNvbnN0IGpvYklkID0gd2ViU29ja2V0LmN1cnJlbnRKb2JSZWYuY3VycmVudDtcbiAgICAgICAgaWYgKGpvYklkKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+ToSBSZS1zdWJzY3JpYmluZyB0byBqb2IgYWZ0ZXIgcmVjb25uZWN0OicsIGpvYklkKTtcbiAgICAgICAgICAgIHdlYlNvY2tldC5zdWJzY3JpYmVUb0pvYihqb2JJZCk7XG4gICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDIwMDApO1xuICAgICAgXG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHJlY29ubmVjdFRpbWVyKTtcbiAgICB9XG4gIH0sIFt3ZWJTb2NrZXQsIGNhcmRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZywgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCwgam9iTWFuYWdlbWVudC5nZW5lcmF0aW9uU3RhcnRUaW1lXSk7XG5cbiAgLy8gUmVzZXQgc3RhbGUgam9iIGZsYWcgd2hlbiBnZW5lcmF0aW9uIHN0YXJ0c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcgfHwgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCkge1xuICAgICAgc3RhbGVKb2JMb2dnZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIH1cbiAgfSwgW2NhcmRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZywgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZF0pO1xuXG4gIC8vIE1vbml0b3IgZm9yIHN0YWxlIGpvYiB1cGRhdGVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKChjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcgfHwgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCkgJiYgXG4gICAgICAgIHdlYlNvY2tldC5jdXJyZW50Sm9iUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGNoZWNrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RVcGRhdGUgPSBEYXRlLm5vdygpIC0gd2ViU29ja2V0Lmxhc3RKb2JVcGRhdGVSZWYuY3VycmVudDtcbiAgICAgICAgY29uc3Qgam9iSWQgPSB3ZWJTb2NrZXQuY3VycmVudEpvYlJlZi5jdXJyZW50O1xuICAgICAgICBcbiAgICAgICAgLy8gVmVyeSBhZ2dyZXNzaXZlIGNoZWNraW5nIHdoZW4gYXQgOTUlKyBwcm9ncmVzc1xuICAgICAgICBpZiAoam9iTWFuYWdlbWVudC5wcm9ncmVzc1BlcmNlbnRhZ2UgPj0gOTUgJiYgdGltZVNpbmNlTGFzdFVwZGF0ZSA+IDUwMDApIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBObyB1cGRhdGVzIGZvciAke01hdGgucm91bmQodGltZVNpbmNlTGFzdFVwZGF0ZS8xMDAwKX1zIGF0ICR7am9iTWFuYWdlbWVudC5wcm9ncmVzc1BlcmNlbnRhZ2V9JSBwcm9ncmVzcyAtIGNoZWNraW5nIGpvYiBzdGF0dXMuLi5gKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoam9iSWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvam9iLXN0YXR1cy8ke2pvYklkfWApO1xuICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqb2JTdGF0dXMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/Cfk4ogRGlyZWN0IGpvYiBzdGF0dXMgY2hlY2s6Jywgam9iU3RhdHVzKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoam9iU3RhdHVzLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgJiYgam9iU3RhdHVzLmNhcmREYXRhKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIEpvYiBpcyBhY3R1YWxseSBjb21wbGV0ZWQhIFByb2Nlc3NpbmcgcmVzdWx0Li4uJyk7XG4gICAgICAgICAgICAgICAgICBoYW5kbGVKb2JVcGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICBqb2JfaWQ6IGpvYklkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogJ0NhcmQgZ2VuZXJhdGlvbiBjb21wbGV0ZSEnLFxuICAgICAgICAgICAgICAgICAgICBjYXJkRGF0YTogam9iU3RhdHVzLmNhcmREYXRhXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRXhpdCBlYXJseSBvbiBjb21wbGV0aW9uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2hlY2sgam9iIHN0YXR1czonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE1vcmUgYWdncmVzc2l2ZSBjaGVja2luZyB3aGVuIGF0IGhpZ2ggcHJvZ3Jlc3NcbiAgICAgICAgZWxzZSBpZiAoam9iTWFuYWdlbWVudC5wcm9ncmVzc1BlcmNlbnRhZ2UgPj0gOTAgJiYgdGltZVNpbmNlTGFzdFVwZGF0ZSA+IDEwMDAwKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gTm8gdXBkYXRlcyBmb3IgJHtNYXRoLnJvdW5kKHRpbWVTaW5jZUxhc3RVcGRhdGUvMTAwMCl9cyBhdCAke2pvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlfSUgcHJvZ3Jlc3NgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoam9iSWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvam9iLXN0YXR1cy8ke2pvYklkfWApO1xuICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqb2JTdGF0dXMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/Cfk4ogRGlyZWN0IGpvYiBzdGF0dXMgY2hlY2s6Jywgam9iU3RhdHVzKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoam9iU3RhdHVzLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgJiYgam9iU3RhdHVzLmNhcmREYXRhKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIEpvYiBpcyBhY3R1YWxseSBjb21wbGV0ZWQhIFByb2Nlc3NpbmcgcmVzdWx0Li4uJyk7XG4gICAgICAgICAgICAgICAgICBoYW5kbGVKb2JVcGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICBqb2JfaWQ6IGpvYklkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogJ0NhcmQgZ2VuZXJhdGlvbiBjb21wbGV0ZSEnLFxuICAgICAgICAgICAgICAgICAgICBjYXJkRGF0YTogam9iU3RhdHVzLmNhcmREYXRhXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRXhpdCBlYXJseSBvbiBjb21wbGV0aW9uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2hlY2sgam9iIHN0YXR1czonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTdGFuZGFyZCBzdGFsZSB1cGRhdGUgY2hlY2tcbiAgICAgICAgaWYgKHRpbWVTaW5jZUxhc3RVcGRhdGUgPiAzMDAwMCkgeyAvLyAzMCBzZWNvbmRzIHdpdGhvdXQgdXBkYXRlXG4gICAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gTm8gam9iIHVwZGF0ZXMgZm9yIDMwIHNlY29uZHMsIGNoZWNraW5nIGNvbm5lY3Rpb24uLi4nKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIXdlYlNvY2tldC5pc1NvY2tldENvbm5lY3RlZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflIQgV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCwgcmVjb25uZWN0aW5nLi4uJyk7XG4gICAgICAgICAgICB3ZWJTb2NrZXQuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoam9iSWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OhIFJlLXN1YnNjcmliaW5nIHRvIGpvYiBkdWUgdG8gc3RhbGUgdXBkYXRlczonLCBqb2JJZCk7XG4gICAgICAgICAgICB3ZWJTb2NrZXQuc3Vic2NyaWJlVG9Kb2Ioam9iSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZXNldCB0aGUgdGltZXJcbiAgICAgICAgICB3ZWJTb2NrZXQubGFzdEpvYlVwZGF0ZVJlZi5jdXJyZW50ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgfVxuICAgICAgfSwgMzAwMCk7IC8vIENoZWNrIGV2ZXJ5IDMgc2Vjb25kcyBmb3IgZmFzdGVyIGRldGVjdGlvbiBhdCBoaWdoIHByb2dyZXNzXG4gICAgICBcbiAgICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGNoZWNrSW50ZXJ2YWwpO1xuICAgIH1cbiAgfSwgW2NhcmRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZywgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCwgXG4gICAgICB3ZWJTb2NrZXQsIGpvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlLCBoYW5kbGVKb2JVcGRhdGVdKTtcblxuICAvLyBPTEQ6IENvbXBsZXggam9iIHJlc3RvcmF0aW9uIC0ga2VlcGluZyBmb3IgcmVmZXJlbmNlIGJ1dCBub3QgdXNpbmdcbiAgY29uc3QgY2hlY2tQZW5kaW5nSm9icyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygn8J+UhCBTdGFydGluZyBqb2IgcmVzdG9yYXRpb24uLi4nKTtcbiAgICBzZXRJc1Jlc3RvcmluZ0pvYnModHJ1ZSk7XG4gICAgXG4gICAgY29uc3QgcGVuZGluZ0pvYnMgPSBhd2FpdCBqb2JNYW5hZ2VtZW50LmNoZWNrUGVuZGluZ0pvYnMoKTtcbiAgICBcbiAgICBpZiAocGVuZGluZ0pvYnMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIE5vIHBlbmRpbmcgam9icyB0byByZXN0b3JlJyk7XG4gICAgICBzZXRJc1Jlc3RvcmluZ0pvYnMoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+UhCBGb3VuZCBwZW5kaW5nIGpvYnMgdG8gcmVzdG9yZTonLCBwZW5kaW5nSm9icyk7XG4gICAgXG4gICAgLy8gU2VwYXJhdGUgZHJhZnQgam9icyBmcm9tIGZpbmFsIGpvYnNcbiAgICBjb25zdCBkcmFmdEpvYnMgPSBwZW5kaW5nSm9icy5maWx0ZXIoKHsgam9iSWQgfSkgPT4gam9iSWQuc3RhcnRzV2l0aCgnZHJhZnQtJykpO1xuICAgIGNvbnN0IGZpbmFsSm9icyA9IHBlbmRpbmdKb2JzLmZpbHRlcigoeyBqb2JJZCB9KSA9PiAham9iSWQuc3RhcnRzV2l0aCgnZHJhZnQtJykpO1xuICAgIFxuICAgIC8vIFByb2Nlc3MgZHJhZnQgam9icyBmaXJzdCB0byByZXN0b3JlIGRyYWZ0IHN0YXRlXG4gICAgaWYgKGRyYWZ0Sm9icy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+OqCBGb3VuZCAke2RyYWZ0Sm9icy5sZW5ndGh9IGRyYWZ0IGpvYnMgdG8gcmVzdG9yZWApO1xuICAgICAgXG4gICAgICAvLyBDb2xsZWN0IGFsbCBkcmFmdCBjYXJkcyBmcm9tIGFsbCBkcmFmdCBqb2JzXG4gICAgICBjb25zdCBkcmFmdHNCeUluZGV4OiAoR2VuZXJhdGVkQ2FyZCB8IG51bGwpW10gPSBuZXcgQXJyYXkoNSkuZmlsbChudWxsKTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCB7IGpvYiB9IG9mIGRyYWZ0Sm9icykge1xuICAgICAgICBpZiAoam9iLmRyYWZ0Q2FyZHMgJiYgQXJyYXkuaXNBcnJheShqb2IuZHJhZnRDYXJkcykgJiYgam9iLmRyYWZ0Q2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGRyYWZ0Q2FyZCA9IGpvYi5kcmFmdENhcmRzWzBdOyAvLyBFYWNoIGpvYiBzdG9yZXMgb25lIGRyYWZ0XG4gICAgICAgICAgY29uc3QgZHJhZnRJbmRleCA9IGpvYi5kcmFmdEluZGV4O1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChkcmFmdEluZGV4ID49IDAgJiYgZHJhZnRJbmRleCA8IDUpIHtcbiAgICAgICAgICAgIGRyYWZ0c0J5SW5kZXhbZHJhZnRJbmRleF0gPSBkcmFmdENhcmQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCBub24tbnVsbCBkcmFmdHMgZm9yIGNvdW50aW5nXG4gICAgICBjb25zdCBhbGxEcmFmdENhcmRzID0gZHJhZnRzQnlJbmRleC5maWx0ZXIoQm9vbGVhbikgYXMgR2VuZXJhdGVkQ2FyZFtdO1xuICAgICAgXG4gICAgICAvLyBSZXN0b3JlIGFsbCBkcmFmdCBjYXJkcyBhdCBvbmNlXG4gICAgICBpZiAoYWxsRHJhZnRDYXJkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIFJlc3RvcmluZyAke2FsbERyYWZ0Q2FyZHMubGVuZ3RofSBkcmFmdCBjYXJkcyBmcm9tICR7ZHJhZnRKb2JzLmxlbmd0aH0gam9ic2ApO1xuICAgICAgICAvLyBPbmx5IHNldCBkcmFmdCBtb2RlIHdoZW4gd2UgaGF2ZSBhY3R1YWwgY2FyZHNcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfjq8gU2V0dGluZyBpc0RyYWZ0TW9kZSB0byB0cnVlIC0gZHJhZnQgY2FyZHMgZm91bmQnKTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzRHJhZnRNb2RlKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgLy8gVXNlIHRoZSBkcmFmdHNCeUluZGV4IHdoaWNoIGFscmVhZHkgaGFzIGRyYWZ0cyBhdCBjb3JyZWN0IHBvc2l0aW9uc1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDYXJkcyhkcmFmdHNCeUluZGV4KTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvbkNvdW50KGFsbERyYWZ0Q2FyZHMubGVuZ3RoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBhcHByb3ByaWF0ZSBwcm9ncmVzcyBzdGF0ZVxuICAgICAgICBpZiAoYWxsRHJhZnRDYXJkcy5sZW5ndGggPT09IDUpIHtcbiAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uU2hvd24odHJ1ZSk7XG4gICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKGZhbHNlKTtcbiAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKFwiXCIpO1xuICAgICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhcIlwiKTtcbiAgICAgICAgICAvLyBUaW1lLWJhc2VkIHByb2dyZXNzIHdpbGwgYmUgY2xlYXJlZCBhYm92ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcodHJ1ZSk7XG4gICAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICAgIGNvbnN0IHByb2dyZXNzTXNnID0gYOKcqCAke2FsbERyYWZ0Q2FyZHMubGVuZ3RofS81IGZyb250IGNvdmVyIHZhcmlhdGlvbnMgY29tcGxldGUuLi4gJHthbGxEcmFmdENhcmRzLmxlbmd0aCA+PSAyID8gXCJZb3UgY2FuIHNlbGVjdCBvbmUgbm93IHRvIHByb2NlZWQhXCIgOiBcIlwifWA7XG4gICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhwcm9ncmVzc01zZyk7XG4gICAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKHByb2dyZXNzTXNnKTtcbiAgICAgICAgICAvLyBEb24ndCBvdmVycmlkZSB0aW1lLWJhc2VkIHByb2dyZXNzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgbm8gZHJhZnQgY2FyZHMgd2VyZSBmb3VuZCBidXQgd2UgaGF2ZSBkcmFmdCBqb2JzLCBzZXQgYXBwcm9wcmlhdGUgc3RhdGVcbiAgICAgIGlmIChhbGxEcmFmdENhcmRzLmxlbmd0aCA9PT0gMCAmJiBkcmFmdEpvYnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBEcmFmdCBqb2JzIGZvdW5kIGJ1dCBubyBjYXJkcyB5ZXQgLSBzZXR0aW5nIGdlbmVyYXRpb24gc3RhdGUnKTtcbiAgICAgICAgLy8gU2V0IGRyYWZ0IG1vZGUgYW5kIGluaXRpYWxpemUgZW1wdHkgYXJyYXkgZm9yIGRyYWZ0IGpvYnMgaW4gcHJvZ3Jlc3NcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzRHJhZnRNb2RlKHRydWUpO1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDYXJkcyhbbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbF0pO1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcodHJ1ZSk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MoXCLwn46oIENyZWF0aW5nIDUgZnJvbnQgY292ZXIgdmFyaWF0aW9ucyBmb3IgeW91IHRvIGNob29zZSBmcm9tLi4uXCIpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MoXCLwn46oIENyZWF0aW5nIDUgZnJvbnQgY292ZXIgdmFyaWF0aW9ucyBmb3IgeW91IHRvIGNob29zZSBmcm9tLi4uXCIpO1xuICAgICAgICAvLyBEb24ndCByZXNldCBwcm9ncmVzcyAtIGxldCB0aW1lLWJhc2VkIHByb2dyZXNzIGNvbnRpbnVlXG4gICAgICAgIC8vIGpvYk1hbmFnZW1lbnQuc2V0UHJvZ3Jlc3NQZXJjZW50YWdlKDApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTdWJzY3JpYmUgdG8gYWxsIG5vbi1zdGFsZSBkcmFmdCBqb2JzXG4gICAgICBmb3IgKGNvbnN0IHsgam9iSWQsIGpvYiB9IG9mIGRyYWZ0Sm9icykge1xuICAgICAgICBjb25zdCBqb2JBZ2UgPSBEYXRlLm5vdygpIC0gKGpvYi5jcmVhdGVkQXQgfHwgRGF0ZS5ub3coKSk7XG4gICAgICAgIGNvbnN0IGlzU3RhbGUgPSBqb2JBZ2UgPiA1ICogNjAgKiAxMDAwO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFpc1N0YWxlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYPCfk6EgU3Vic2NyaWJpbmcgdG8gZHJhZnQgam9iOiAke2pvYklkfSAoaGFzICR7am9iLmRyYWZ0Q2FyZHM/Lmxlbmd0aCB8fCAwfSBjYXJkcylgKTtcbiAgICAgICAgICB3ZWJTb2NrZXQuc3Vic2NyaWJlVG9Kb2Ioam9iSWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFByb2Nlc3MgcmVtYWluaW5nIGpvYnMgKGZpbmFsIGNhcmQgZ2VuZXJhdGlvbilcbiAgICBmb3IgKGNvbnN0IHsgam9iSWQsIGpvYiB9IG9mIGZpbmFsSm9icykge1xuICAgICAgY29uc29sZS5sb2coYPCfk4sgUHJvY2Vzc2luZyBqb2IgJHtqb2JJZH06YCwge1xuICAgICAgICBpc0RyYWZ0OiBqb2JJZC5zdGFydHNXaXRoKCdkcmFmdC0nKSxcbiAgICAgICAgc3RhdHVzOiBqb2Iuc3RhdHVzLFxuICAgICAgICBoYXNQcm9ncmVzczogISFqb2IubGFzdFByb2dyZXNzLFxuICAgICAgICBjcmVhdGVkQXQ6IGpvYi5jcmVhdGVkQXRcbiAgICAgIH0pO1xuICAgICAgLy8gQ2hlY2sgaWYgam9iIGlzIHN0YWxlIChvbGRlciB0aGFuIDUgbWludXRlcyB3aXRob3V0IGNvbXBsZXRpb24pXG4gICAgICBjb25zdCBqb2JBZ2UgPSBEYXRlLm5vdygpIC0gKGpvYi5jcmVhdGVkQXQgfHwgRGF0ZS5ub3coKSk7XG4gICAgICBjb25zdCBpc1N0YWxlID0gam9iQWdlID4gNSAqIDYwICogMTAwMCAmJiBqb2Iuc3RhdHVzICE9PSAnY29tcGxldGVkJztcbiAgICAgIFxuICAgICAgaWYgKGlzU3RhbGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coYPCfp7kgQ2xlYW5pbmcgdXAgc3RhbGUgam9iOiAke2pvYklkfSAoYWdlOiAke01hdGgucm91bmQoam9iQWdlIC8gMTAwMCl9cylgKTtcbiAgICAgICAgam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZShqb2JJZCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZXN0b3JlIHByb2dyZXNzIGFuZCBzdGF0ZVxuICAgICAgLy8gRG9uJ3QgcmVzdG9yZSBwcm9ncmVzcyAtIGxldCB0aW1lLWJhc2VkIHByb2dyZXNzIGhhbmRsZSBpdFxuICAgICAgLy8gaWYgKGpvYi5sYXN0UHJvZ3Jlc3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gICBqb2JNYW5hZ2VtZW50LnNldFByb2dyZXNzUGVyY2VudGFnZShqb2IubGFzdFByb2dyZXNzKTtcbiAgICAgIC8vICAgY2FyZEdlbmVyYXRpb24uc2V0UHJvZ3Jlc3NQZXJjZW50YWdlKGpvYi5sYXN0UHJvZ3Jlc3MpO1xuICAgICAgLy8gICBkcmFmdEdlbmVyYXRpb24uc2V0UHJvZ3Jlc3NQZXJjZW50YWdlKGpvYi5sYXN0UHJvZ3Jlc3MpO1xuICAgICAgLy8gfVxuICAgICAgXG4gICAgICAvLyBPbmx5IHJlc3RvcmUgcHJvZ3Jlc3MgdGV4dCBpZiB0aGUgam9iIGlzIG5vdCBjb21wbGV0ZWRcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgc2hvd2luZyBcIkdlbmVyYXRpb24gY29tcGxldGUhICgxMDAlKVwiIGZyb20gb2xkIGNvbXBsZXRlZCBqb2JzXG4gICAgICBpZiAoam9iLmxhc3RQcm9ncmVzc1RleHQgJiYgam9iLnN0YXR1cyAhPT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgam9iTWFuYWdlbWVudC5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3Moam9iLmxhc3RQcm9ncmVzc1RleHQpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3Moam9iLmxhc3RQcm9ncmVzc1RleHQpO1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKGpvYi5sYXN0UHJvZ3Jlc3NUZXh0KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBmaW5hbCBjYXJkIGdlbmVyYXRpb24gc3RhdGVcbiAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyh0cnVlKTtcbiAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIElmIHdlIGhhdmUgYSBzZWxlY3RlZCBkcmFmdCwgcmVzdG9yZSBpdFxuICAgICAgaWYgKGpvYi5zZWxlY3RlZERyYWZ0SW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0U2VsZWN0ZWREcmFmdEluZGV4KGpvYi5zZWxlY3RlZERyYWZ0SW5kZXgpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBqb2JNYW5hZ2VtZW50LnNldEN1cnJlbnRKb2JJZChqb2JJZCk7XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGF0ZSBlbGFwc2VkIHRpbWUgc2luY2Ugam9iIHN0YXJ0ZWRcbiAgICAgIGNvbnN0IGpvYlN0YXJ0VGltZSA9IGpvYi5jcmVhdGVkQXQgfHwgRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IGVsYXBzZWRTaW5jZVN0YXJ0ID0gKERhdGUubm93KCkgLSBqb2JTdGFydFRpbWUpIC8gMTAwMDtcbiAgICAgIFxuICAgICAgLy8gU3RhcnQgZWxhcHNlZCB0aW1lIHRyYWNraW5nXG4gICAgICBqb2JNYW5hZ2VtZW50LnN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZygpO1xuICAgICAgXG4gICAgICAvLyBTdWJzY3JpYmUgdG8gdGhlIGpvYiB1cGRhdGVzXG4gICAgICB3ZWJTb2NrZXQuc3Vic2NyaWJlVG9Kb2Ioam9iSWQpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgam9iIGV4aXN0cyBvbiBiYWNrZW5kXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0JBQ0tFTkRfQVBJX0JBU0VfVVJMfS9hcGkvam9iLXN0YXR1cy8ke2pvYklkfWApO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhg8J+ToSBKb2Igc3RhdHVzIGNoZWNrIGZvciAke2pvYklkfTpgLCB7XG4gICAgICAgICAgb2s6IHJlc3BvbnNlLm9rLFxuICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgIHJlc3VsdFN0YXR1czogcmVzdWx0LnN0YXR1cyxcbiAgICAgICAgICB1cmw6IGAke0JBQ0tFTkRfQVBJX0JBU0VfVVJMfS9hcGkvam9iLXN0YXR1cy8ke2pvYklkfWBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gJ25vdF9mb3VuZCcpIHtcbiAgICAgICAgICAvLyBKb2IgZG9lc24ndCBleGlzdCBvbiBiYWNrZW5kLCBjbGVhbiB1cCBhbmQgbm90aWZ5IHVzZXJcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pqg77iPIEpvYiAke2pvYklkfSBub3QgZm91bmQgb24gYmFja2VuZCwgY2xlYW5pbmcgdXAuLi5gKTtcbiAgICAgICAgICBqb2JNYW5hZ2VtZW50LnJlbW92ZUpvYkZyb21TdG9yYWdlKGpvYklkKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZXNldCBnZW5lcmF0aW9uIHN0YXRlXG4gICAgICAgICAgaWYgKGlzRHJhZnRKb2IpIHtcbiAgICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcoZmFsc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZChmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNob3cgaGVscGZ1bCBtZXNzYWdlIHRvIHVzZXJcbiAgICAgICAgICB0b2FzdC5lcnJvcihcbiAgICAgICAgICAgIGBQcmV2aW91cyAke2lzRHJhZnRKb2IgPyAnZHJhZnQnIDogJ2NhcmQnfSBnZW5lcmF0aW9uIGV4cGlyZWQuIFBsZWFzZSBzdGFydCBhIG5ldyBvbmUuYCxcbiAgICAgICAgICAgIHsgZHVyYXRpb246IDUwMDAgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSm9iIGV4aXN0cywgc2hvdyByZXN1bWluZyBtZXNzYWdlXG4gICAgICAgICAgdG9hc3QuaW5mbyhgUmVzdW1pbmcgJHtpc0RyYWZ0Sm9iID8gJ2RyYWZ0JyA6ICdjYXJkJ30gZ2VuZXJhdGlvbi4uLmApO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdmVyaWZ5IGpvYiBzdGF0dXM6JywgZXJyb3IpO1xuICAgICAgICAvLyBDb250aW51ZSBhbnl3YXksIFdlYlNvY2tldCB3aWxsIGhhbmRsZSBpdFxuICAgICAgICB0b2FzdC5pbmZvKGBBdHRlbXB0aW5nIHRvIHJlc3VtZSAke2lzRHJhZnRKb2IgPyAnZHJhZnQnIDogJ2NhcmQnfSBnZW5lcmF0aW9uLi4uYCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFJlc3RvcmF0aW9uIGNvbXBsZXRlIC0gYWxsb3cgV2ViU29ja2V0IHVwZGF0ZXMgdG8gYmUgcHJvY2Vzc2VkXG4gICAgLy8gQWRkIGEgc21hbGwgZGVsYXkgdG8gZW5zdXJlIHN0YXRlIHVwZGF0ZXMgaGF2ZSBwcm9wYWdhdGVkXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIEpvYiByZXN0b3JhdGlvbiBjb21wbGV0ZSwgYWxsb3dpbmcgV2ViU29ja2V0IHVwZGF0ZXMnKTtcbiAgICAgIHNldElzUmVzdG9yaW5nSm9icyhmYWxzZSk7XG4gICAgfSwgMTAwKTtcbiAgfSwgW2pvYk1hbmFnZW1lbnQsIGNhcmRHZW5lcmF0aW9uLCBkcmFmdEdlbmVyYXRpb24sIHdlYlNvY2tldF0pO1xuXG4gIC8vIExvYWQgbW9zdCByZWNlbnQgZHJhZnQgYmF0Y2ggYW5kIGZpbmFsIGNhcmQgb24gY29tcG9uZW50IG1vdW50XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ/CfmoAgdXNlQ2FyZFN0dWRpbyBtb3VudGVkLCBsb2FkaW5nIHJlY2VudCBjYXJkcy4uLicpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBjb21wbGV0ZWQgZmluYWwgY2FyZCBmaXJzdFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzYXZlZEZpbmFsQ2FyZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsYXN0Q29tcGxldGVkQ2FyZCcpO1xuICAgICAgaWYgKHNhdmVkRmluYWxDYXJkKSB7XG4gICAgICAgIGNvbnN0IGZpbmFsQ2FyZCA9IEpTT04ucGFyc2Uoc2F2ZWRGaW5hbENhcmQpO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+SviBGb3VuZCBzYXZlZCBmaW5hbCBjYXJkOicsIGZpbmFsQ2FyZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZXN0b3JlIGZpbmFsIGNhcmQgc3RhdGVcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGVkQ2FyZChmaW5hbENhcmQpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0ZWRDYXJkcyhbZmluYWxDYXJkXSk7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzQ2FyZENvbXBsZXRlZCh0cnVlKTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzRHJhZnRNb2RlKGZhbHNlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsZWFyIHRoZSBzYXZlZCBjYXJkIGFmdGVyIHJlc3RvcmluZ1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbGFzdENvbXBsZXRlZENhcmQnKTtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBSZXN0b3JlZCBmaW5hbCBjYXJkIGZyb20gbG9jYWxTdG9yYWdlJyk7XG4gICAgICAgIHJldHVybjsgLy8gRG9uJ3QgbG9hZCBkcmFmdHMgaWYgd2UgaGF2ZSBhIGZpbmFsIGNhcmRcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHJlc3RvcmUgZmluYWwgY2FyZDonLCBlcnJvcik7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIG5vIGZpbmFsIGNhcmQsIGNoZWNrIGZvciBkcmFmdHNcbiAgICAvLyBGaXJzdCwgY2xlYXIgYW55IGV4aXN0aW5nIGRyYWZ0IHN0YXRlIHRvIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDYXJkcyhbXSk7XG4gICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvbkNvdW50KDApO1xuICAgIFxuICAgIGNvbnN0IHJlY2VudERyYWZ0cyA9IGpvYk1hbmFnZW1lbnQubG9hZE1vc3RSZWNlbnREcmFmdEJhdGNoKCk7XG4gICAgY29uc29sZS5sb2coJ/Cfk4ogRHJhZnQgYmF0Y2ggcmVzdWx0OicsIHJlY2VudERyYWZ0cyk7XG4gICAgXG4gICAgaWYgKHJlY2VudERyYWZ0cyAmJiByZWNlbnREcmFmdHMuY2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coYPCfk4sgRm91bmQgcmVjZW50IGRyYWZ0IGJhdGNoIHdpdGggJHtyZWNlbnREcmFmdHMuY291bnR9IGNhcmRzIGZyb20gJHtuZXcgRGF0ZShyZWNlbnREcmFmdHMuY3JlYXRlZEF0KS50b0xvY2FsZVN0cmluZygpfWApO1xuICAgICAgXG4gICAgICAvLyBTZXQgdGhlIGRyYWZ0IGNhcmRzIGFuZCBlbmFibGUgZHJhZnQgbW9kZVxuICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMocmVjZW50RHJhZnRzLmNhcmRzKTtcbiAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0RyYWZ0TW9kZSh0cnVlKTtcbiAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25Db3VudChyZWNlbnREcmFmdHMuY291bnQpO1xuICAgICAgXG4gICAgICAvLyBJZiB3ZSBoYXZlIGFsbCA1IGNhcmRzLCBtYXJrIGFzIGNvbXBsZXRlXG4gICAgICBpZiAocmVjZW50RHJhZnRzLmNvdW50ID09PSA1KSB7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25TaG93bih0cnVlKTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTdGlsbCBnZW5lcmF0aW5nIC0gc2V0IGdlbmVyYXRpb24gc3RhdGUgYW5kIHN0YXJ0IHRpbWVyXG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcodHJ1ZSk7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGF0ZSBob3cgbG9uZyBnZW5lcmF0aW9uIGhhcyBiZWVuIHJ1bm5pbmdcbiAgICAgICAgY29uc3QgZWxhcHNlZFNlY29uZHMgPSBNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gcmVjZW50RHJhZnRzLmNyZWF0ZWRBdCkgLyAxMDAwKTtcbiAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50RWxhcHNlZFRpbWUoZWxhcHNlZFNlY29uZHMpO1xuICAgICAgICBqb2JNYW5hZ2VtZW50LnN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZygpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0IHByb2dyZXNzXG4gICAgICAgIGNvbnN0IHByb2dyZXNzTXNnID0gYOKcqCAke3JlY2VudERyYWZ0cy5jb3VudH0vNSBmcm9udCBjb3ZlciB2YXJpYXRpb25zIGNvbXBsZXRlLi4uYDtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhwcm9ncmVzc01zZyk7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhwcm9ncmVzc01zZyk7XG4gICAgICAgIC8vIERvbid0IG92ZXJyaWRlIHRpbWUtYmFzZWQgcHJvZ3Jlc3NcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBwZW5kaW5nIGpvYnMgdG8gc3Vic2NyaWJlIHRvXG4gICAgICAgIGNvbnN0IHBlbmRpbmdKb2JzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGVuZGluZ0NhcmRKb2JzJykgfHwgJ1tdJyk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZURyYWZ0Sm9icyA9IHBlbmRpbmdKb2JzLmZpbHRlcigoaWQ6IHN0cmluZykgPT4gaWQuc3RhcnRzV2l0aCgnZHJhZnQtJykpO1xuICAgICAgICBcbiAgICAgICAgLy8gU3Vic2NyaWJlIHRvIGFjdGl2ZSBkcmFmdCBqb2JzIGZvciByZWFsLXRpbWUgdXBkYXRlc1xuICAgICAgICBhY3RpdmVEcmFmdEpvYnMuZm9yRWFjaCgoam9iSWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OhIFN1YnNjcmliaW5nIHRvIGFjdGl2ZSBkcmFmdCBqb2I6ICR7am9iSWR9YCk7XG4gICAgICAgICAgd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iKGpvYklkKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIE1hcmsgcmVzdG9yYXRpb24gYXMgY29tcGxldGUgYWZ0ZXIgYSBzbWFsbCBkZWxheVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2V0SXNSZXN0b3JpbmdKb2JzKGZhbHNlKTtcbiAgICB9LCAxMDApO1xuICB9LCBbXSk7XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgc3RhdGUgYW5kIGZ1bmN0aW9ucyB0aGF0IHRoZSBVSSBuZWVkc1xuICByZXR1cm4ge1xuICAgIC8vIENvcmUgc3RhdGVcbiAgICBwcm9tcHQsXG4gICAgc2V0UHJvbXB0LFxuICAgIGZpbmFsQ2FyZE1lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLmZpbmFsQ2FyZE1lc3NhZ2UsXG4gICAgc2V0RmluYWxDYXJkTWVzc2FnZTogbWVzc2FnZUdlbmVyYXRpb24uc2V0RmluYWxDYXJkTWVzc2FnZSxcbiAgICB0b0ZpZWxkLFxuICAgIHNldFRvRmllbGQsXG4gICAgZnJvbUZpZWxkLFxuICAgIHNldEZyb21GaWVsZCxcbiAgICByZWxhdGlvbnNoaXBGaWVsZCxcbiAgICBzZXRSZWxhdGlvbnNoaXBGaWVsZCxcbiAgICBzZWxlY3RlZFR5cGUsXG4gICAgc2V0U2VsZWN0ZWRUeXBlLFxuICAgIGN1c3RvbUNhcmRUeXBlLFxuICAgIHNldEN1c3RvbUNhcmRUeXBlLFxuICAgIHNlbGVjdGVkVG9uZSxcbiAgICBzZXRTZWxlY3RlZFRvbmUsXG4gICAgaXNHZW5lcmF0aW5nOiBjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcgfHwgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZyxcbiAgICBzZXRJc0dlbmVyYXRpbmc6IGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyxcbiAgICBpc0dlbmVyYXRpbmdNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdNZXNzYWdlLFxuICAgIHNldElzR2VuZXJhdGluZ01lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZ01lc3NhZ2UsXG4gICAgZ2VuZXJhdGVkQ2FyZDogY2FyZEdlbmVyYXRpb24uZ2VuZXJhdGVkQ2FyZCxcbiAgICBzZXRHZW5lcmF0ZWRDYXJkOiBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0ZWRDYXJkLFxuICAgIG51bWJlck9mQ2FyZHMsXG4gICAgc2V0TnVtYmVyT2ZDYXJkcyxcbiAgICBnZW5lcmF0ZWRDYXJkczogY2FyZEdlbmVyYXRpb24uZ2VuZXJhdGVkQ2FyZHMsXG4gICAgc2V0R2VuZXJhdGVkQ2FyZHM6IGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRlZENhcmRzLFxuICAgIHNlbGVjdGVkQ2FyZEluZGV4OiBjYXJkR2VuZXJhdGlvbi5zZWxlY3RlZENhcmRJbmRleCxcbiAgICBzZXRTZWxlY3RlZENhcmRJbmRleDogY2FyZEdlbmVyYXRpb24uc2V0U2VsZWN0ZWRDYXJkSW5kZXgsXG4gICAgXG4gICAgLy8gQWR2YW5jZWQgb3B0aW9uc1xuICAgIHNob3dBZHZhbmNlZCxcbiAgICBzZXRTaG93QWR2YW5jZWQsXG4gICAgc2VsZWN0ZWRBcnRpc3RpY1N0eWxlLFxuICAgIHNldFNlbGVjdGVkQXJ0aXN0aWNTdHlsZSxcbiAgICBjdXN0b21TdHlsZURlc2NyaXB0aW9uLFxuICAgIHNldEN1c3RvbVN0eWxlRGVzY3JpcHRpb24sXG4gICAgc2VsZWN0ZWRJbWFnZU1vZGVsLFxuICAgIHNldFNlbGVjdGVkSW1hZ2VNb2RlbCxcbiAgICBzZWxlY3RlZERyYWZ0TW9kZWwsXG4gICAgc2V0U2VsZWN0ZWREcmFmdE1vZGVsLFxuICAgIFxuICAgIC8vIERyYWZ0IG1vZGVcbiAgICBpc0RyYWZ0TW9kZTogZHJhZnRHZW5lcmF0aW9uLmlzRHJhZnRNb2RlLFxuICAgIHNldElzRHJhZnRNb2RlOiBkcmFmdEdlbmVyYXRpb24uc2V0SXNEcmFmdE1vZGUsXG4gICAgZHJhZnRDYXJkczogZHJhZnRHZW5lcmF0aW9uLmRyYWZ0Q2FyZHMsXG4gICAgc2V0RHJhZnRDYXJkczogZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMsXG4gICAgc2VsZWN0ZWREcmFmdEluZGV4OiBkcmFmdEdlbmVyYXRpb24uc2VsZWN0ZWREcmFmdEluZGV4LFxuICAgIHNldFNlbGVjdGVkRHJhZnRJbmRleDogZHJhZnRHZW5lcmF0aW9uLnNldFNlbGVjdGVkRHJhZnRJbmRleCxcbiAgICBpc0dlbmVyYXRpbmdGaW5hbENhcmQ6IGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQsXG4gICAgc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkOiBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkLFxuICAgIHByZXZpZXdpbmdEcmFmdEluZGV4OiBkcmFmdEdlbmVyYXRpb24ucHJldmlld2luZ0RyYWZ0SW5kZXgsXG4gICAgc2V0UHJldmlld2luZ0RyYWZ0SW5kZXg6IGRyYWZ0R2VuZXJhdGlvbi5zZXRQcmV2aWV3aW5nRHJhZnRJbmRleCxcbiAgICBkcmFmdENvbXBsZXRpb25TaG93bjogZHJhZnRHZW5lcmF0aW9uLmRyYWZ0Q29tcGxldGlvblNob3duLFxuICAgIHNldERyYWZ0Q29tcGxldGlvblNob3duOiBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uU2hvd24sXG4gICAgZHJhZnRDb21wbGV0aW9uQ291bnQ6IGRyYWZ0R2VuZXJhdGlvbi5kcmFmdENvbXBsZXRpb25Db3VudCxcbiAgICBzZXREcmFmdENvbXBsZXRpb25Db3VudDogZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvbkNvdW50LFxuICAgIFxuICAgIC8vIFByb2dyZXNzIHRyYWNraW5nXG4gICAgZ2VuZXJhdGlvblByb2dyZXNzOiBkcmFmdEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nID8gZHJhZnRHZW5lcmF0aW9uLmdlbmVyYXRpb25Qcm9ncmVzcyA6IGNhcmRHZW5lcmF0aW9uLmdlbmVyYXRpb25Qcm9ncmVzcyxcbiAgICBzZXRHZW5lcmF0aW9uUHJvZ3Jlc3M6IGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyxcbiAgICBwcm9ncmVzc1BlcmNlbnRhZ2U6IGpvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlLCAvLyBTaW5nbGUgc291cmNlIG9mIHRydXRoIGJhc2VkIG9uIGVsYXBzZWQgdGltZVxuICAgIGlzQ2FyZENvbXBsZXRlZDogY2FyZEdlbmVyYXRpb24uaXNDYXJkQ29tcGxldGVkLFxuICAgIHNldElzQ2FyZENvbXBsZXRlZDogY2FyZEdlbmVyYXRpb24uc2V0SXNDYXJkQ29tcGxldGVkLFxuICAgIFxuICAgIC8vIFVwbG9hZCBhbmQgcGVyc29uYWxpemF0aW9uXG4gICAgcmVmZXJlbmNlSW1hZ2VzOiBmaWxlSGFuZGxpbmcucmVmZXJlbmNlSW1hZ2VzLFxuICAgIHNldFJlZmVyZW5jZUltYWdlczogZmlsZUhhbmRsaW5nLnNldFJlZmVyZW5jZUltYWdlcyxcbiAgICByZWZlcmVuY2VJbWFnZVVybHM6IGZpbGVIYW5kbGluZy5yZWZlcmVuY2VJbWFnZVVybHMsXG4gICAgc2V0UmVmZXJlbmNlSW1hZ2VVcmxzOiBmaWxlSGFuZGxpbmcuc2V0UmVmZXJlbmNlSW1hZ2VVcmxzLFxuICAgIGltYWdlVHJhbnNmb3JtYXRpb246IGZpbGVIYW5kbGluZy5pbWFnZVRyYW5zZm9ybWF0aW9uLFxuICAgIHNldEltYWdlVHJhbnNmb3JtYXRpb246IGZpbGVIYW5kbGluZy5zZXRJbWFnZVRyYW5zZm9ybWF0aW9uLFxuICAgIGlzVXBsb2FkaW5nOiBmaWxlSGFuZGxpbmcuaXNVcGxvYWRpbmcsXG4gICAgc2V0SXNVcGxvYWRpbmc6IGZpbGVIYW5kbGluZy5zZXRJc1VwbG9hZGluZyxcbiAgICBcbiAgICAvLyBFbWFpbCBhbmQgc2V0dGluZ3NcbiAgICB1c2VyRW1haWwsXG4gICAgc2V0VXNlckVtYWlsLFxuICAgIGlzSGFuZHdyaXR0ZW5NZXNzYWdlLFxuICAgIHNldElzSGFuZHdyaXR0ZW5NZXNzYWdlLFxuICAgIGlzRnJvbnRCYWNrT25seSxcbiAgICBzZXRJc0Zyb250QmFja09ubHksXG4gICAgc2VsZWN0ZWRQYXBlclNpemUsXG4gICAgc2V0U2VsZWN0ZWRQYXBlclNpemUsXG4gICAgXG4gICAgLy8gVUkgc3RhdGVcbiAgICBpc1RleHRhcmVhRXhwYW5kZWQsXG4gICAgc2V0SXNUZXh0YXJlYUV4cGFuZGVkLFxuICAgIGlzTWVzc2FnZUV4cGFuZGVkLFxuICAgIHNldElzTWVzc2FnZUV4cGFuZGVkLFxuICAgIHNob3dTZXR0aW5ncyxcbiAgICBzZXRTaG93U2V0dGluZ3MsXG4gICAgc2hvd1RlbXBsYXRlR2FsbGVyeSxcbiAgICBzZXRTaG93VGVtcGxhdGVHYWxsZXJ5LFxuICAgIHNob3dQcmludENvbmZpcm1hdGlvbixcbiAgICBzZXRTaG93UHJpbnRDb25maXJtYXRpb24sXG4gICAgXG4gICAgLy8gR2VuZXJhdGlvbiB0aW1lXG4gICAgZ2VuZXJhdGlvbkR1cmF0aW9uOiBjYXJkR2VuZXJhdGlvbi5nZW5lcmF0aW9uRHVyYXRpb24sXG4gICAgc2V0R2VuZXJhdGlvbkR1cmF0aW9uOiBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uRHVyYXRpb24sXG4gICAgY3VycmVudEVsYXBzZWRUaW1lOiBqb2JNYW5hZ2VtZW50LmN1cnJlbnRFbGFwc2VkVGltZSxcbiAgICBzZXRDdXJyZW50RWxhcHNlZFRpbWU6IGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEVsYXBzZWRUaW1lLFxuICAgIFxuICAgIC8vIEhlbHBlciBmdW5jdGlvbnNcbiAgICBmb3JtYXRHZW5lcmF0aW9uVGltZSxcbiAgICBmb3JtYXRDb3VudGRvd24sXG4gICAgc2VuZFRoYW5rWW91RW1haWwsXG4gICAgY2hhdFdpdGhBSSxcbiAgICBzY3JvbGxUb0NhcmRQcmV2aWV3LFxuICAgIFxuICAgIC8vIFRpbWUgdHJhY2tpbmcgZnVuY3Rpb25zXG4gICAgc3RhcnRFbGFwc2VkVGltZVRyYWNraW5nOiBqb2JNYW5hZ2VtZW50LnN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZyxcbiAgICBzdG9wRWxhcHNlZFRpbWVUcmFja2luZzogam9iTWFuYWdlbWVudC5zdG9wRWxhcHNlZFRpbWVUcmFja2luZyxcbiAgICBcbiAgICAvLyBGaWxlIGhhbmRsaW5nIGZ1bmN0aW9uc1xuICAgIGhhbmRsZUZpbGVVcGxvYWQ6IGZpbGVIYW5kbGluZy5oYW5kbGVGaWxlVXBsb2FkLFxuICAgIGhhbmRsZVJlbW92ZVJlZmVyZW5jZUltYWdlOiBmaWxlSGFuZGxpbmcuaGFuZGxlUmVtb3ZlUmVmZXJlbmNlSW1hZ2UsXG4gICAgXG4gICAgLy8gU2ltcGxpZmllZCBwaG90byByZWZlcmVuY2VzXG4gICAgcGhvdG9SZWZlcmVuY2VzOiBmaWxlSGFuZGxpbmcucGhvdG9SZWZlcmVuY2VzLFxuICAgIHNldFBob3RvUmVmZXJlbmNlczogZmlsZUhhbmRsaW5nLnNldFBob3RvUmVmZXJlbmNlcyxcbiAgICB1cGRhdGVQaG90b0Rlc2NyaXB0aW9uOiBmaWxlSGFuZGxpbmcudXBkYXRlUGhvdG9EZXNjcmlwdGlvbixcbiAgICBcbiAgICAvLyBNZXNzYWdlIGZ1bmN0aW9uc1xuICAgIGhhbmRsZUdldE1lc3NhZ2VIZWxwOiBtZXNzYWdlR2VuZXJhdGlvbi5oYW5kbGVHZXRNZXNzYWdlSGVscCxcbiAgICBhZGRNZXNzYWdlVG9IaXN0b3J5OiBtZXNzYWdlR2VuZXJhdGlvbi5hZGRNZXNzYWdlVG9IaXN0b3J5LFxuICAgIHVuZG9NZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi51bmRvTWVzc2FnZSxcbiAgICByZWRvTWVzc2FnZTogbWVzc2FnZUdlbmVyYXRpb24ucmVkb01lc3NhZ2UsXG4gICAgXG4gICAgLy8gSm9iIG1hbmFnZW1lbnRcbiAgICBzYXZlSm9iVG9TdG9yYWdlOiBqb2JNYW5hZ2VtZW50LnNhdmVKb2JUb1N0b3JhZ2UsXG4gICAgcmVtb3ZlSm9iRnJvbVN0b3JhZ2U6IGpvYk1hbmFnZW1lbnQucmVtb3ZlSm9iRnJvbVN0b3JhZ2UsXG4gICAgY2hlY2tQZW5kaW5nSm9icyxcbiAgICBcbiAgICAvLyBNYWluIGdlbmVyYXRpb24gZnVuY3Rpb25zXG4gICAgaGFuZGxlR2VuZXJhdGVDYXJkQXN5bmM6IGNhcmRHZW5lcmF0aW9uLmhhbmRsZUdlbmVyYXRlQ2FyZEFzeW5jLFxuICAgIGhhbmRsZUdlbmVyYXRlRHJhZnRDYXJkczogZHJhZnRHZW5lcmF0aW9uLmhhbmRsZUdlbmVyYXRlRHJhZnRDYXJkcyxcbiAgICBoYW5kbGVHZW5lcmF0ZUZpbmFsRnJvbURyYWZ0OiBkcmFmdEdlbmVyYXRpb24uaGFuZGxlR2VuZXJhdGVGaW5hbEZyb21EcmFmdCxcbiAgICBcbiAgICAvLyBBZGRpdGlvbmFsIHN0YXRlIGZvciBtZXNzYWdlIHJlZmluZW1lbnRcbiAgICBtZXNzYWdlSGlzdG9yeTogbWVzc2FnZUdlbmVyYXRpb24ubWVzc2FnZUhpc3RvcnksXG4gICAgc2V0TWVzc2FnZUhpc3Rvcnk6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldE1lc3NhZ2VIaXN0b3J5LFxuICAgIGN1cnJlbnRNZXNzYWdlSW5kZXg6IG1lc3NhZ2VHZW5lcmF0aW9uLmN1cnJlbnRNZXNzYWdlSW5kZXgsXG4gICAgc2V0Q3VycmVudE1lc3NhZ2VJbmRleDogbWVzc2FnZUdlbmVyYXRpb24uc2V0Q3VycmVudE1lc3NhZ2VJbmRleCxcbiAgICByZWZpbmVtZW50UHJvbXB0OiBtZXNzYWdlR2VuZXJhdGlvbi5yZWZpbmVtZW50UHJvbXB0LFxuICAgIHNldFJlZmluZW1lbnRQcm9tcHQ6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldFJlZmluZW1lbnRQcm9tcHQsXG4gICAgaXNSZWZpbmluZ01lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLmlzUmVmaW5pbmdNZXNzYWdlLFxuICAgIHNldElzUmVmaW5pbmdNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5zZXRJc1JlZmluaW5nTWVzc2FnZSxcbiAgICBzaG93UmVmaW5lbWVudEJveDogbWVzc2FnZUdlbmVyYXRpb24uc2hvd1JlZmluZW1lbnRCb3gsXG4gICAgc2V0U2hvd1JlZmluZW1lbnRCb3g6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldFNob3dSZWZpbmVtZW50Qm94LFxuICAgIFxuICAgIC8vIFRlbXBsYXRlIHN0YXRlXG4gICAgc2hvd1RlbXBsYXRlQ3VzdG9taXphdGlvbixcbiAgICBzZXRTaG93VGVtcGxhdGVDdXN0b21pemF0aW9uLFxuICAgIHNlbGVjdGVkVGVtcGxhdGUsXG4gICAgc2V0U2VsZWN0ZWRUZW1wbGF0ZSxcbiAgICB0ZW1wbGF0ZUN1c3RvbWl6YXRpb25zLFxuICAgIHNldFRlbXBsYXRlQ3VzdG9taXphdGlvbnMsXG4gICAgdGVtcGxhdGVTZWFyY2hRdWVyeSxcbiAgICBzZXRUZW1wbGF0ZVNlYXJjaFF1ZXJ5LFxuICAgIGlzU2VhcmNoaW5nVGVtcGxhdGVzLFxuICAgIHNldElzU2VhcmNoaW5nVGVtcGxhdGVzLFxuICAgIGFpRmlsdGVyZWRDYXJkcyxcbiAgICBzZXRBaUZpbHRlcmVkQ2FyZHMsXG4gICAgc2VhcmNoTW9kZSxcbiAgICBzZXRTZWFyY2hNb2RlLFxuICAgIHRleHRGaWx0ZXJlZENhcmRzLFxuICAgIHNldFRleHRGaWx0ZXJlZENhcmRzLFxuICAgIHNob3dQcm9tcHRzLFxuICAgIHNldFNob3dQcm9tcHRzLFxuICAgIFxuICAgIC8vIFByaW50IHN0YXRlXG4gICAgcHJpbnRPcHRpb24sXG4gICAgc2V0UHJpbnRPcHRpb24sXG4gICAgXG4gICAgLy8gQWRkaXRpb25hbCBkcmFmdCBtb2RlIHN0YXRlXG4gICAgaGFuZHdyaXRpbmdTYW1wbGU6IGZpbGVIYW5kbGluZy5oYW5kd3JpdGluZ1NhbXBsZSxcbiAgICBzZXRIYW5kd3JpdGluZ1NhbXBsZTogZmlsZUhhbmRsaW5nLnNldEhhbmR3cml0aW5nU2FtcGxlLFxuICAgIGhhbmR3cml0aW5nU2FtcGxlVXJsOiBmaWxlSGFuZGxpbmcuaGFuZHdyaXRpbmdTYW1wbGVVcmwsXG4gICAgc2V0SGFuZHdyaXRpbmdTYW1wbGVVcmw6IGZpbGVIYW5kbGluZy5zZXRIYW5kd3JpdGluZ1NhbXBsZVVybCxcbiAgICBcbiAgICBcbiAgICAvLyBKb2IgdHJhY2tpbmdcbiAgICBjdXJyZW50Sm9iSWQ6IGpvYk1hbmFnZW1lbnQuY3VycmVudEpvYklkLFxuICAgIHNldEN1cnJlbnRKb2JJZDogam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQsXG4gICAgY291bnRkb3duLFxuICAgIHNldENvdW50ZG93bixcbiAgICBjb3VudGRvd25JbnRlcnZhbCxcbiAgICBzZXRDb3VudGRvd25JbnRlcnZhbCxcbiAgICBcbiAgICAvLyBTZWN0aW9uIGxvYWRpbmcgc3RhdGVzXG4gICAgc2VjdGlvbkxvYWRpbmdTdGF0ZXMsXG4gICAgc2V0U2VjdGlvbkxvYWRpbmdTdGF0ZXMsXG4gICAgXG4gICAgLy8gRmFzdCBwcmV2aWV3IG1vZGVcbiAgICBmYXN0UHJldmlld01vZGUsXG4gICAgc2V0RmFzdFByZXZpZXdNb2RlLFxuICAgIFxuICAgIC8vIEFkZGl0aW9uYWwgdHJhY2tpbmdcbiAgICBjdXJyZW50Q2FyZElkOiBjYXJkR2VuZXJhdGlvbi5jdXJyZW50Q2FyZElkLFxuICAgIHNldEN1cnJlbnRDYXJkSWQ6IGNhcmRHZW5lcmF0aW9uLnNldEN1cnJlbnRDYXJkSWQsXG4gICAgaXNJbml0aWFsTG9hZENvbXBsZXRlLFxuICAgIHNldElzSW5pdGlhbExvYWRDb21wbGV0ZSxcbiAgICBcbiAgICAvLyBFbGFwc2VkIHRpbWUgdHJhY2tpbmdcbiAgICBnZW5lcmF0aW9uU3RhcnRUaW1lOiBqb2JNYW5hZ2VtZW50LmdlbmVyYXRpb25TdGFydFRpbWUsXG4gICAgc2V0R2VuZXJhdGlvblN0YXJ0VGltZTogam9iTWFuYWdlbWVudC5zZXRHZW5lcmF0aW9uU3RhcnRUaW1lLFxuICAgIGVsYXBzZWRUaW1lSW50ZXJ2YWw6IGpvYk1hbmFnZW1lbnQuZWxhcHNlZFRpbWVJbnRlcnZhbCxcbiAgICBzZXRFbGFwc2VkVGltZUludGVydmFsOiBqb2JNYW5hZ2VtZW50LnNldEVsYXBzZWRUaW1lSW50ZXJ2YWwsXG4gICAgXG4gICAgLy8gQ29uc3RhbnRzIGZvciBVSVxuICAgIGNhcmRUb25lcyxcbiAgICBhcnRpc3RpY1N0eWxlcyxcbiAgICBwYXBlclNpemVzLFxuICAgIFxuICAgIC8vIFdlYlNvY2tldCBmdW5jdGlvbnMgYW5kIHN0YXRlXG4gICAgaXNTb2NrZXRDb25uZWN0ZWQ6IHdlYlNvY2tldC5pc1NvY2tldENvbm5lY3RlZCxcbiAgICBjb25uZWN0V2ViU29ja2V0OiB3ZWJTb2NrZXQuY29ubmVjdFdlYlNvY2tldCxcbiAgICBkaXNjb25uZWN0V2ViU29ja2V0OiB3ZWJTb2NrZXQuZGlzY29ubmVjdFdlYlNvY2tldCxcbiAgICBzdWJzY3JpYmVUb0pvYjogd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iLFxuICAgIHVuc3Vic2NyaWJlRnJvbUpvYjogd2ViU29ja2V0LnVuc3Vic2NyaWJlRnJvbUpvYixcbiAgICBoYW5kbGVKb2JVcGRhdGUsXG4gICAgaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvbjogY2FyZEdlbmVyYXRpb24uaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvbixcbiAgfTtcbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsInVzZVJlZiIsInRvYXN0IiwidXNlV2ViU29ja2V0IiwidXNlSm9iTWFuYWdlbWVudCIsInVzZU1lc3NhZ2VHZW5lcmF0aW9uIiwidXNlRmlsZUhhbmRsaW5nIiwidXNlRHJhZnRHZW5lcmF0aW9uIiwidXNlQ2FyZEdlbmVyYXRpb24iLCJjYXJkVG9uZXMiLCJhcnRpc3RpY1N0eWxlcyIsInBhcGVyU2l6ZXMiLCJmb3JtYXRHZW5lcmF0aW9uVGltZSIsImZvcm1hdENvdW50ZG93biIsInNlbmRUaGFua1lvdUVtYWlsIiwiY2hhdFdpdGhBSSIsInNjcm9sbFRvQ2FyZFByZXZpZXciLCJ1c2VDYXJkU3R1ZGlvIiwicHJvbXB0Iiwic2V0UHJvbXB0IiwidG9GaWVsZCIsInNldFRvRmllbGQiLCJmcm9tRmllbGQiLCJzZXRGcm9tRmllbGQiLCJyZWxhdGlvbnNoaXBGaWVsZCIsInNldFJlbGF0aW9uc2hpcEZpZWxkIiwic2VsZWN0ZWRUeXBlIiwic2V0U2VsZWN0ZWRUeXBlIiwiY3VzdG9tQ2FyZFR5cGUiLCJzZXRDdXN0b21DYXJkVHlwZSIsInNlbGVjdGVkVG9uZSIsInNldFNlbGVjdGVkVG9uZSIsInNob3dBZHZhbmNlZCIsInNldFNob3dBZHZhbmNlZCIsInNlbGVjdGVkQXJ0aXN0aWNTdHlsZSIsInNldFNlbGVjdGVkQXJ0aXN0aWNTdHlsZSIsImN1c3RvbVN0eWxlRGVzY3JpcHRpb24iLCJzZXRDdXN0b21TdHlsZURlc2NyaXB0aW9uIiwic2VsZWN0ZWRJbWFnZU1vZGVsIiwic2V0U2VsZWN0ZWRJbWFnZU1vZGVsIiwic2VsZWN0ZWREcmFmdE1vZGVsIiwic2V0U2VsZWN0ZWREcmFmdE1vZGVsIiwiZmFzdFByZXZpZXdNb2RlIiwic2V0RmFzdFByZXZpZXdNb2RlIiwidXNlckVtYWlsIiwic2V0VXNlckVtYWlsIiwibnVtYmVyT2ZDYXJkcyIsInNldE51bWJlck9mQ2FyZHMiLCJpc0hhbmR3cml0dGVuTWVzc2FnZSIsInNldElzSGFuZHdyaXR0ZW5NZXNzYWdlIiwiaXNGcm9udEJhY2tPbmx5Iiwic2V0SXNGcm9udEJhY2tPbmx5Iiwic2VsZWN0ZWRQYXBlclNpemUiLCJzZXRTZWxlY3RlZFBhcGVyU2l6ZSIsImlzVGV4dGFyZWFFeHBhbmRlZCIsInNldElzVGV4dGFyZWFFeHBhbmRlZCIsImlzTWVzc2FnZUV4cGFuZGVkIiwic2V0SXNNZXNzYWdlRXhwYW5kZWQiLCJzaG93U2V0dGluZ3MiLCJzZXRTaG93U2V0dGluZ3MiLCJzaG93VGVtcGxhdGVHYWxsZXJ5Iiwic2V0U2hvd1RlbXBsYXRlR2FsbGVyeSIsInNob3dQcmludENvbmZpcm1hdGlvbiIsInNldFNob3dQcmludENvbmZpcm1hdGlvbiIsInNob3dUZW1wbGF0ZUN1c3RvbWl6YXRpb24iLCJzZXRTaG93VGVtcGxhdGVDdXN0b21pemF0aW9uIiwiaXNSZXN0b3JpbmdKb2JzIiwic2V0SXNSZXN0b3JpbmdKb2JzIiwic2VsZWN0ZWRUZW1wbGF0ZSIsInNldFNlbGVjdGVkVGVtcGxhdGUiLCJpc0luaXRpYWxMb2FkQ29tcGxldGUiLCJzZXRJc0luaXRpYWxMb2FkQ29tcGxldGUiLCJ0ZW1wbGF0ZVNlYXJjaFF1ZXJ5Iiwic2V0VGVtcGxhdGVTZWFyY2hRdWVyeSIsImlzU2VhcmNoaW5nVGVtcGxhdGVzIiwic2V0SXNTZWFyY2hpbmdUZW1wbGF0ZXMiLCJhaUZpbHRlcmVkQ2FyZHMiLCJzZXRBaUZpbHRlcmVkQ2FyZHMiLCJzZWFyY2hNb2RlIiwic2V0U2VhcmNoTW9kZSIsInRleHRGaWx0ZXJlZENhcmRzIiwic2V0VGV4dEZpbHRlcmVkQ2FyZHMiLCJzaG93UHJvbXB0cyIsInNldFNob3dQcm9tcHRzIiwicHJpbnRPcHRpb24iLCJzZXRQcmludE9wdGlvbiIsInRlbXBsYXRlQ3VzdG9taXphdGlvbnMiLCJzZXRUZW1wbGF0ZUN1c3RvbWl6YXRpb25zIiwicHJvbXB0Q2hhbmdlcyIsIm1lc3NhZ2VDaGFuZ2VzIiwidXNlUmVmZXJlbmNlSW1hZ2UiLCJyZWZlcmVuY2VJbWFnZUZpbGUiLCJyZWZlcmVuY2VJbWFnZVVybHMiLCJyZWZlcmVuY2VJbWFnZVRyYW5zZm9ybWF0aW9uIiwic2VjdGlvbkxvYWRpbmdTdGF0ZXMiLCJzZXRTZWN0aW9uTG9hZGluZ1N0YXRlcyIsImZyb250Q292ZXIiLCJiYWNrQ292ZXIiLCJsZWZ0SW50ZXJpb3IiLCJyaWdodEludGVyaW9yIiwiY291bnRkb3duIiwic2V0Q291bnRkb3duIiwiY291bnRkb3duSW50ZXJ2YWwiLCJzZXRDb3VudGRvd25JbnRlcnZhbCIsIndlYlNvY2tldCIsImpvYk1hbmFnZW1lbnQiLCJmaWxlSGFuZGxpbmciLCJtZXNzYWdlR2VuZXJhdGlvbiIsInBob3RvUmVmZXJlbmNlcyIsImRyYWZ0R2VuZXJhdGlvblByb3BzIiwiZmluYWxDYXJkTWVzc2FnZSIsInNhdmVKb2JUb1N0b3JhZ2UiLCJzdWJzY3JpYmVUb0pvYiIsInVuc3Vic2NyaWJlRnJvbUFsbEpvYnMiLCJzdGFydEVsYXBzZWRUaW1lVHJhY2tpbmciLCJzdG9wRWxhcHNlZFRpbWVUcmFja2luZyIsImRyYWZ0R2VuZXJhdGlvbiIsImNhcmRHZW5lcmF0aW9uUHJvcHMiLCJyZW1vdmVKb2JGcm9tU3RvcmFnZSIsInNldEN1cnJlbnRKb2JJZCIsInNldElzRHJhZnRNb2RlIiwic2V0RHJhZnRDYXJkcyIsInNldFNlbGVjdGVkRHJhZnRJbmRleCIsInNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZCIsInNldFByZXZpZXdpbmdEcmFmdEluZGV4Iiwic2V0RHJhZnRDb21wbGV0aW9uU2hvd24iLCJzZXREcmFmdENvbXBsZXRpb25Db3VudCIsImNhcmRHZW5lcmF0aW9uIiwiaGFuZGxlSm9iVXBkYXRlIiwiZGF0YSIsImpvYl9pZCIsInN0YXR1cyIsInByb2dyZXNzIiwiY2FyZERhdGEiLCJlcnJvciIsImNvbXBsZXRlZEF0IiwiY29uc29sZSIsImxvZyIsImlzRHJhZnRKb2IiLCJzdGFydHNXaXRoIiwiZHJhZnRJbmRleCIsInBhcnNlSW50Iiwic3BsaXQiLCJpc0luRHJhZnRNb2RlIiwiaXNEcmFmdE1vZGUiLCJpbmNsdWRlcyIsInNldEdlbmVyYXRpb25Qcm9ncmVzcyIsInN0eWxlSW5mbyIsInVuZGVmaW5lZCIsInByZWRlZmluZWRTdHlsZXMiLCJzdHlsZUxhYmVscyIsImxlbmd0aCIsInN0eWxlTmFtZSIsInN0eWxlTGFiZWwiLCJkcmFmdENhcmQiLCJpZCIsIkRhdGUiLCJub3ciLCJsZWZ0UGFnZSIsInJpZ2h0UGFnZSIsImNyZWF0ZWRBdCIsImdlbmVyYXRlZFByb21wdHMiLCJwcmV2IiwidXBkYXRlZCIsInB1c2giLCJqb2JEYXRhIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImpvYiIsIkpTT04iLCJwYXJzZSIsImRyYWZ0Q2FyZHMiLCJsYXN0VXBkYXRlIiwiZXhwaXJlc0F0Iiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInVwZGF0ZWREcmFmdHMiLCJjb21wbGV0ZWRDb3VudCIsImZpbHRlciIsIkJvb2xlYW4iLCJwcm9ncmVzc01zZyIsImlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCIsInNldElzR2VuZXJhdGluZyIsInN1Y2Nlc3MiLCJ1bnN1YnNjcmliZUZyb21Kb2IiLCJoYXNDYXJkRGF0YSIsImNhcmREYXRhS2V5cyIsIk9iamVjdCIsImtleXMiLCJtYXBwZWRDYXJkRGF0YSIsImhhbmRsZUZpbmFsQ2FyZENvbXBsZXRpb24iLCJmaW5hbENhcmRNZXRhZGF0YSIsImpvYklkIiwiaXNGaW5hbENhcmQiLCJoYXNJbWFnZXMiLCJ3YXJuIiwiY3VycmVudEpvYlJlZiIsImN1cnJlbnQiLCJjdXJyZW50Sm9iSWQiLCJzZXRKb2JVcGRhdGVIYW5kbGVyIiwic3RhbGVKb2JMb2dnZWRSZWYiLCJpc1NvY2tldENvbm5lY3RlZCIsImlzR2VuZXJhdGluZyIsImdlbmVyYXRpb25TdGFydFRpbWUiLCJqb2JBZ2UiLCJyZWNvbm5lY3RUaW1lciIsInNldFRpbWVvdXQiLCJjb25uZWN0V2ViU29ja2V0IiwiY2xlYXJUaW1lb3V0IiwiY2hlY2tJbnRlcnZhbCIsInNldEludGVydmFsIiwidGltZVNpbmNlTGFzdFVwZGF0ZSIsImxhc3RKb2JVcGRhdGVSZWYiLCJwcm9ncmVzc1BlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJqb2JTdGF0dXMiLCJqc29uIiwiY2xlYXJJbnRlcnZhbCIsImNoZWNrUGVuZGluZ0pvYnMiLCJwZW5kaW5nSm9icyIsImRyYWZ0Sm9icyIsImZpbmFsSm9icyIsImRyYWZ0c0J5SW5kZXgiLCJBcnJheSIsImZpbGwiLCJpc0FycmF5IiwiYWxsRHJhZnRDYXJkcyIsImlzU3RhbGUiLCJpc0RyYWZ0IiwiaGFzUHJvZ3Jlc3MiLCJsYXN0UHJvZ3Jlc3MiLCJsYXN0UHJvZ3Jlc3NUZXh0Iiwic2VsZWN0ZWREcmFmdEluZGV4Iiwiam9iU3RhcnRUaW1lIiwiZWxhcHNlZFNpbmNlU3RhcnQiLCJCQUNLRU5EX0FQSV9CQVNFX1VSTCIsInJlc3VsdCIsInJlc3VsdFN0YXR1cyIsInVybCIsImR1cmF0aW9uIiwiaW5mbyIsInNhdmVkRmluYWxDYXJkIiwiZmluYWxDYXJkIiwic2V0R2VuZXJhdGVkQ2FyZCIsInNldEdlbmVyYXRlZENhcmRzIiwic2V0SXNDYXJkQ29tcGxldGVkIiwicmVtb3ZlSXRlbSIsInJlY2VudERyYWZ0cyIsImxvYWRNb3N0UmVjZW50RHJhZnRCYXRjaCIsImNhcmRzIiwiY291bnQiLCJ0b0xvY2FsZVN0cmluZyIsImVsYXBzZWRTZWNvbmRzIiwiZmxvb3IiLCJzZXRDdXJyZW50RWxhcHNlZFRpbWUiLCJhY3RpdmVEcmFmdEpvYnMiLCJmb3JFYWNoIiwic2V0RmluYWxDYXJkTWVzc2FnZSIsImlzR2VuZXJhdGluZ01lc3NhZ2UiLCJzZXRJc0dlbmVyYXRpbmdNZXNzYWdlIiwiZ2VuZXJhdGVkQ2FyZCIsImdlbmVyYXRlZENhcmRzIiwic2VsZWN0ZWRDYXJkSW5kZXgiLCJzZXRTZWxlY3RlZENhcmRJbmRleCIsInByZXZpZXdpbmdEcmFmdEluZGV4IiwiZHJhZnRDb21wbGV0aW9uU2hvd24iLCJkcmFmdENvbXBsZXRpb25Db3VudCIsImdlbmVyYXRpb25Qcm9ncmVzcyIsImlzQ2FyZENvbXBsZXRlZCIsInJlZmVyZW5jZUltYWdlcyIsInNldFJlZmVyZW5jZUltYWdlcyIsInNldFJlZmVyZW5jZUltYWdlVXJscyIsImltYWdlVHJhbnNmb3JtYXRpb24iLCJzZXRJbWFnZVRyYW5zZm9ybWF0aW9uIiwiaXNVcGxvYWRpbmciLCJzZXRJc1VwbG9hZGluZyIsImdlbmVyYXRpb25EdXJhdGlvbiIsInNldEdlbmVyYXRpb25EdXJhdGlvbiIsImN1cnJlbnRFbGFwc2VkVGltZSIsImhhbmRsZUZpbGVVcGxvYWQiLCJoYW5kbGVSZW1vdmVSZWZlcmVuY2VJbWFnZSIsInNldFBob3RvUmVmZXJlbmNlcyIsInVwZGF0ZVBob3RvRGVzY3JpcHRpb24iLCJoYW5kbGVHZXRNZXNzYWdlSGVscCIsImFkZE1lc3NhZ2VUb0hpc3RvcnkiLCJ1bmRvTWVzc2FnZSIsInJlZG9NZXNzYWdlIiwiaGFuZGxlR2VuZXJhdGVDYXJkQXN5bmMiLCJoYW5kbGVHZW5lcmF0ZURyYWZ0Q2FyZHMiLCJoYW5kbGVHZW5lcmF0ZUZpbmFsRnJvbURyYWZ0IiwibWVzc2FnZUhpc3RvcnkiLCJzZXRNZXNzYWdlSGlzdG9yeSIsImN1cnJlbnRNZXNzYWdlSW5kZXgiLCJzZXRDdXJyZW50TWVzc2FnZUluZGV4IiwicmVmaW5lbWVudFByb21wdCIsInNldFJlZmluZW1lbnRQcm9tcHQiLCJpc1JlZmluaW5nTWVzc2FnZSIsInNldElzUmVmaW5pbmdNZXNzYWdlIiwic2hvd1JlZmluZW1lbnRCb3giLCJzZXRTaG93UmVmaW5lbWVudEJveCIsImhhbmR3cml0aW5nU2FtcGxlIiwic2V0SGFuZHdyaXRpbmdTYW1wbGUiLCJoYW5kd3JpdGluZ1NhbXBsZVVybCIsInNldEhhbmR3cml0aW5nU2FtcGxlVXJsIiwiY3VycmVudENhcmRJZCIsInNldEN1cnJlbnRDYXJkSWQiLCJzZXRHZW5lcmF0aW9uU3RhcnRUaW1lIiwiZWxhcHNlZFRpbWVJbnRlcnZhbCIsInNldEVsYXBzZWRUaW1lSW50ZXJ2YWwiLCJkaXNjb25uZWN0V2ViU29ja2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useCardStudioRefactored.ts\n"));

/***/ })

});