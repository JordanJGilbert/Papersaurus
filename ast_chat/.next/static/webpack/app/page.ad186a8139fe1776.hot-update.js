"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./hooks/useCardStudioRefactored.ts":
/*!******************************************!*\
  !*** ./hooks/useCardStudioRefactored.ts ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCardStudio: function() { return /* binding */ useCardStudio; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sonner */ \"(app-pages-browser)/./node_modules/sonner/dist/index.mjs\");\n/* harmony import */ var _cardStudio_useWebSocket__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cardStudio/useWebSocket */ \"(app-pages-browser)/./hooks/cardStudio/useWebSocket.ts\");\n/* harmony import */ var _cardStudio_useJobManagementSimplified__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cardStudio/useJobManagementSimplified */ \"(app-pages-browser)/./hooks/cardStudio/useJobManagementSimplified.ts\");\n/* harmony import */ var _cardStudio_useMessageGeneration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cardStudio/useMessageGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useMessageGeneration.ts\");\n/* harmony import */ var _cardStudio_useFileHandling__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cardStudio/useFileHandling */ \"(app-pages-browser)/./hooks/cardStudio/useFileHandling.ts\");\n/* harmony import */ var _cardStudio_useDraftGeneration__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./cardStudio/useDraftGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useDraftGeneration.ts\");\n/* harmony import */ var _cardStudio_useCardGeneration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./cardStudio/useCardGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useCardGeneration.ts\");\n/* harmony import */ var _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./cardStudio/constants */ \"(app-pages-browser)/./hooks/cardStudio/constants.ts\");\n/* harmony import */ var _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./cardStudio/utils */ \"(app-pages-browser)/./hooks/cardStudio/utils.ts\");\n/* harmony import */ var _lib_storageManager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/lib/storageManager */ \"(app-pages-browser)/./lib/storageManager.ts\");\n/* __next_internal_client_entry_do_not_use__ useCardStudio auto */ \n\n// Import modular hooks\n\n\n\n\n\n\n// Import constants and utils\n\n\n\nfunction useCardStudio() {\n    // Core form state\n    const [prompt, setPrompt] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [toField, setToField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [fromField, setFromField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [relationshipField, setRelationshipField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedType, setSelectedType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"birthday\");\n    const [customCardType, setCustomCardType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedTone, setSelectedTone] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"funny\");\n    // Advanced options state\n    const [showAdvanced, setShowAdvanced] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [selectedArtisticStyle, setSelectedArtisticStyle] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"watercolor\");\n    const [customStyleDescription, setCustomStyleDescription] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedImageModel, setSelectedImageModel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"gpt-image-1\");\n    const [selectedDraftModel, setSelectedDraftModel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"gpt-image-1\");\n    const [fastPreviewMode, setFastPreviewMode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    // Email state\n    const [userEmail, setUserEmail] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    // Card options\n    const [numberOfCards, setNumberOfCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1);\n    const [isHandwrittenMessage, setIsHandwrittenMessage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isFrontBackOnly, setIsFrontBackOnly] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [selectedPaperSize, setSelectedPaperSize] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"standard\");\n    // UI state\n    const [isTextareaExpanded, setIsTextareaExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isMessageExpanded, setIsMessageExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showSettings, setShowSettings] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showTemplateGallery, setShowTemplateGallery] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showPrintConfirmation, setShowPrintConfirmation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showTemplateCustomization, setShowTemplateCustomization] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Restoration state\n    const [isRestoringJobs, setIsRestoringJobs] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [selectedTemplate, setSelectedTemplate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isInitialLoadComplete, setIsInitialLoadComplete] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Template state\n    const [templateSearchQuery, setTemplateSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [isSearchingTemplates, setIsSearchingTemplates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [aiFilteredCards, setAiFilteredCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [searchMode, setSearchMode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"text\");\n    const [textFilteredCards, setTextFilteredCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [showPrompts, setShowPrompts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [printOption, setPrintOption] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"physical\");\n    // Template customization state\n    const [templateCustomizations, setTemplateCustomizations] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        promptChanges: \"\",\n        messageChanges: \"\",\n        useReferenceImage: false,\n        referenceImageFile: null,\n        referenceImageUrls: [],\n        referenceImageTransformation: \"\"\n    });\n    // Section loading states\n    const [sectionLoadingStates, setSectionLoadingStates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        frontCover: \"idle\",\n        backCover: \"idle\",\n        leftInterior: \"idle\",\n        rightInterior: \"idle\"\n    });\n    // Countdown state\n    const [countdown, setCountdown] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [countdownInterval, setCountdownInterval] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    // Use modular hooks\n    const webSocket = (0,_cardStudio_useWebSocket__WEBPACK_IMPORTED_MODULE_2__.useWebSocket)();\n    const jobManagement = (0,_cardStudio_useJobManagementSimplified__WEBPACK_IMPORTED_MODULE_3__.useJobManagement)();\n    const fileHandling = (0,_cardStudio_useFileHandling__WEBPACK_IMPORTED_MODULE_5__.useFileHandling)();\n    const messageGeneration = (0,_cardStudio_useMessageGeneration__WEBPACK_IMPORTED_MODULE_4__.useMessageGeneration)(selectedType, customCardType, selectedTone, prompt, toField, fromField, relationshipField, fileHandling.photoReferences);\n    // Draft generation props\n    const draftGenerationProps = {\n        selectedType,\n        customCardType,\n        selectedTone,\n        selectedArtisticStyle,\n        customStyleDescription,\n        selectedDraftModel,\n        selectedImageModel,\n        selectedPaperSize,\n        prompt,\n        toField,\n        fromField,\n        userEmail,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        isHandwrittenMessage,\n        isFrontBackOnly,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        photoReferences: fileHandling.photoReferences,\n        relationshipField,\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        subscribeToJob: webSocket.subscribeToJob,\n        unsubscribeFromAllJobs: webSocket.unsubscribeFromAllJobs,\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking\n    };\n    const draftGeneration = (0,_cardStudio_useDraftGeneration__WEBPACK_IMPORTED_MODULE_6__.useDraftGeneration)(draftGenerationProps);\n    // Card generation props\n    const cardGenerationProps = {\n        selectedType,\n        customCardType,\n        selectedTone,\n        selectedArtisticStyle,\n        customStyleDescription,\n        selectedImageModel,\n        selectedPaperSize,\n        prompt,\n        toField,\n        fromField,\n        userEmail,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        isHandwrittenMessage,\n        isFrontBackOnly,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        photoReferences: fileHandling.photoReferences,\n        relationshipField,\n        numberOfCards,\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        removeJobFromStorage: jobManagement.removeJobFromStorage,\n        subscribeToJob: webSocket.subscribeToJob,\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking,\n        setCurrentJobId: jobManagement.setCurrentJobId,\n        setIsDraftMode: draftGeneration.setIsDraftMode,\n        setDraftCards: draftGeneration.setDraftCards,\n        setSelectedDraftIndex: draftGeneration.setSelectedDraftIndex,\n        setIsGeneratingFinalCard: draftGeneration.setIsGeneratingFinalCard,\n        setPreviewingDraftIndex: draftGeneration.setPreviewingDraftIndex,\n        setDraftCompletionShown: draftGeneration.setDraftCompletionShown,\n        setDraftCompletionCount: draftGeneration.setDraftCompletionCount\n    };\n    const cardGeneration = (0,_cardStudio_useCardGeneration__WEBPACK_IMPORTED_MODULE_7__.useCardGeneration)(cardGenerationProps);\n    // Handle job updates from WebSocket\n    const handleJobUpdate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((data)=>{\n        const { job_id, status, progress, cardData, error, completedAt } = data;\n        if (!job_id) return;\n        // Skip updates if we're still restoring jobs from localStorage\n        if (isRestoringJobs) {\n            console.log(\"⏳ Skipping job update during restoration:\", job_id);\n            return;\n        }\n        // Check if this is a draft job\n        const isDraftJob = job_id.startsWith(\"draft-\");\n        const draftIndex = isDraftJob ? parseInt(job_id.split(\"-\")[1]) : -1;\n        // Filter out updates from wrong job type\n        // If we're in draft mode, only process draft jobs\n        // If we're in final mode, only process non-draft jobs\n        const isInDraftMode = draftGeneration.isDraftMode;\n        if (isInDraftMode && !isDraftJob) {\n            console.log(\"\\uD83D\\uDEAB Ignoring non-draft job update in draft mode:\", job_id);\n            return;\n        }\n        if (!isInDraftMode && isDraftJob) {\n            console.log(\"\\uD83D\\uDEAB Ignoring draft job update in final mode:\", job_id);\n            return;\n        }\n        console.log(\"\\uD83D\\uDD04 Processing job update:\", {\n            job_id,\n            status,\n            isDraftJob,\n            draftIndex,\n            progress\n        });\n        // Update progress if provided\n        if (progress) {\n            // IMPORTANT: Don't show \"Generation complete!\" until we've actually processed the card\n            // This prevents the UI from showing completion before the card is ready\n            if (progress.includes(\"Generation complete!\") && status === \"completed\" && !isDraftJob) {\n                console.log('⏸️ Holding \"Generation complete!\" message until card is processed');\n            // Don't update the progress message yet - it will be set in handleFinalCardCompletion\n            } else {\n                cardGeneration.setGenerationProgress(progress);\n                draftGeneration.setGenerationProgress(progress);\n                console.log(\"\\uD83D\\uDCCA Progress message: \".concat(progress));\n            }\n        }\n        if (status === \"completed\" && cardData) {\n            console.log(\"\\uD83C\\uDF89 Job completed! Card data:\", cardData, \"isDraftJob:\", isDraftJob);\n            if (isDraftJob && draftIndex >= 0) {\n                var _cardData_generatedPrompts;\n                // Handle draft card completion\n                console.log(\"\\uD83C\\uDFA8 Draft variation \".concat(draftIndex + 1, \" completed!\"));\n                // Get style info for smart style mode\n                let styleInfo = undefined;\n                if (selectedArtisticStyle === \"ai-smart-style\") {\n                    const predefinedStyles = [\n                        \"watercolor\",\n                        \"botanical\",\n                        \"comic-book\",\n                        \"dreamy-fantasy\",\n                        \"minimalist\"\n                    ];\n                    const styleLabels = [\n                        \"\\uD83C\\uDFA8 Watercolor\",\n                        \"\\uD83C\\uDF3F Botanical\",\n                        \"\\uD83D\\uDCA5 Comic Book\",\n                        \"\\uD83C\\uDF38 Dreamy Fantasy\",\n                        \"✨ Minimalist\"\n                    ];\n                    if (draftIndex >= 0 && draftIndex < predefinedStyles.length) {\n                        styleInfo = {\n                            styleName: predefinedStyles[draftIndex],\n                            styleLabel: styleLabels[draftIndex]\n                        };\n                    }\n                }\n                const draftCard = {\n                    id: \"draft-\".concat(draftIndex + 1, \"-\").concat(Date.now()),\n                    prompt: cardData.prompt || \"Draft Variation \".concat(draftIndex + 1),\n                    frontCover: cardData.frontCover || \"\",\n                    backCover: \"\",\n                    leftPage: \"\",\n                    rightPage: \"\",\n                    createdAt: new Date(),\n                    generatedPrompts: {\n                        frontCover: ((_cardData_generatedPrompts = cardData.generatedPrompts) === null || _cardData_generatedPrompts === void 0 ? void 0 : _cardData_generatedPrompts.frontCover) || \"\"\n                    },\n                    styleInfo: styleInfo\n                };\n                // Simplified draft tracking - use fixed array positions\n                draftGeneration.setDraftCards((prev)=>{\n                    const updated = [\n                        ...prev\n                    ];\n                    // Ensure array has 5 slots\n                    while(updated.length < 5){\n                        updated.push(null);\n                    }\n                    // Place draft at its correct index\n                    updated[draftIndex] = draftCard;\n                    console.log(\"✅ Draft \".concat(draftIndex + 1, \" completed and stored at index \").concat(draftIndex));\n                    // No longer save individual drafts to localStorage\n                    return updated;\n                });\n                // Simplified completion tracking - count the updated array including the new draft\n                const updatedDrafts = [\n                    ...draftGeneration.draftCards\n                ];\n                updatedDrafts[draftIndex] = draftCard;\n                const completedCount = updatedDrafts.filter(Boolean).length;\n                console.log(\"\\uD83D\\uDCCA Draft progress: \".concat(completedCount, \"/5 variations complete\"));\n                // Update progress\n                const progressMsg = completedCount === 5 ? \"All 5 variations ready! Choose your favorite below.\" : \"\".concat(completedCount, \"/5 variations complete...\").concat(completedCount >= 2 ? \" You can select one now!\" : \"\");\n                draftGeneration.setGenerationProgress(progressMsg);\n                // Override time-based progress with real progress when drafts complete\n                // Don't override time-based progress\n                console.log(\"\\uD83C\\uDFA8 Draft \".concat(completedCount, \"/5 completed\"));\n                // Handle milestones\n                if (completedCount === 1) {\n                    (0,_cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.scrollToCardPreview)();\n                }\n                if (completedCount === 5 && !draftGeneration.isGeneratingFinalCard) {\n                    draftGeneration.setIsGenerating(false);\n                    jobManagement.stopElapsedTimeTracking();\n                    sonner__WEBPACK_IMPORTED_MODULE_1__.toast.success(\"\\uD83C\\uDFA8 All 5 front cover variations ready! Choose your favorite below.\");\n                }\n                // Keep draft jobs in storage for later retrieval\n                // Only unsubscribe from WebSocket\n                webSocket.unsubscribeFromJob(job_id);\n                console.log(\"✅ Keeping draft job \".concat(job_id, \" in storage for future access\"));\n            } else {\n                // Handle final card completion\n                console.log(\"\\uD83D\\uDD0D Final card completion detected. Card data structure:\", {\n                    hasCardData: !!cardData,\n                    cardDataKeys: Object.keys(cardData || {}),\n                    frontCover: (cardData === null || cardData === void 0 ? void 0 : cardData.frontCover) ? \"Present\" : \"Missing\",\n                    backCover: (cardData === null || cardData === void 0 ? void 0 : cardData.backCover) ? \"Present\" : \"Missing\",\n                    leftInterior: (cardData === null || cardData === void 0 ? void 0 : cardData.leftInterior) ? \"Present\" : \"Missing\",\n                    rightInterior: (cardData === null || cardData === void 0 ? void 0 : cardData.rightInterior) ? \"Present\" : \"Missing\",\n                    leftPage: (cardData === null || cardData === void 0 ? void 0 : cardData.leftPage) ? \"Present\" : \"Missing\",\n                    rightPage: (cardData === null || cardData === void 0 ? void 0 : cardData.rightPage) ? \"Present\" : \"Missing\"\n                });\n                console.log(\"\\uD83D\\uDCDD Full card data:\", JSON.stringify(cardData, null, 2));\n                // Map backend field names to frontend field names\n                const mappedCardData = {\n                    ...cardData,\n                    leftInterior: cardData.leftInterior || cardData.leftPage,\n                    rightInterior: cardData.rightInterior || cardData.rightPage,\n                    // Keep original fields for backward compatibility\n                    leftPage: cardData.leftPage || cardData.leftInterior,\n                    rightPage: cardData.rightPage || cardData.rightInterior\n                };\n                console.log(\"\\uD83D\\uDD04 Mapped card data for frontend compatibility:\", {\n                    frontCover: mappedCardData.frontCover ? \"Present\" : \"Missing\",\n                    backCover: mappedCardData.backCover ? \"Present\" : \"Missing\",\n                    leftInterior: mappedCardData.leftInterior ? \"Present\" : \"Missing\",\n                    rightInterior: mappedCardData.rightInterior ? \"Present\" : \"Missing\"\n                });\n                // Call the completion handler\n                console.log(\"\\uD83D\\uDE80 Calling handleFinalCardCompletion...\");\n                cardGeneration.handleFinalCardCompletion(mappedCardData);\n                // Card is automatically added to recent cards by markJobComplete\n                jobManagement.removeJobFromStorage(job_id);\n                jobManagement.setCurrentJobId(null);\n                webSocket.unsubscribeFromJob(job_id);\n            }\n        } else if (status === \"failed\") {\n            console.error(\"❌ Job failed:\", error);\n            if (isDraftJob && draftIndex >= 0) {\n                sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Draft variation \".concat(draftIndex + 1, \" failed. Continuing with others...\"));\n            } else {\n                sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"❌ Card generation failed. Please try again.\");\n                cardGeneration.setIsGenerating(false);\n                draftGeneration.setIsGeneratingFinalCard(false);\n                jobManagement.stopElapsedTimeTracking();\n                cardGeneration.setGenerationProgress(\"\");\n                // Don't reset progress - let time-based progress continue\n                // jobManagement.setProgressPercentage(0);\n                jobManagement.setCurrentJobId(null);\n                webSocket.unsubscribeFromJob(job_id);\n            }\n            jobManagement.removeJobFromStorage(job_id);\n        } else if (status === \"not_found\") {\n            console.warn(\"⚠️ Job not found on server, cleaning up stale reference:\", job_id);\n            // Clean up stale job reference\n            if (webSocket.currentJobRef.current === job_id) {\n                webSocket.currentJobRef.current = null;\n            }\n            // Reset UI state if this was the current job\n            if (jobManagement.currentJobId === job_id) {\n                jobManagement.setCurrentJobId(null);\n                cardGeneration.setIsGenerating(false);\n                draftGeneration.setIsGeneratingFinalCard(false);\n                cardGeneration.setGenerationProgress(\"\");\n                // Don't reset progress - let time-based progress continue\n                // jobManagement.setProgressPercentage(0);\n                jobManagement.stopElapsedTimeTracking();\n            }\n            // Clean up storage\n            jobManagement.removeJobFromStorage(job_id);\n            webSocket.unsubscribeFromJob(job_id);\n        }\n    }, [\n        selectedArtisticStyle,\n        draftGeneration,\n        cardGeneration,\n        jobManagement,\n        webSocket,\n        isRestoringJobs\n    ]);\n    // Set up WebSocket job update handler\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        webSocket.setJobUpdateHandler(handleJobUpdate);\n    }, [\n        webSocket,\n        handleJobUpdate\n    ]);\n    // Track if we've already logged the stale job message\n    const staleJobLoggedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    // Auto-reconnect WebSocket if disconnected during active generation\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!webSocket.isSocketConnected && (cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) && webSocket.currentJobRef.current) {\n            // Check if the generation has been running for more than 5 minutes\n            if (jobManagement.generationStartTime) {\n                const jobAge = Date.now() - jobManagement.generationStartTime;\n                if (jobAge > 5 * 60 * 1000) {\n                    if (!staleJobLoggedRef.current) {\n                        console.log(\"⏰ Job is older than 5 minutes, stopping reconnection attempts\");\n                        staleJobLoggedRef.current = true;\n                        // Clean up stale job\n                        const jobId = webSocket.currentJobRef.current;\n                        if (jobId) {\n                            console.log(\"\\uD83E\\uDDF9 Cleaning up stale job:\", jobId);\n                            // Remove from localStorage (only if not a draft job)\n                            if (!jobId.startsWith(\"draft-\")) {\n                                jobManagement.removeJobFromStorage(jobId);\n                            }\n                            // Reset generation states\n                            cardGeneration.setIsGenerating(false);\n                            draftGeneration.setIsGeneratingFinalCard(false);\n                            draftGeneration.setIsDraftMode(false);\n                            draftGeneration.setDraftCards([]);\n                            draftGeneration.setDraftCompletionCount(0);\n                            draftGeneration.setDraftCompletionShown(false);\n                            jobManagement.setCurrentJobId(null);\n                            jobManagement.setGenerationProgress(\"\");\n                            // Don't reset progress - let time-based progress continue\n                            // jobManagement.setProgressPercentage(0);\n                            jobManagement.stopElapsedTimeTracking();\n                            // Unsubscribe from job\n                            webSocket.unsubscribeFromJob(jobId);\n                            // Show error toast\n                            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Card generation timed out. Please try again.\");\n                        }\n                    }\n                    return;\n                }\n            }\n            console.log(\"\\uD83D\\uDD04 WebSocket disconnected during generation, attempting reconnect...\");\n            const reconnectTimer = setTimeout(()=>{\n                webSocket.connectWebSocket();\n                // Re-subscribe to current job after reconnection\n                const jobId = webSocket.currentJobRef.current;\n                if (jobId) {\n                    setTimeout(()=>{\n                        console.log(\"\\uD83D\\uDCE1 Re-subscribing to job after reconnect:\", jobId);\n                        webSocket.subscribeToJob(jobId);\n                    }, 1000);\n                }\n            }, 2000);\n            return ()=>clearTimeout(reconnectTimer);\n        }\n    }, [\n        webSocket,\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard,\n        jobManagement.generationStartTime\n    ]);\n    // Reset stale job flag when generation starts\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) {\n            staleJobLoggedRef.current = false;\n        }\n    }, [\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard\n    ]);\n    // Monitor for stale job updates\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if ((cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) && webSocket.currentJobRef.current) {\n            const checkInterval = setInterval(async ()=>{\n                const timeSinceLastUpdate = Date.now() - webSocket.lastJobUpdateRef.current;\n                const jobId = webSocket.currentJobRef.current;\n                // Very aggressive checking when at 95%+ progress\n                if (jobManagement.progressPercentage >= 95 && timeSinceLastUpdate > 5000) {\n                    console.warn(\"⚠️ No updates for \".concat(Math.round(timeSinceLastUpdate / 1000), \"s at \").concat(jobManagement.progressPercentage, \"% progress - checking job status...\"));\n                    if (jobId) {\n                        try {\n                            const response = await fetch(\"/api/job-status/\".concat(jobId));\n                            if (response.ok) {\n                                const jobStatus = await response.json();\n                                console.log(\"\\uD83D\\uDCCA Direct job status check:\", jobStatus);\n                                if (jobStatus.status === \"completed\" && jobStatus.cardData) {\n                                    console.log(\"✅ Job is actually completed! Processing result...\");\n                                    handleJobUpdate({\n                                        job_id: jobId,\n                                        status: \"completed\",\n                                        progress: \"Card generation complete!\",\n                                        cardData: jobStatus.cardData\n                                    });\n                                    return; // Exit early on completion\n                                }\n                            }\n                        } catch (error) {\n                            console.error(\"Failed to check job status:\", error);\n                        }\n                    }\n                } else if (jobManagement.progressPercentage >= 90 && timeSinceLastUpdate > 10000) {\n                    console.warn(\"⚠️ No updates for \".concat(Math.round(timeSinceLastUpdate / 1000), \"s at \").concat(jobManagement.progressPercentage, \"% progress\"));\n                    if (jobId) {\n                        try {\n                            const response = await fetch(\"/api/job-status/\".concat(jobId));\n                            if (response.ok) {\n                                const jobStatus = await response.json();\n                                console.log(\"\\uD83D\\uDCCA Direct job status check:\", jobStatus);\n                                if (jobStatus.status === \"completed\" && jobStatus.cardData) {\n                                    console.log(\"✅ Job is actually completed! Processing result...\");\n                                    handleJobUpdate({\n                                        job_id: jobId,\n                                        status: \"completed\",\n                                        progress: \"Card generation complete!\",\n                                        cardData: jobStatus.cardData\n                                    });\n                                    return; // Exit early on completion\n                                }\n                            }\n                        } catch (error) {\n                            console.error(\"Failed to check job status:\", error);\n                        }\n                    }\n                }\n                // Standard stale update check\n                if (timeSinceLastUpdate > 30000) {\n                    console.warn(\"⚠️ No job updates for 30 seconds, checking connection...\");\n                    if (!webSocket.isSocketConnected) {\n                        console.log(\"\\uD83D\\uDD04 WebSocket disconnected, reconnecting...\");\n                        webSocket.connectWebSocket();\n                    } else if (jobId) {\n                        console.log(\"\\uD83D\\uDCE1 Re-subscribing to job due to stale updates:\", jobId);\n                        webSocket.subscribeToJob(jobId);\n                    }\n                    // Reset the timer\n                    webSocket.lastJobUpdateRef.current = Date.now();\n                }\n            }, 3000); // Check every 3 seconds for faster detection at high progress\n            return ()=>clearInterval(checkInterval);\n        }\n    }, [\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard,\n        webSocket,\n        jobManagement.progressPercentage,\n        handleJobUpdate\n    ]);\n    // Simplified job restoration using new storage manager\n    const checkPendingJobs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        console.log(\"\\uD83D\\uDD04 Checking for recovery data...\");\n        setIsRestoringJobs(true);\n        // Check for active recovery job\n        const recovery = _lib_storageManager__WEBPACK_IMPORTED_MODULE_10__.storage.getRecovery();\n        if (!recovery) {\n            console.log(\"✅ No active job to recover\");\n            setIsRestoringJobs(false);\n            return;\n        }\n        console.log(\"\\uD83D\\uDD04 Found recovery data:\", recovery);\n        // In our simplified system, we only track one active job for recovery\n        // Recovery is primarily for browser crashes during generation\n        const jobId = recovery.jobId;\n        const isDraftJob = jobId === null || jobId === void 0 ? void 0 : jobId.startsWith(\"draft-\");\n        // Process draft jobs first to restore draft state\n        if (draftJobs.length > 0) {\n            console.log(\"\\uD83C\\uDFA8 Found \".concat(draftJobs.length, \" draft jobs to restore\"));\n            // Collect all draft cards from all draft jobs\n            const draftsByIndex = new Array(5).fill(null);\n            for (const { job } of draftJobs){\n                if (job.draftCards && Array.isArray(job.draftCards) && job.draftCards.length > 0) {\n                    const draftCard = job.draftCards[0]; // Each job stores one draft\n                    const draftIndex = job.draftIndex;\n                    if (draftIndex >= 0 && draftIndex < 5) {\n                        draftsByIndex[draftIndex] = draftCard;\n                    }\n                }\n            }\n            // Get non-null drafts for counting\n            const allDraftCards = draftsByIndex.filter(Boolean);\n            // Restore all draft cards at once\n            if (allDraftCards.length > 0) {\n                console.log(\"\\uD83D\\uDD04 Restoring \".concat(allDraftCards.length, \" draft cards from \").concat(draftJobs.length, \" jobs\"));\n                // Only set draft mode when we have actual cards\n                console.log(\"\\uD83C\\uDFAF Setting isDraftMode to true - draft cards found\");\n                draftGeneration.setIsDraftMode(true);\n                // Use the draftsByIndex which already has drafts at correct positions\n                draftGeneration.setDraftCards(draftsByIndex);\n                draftGeneration.setDraftCompletionCount(allDraftCards.length);\n                // Set appropriate progress state\n                if (allDraftCards.length === 5) {\n                    draftGeneration.setDraftCompletionShown(true);\n                    draftGeneration.setIsGenerating(false);\n                    cardGeneration.setIsGenerating(false);\n                    draftGeneration.setGenerationProgress(\"\");\n                    cardGeneration.setGenerationProgress(\"\");\n                // Time-based progress will be cleared above\n                } else {\n                    draftGeneration.setIsGenerating(true);\n                    cardGeneration.setIsGenerating(true);\n                    const progressMsg = \"✨ \".concat(allDraftCards.length, \"/5 front cover variations complete... \").concat(allDraftCards.length >= 2 ? \"You can select one now to proceed!\" : \"\");\n                    draftGeneration.setGenerationProgress(progressMsg);\n                    cardGeneration.setGenerationProgress(progressMsg);\n                // Don't override time-based progress\n                }\n            }\n            // If no draft cards were found but we have draft jobs, set appropriate state\n            if (allDraftCards.length === 0 && draftJobs.length > 0) {\n                console.log(\"\\uD83D\\uDD04 Draft jobs found but no cards yet - setting generation state\");\n                // Set draft mode and initialize empty array for draft jobs in progress\n                draftGeneration.setIsDraftMode(true);\n                draftGeneration.setDraftCards([\n                    null,\n                    null,\n                    null,\n                    null,\n                    null\n                ]);\n                draftGeneration.setIsGenerating(true);\n                cardGeneration.setIsGenerating(true);\n                draftGeneration.setGenerationProgress(\"\\uD83C\\uDFA8 Creating 5 front cover variations for you to choose from...\");\n                cardGeneration.setGenerationProgress(\"\\uD83C\\uDFA8 Creating 5 front cover variations for you to choose from...\");\n            // Don't reset progress - let time-based progress continue\n            // jobManagement.setProgressPercentage(0);\n            }\n            // Subscribe to all non-stale draft jobs\n            for (const { jobId, job } of draftJobs){\n                const jobAge = Date.now() - (job.createdAt || Date.now());\n                const isStale = jobAge > 5 * 60 * 1000;\n                if (!isStale) {\n                    var _job_draftCards;\n                    console.log(\"\\uD83D\\uDCE1 Subscribing to draft job: \".concat(jobId, \" (has \").concat(((_job_draftCards = job.draftCards) === null || _job_draftCards === void 0 ? void 0 : _job_draftCards.length) || 0, \" cards)\"));\n                    webSocket.subscribeToJob(jobId);\n                }\n            }\n        }\n        // Process remaining jobs (final card generation)\n        for (const { jobId, job } of finalJobs){\n            console.log(\"\\uD83D\\uDCCB Processing job \".concat(jobId, \":\"), {\n                isDraft: jobId.startsWith(\"draft-\"),\n                status: job.status,\n                hasProgress: !!job.lastProgress,\n                createdAt: job.createdAt\n            });\n            // Check if job is stale (older than 5 minutes without completion)\n            const jobAge = Date.now() - (job.createdAt || Date.now());\n            const isStale = jobAge > 5 * 60 * 1000 && job.status !== \"completed\";\n            if (isStale) {\n                console.log(\"\\uD83E\\uDDF9 Cleaning up stale job: \".concat(jobId, \" (age: \").concat(Math.round(jobAge / 1000), \"s)\"));\n                jobManagement.removeJobFromStorage(jobId);\n                continue;\n            }\n            // Restore progress and state\n            // Don't restore progress - let time-based progress handle it\n            // if (job.lastProgress !== undefined) {\n            //   jobManagement.setProgressPercentage(job.lastProgress);\n            //   cardGeneration.setProgressPercentage(job.lastProgress);\n            //   draftGeneration.setProgressPercentage(job.lastProgress);\n            // }\n            // Only restore progress text if the job is not completed\n            // This prevents showing \"Generation complete! (100%)\" from old completed jobs\n            if (job.lastProgressText && job.status !== \"completed\") {\n                jobManagement.setGenerationProgress(job.lastProgressText);\n                cardGeneration.setGenerationProgress(job.lastProgressText);\n                draftGeneration.setGenerationProgress(job.lastProgressText);\n            }\n            // Restore final card generation state\n            cardGeneration.setIsGenerating(true);\n            draftGeneration.setIsGeneratingFinalCard(true);\n            // If we have a selected draft, restore it\n            if (job.selectedDraftIndex !== undefined) {\n                draftGeneration.setSelectedDraftIndex(job.selectedDraftIndex);\n            }\n            jobManagement.setCurrentJobId(jobId);\n            // Calculate elapsed time since job started\n            const jobStartTime = job.createdAt || Date.now();\n            const elapsedSinceStart = (Date.now() - jobStartTime) / 1000;\n            // Start elapsed time tracking\n            jobManagement.startElapsedTimeTracking();\n            // Subscribe to the job updates\n            webSocket.subscribeToJob(jobId);\n            // Verify job exists on backend\n            try {\n                const response = await fetch(\"\".concat(BACKEND_API_BASE_URL, \"/api/job-status/\").concat(jobId));\n                const result = await response.json();\n                console.log(\"\\uD83D\\uDCE1 Job status check for \".concat(jobId, \":\"), {\n                    ok: response.ok,\n                    status: response.status,\n                    resultStatus: result.status,\n                    url: \"\".concat(BACKEND_API_BASE_URL, \"/api/job-status/\").concat(jobId)\n                });\n                if (result.status === \"not_found\") {\n                    // Job doesn't exist on backend, clean up and notify user\n                    console.log(\"⚠️ Job \".concat(jobId, \" not found on backend, cleaning up...\"));\n                    jobManagement.removeJobFromStorage(jobId);\n                    // Reset generation state\n                    if (isDraftJob) {\n                        draftGeneration.setIsGenerating(false);\n                    } else {\n                        cardGeneration.setIsGenerating(false);\n                        draftGeneration.setIsGeneratingFinalCard(false);\n                    }\n                    // Show helpful message to user\n                    sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Previous \".concat(isDraftJob ? \"draft\" : \"card\", \" generation expired. Please start a new one.\"), {\n                        duration: 5000\n                    });\n                    continue;\n                } else {\n                    // Job exists, show resuming message\n                    sonner__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Resuming \".concat(isDraftJob ? \"draft\" : \"card\", \" generation...\"));\n                }\n            } catch (error) {\n                console.error(\"Failed to verify job status:\", error);\n                // Continue anyway, WebSocket will handle it\n                sonner__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Attempting to resume \".concat(isDraftJob ? \"draft\" : \"card\", \" generation...\"));\n            }\n        }\n        // Restoration complete - allow WebSocket updates to be processed\n        // Add a small delay to ensure state updates have propagated\n        setTimeout(()=>{\n            console.log(\"✅ Job restoration complete, allowing WebSocket updates\");\n            setIsRestoringJobs(false);\n        }, 100);\n    }, [\n        jobManagement,\n        cardGeneration,\n        draftGeneration,\n        webSocket\n    ]);\n    // Load recovery data on component mount\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        console.log(\"\\uD83D\\uDE80 useCardStudio mounted, checking for recovery...\");\n        // Check for active recovery job\n        const recovery = _lib_storageManager__WEBPACK_IMPORTED_MODULE_10__.storage.getRecovery();\n        if (recovery) {\n            console.log(\"\\uD83D\\uDD04 Found active job to recover:\", recovery.jobId);\n            // Restore job state and subscribe to updates\n            jobManagement.setCurrentJobId(recovery.jobId);\n            webSocket.subscribeToJob(recovery.jobId);\n            // Set generation state\n            const isDraft = recovery.jobId.startsWith(\"draft-\");\n            if (isDraft) {\n                draftGeneration.setIsDraftMode(true);\n                draftGeneration.setIsGenerating(true);\n                cardGeneration.setIsGenerating(true);\n                draftGeneration.setGenerationProgress(\"\\uD83C\\uDFA8 Resuming draft generation...\");\n                cardGeneration.setGenerationProgress(\"\\uD83C\\uDFA8 Resuming draft generation...\");\n            } else {\n                cardGeneration.setIsGenerating(true);\n                cardGeneration.setGenerationProgress(\"\\uD83C\\uDFA8 Resuming card generation...\");\n            }\n            // Start elapsed time tracking\n            jobManagement.startElapsedTimeTracking(isDraft ? \"draft\" : \"final\");\n        }\n        // Always mark restoration as complete\n        setIsRestoringJobs(false);\n        // Mark restoration as complete after a small delay\n        setTimeout(()=>{\n            setIsRestoringJobs(false);\n        }, 100);\n    }, []);\n    // Return all the state and functions that the UI needs\n    return {\n        // Core state\n        prompt,\n        setPrompt,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        setFinalCardMessage: messageGeneration.setFinalCardMessage,\n        toField,\n        setToField,\n        fromField,\n        setFromField,\n        relationshipField,\n        setRelationshipField,\n        selectedType,\n        setSelectedType,\n        customCardType,\n        setCustomCardType,\n        selectedTone,\n        setSelectedTone,\n        isGenerating: cardGeneration.isGenerating || draftGeneration.isGenerating,\n        setIsGenerating: cardGeneration.setIsGenerating,\n        isGeneratingMessage: messageGeneration.isGeneratingMessage,\n        setIsGeneratingMessage: messageGeneration.setIsGeneratingMessage,\n        generatedCard: cardGeneration.generatedCard,\n        setGeneratedCard: cardGeneration.setGeneratedCard,\n        numberOfCards,\n        setNumberOfCards,\n        generatedCards: cardGeneration.generatedCards,\n        setGeneratedCards: cardGeneration.setGeneratedCards,\n        selectedCardIndex: cardGeneration.selectedCardIndex,\n        setSelectedCardIndex: cardGeneration.setSelectedCardIndex,\n        // Advanced options\n        showAdvanced,\n        setShowAdvanced,\n        selectedArtisticStyle,\n        setSelectedArtisticStyle,\n        customStyleDescription,\n        setCustomStyleDescription,\n        selectedImageModel,\n        setSelectedImageModel,\n        selectedDraftModel,\n        setSelectedDraftModel,\n        // Draft mode\n        isDraftMode: draftGeneration.isDraftMode,\n        setIsDraftMode: draftGeneration.setIsDraftMode,\n        draftCards: draftGeneration.draftCards,\n        setDraftCards: draftGeneration.setDraftCards,\n        selectedDraftIndex: draftGeneration.selectedDraftIndex,\n        setSelectedDraftIndex: draftGeneration.setSelectedDraftIndex,\n        isGeneratingFinalCard: draftGeneration.isGeneratingFinalCard,\n        setIsGeneratingFinalCard: draftGeneration.setIsGeneratingFinalCard,\n        previewingDraftIndex: draftGeneration.previewingDraftIndex,\n        setPreviewingDraftIndex: draftGeneration.setPreviewingDraftIndex,\n        draftCompletionShown: draftGeneration.draftCompletionShown,\n        setDraftCompletionShown: draftGeneration.setDraftCompletionShown,\n        draftCompletionCount: draftGeneration.draftCompletionCount,\n        setDraftCompletionCount: draftGeneration.setDraftCompletionCount,\n        // Progress tracking\n        generationProgress: draftGeneration.isGenerating ? draftGeneration.generationProgress : cardGeneration.generationProgress,\n        setGenerationProgress: cardGeneration.setGenerationProgress,\n        progressPercentage: jobManagement.progressPercentage,\n        isCardCompleted: cardGeneration.isCardCompleted,\n        setIsCardCompleted: cardGeneration.setIsCardCompleted,\n        // Upload and personalization\n        referenceImages: fileHandling.referenceImages,\n        setReferenceImages: fileHandling.setReferenceImages,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        setReferenceImageUrls: fileHandling.setReferenceImageUrls,\n        imageTransformation: fileHandling.imageTransformation,\n        setImageTransformation: fileHandling.setImageTransformation,\n        isUploading: fileHandling.isUploading,\n        setIsUploading: fileHandling.setIsUploading,\n        // Email and settings\n        userEmail,\n        setUserEmail,\n        isHandwrittenMessage,\n        setIsHandwrittenMessage,\n        isFrontBackOnly,\n        setIsFrontBackOnly,\n        selectedPaperSize,\n        setSelectedPaperSize,\n        // UI state\n        isTextareaExpanded,\n        setIsTextareaExpanded,\n        isMessageExpanded,\n        setIsMessageExpanded,\n        showSettings,\n        setShowSettings,\n        showTemplateGallery,\n        setShowTemplateGallery,\n        showPrintConfirmation,\n        setShowPrintConfirmation,\n        // Generation time\n        generationDuration: cardGeneration.generationDuration,\n        setGenerationDuration: cardGeneration.setGenerationDuration,\n        currentElapsedTime: jobManagement.currentElapsedTime,\n        setCurrentElapsedTime: jobManagement.setCurrentElapsedTime,\n        // Helper functions\n        formatGenerationTime: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.formatGenerationTime,\n        formatCountdown: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.formatCountdown,\n        sendThankYouEmail: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.sendThankYouEmail,\n        chatWithAI: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.chatWithAI,\n        scrollToCardPreview: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.scrollToCardPreview,\n        // Time tracking functions\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking,\n        // File handling functions\n        handleFileUpload: fileHandling.handleFileUpload,\n        handleRemoveReferenceImage: fileHandling.handleRemoveReferenceImage,\n        // Simplified photo references\n        photoReferences: fileHandling.photoReferences,\n        setPhotoReferences: fileHandling.setPhotoReferences,\n        updatePhotoDescription: fileHandling.updatePhotoDescription,\n        // Message functions\n        handleGetMessageHelp: messageGeneration.handleGetMessageHelp,\n        addMessageToHistory: messageGeneration.addMessageToHistory,\n        undoMessage: messageGeneration.undoMessage,\n        redoMessage: messageGeneration.redoMessage,\n        // Job management\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        removeJobFromStorage: jobManagement.removeJobFromStorage,\n        checkPendingJobs,\n        isRestoringJobs,\n        // Main generation functions\n        handleGenerateCardAsync: cardGeneration.handleGenerateCardAsync,\n        handleGenerateDraftCards: draftGeneration.handleGenerateDraftCards,\n        handleGenerateFinalFromDraft: draftGeneration.handleGenerateFinalFromDraft,\n        // Additional state for message refinement\n        messageHistory: messageGeneration.messageHistory,\n        setMessageHistory: messageGeneration.setMessageHistory,\n        currentMessageIndex: messageGeneration.currentMessageIndex,\n        setCurrentMessageIndex: messageGeneration.setCurrentMessageIndex,\n        refinementPrompt: messageGeneration.refinementPrompt,\n        setRefinementPrompt: messageGeneration.setRefinementPrompt,\n        isRefiningMessage: messageGeneration.isRefiningMessage,\n        setIsRefiningMessage: messageGeneration.setIsRefiningMessage,\n        showRefinementBox: messageGeneration.showRefinementBox,\n        setShowRefinementBox: messageGeneration.setShowRefinementBox,\n        // Template state\n        showTemplateCustomization,\n        setShowTemplateCustomization,\n        selectedTemplate,\n        setSelectedTemplate,\n        templateCustomizations,\n        setTemplateCustomizations,\n        templateSearchQuery,\n        setTemplateSearchQuery,\n        isSearchingTemplates,\n        setIsSearchingTemplates,\n        aiFilteredCards,\n        setAiFilteredCards,\n        searchMode,\n        setSearchMode,\n        textFilteredCards,\n        setTextFilteredCards,\n        showPrompts,\n        setShowPrompts,\n        // Print state\n        printOption,\n        setPrintOption,\n        // Additional draft mode state\n        handwritingSample: fileHandling.handwritingSample,\n        setHandwritingSample: fileHandling.setHandwritingSample,\n        handwritingSampleUrl: fileHandling.handwritingSampleUrl,\n        setHandwritingSampleUrl: fileHandling.setHandwritingSampleUrl,\n        // Job tracking\n        currentJobId: jobManagement.currentJobId,\n        setCurrentJobId: jobManagement.setCurrentJobId,\n        countdown,\n        setCountdown,\n        countdownInterval,\n        setCountdownInterval,\n        // Section loading states\n        sectionLoadingStates,\n        setSectionLoadingStates,\n        // Fast preview mode\n        fastPreviewMode,\n        setFastPreviewMode,\n        // Additional tracking\n        currentCardId: cardGeneration.currentCardId,\n        setCurrentCardId: cardGeneration.setCurrentCardId,\n        isInitialLoadComplete,\n        setIsInitialLoadComplete,\n        // Elapsed time tracking\n        generationStartTime: jobManagement.generationStartTime,\n        setGenerationStartTime: jobManagement.setGenerationStartTime,\n        elapsedTimeInterval: jobManagement.elapsedTimeInterval,\n        setElapsedTimeInterval: jobManagement.setElapsedTimeInterval,\n        // Constants for UI\n        cardTones: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.cardTones,\n        artisticStyles: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.artisticStyles,\n        paperSizes: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.paperSizes,\n        // WebSocket functions and state\n        isSocketConnected: webSocket.isSocketConnected,\n        connectWebSocket: webSocket.connectWebSocket,\n        disconnectWebSocket: webSocket.disconnectWebSocket,\n        subscribeToJob: webSocket.subscribeToJob,\n        unsubscribeFromJob: webSocket.unsubscribeFromJob,\n        handleJobUpdate,\n        handleFinalCardCompletion: cardGeneration.handleFinalCardCompletion\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZUNhcmRTdHVkaW9SZWZhY3RvcmVkLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7bUVBRWlFO0FBQ2xDO0FBRy9CLHVCQUF1QjtBQUNrQztBQUNrQjtBQUNGO0FBQ1Y7QUFDTTtBQUNGO0FBRW5FLDZCQUE2QjtBQVFHO0FBQ3dEO0FBQ3pDO0FBRXhDLFNBQVNvQjtJQUNkLGtCQUFrQjtJQUNsQixNQUFNLENBQUNDLFFBQVFDLFVBQVUsR0FBR3RCLCtDQUFRQSxDQUFDO0lBQ3JDLE1BQU0sQ0FBQ3VCLFNBQVNDLFdBQVcsR0FBR3hCLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ3lCLFdBQVdDLGFBQWEsR0FBRzFCLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQzJCLG1CQUFtQkMscUJBQXFCLEdBQUc1QiwrQ0FBUUEsQ0FBQztJQUMzRCxNQUFNLENBQUM2QixjQUFjQyxnQkFBZ0IsR0FBRzlCLCtDQUFRQSxDQUFTO0lBQ3pELE1BQU0sQ0FBQytCLGdCQUFnQkMsa0JBQWtCLEdBQUdoQywrQ0FBUUEsQ0FBUztJQUM3RCxNQUFNLENBQUNpQyxjQUFjQyxnQkFBZ0IsR0FBR2xDLCtDQUFRQSxDQUFTO0lBRXpELHlCQUF5QjtJQUN6QixNQUFNLENBQUNtQyxjQUFjQyxnQkFBZ0IsR0FBR3BDLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ3FDLHVCQUF1QkMseUJBQXlCLEdBQUd0QywrQ0FBUUEsQ0FBUztJQUMzRSxNQUFNLENBQUN1Qyx3QkFBd0JDLDBCQUEwQixHQUFHeEMsK0NBQVFBLENBQVM7SUFDN0UsTUFBTSxDQUFDeUMsb0JBQW9CQyxzQkFBc0IsR0FBRzFDLCtDQUFRQSxDQUFTO0lBQ3JFLE1BQU0sQ0FBQzJDLG9CQUFvQkMsc0JBQXNCLEdBQUc1QywrQ0FBUUEsQ0FBUztJQUNyRSxNQUFNLENBQUM2QyxpQkFBaUJDLG1CQUFtQixHQUFHOUMsK0NBQVFBLENBQVU7SUFFaEUsY0FBYztJ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K0RBQUFBO1FBRVYsZ0NBQWdDO1FBQ2hDbUwsbUJBQW1CckYsVUFBVXFGLGlCQUFpQjtRQUM5Q08sa0JBQWtCNUYsVUFBVTRGLGdCQUFnQjtRQUM1Q2dHLHFCQUFxQjVMLFVBQVU0TCxtQkFBbUI7UUFDbERwTCxnQkFBZ0JSLFVBQVVRLGNBQWM7UUFDeEM4RCxvQkFBb0J0RSxVQUFVc0Usa0JBQWtCO1FBQ2hEOUM7UUFDQXNELDJCQUEyQnZELGVBQWV1RCx5QkFBeUI7SUFDckU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ob29rcy91c2VDYXJkU3R1ZGlvUmVmYWN0b3JlZC50cz85Y2M5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gXCJzb25uZXJcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG4vLyBJbXBvcnQgbW9kdWxhciBob29rc1xuaW1wb3J0IHsgdXNlV2ViU29ja2V0IH0gZnJvbSAnLi9jYXJkU3R1ZGlvL3VzZVdlYlNvY2tldCc7XG5pbXBvcnQgeyB1c2VKb2JNYW5hZ2VtZW50IH0gZnJvbSAnLi9jYXJkU3R1ZGlvL3VzZUpvYk1hbmFnZW1lbnRTaW1wbGlmaWVkJztcbmltcG9ydCB7IHVzZU1lc3NhZ2VHZW5lcmF0aW9uIH0gZnJvbSAnLi9jYXJkU3R1ZGlvL3VzZU1lc3NhZ2VHZW5lcmF0aW9uJztcbmltcG9ydCB7IHVzZUZpbGVIYW5kbGluZyB9IGZyb20gJy4vY2FyZFN0dWRpby91c2VGaWxlSGFuZGxpbmcnO1xuaW1wb3J0IHsgdXNlRHJhZnRHZW5lcmF0aW9uIH0gZnJvbSAnLi9jYXJkU3R1ZGlvL3VzZURyYWZ0R2VuZXJhdGlvbic7XG5pbXBvcnQgeyB1c2VDYXJkR2VuZXJhdGlvbiB9IGZyb20gJy4vY2FyZFN0dWRpby91c2VDYXJkR2VuZXJhdGlvbic7XG5cbi8vIEltcG9ydCBjb25zdGFudHMgYW5kIHV0aWxzXG5pbXBvcnQgeyBcbiAgY2FyZFRvbmVzLCBcbiAgYXJ0aXN0aWNTdHlsZXMsIFxuICBwYXBlclNpemVzLCBcbiAgZm9ybWF0R2VuZXJhdGlvblRpbWUsIFxuICBmb3JtYXRDb3VudGRvd24sXG4gIEdlbmVyYXRlZENhcmQgXG59IGZyb20gJy4vY2FyZFN0dWRpby9jb25zdGFudHMnO1xuaW1wb3J0IHsgc2VuZFRoYW5rWW91RW1haWwsIGNoYXRXaXRoQUksIHNjcm9sbFRvQ2FyZFByZXZpZXcgfSBmcm9tICcuL2NhcmRTdHVkaW8vdXRpbHMnO1xuaW1wb3J0IHsgc3RvcmFnZSB9IGZyb20gJ0AvbGliL3N0b3JhZ2VNYW5hZ2VyJztcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNhcmRTdHVkaW8oKSB7XG4gIC8vIENvcmUgZm9ybSBzdGF0ZVxuICBjb25zdCBbcHJvbXB0LCBzZXRQcm9tcHRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt0b0ZpZWxkLCBzZXRUb0ZpZWxkXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZnJvbUZpZWxkLCBzZXRGcm9tRmllbGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtyZWxhdGlvbnNoaXBGaWVsZCwgc2V0UmVsYXRpb25zaGlwRmllbGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzZWxlY3RlZFR5cGUsIHNldFNlbGVjdGVkVHlwZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiYmlydGhkYXlcIik7XG4gIGNvbnN0IFtjdXN0b21DYXJkVHlwZSwgc2V0Q3VzdG9tQ2FyZFR5cGVdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgY29uc3QgW3NlbGVjdGVkVG9uZSwgc2V0U2VsZWN0ZWRUb25lXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJmdW5ueVwiKTtcbiAgXG4gIC8vIEFkdmFuY2VkIG9wdGlvbnMgc3RhdGVcbiAgY29uc3QgW3Nob3dBZHZhbmNlZCwgc2V0U2hvd0FkdmFuY2VkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkQXJ0aXN0aWNTdHlsZSwgc2V0U2VsZWN0ZWRBcnRpc3RpY1N0eWxlXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJ3YXRlcmNvbG9yXCIpO1xuICBjb25zdCBbY3VzdG9tU3R5bGVEZXNjcmlwdGlvbiwgc2V0Q3VzdG9tU3R5bGVEZXNjcmlwdGlvbl0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBbc2VsZWN0ZWRJbWFnZU1vZGVsLCBzZXRTZWxlY3RlZEltYWdlTW9kZWxdID0gdXNlU3RhdGU8c3RyaW5nPihcImdwdC1pbWFnZS0xXCIpO1xuICBjb25zdCBbc2VsZWN0ZWREcmFmdE1vZGVsLCBzZXRTZWxlY3RlZERyYWZ0TW9kZWxdID0gdXNlU3RhdGU8c3RyaW5nPihcImdwdC1pbWFnZS0xXCIpO1xuICBjb25zdCBbZmFzdFByZXZpZXdNb2RlLCBzZXRGYXN0UHJldmlld01vZGVdID0gdXNlU3RhdGU8Ym9vbGVhbj4odHJ1ZSk7XG4gIFxuICAvLyBFbWFpbCBzdGF0ZVxuICBjb25zdCBbdXNlckVtYWlsLCBzZXRVc2VyRW1haWxdID0gdXNlU3RhdGU8c3RyaW5nPihcIlwiKTtcbiAgXG4gIC8vIENhcmQgb3B0aW9uc1xuICBjb25zdCBbbnVtYmVyT2ZDYXJkcywgc2V0TnVtYmVyT2ZDYXJkc10gPSB1c2VTdGF0ZTxudW1iZXI+KDEpO1xuICBjb25zdCBbaXNIYW5kd3JpdHRlbk1lc3NhZ2UsIHNldElzSGFuZHdyaXR0ZW5NZXNzYWdlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzRnJvbnRCYWNrT25seSwgc2V0SXNGcm9udEJhY2tPbmx5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkUGFwZXJTaXplLCBzZXRTZWxlY3RlZFBhcGVyU2l6ZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwic3RhbmRhcmRcIik7XG4gIFxuICAvLyBVSSBzdGF0ZVxuICBjb25zdCBbaXNUZXh0YXJlYUV4cGFuZGVkLCBzZXRJc1RleHRhcmVhRXhwYW5kZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNNZXNzYWdlRXhwYW5kZWQsIHNldElzTWVzc2FnZUV4cGFuZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dTZXR0aW5ncywgc2V0U2hvd1NldHRpbmdzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dUZW1wbGF0ZUdhbGxlcnksIHNldFNob3dUZW1wbGF0ZUdhbGxlcnldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd1ByaW50Q29uZmlybWF0aW9uLCBzZXRTaG93UHJpbnRDb25maXJtYXRpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd1RlbXBsYXRlQ3VzdG9taXphdGlvbiwgc2V0U2hvd1RlbXBsYXRlQ3VzdG9taXphdGlvbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICAvLyBSZXN0b3JhdGlvbiBzdGF0ZVxuICBjb25zdCBbaXNSZXN0b3JpbmdKb2JzLCBzZXRJc1Jlc3RvcmluZ0pvYnNdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtzZWxlY3RlZFRlbXBsYXRlLCBzZXRTZWxlY3RlZFRlbXBsYXRlXSA9IHVzZVN0YXRlPEdlbmVyYXRlZENhcmQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzSW5pdGlhbExvYWRDb21wbGV0ZSwgc2V0SXNJbml0aWFsTG9hZENvbXBsZXRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgXG4gIC8vIFRlbXBsYXRlIHN0YXRlXG4gIGNvbnN0IFt0ZW1wbGF0ZVNlYXJjaFF1ZXJ5LCBzZXRUZW1wbGF0ZVNlYXJjaFF1ZXJ5XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbaXNTZWFyY2hpbmdUZW1wbGF0ZXMsIHNldElzU2VhcmNoaW5nVGVtcGxhdGVzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FpRmlsdGVyZWRDYXJkcywgc2V0QWlGaWx0ZXJlZENhcmRzXSA9IHVzZVN0YXRlPGFueVtdPihbXSk7XG4gIGNvbnN0IFtzZWFyY2hNb2RlLCBzZXRTZWFyY2hNb2RlXSA9IHVzZVN0YXRlPCd0ZXh0JyB8ICdhaScgfCAnaHlicmlkJz4oJ3RleHQnKTtcbiAgY29uc3QgW3RleHRGaWx0ZXJlZENhcmRzLCBzZXRUZXh0RmlsdGVyZWRDYXJkc10gPSB1c2VTdGF0ZTxhbnlbXT4oW10pO1xuICBjb25zdCBbc2hvd1Byb21wdHMsIHNldFNob3dQcm9tcHRzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3ByaW50T3B0aW9uLCBzZXRQcmludE9wdGlvbl0gPSB1c2VTdGF0ZTwncGh5c2ljYWwnIHwgJ2VtYWlsJz4oJ3BoeXNpY2FsJyk7XG4gIFxuICAvLyBUZW1wbGF0ZSBjdXN0b21pemF0aW9uIHN0YXRlXG4gIGNvbnN0IFt0ZW1wbGF0ZUN1c3RvbWl6YXRpb25zLCBzZXRUZW1wbGF0ZUN1c3RvbWl6YXRpb25zXSA9IHVzZVN0YXRlKHtcbiAgICBwcm9tcHRDaGFuZ2VzOiBcIlwiLFxuICAgIG1lc3NhZ2VDaGFuZ2VzOiBcIlwiLFxuICAgIHVzZVJlZmVyZW5jZUltYWdlOiBmYWxzZSxcbiAgICByZWZlcmVuY2VJbWFnZUZpbGU6IG51bGwgYXMgRmlsZSB8IG51bGwsXG4gICAgcmVmZXJlbmNlSW1hZ2VVcmxzOiBbXSBhcyBzdHJpbmdbXSxcbiAgICByZWZlcmVuY2VJbWFnZVRyYW5zZm9ybWF0aW9uOiBcIlwiXG4gIH0pO1xuICBcbiAgLy8gU2VjdGlvbiBsb2FkaW5nIHN0YXRlc1xuICBjb25zdCBbc2VjdGlvbkxvYWRpbmdTdGF0ZXMsIHNldFNlY3Rpb25Mb2FkaW5nU3RhdGVzXSA9IHVzZVN0YXRlPHtcbiAgICBmcm9udENvdmVyOiAnaWRsZScgfCAnbG9hZGluZycgfCAnY29tcGxldGVkJyB8ICdlcnJvcic7XG4gICAgYmFja0NvdmVyOiAnaWRsZScgfCAnbG9hZGluZycgfCAnY29tcGxldGVkJyB8ICdlcnJvcic7XG4gICAgbGVmdEludGVyaW9yOiAnaWRsZScgfCAnbG9hZGluZycgfCAnY29tcGxldGVkJyB8ICdlcnJvcic7XG4gICAgcmlnaHRJbnRlcmlvcjogJ2lkbGUnIHwgJ2xvYWRpbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZXJyb3InO1xuICB9Pih7XG4gICAgZnJvbnRDb3ZlcjogJ2lkbGUnLFxuICAgIGJhY2tDb3ZlcjogJ2lkbGUnLFxuICAgIGxlZnRJbnRlcmlvcjogJ2lkbGUnLFxuICAgIHJpZ2h0SW50ZXJpb3I6ICdpZGxlJyxcbiAgfSk7XG4gIFxuICAvLyBDb3VudGRvd24gc3RhdGVcbiAgY29uc3QgW2NvdW50ZG93biwgc2V0Q291bnRkb3duXSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG4gIGNvbnN0IFtjb3VudGRvd25JbnRlcnZhbCwgc2V0Q291bnRkb3duSW50ZXJ2YWxdID0gdXNlU3RhdGU8Tm9kZUpTLlRpbWVvdXQgfCBudWxsPihudWxsKTtcblxuICAvLyBVc2UgbW9kdWxhciBob29rc1xuICBjb25zdCB3ZWJTb2NrZXQgPSB1c2VXZWJTb2NrZXQoKTtcbiAgY29uc3Qgam9iTWFuYWdlbWVudCA9IHVzZUpvYk1hbmFnZW1lbnQoKTtcbiAgY29uc3QgZmlsZUhhbmRsaW5nID0gdXNlRmlsZUhhbmRsaW5nKCk7XG4gIGNvbnN0IG1lc3NhZ2VHZW5lcmF0aW9uID0gdXNlTWVzc2FnZUdlbmVyYXRpb24oXG4gICAgc2VsZWN0ZWRUeXBlLFxuICAgIGN1c3RvbUNhcmRUeXBlLFxuICAgIHNlbGVjdGVkVG9uZSxcbiAgICBwcm9tcHQsXG4gICAgdG9GaWVsZCxcbiAgICBmcm9tRmllbGQsXG4gICAgcmVsYXRpb25zaGlwRmllbGQsXG4gICAgZmlsZUhhbmRsaW5nLnBob3RvUmVmZXJlbmNlc1xuICApO1xuICBcbiAgLy8gRHJhZnQgZ2VuZXJhdGlvbiBwcm9wc1xuICBjb25zdCBkcmFmdEdlbmVyYXRpb25Qcm9wcyA9IHtcbiAgICBzZWxlY3RlZFR5cGUsXG4gICAgY3VzdG9tQ2FyZFR5cGUsXG4gICAgc2VsZWN0ZWRUb25lLFxuICAgIHNlbGVjdGVkQXJ0aXN0aWNTdHlsZSxcbiAgICBjdXN0b21TdHlsZURlc2NyaXB0aW9uLFxuICAgIHNlbGVjdGVkRHJhZnRNb2RlbCxcbiAgICBzZWxlY3RlZEltYWdlTW9kZWwsXG4gICAgc2VsZWN0ZWRQYXBlclNpemUsXG4gICAgcHJvbXB0LFxuICAgIHRvRmllbGQsXG4gICAgZnJvbUZpZWxkLFxuICAgIHVzZXJFbWFpbCxcbiAgICBmaW5hbENhcmRNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5maW5hbENhcmRNZXNzYWdlLFxuICAgIGlzSGFuZHdyaXR0ZW5NZXNzYWdlLFxuICAgIGlzRnJvbnRCYWNrT25seSxcbiAgICByZWZlcmVuY2VJbWFnZVVybHM6IGZpbGVIYW5kbGluZy5yZWZlcmVuY2VJbWFnZVVybHMsXG4gICAgcGhvdG9SZWZlcmVuY2VzOiBmaWxlSGFuZGxpbmcucGhvdG9SZWZlcmVuY2VzLFxuICAgIHJlbGF0aW9uc2hpcEZpZWxkLFxuICAgIHNhdmVKb2JUb1N0b3JhZ2U6IGpvYk1hbmFnZW1lbnQuc2F2ZUpvYlRvU3RvcmFnZSxcbiAgICBzdWJzY3JpYmVUb0pvYjogd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iLFxuICAgIHVuc3Vic2NyaWJlRnJvbUFsbEpvYnM6IHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21BbGxKb2JzLFxuICAgIHN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZzogam9iTWFuYWdlbWVudC5zdGFydEVsYXBzZWRUaW1lVHJhY2tpbmcsXG4gICAgc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmc6IGpvYk1hbmFnZW1lbnQuc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmcsXG4gIH07XG4gIFxuICBjb25zdCBkcmFmdEdlbmVyYXRpb24gPSB1c2VEcmFmdEdlbmVyYXRpb24oZHJhZnRHZW5lcmF0aW9uUHJvcHMpO1xuICBcbiAgLy8gQ2FyZCBnZW5lcmF0aW9uIHByb3BzXG4gIGNvbnN0IGNhcmRHZW5lcmF0aW9uUHJvcHMgPSB7XG4gICAgc2VsZWN0ZWRUeXBlLFxuICAgIGN1c3RvbUNhcmRUeXBlLFxuICAgIHNlbGVjdGVkVG9uZSxcbiAgICBzZWxlY3RlZEFydGlzdGljU3R5bGUsXG4gICAgY3VzdG9tU3R5bGVEZXNjcmlwdGlvbixcbiAgICBzZWxlY3RlZEltYWdlTW9kZWwsXG4gICAgc2VsZWN0ZWRQYXBlclNpemUsXG4gICAgcHJvbXB0LFxuICAgIHRvRmllbGQsXG4gICAgZnJvbUZpZWxkLFxuICAgIHVzZXJFbWFpbCxcbiAgICBmaW5hbENhcmRNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5maW5hbENhcmRNZXNzYWdlLFxuICAgIGlzSGFuZHdyaXR0ZW5NZXNzYWdlLFxuICAgIGlzRnJvbnRCYWNrT25seSxcbiAgICByZWZlcmVuY2VJbWFnZVVybHM6IGZpbGVIYW5kbGluZy5yZWZlcmVuY2VJbWFnZVVybHMsXG4gICAgcGhvdG9SZWZlcmVuY2VzOiBmaWxlSGFuZGxpbmcucGhvdG9SZWZlcmVuY2VzLFxuICAgIHJlbGF0aW9uc2hpcEZpZWxkLFxuICAgIG51bWJlck9mQ2FyZHMsXG4gICAgc2F2ZUpvYlRvU3RvcmFnZTogam9iTWFuYWdlbWVudC5zYXZlSm9iVG9TdG9yYWdlLFxuICAgIHJlbW92ZUpvYkZyb21TdG9yYWdlOiBqb2JNYW5hZ2VtZW50LnJlbW92ZUpvYkZyb21TdG9yYWdlLFxuICAgIHN1YnNjcmliZVRvSm9iOiB3ZWJTb2NrZXQuc3Vic2NyaWJlVG9Kb2IsXG4gICAgc3RhcnRFbGFwc2VkVGltZVRyYWNraW5nOiBqb2JNYW5hZ2VtZW50LnN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZyxcbiAgICBzdG9wRWxhcHNlZFRpbWVUcmFja2luZzogam9iTWFuYWdlbWVudC5zdG9wRWxhcHNlZFRpbWVUcmFja2luZyxcbiAgICBzZXRDdXJyZW50Sm9iSWQ6IGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEpvYklkLFxuICAgIHNldElzRHJhZnRNb2RlOiBkcmFmdEdlbmVyYXRpb24uc2V0SXNEcmFmdE1vZGUsXG4gICAgc2V0RHJhZnRDYXJkczogZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMsXG4gICAgc2V0U2VsZWN0ZWREcmFmdEluZGV4OiBkcmFmdEdlbmVyYXRpb24uc2V0U2VsZWN0ZWREcmFmdEluZGV4LFxuICAgIHNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZDogZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZCxcbiAgICBzZXRQcmV2aWV3aW5nRHJhZnRJbmRleDogZHJhZnRHZW5lcmF0aW9uLnNldFByZXZpZXdpbmdEcmFmdEluZGV4LFxuICAgIHNldERyYWZ0Q29tcGxldGlvblNob3duOiBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uU2hvd24sXG4gICAgc2V0RHJhZnRDb21wbGV0aW9uQ291bnQ6IGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25Db3VudCxcbiAgfTtcbiAgXG4gIGNvbnN0IGNhcmRHZW5lcmF0aW9uID0gdXNlQ2FyZEdlbmVyYXRpb24oY2FyZEdlbmVyYXRpb25Qcm9wcyk7XG5cbiAgLy8gSGFuZGxlIGpvYiB1cGRhdGVzIGZyb20gV2ViU29ja2V0XG4gIGNvbnN0IGhhbmRsZUpvYlVwZGF0ZSA9IHVzZUNhbGxiYWNrKChkYXRhOiBhbnkpID0+IHtcbiAgICBjb25zdCB7IGpvYl9pZCwgc3RhdHVzLCBwcm9ncmVzcywgY2FyZERhdGEsIGVycm9yLCBjb21wbGV0ZWRBdCB9ID0gZGF0YTtcbiAgICBcbiAgICBpZiAoIWpvYl9pZCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIFNraXAgdXBkYXRlcyBpZiB3ZSdyZSBzdGlsbCByZXN0b3Jpbmcgam9icyBmcm9tIGxvY2FsU3RvcmFnZVxuICAgIGlmIChpc1Jlc3RvcmluZ0pvYnMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfij7MgU2tpcHBpbmcgam9iIHVwZGF0ZSBkdXJpbmcgcmVzdG9yYXRpb246Jywgam9iX2lkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIGRyYWZ0IGpvYlxuICAgIGNvbnN0IGlzRHJhZnRKb2IgPSBqb2JfaWQuc3RhcnRzV2l0aCgnZHJhZnQtJyk7XG4gICAgY29uc3QgZHJhZnRJbmRleCA9IGlzRHJhZnRKb2IgPyBwYXJzZUludChqb2JfaWQuc3BsaXQoJy0nKVsxXSkgOiAtMTtcbiAgICBcbiAgICAvLyBGaWx0ZXIgb3V0IHVwZGF0ZXMgZnJvbSB3cm9uZyBqb2IgdHlwZVxuICAgIC8vIElmIHdlJ3JlIGluIGRyYWZ0IG1vZGUsIG9ubHkgcHJvY2VzcyBkcmFmdCBqb2JzXG4gICAgLy8gSWYgd2UncmUgaW4gZmluYWwgbW9kZSwgb25seSBwcm9jZXNzIG5vbi1kcmFmdCBqb2JzXG4gICAgY29uc3QgaXNJbkRyYWZ0TW9kZSA9IGRyYWZ0R2VuZXJhdGlvbi5pc0RyYWZ0TW9kZTtcbiAgICBpZiAoaXNJbkRyYWZ0TW9kZSAmJiAhaXNEcmFmdEpvYikge1xuICAgICAgY29uc29sZS5sb2coJ/CfmqsgSWdub3Jpbmcgbm9uLWRyYWZ0IGpvYiB1cGRhdGUgaW4gZHJhZnQgbW9kZTonLCBqb2JfaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWlzSW5EcmFmdE1vZGUgJiYgaXNEcmFmdEpvYikge1xuICAgICAgY29uc29sZS5sb2coJ/CfmqsgSWdub3JpbmcgZHJhZnQgam9iIHVwZGF0ZSBpbiBmaW5hbCBtb2RlOicsIGpvYl9pZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5SEIFByb2Nlc3Npbmcgam9iIHVwZGF0ZTonLCB7IGpvYl9pZCwgc3RhdHVzLCBpc0RyYWZ0Sm9iLCBkcmFmdEluZGV4LCBwcm9ncmVzcyB9KTtcbiAgICBcbiAgICAvLyBVcGRhdGUgcHJvZ3Jlc3MgaWYgcHJvdmlkZWRcbiAgICBpZiAocHJvZ3Jlc3MpIHtcbiAgICAgIC8vIElNUE9SVEFOVDogRG9uJ3Qgc2hvdyBcIkdlbmVyYXRpb24gY29tcGxldGUhXCIgdW50aWwgd2UndmUgYWN0dWFsbHkgcHJvY2Vzc2VkIHRoZSBjYXJkXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBVSSBmcm9tIHNob3dpbmcgY29tcGxldGlvbiBiZWZvcmUgdGhlIGNhcmQgaXMgcmVhZHlcbiAgICAgIGlmIChwcm9ncmVzcy5pbmNsdWRlcygnR2VuZXJhdGlvbiBjb21wbGV0ZSEnKSAmJiBzdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmICFpc0RyYWZ0Sm9iKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfij7jvuI8gSG9sZGluZyBcIkdlbmVyYXRpb24gY29tcGxldGUhXCIgbWVzc2FnZSB1bnRpbCBjYXJkIGlzIHByb2Nlc3NlZCcpO1xuICAgICAgICAvLyBEb24ndCB1cGRhdGUgdGhlIHByb2dyZXNzIG1lc3NhZ2UgeWV0IC0gaXQgd2lsbCBiZSBzZXQgaW4gaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKHByb2dyZXNzKTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhwcm9ncmVzcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OKIFByb2dyZXNzIG1lc3NhZ2U6ICR7cHJvZ3Jlc3N9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmIGNhcmREYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+OiSBKb2IgY29tcGxldGVkISBDYXJkIGRhdGE6JywgY2FyZERhdGEsICdpc0RyYWZ0Sm9iOicsIGlzRHJhZnRKb2IpO1xuICAgICAgXG4gICAgICBpZiAoaXNEcmFmdEpvYiAmJiBkcmFmdEluZGV4ID49IDApIHtcbiAgICAgICAgLy8gSGFuZGxlIGRyYWZ0IGNhcmQgY29tcGxldGlvblxuICAgICAgICBjb25zb2xlLmxvZyhg8J+OqCBEcmFmdCB2YXJpYXRpb24gJHtkcmFmdEluZGV4ICsgMX0gY29tcGxldGVkIWApO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IHN0eWxlIGluZm8gZm9yIHNtYXJ0IHN0eWxlIG1vZGVcbiAgICAgICAgbGV0IHN0eWxlSW5mbzogeyBzdHlsZU5hbWU6IHN0cmluZzsgc3R5bGVMYWJlbDogc3RyaW5nIH0gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzZWxlY3RlZEFydGlzdGljU3R5bGUgPT09IFwiYWktc21hcnQtc3R5bGVcIikge1xuICAgICAgICAgIGNvbnN0IHByZWRlZmluZWRTdHlsZXMgPSBbXG4gICAgICAgICAgICBcIndhdGVyY29sb3JcIiwgXCJib3RhbmljYWxcIiwgXCJjb21pYy1ib29rXCIsIFwiZHJlYW15LWZhbnRhc3lcIiwgXCJtaW5pbWFsaXN0XCJcbiAgICAgICAgICBdO1xuICAgICAgICAgIGNvbnN0IHN0eWxlTGFiZWxzID0gW1xuICAgICAgICAgICAgXCLwn46oIFdhdGVyY29sb3JcIiwgXCLwn4y/IEJvdGFuaWNhbFwiLCBcIvCfkqUgQ29taWMgQm9va1wiLCBcIvCfjLggRHJlYW15IEZhbnRhc3lcIiwgXCLinKggTWluaW1hbGlzdFwiXG4gICAgICAgICAgXTtcbiAgICAgICAgICBpZiAoZHJhZnRJbmRleCA+PSAwICYmIGRyYWZ0SW5kZXggPCBwcmVkZWZpbmVkU3R5bGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3R5bGVJbmZvID0ge1xuICAgICAgICAgICAgICBzdHlsZU5hbWU6IHByZWRlZmluZWRTdHlsZXNbZHJhZnRJbmRleF0sXG4gICAgICAgICAgICAgIHN0eWxlTGFiZWw6IHN0eWxlTGFiZWxzW2RyYWZ0SW5kZXhdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRyYWZ0Q2FyZDogR2VuZXJhdGVkQ2FyZCA9IHtcbiAgICAgICAgICBpZDogYGRyYWZ0LSR7ZHJhZnRJbmRleCArIDF9LSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIHByb21wdDogY2FyZERhdGEucHJvbXB0IHx8IGBEcmFmdCBWYXJpYXRpb24gJHtkcmFmdEluZGV4ICsgMX1gLFxuICAgICAgICAgIGZyb250Q292ZXI6IGNhcmREYXRhLmZyb250Q292ZXIgfHwgXCJcIixcbiAgICAgICAgICBiYWNrQ292ZXI6IFwiXCIsXG4gICAgICAgICAgbGVmdFBhZ2U6IFwiXCIsXG4gICAgICAgICAgcmlnaHRQYWdlOiBcIlwiLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICBnZW5lcmF0ZWRQcm9tcHRzOiB7XG4gICAgICAgICAgICBmcm9udENvdmVyOiBjYXJkRGF0YS5nZW5lcmF0ZWRQcm9tcHRzPy5mcm9udENvdmVyIHx8IFwiXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0eWxlSW5mbzogc3R5bGVJbmZvXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBTaW1wbGlmaWVkIGRyYWZ0IHRyYWNraW5nIC0gdXNlIGZpeGVkIGFycmF5IHBvc2l0aW9uc1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDYXJkcyhwcmV2ID0+IHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXZdO1xuICAgICAgICAgIC8vIEVuc3VyZSBhcnJheSBoYXMgNSBzbG90c1xuICAgICAgICAgIHdoaWxlICh1cGRhdGVkLmxlbmd0aCA8IDUpIHtcbiAgICAgICAgICAgIHVwZGF0ZWQucHVzaChudWxsIGFzIGFueSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFBsYWNlIGRyYWZ0IGF0IGl0cyBjb3JyZWN0IGluZGV4XG4gICAgICAgICAgdXBkYXRlZFtkcmFmdEluZGV4XSA9IGRyYWZ0Q2FyZDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIERyYWZ0ICR7ZHJhZnRJbmRleCArIDF9IGNvbXBsZXRlZCBhbmQgc3RvcmVkIGF0IGluZGV4ICR7ZHJhZnRJbmRleH1gKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBObyBsb25nZXIgc2F2ZSBpbmRpdmlkdWFsIGRyYWZ0cyB0byBsb2NhbFN0b3JhZ2VcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaW1wbGlmaWVkIGNvbXBsZXRpb24gdHJhY2tpbmcgLSBjb3VudCB0aGUgdXBkYXRlZCBhcnJheSBpbmNsdWRpbmcgdGhlIG5ldyBkcmFmdFxuICAgICAgICBjb25zdCB1cGRhdGVkRHJhZnRzID0gWy4uLmRyYWZ0R2VuZXJhdGlvbi5kcmFmdENhcmRzXTtcbiAgICAgICAgdXBkYXRlZERyYWZ0c1tkcmFmdEluZGV4XSA9IGRyYWZ0Q2FyZDtcbiAgICAgICAgY29uc3QgY29tcGxldGVkQ291bnQgPSB1cGRhdGVkRHJhZnRzLmZpbHRlcihCb29sZWFuKS5sZW5ndGg7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OKIERyYWZ0IHByb2dyZXNzOiAke2NvbXBsZXRlZENvdW50fS81IHZhcmlhdGlvbnMgY29tcGxldGVgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBwcm9ncmVzc1xuICAgICAgICBjb25zdCBwcm9ncmVzc01zZyA9IGNvbXBsZXRlZENvdW50ID09PSA1IFxuICAgICAgICAgID8gXCJBbGwgNSB2YXJpYXRpb25zIHJlYWR5ISBDaG9vc2UgeW91ciBmYXZvcml0ZSBiZWxvdy5cIlxuICAgICAgICAgIDogYCR7Y29tcGxldGVkQ291bnR9LzUgdmFyaWF0aW9ucyBjb21wbGV0ZS4uLiR7Y29tcGxldGVkQ291bnQgPj0gMiA/IFwiIFlvdSBjYW4gc2VsZWN0IG9uZSBub3chXCIgOiBcIlwifWA7XG4gICAgICAgIFxuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKHByb2dyZXNzTXNnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE92ZXJyaWRlIHRpbWUtYmFzZWQgcHJvZ3Jlc3Mgd2l0aCByZWFsIHByb2dyZXNzIHdoZW4gZHJhZnRzIGNvbXBsZXRlXG4gICAgICAgIC8vIERvbid0IG92ZXJyaWRlIHRpbWUtYmFzZWQgcHJvZ3Jlc3NcbiAgICAgICAgY29uc29sZS5sb2coYPCfjqggRHJhZnQgJHtjb21wbGV0ZWRDb3VudH0vNSBjb21wbGV0ZWRgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBtaWxlc3RvbmVzXG4gICAgICAgIGlmIChjb21wbGV0ZWRDb3VudCA9PT0gMSkge1xuICAgICAgICAgIHNjcm9sbFRvQ2FyZFByZXZpZXcoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGNvbXBsZXRlZENvdW50ID09PSA1ICYmICFkcmFmdEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nRmluYWxDYXJkKSB7XG4gICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgICAgam9iTWFuYWdlbWVudC5zdG9wRWxhcHNlZFRpbWVUcmFja2luZygpO1xuICAgICAgICAgIHRvYXN0LnN1Y2Nlc3MoXCLwn46oIEFsbCA1IGZyb250IGNvdmVyIHZhcmlhdGlvbnMgcmVhZHkhIENob29zZSB5b3VyIGZhdm9yaXRlIGJlbG93LlwiKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gS2VlcCBkcmFmdCBqb2JzIGluIHN0b3JhZ2UgZm9yIGxhdGVyIHJldHJpZXZhbFxuICAgICAgICAvLyBPbmx5IHVuc3Vic2NyaWJlIGZyb20gV2ViU29ja2V0XG4gICAgICAgIHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21Kb2Ioam9iX2lkKTtcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBLZWVwaW5nIGRyYWZ0IGpvYiAke2pvYl9pZH0gaW4gc3RvcmFnZSBmb3IgZnV0dXJlIGFjY2Vzc2ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSGFuZGxlIGZpbmFsIGNhcmQgY29tcGxldGlvblxuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBGaW5hbCBjYXJkIGNvbXBsZXRpb24gZGV0ZWN0ZWQuIENhcmQgZGF0YSBzdHJ1Y3R1cmU6Jywge1xuICAgICAgICAgIGhhc0NhcmREYXRhOiAhIWNhcmREYXRhLFxuICAgICAgICAgIGNhcmREYXRhS2V5czogT2JqZWN0LmtleXMoY2FyZERhdGEgfHwge30pLFxuICAgICAgICAgIGZyb250Q292ZXI6IGNhcmREYXRhPy5mcm9udENvdmVyID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgIGJhY2tDb3ZlcjogY2FyZERhdGE/LmJhY2tDb3ZlciA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgICBsZWZ0SW50ZXJpb3I6IGNhcmREYXRhPy5sZWZ0SW50ZXJpb3IgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgcmlnaHRJbnRlcmlvcjogY2FyZERhdGE/LnJpZ2h0SW50ZXJpb3IgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgbGVmdFBhZ2U6IGNhcmREYXRhPy5sZWZ0UGFnZSA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgICByaWdodFBhZ2U6IGNhcmREYXRhPy5yaWdodFBhZ2UgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TnSBGdWxsIGNhcmQgZGF0YTonLCBKU09OLnN0cmluZ2lmeShjYXJkRGF0YSwgbnVsbCwgMikpO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFwIGJhY2tlbmQgZmllbGQgbmFtZXMgdG8gZnJvbnRlbmQgZmllbGQgbmFtZXNcbiAgICAgICAgY29uc3QgbWFwcGVkQ2FyZERhdGEgPSB7XG4gICAgICAgICAgLi4uY2FyZERhdGEsXG4gICAgICAgICAgbGVmdEludGVyaW9yOiBjYXJkRGF0YS5sZWZ0SW50ZXJpb3IgfHwgY2FyZERhdGEubGVmdFBhZ2UsXG4gICAgICAgICAgcmlnaHRJbnRlcmlvcjogY2FyZERhdGEucmlnaHRJbnRlcmlvciB8fCBjYXJkRGF0YS5yaWdodFBhZ2UsXG4gICAgICAgICAgLy8gS2VlcCBvcmlnaW5hbCBmaWVsZHMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICBsZWZ0UGFnZTogY2FyZERhdGEubGVmdFBhZ2UgfHwgY2FyZERhdGEubGVmdEludGVyaW9yLFxuICAgICAgICAgIHJpZ2h0UGFnZTogY2FyZERhdGEucmlnaHRQYWdlIHx8IGNhcmREYXRhLnJpZ2h0SW50ZXJpb3IsXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBNYXBwZWQgY2FyZCBkYXRhIGZvciBmcm9udGVuZCBjb21wYXRpYmlsaXR5OicsIHtcbiAgICAgICAgICBmcm9udENvdmVyOiBtYXBwZWRDYXJkRGF0YS5mcm9udENvdmVyID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgIGJhY2tDb3ZlcjogbWFwcGVkQ2FyZERhdGEuYmFja0NvdmVyID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgIGxlZnRJbnRlcmlvcjogbWFwcGVkQ2FyZERhdGEubGVmdEludGVyaW9yID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgIHJpZ2h0SW50ZXJpb3I6IG1hcHBlZENhcmREYXRhLnJpZ2h0SW50ZXJpb3IgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsbCB0aGUgY29tcGxldGlvbiBoYW5kbGVyXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5qAIENhbGxpbmcgaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvbi4uLicpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5oYW5kbGVGaW5hbENhcmRDb21wbGV0aW9uKG1hcHBlZENhcmREYXRhKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENhcmQgaXMgYXV0b21hdGljYWxseSBhZGRlZCB0byByZWNlbnQgY2FyZHMgYnkgbWFya0pvYkNvbXBsZXRlXG4gICAgICAgIFxuICAgICAgICBqb2JNYW5hZ2VtZW50LnJlbW92ZUpvYkZyb21TdG9yYWdlKGpvYl9pZCk7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEpvYklkKG51bGwpO1xuICAgICAgICB3ZWJTb2NrZXQudW5zdWJzY3JpYmVGcm9tSm9iKGpvYl9pZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICdmYWlsZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgSm9iIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIGlmIChpc0RyYWZ0Sm9iICYmIGRyYWZ0SW5kZXggPj0gMCkge1xuICAgICAgICB0b2FzdC5lcnJvcihgRHJhZnQgdmFyaWF0aW9uICR7ZHJhZnRJbmRleCArIDF9IGZhaWxlZC4gQ29udGludWluZyB3aXRoIG90aGVycy4uLmApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9hc3QuZXJyb3IoXCLinYwgQ2FyZCBnZW5lcmF0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQoZmFsc2UpO1xuICAgICAgICBqb2JNYW5hZ2VtZW50LnN0b3BFbGFwc2VkVGltZVRyYWNraW5nKCk7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhcIlwiKTtcbiAgICAgICAgLy8gRG9uJ3QgcmVzZXQgcHJvZ3Jlc3MgLSBsZXQgdGltZS1iYXNlZCBwcm9ncmVzcyBjb250aW51ZVxuICAgICAgICAvLyBqb2JNYW5hZ2VtZW50LnNldFByb2dyZXNzUGVyY2VudGFnZSgwKTtcbiAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQobnVsbCk7XG4gICAgICAgIHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21Kb2Ioam9iX2lkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZShqb2JfaWQpO1xuICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAnbm90X2ZvdW5kJykge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gSm9iIG5vdCBmb3VuZCBvbiBzZXJ2ZXIsIGNsZWFuaW5nIHVwIHN0YWxlIHJlZmVyZW5jZTonLCBqb2JfaWQpO1xuICAgICAgXG4gICAgICAvLyBDbGVhbiB1cCBzdGFsZSBqb2IgcmVmZXJlbmNlXG4gICAgICBpZiAod2ViU29ja2V0LmN1cnJlbnRKb2JSZWYuY3VycmVudCA9PT0gam9iX2lkKSB7XG4gICAgICAgIHdlYlNvY2tldC5jdXJyZW50Sm9iUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZXNldCBVSSBzdGF0ZSBpZiB0aGlzIHdhcyB0aGUgY3VycmVudCBqb2JcbiAgICAgIGlmIChqb2JNYW5hZ2VtZW50LmN1cnJlbnRKb2JJZCA9PT0gam9iX2lkKSB7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEpvYklkKG51bGwpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcoZmFsc2UpO1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkKGZhbHNlKTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKFwiXCIpO1xuICAgICAgICAvLyBEb24ndCByZXNldCBwcm9ncmVzcyAtIGxldCB0aW1lLWJhc2VkIHByb2dyZXNzIGNvbnRpbnVlXG4gICAgICAgIC8vIGpvYk1hbmFnZW1lbnQuc2V0UHJvZ3Jlc3NQZXJjZW50YWdlKDApO1xuICAgICAgICBqb2JNYW5hZ2VtZW50LnN0b3BFbGFwc2VkVGltZVRyYWNraW5nKCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENsZWFuIHVwIHN0b3JhZ2VcbiAgICAgIGpvYk1hbmFnZW1lbnQucmVtb3ZlSm9iRnJvbVN0b3JhZ2Uoam9iX2lkKTtcbiAgICAgIHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21Kb2Ioam9iX2lkKTtcbiAgICB9XG4gIH0sIFtzZWxlY3RlZEFydGlzdGljU3R5bGUsIGRyYWZ0R2VuZXJhdGlvbiwgY2FyZEdlbmVyYXRpb24sIGpvYk1hbmFnZW1lbnQsIHdlYlNvY2tldCwgaXNSZXN0b3JpbmdKb2JzXSk7XG5cbiAgLy8gU2V0IHVwIFdlYlNvY2tldCBqb2IgdXBkYXRlIGhhbmRsZXJcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB3ZWJTb2NrZXQuc2V0Sm9iVXBkYXRlSGFuZGxlcihoYW5kbGVKb2JVcGRhdGUpO1xuICB9LCBbd2ViU29ja2V0LCBoYW5kbGVKb2JVcGRhdGVdKTtcblxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IGxvZ2dlZCB0aGUgc3RhbGUgam9iIG1lc3NhZ2VcbiAgY29uc3Qgc3RhbGVKb2JMb2dnZWRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuXG4gIC8vIEF1dG8tcmVjb25uZWN0IFdlYlNvY2tldCBpZiBkaXNjb25uZWN0ZWQgZHVyaW5nIGFjdGl2ZSBnZW5lcmF0aW9uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF3ZWJTb2NrZXQuaXNTb2NrZXRDb25uZWN0ZWQgJiYgXG4gICAgICAgIChjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcgfHwgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCkgJiYgXG4gICAgICAgIHdlYlNvY2tldC5jdXJyZW50Sm9iUmVmLmN1cnJlbnQpIHtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGdlbmVyYXRpb24gaGFzIGJlZW4gcnVubmluZyBmb3IgbW9yZSB0aGFuIDUgbWludXRlc1xuICAgICAgaWYgKGpvYk1hbmFnZW1lbnQuZ2VuZXJhdGlvblN0YXJ0VGltZSkge1xuICAgICAgICBjb25zdCBqb2JBZ2UgPSBEYXRlLm5vdygpIC0gam9iTWFuYWdlbWVudC5nZW5lcmF0aW9uU3RhcnRUaW1lO1xuICAgICAgICBpZiAoam9iQWdlID4gNSAqIDYwICogMTAwMCkgeyAvLyA1IG1pbnV0ZXNcbiAgICAgICAgICBpZiAoIXN0YWxlSm9iTG9nZ2VkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfij7AgSm9iIGlzIG9sZGVyIHRoYW4gNSBtaW51dGVzLCBzdG9wcGluZyByZWNvbm5lY3Rpb24gYXR0ZW1wdHMnKTtcbiAgICAgICAgICAgIHN0YWxlSm9iTG9nZ2VkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDbGVhbiB1cCBzdGFsZSBqb2JcbiAgICAgICAgICAgIGNvbnN0IGpvYklkID0gd2ViU29ja2V0LmN1cnJlbnRKb2JSZWYuY3VycmVudDtcbiAgICAgICAgICAgIGlmIChqb2JJZCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+nuSBDbGVhbmluZyB1cCBzdGFsZSBqb2I6Jywgam9iSWQpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gbG9jYWxTdG9yYWdlIChvbmx5IGlmIG5vdCBhIGRyYWZ0IGpvYilcbiAgICAgICAgICAgICAgaWYgKCFqb2JJZC5zdGFydHNXaXRoKCdkcmFmdC0nKSkge1xuICAgICAgICAgICAgICAgIGpvYk1hbmFnZW1lbnQucmVtb3ZlSm9iRnJvbVN0b3JhZ2Uoam9iSWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBSZXNldCBnZW5lcmF0aW9uIHN0YXRlc1xuICAgICAgICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkKGZhbHNlKTtcbiAgICAgICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzRHJhZnRNb2RlKGZhbHNlKTtcbiAgICAgICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMoW10pO1xuICAgICAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uQ291bnQoMCk7XG4gICAgICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25TaG93bihmYWxzZSk7XG4gICAgICAgICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEpvYklkKG51bGwpO1xuICAgICAgICAgICAgICBqb2JNYW5hZ2VtZW50LnNldEdlbmVyYXRpb25Qcm9ncmVzcygnJyk7XG4gICAgICAgICAgICAgIC8vIERvbid0IHJlc2V0IHByb2dyZXNzIC0gbGV0IHRpbWUtYmFzZWQgcHJvZ3Jlc3MgY29udGludWVcbiAgICAgICAgLy8gam9iTWFuYWdlbWVudC5zZXRQcm9ncmVzc1BlcmNlbnRhZ2UoMCk7XG4gICAgICAgICAgICAgIGpvYk1hbmFnZW1lbnQuc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmcoKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFVuc3Vic2NyaWJlIGZyb20gam9iXG4gICAgICAgICAgICAgIHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21Kb2Ioam9iSWQpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gU2hvdyBlcnJvciB0b2FzdFxuICAgICAgICAgICAgICB0b2FzdC5lcnJvcignQ2FyZCBnZW5lcmF0aW9uIHRpbWVkIG91dC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFdlYlNvY2tldCBkaXNjb25uZWN0ZWQgZHVyaW5nIGdlbmVyYXRpb24sIGF0dGVtcHRpbmcgcmVjb25uZWN0Li4uJyk7XG4gICAgICBjb25zdCByZWNvbm5lY3RUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB3ZWJTb2NrZXQuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmUtc3Vic2NyaWJlIHRvIGN1cnJlbnQgam9iIGFmdGVyIHJlY29ubmVjdGlvblxuICAgICAgICBjb25zdCBqb2JJZCA9IHdlYlNvY2tldC5jdXJyZW50Sm9iUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmIChqb2JJZCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/Cfk6EgUmUtc3Vic2NyaWJpbmcgdG8gam9iIGFmdGVyIHJlY29ubmVjdDonLCBqb2JJZCk7XG4gICAgICAgICAgICB3ZWJTb2NrZXQuc3Vic2NyaWJlVG9Kb2Ioam9iSWQpO1xuICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9XG4gICAgICB9LCAyMDAwKTtcbiAgICAgIFxuICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dChyZWNvbm5lY3RUaW1lcik7XG4gICAgfVxuICB9LCBbd2ViU29ja2V0LCBjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcsIGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQsIGpvYk1hbmFnZW1lbnQuZ2VuZXJhdGlvblN0YXJ0VGltZV0pO1xuXG4gIC8vIFJlc2V0IHN0YWxlIGpvYiBmbGFnIHdoZW4gZ2VuZXJhdGlvbiBzdGFydHNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2FyZEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nIHx8IGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQpIHtcbiAgICAgIHN0YWxlSm9iTG9nZ2VkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICB9XG4gIH0sIFtjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcsIGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmRdKTtcblxuICAvLyBNb25pdG9yIGZvciBzdGFsZSBqb2IgdXBkYXRlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICgoY2FyZEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nIHx8IGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQpICYmIFxuICAgICAgICB3ZWJTb2NrZXQuY3VycmVudEpvYlJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zdCBjaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0VXBkYXRlID0gRGF0ZS5ub3coKSAtIHdlYlNvY2tldC5sYXN0Sm9iVXBkYXRlUmVmLmN1cnJlbnQ7XG4gICAgICAgIGNvbnN0IGpvYklkID0gd2ViU29ja2V0LmN1cnJlbnRKb2JSZWYuY3VycmVudDtcbiAgICAgICAgXG4gICAgICAgIC8vIFZlcnkgYWdncmVzc2l2ZSBjaGVja2luZyB3aGVuIGF0IDk1JSsgcHJvZ3Jlc3NcbiAgICAgICAgaWYgKGpvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlID49IDk1ICYmIHRpbWVTaW5jZUxhc3RVcGRhdGUgPiA1MDAwKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gTm8gdXBkYXRlcyBmb3IgJHtNYXRoLnJvdW5kKHRpbWVTaW5jZUxhc3RVcGRhdGUvMTAwMCl9cyBhdCAke2pvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlfSUgcHJvZ3Jlc3MgLSBjaGVja2luZyBqb2Igc3RhdHVzLi4uYCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGpvYklkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2pvYi1zdGF0dXMvJHtqb2JJZH1gKTtcbiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9iU3RhdHVzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OKIERpcmVjdCBqb2Igc3RhdHVzIGNoZWNrOicsIGpvYlN0YXR1cyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGpvYlN0YXR1cy5zdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmIGpvYlN0YXR1cy5jYXJkRGF0YSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBKb2IgaXMgYWN0dWFsbHkgY29tcGxldGVkISBQcm9jZXNzaW5nIHJlc3VsdC4uLicpO1xuICAgICAgICAgICAgICAgICAgaGFuZGxlSm9iVXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgam9iX2lkOiBqb2JJZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6ICdDYXJkIGdlbmVyYXRpb24gY29tcGxldGUhJyxcbiAgICAgICAgICAgICAgICAgICAgY2FyZERhdGE6IGpvYlN0YXR1cy5jYXJkRGF0YVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47IC8vIEV4aXQgZWFybHkgb24gY29tcGxldGlvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNoZWNrIGpvYiBzdGF0dXM6JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBNb3JlIGFnZ3Jlc3NpdmUgY2hlY2tpbmcgd2hlbiBhdCBoaWdoIHByb2dyZXNzXG4gICAgICAgIGVsc2UgaWYgKGpvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlID49IDkwICYmIHRpbWVTaW5jZUxhc3RVcGRhdGUgPiAxMDAwMCkge1xuICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIE5vIHVwZGF0ZXMgZm9yICR7TWF0aC5yb3VuZCh0aW1lU2luY2VMYXN0VXBkYXRlLzEwMDApfXMgYXQgJHtqb2JNYW5hZ2VtZW50LnByb2dyZXNzUGVyY2VudGFnZX0lIHByb2dyZXNzYCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGpvYklkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2pvYi1zdGF0dXMvJHtqb2JJZH1gKTtcbiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9iU3RhdHVzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OKIERpcmVjdCBqb2Igc3RhdHVzIGNoZWNrOicsIGpvYlN0YXR1cyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGpvYlN0YXR1cy5zdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmIGpvYlN0YXR1cy5jYXJkRGF0YSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBKb2IgaXMgYWN0dWFsbHkgY29tcGxldGVkISBQcm9jZXNzaW5nIHJlc3VsdC4uLicpO1xuICAgICAgICAgICAgICAgICAgaGFuZGxlSm9iVXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgam9iX2lkOiBqb2JJZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6ICdDYXJkIGdlbmVyYXRpb24gY29tcGxldGUhJyxcbiAgICAgICAgICAgICAgICAgICAgY2FyZERhdGE6IGpvYlN0YXR1cy5jYXJkRGF0YVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47IC8vIEV4aXQgZWFybHkgb24gY29tcGxldGlvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNoZWNrIGpvYiBzdGF0dXM6JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU3RhbmRhcmQgc3RhbGUgdXBkYXRlIGNoZWNrXG4gICAgICAgIGlmICh0aW1lU2luY2VMYXN0VXBkYXRlID4gMzAwMDApIHsgLy8gMzAgc2Vjb25kcyB3aXRob3V0IHVwZGF0ZVxuICAgICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIE5vIGpvYiB1cGRhdGVzIGZvciAzMCBzZWNvbmRzLCBjaGVja2luZyBjb25uZWN0aW9uLi4uJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCF3ZWJTb2NrZXQuaXNTb2NrZXRDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFdlYlNvY2tldCBkaXNjb25uZWN0ZWQsIHJlY29ubmVjdGluZy4uLicpO1xuICAgICAgICAgICAgd2ViU29ja2V0LmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGpvYklkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+ToSBSZS1zdWJzY3JpYmluZyB0byBqb2IgZHVlIHRvIHN0YWxlIHVwZGF0ZXM6Jywgam9iSWQpO1xuICAgICAgICAgICAgd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iKGpvYklkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHRpbWVyXG4gICAgICAgICAgd2ViU29ja2V0Lmxhc3RKb2JVcGRhdGVSZWYuY3VycmVudCA9IERhdGUubm93KCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDMwMDApOyAvLyBDaGVjayBldmVyeSAzIHNlY29uZHMgZm9yIGZhc3RlciBkZXRlY3Rpb24gYXQgaGlnaCBwcm9ncmVzc1xuICAgICAgXG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChjaGVja0ludGVydmFsKTtcbiAgICB9XG4gIH0sIFtjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcsIGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQsIFxuICAgICAgd2ViU29ja2V0LCBqb2JNYW5hZ2VtZW50LnByb2dyZXNzUGVyY2VudGFnZSwgaGFuZGxlSm9iVXBkYXRlXSk7XG5cbiAgLy8gU2ltcGxpZmllZCBqb2IgcmVzdG9yYXRpb24gdXNpbmcgbmV3IHN0b3JhZ2UgbWFuYWdlclxuICBjb25zdCBjaGVja1BlbmRpbmdKb2JzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIENoZWNraW5nIGZvciByZWNvdmVyeSBkYXRhLi4uJyk7XG4gICAgc2V0SXNSZXN0b3JpbmdKb2JzKHRydWUpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBhY3RpdmUgcmVjb3Zlcnkgam9iXG4gICAgY29uc3QgcmVjb3ZlcnkgPSBzdG9yYWdlLmdldFJlY292ZXJ5KCk7XG4gICAgXG4gICAgaWYgKCFyZWNvdmVyeSkge1xuICAgICAgY29uc29sZS5sb2coJ+KchSBObyBhY3RpdmUgam9iIHRvIHJlY292ZXInKTtcbiAgICAgIHNldElzUmVzdG9yaW5nSm9icyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5SEIEZvdW5kIHJlY292ZXJ5IGRhdGE6JywgcmVjb3ZlcnkpO1xuICAgIFxuICAgIC8vIEluIG91ciBzaW1wbGlmaWVkIHN5c3RlbSwgd2Ugb25seSB0cmFjayBvbmUgYWN0aXZlIGpvYiBmb3IgcmVjb3ZlcnlcbiAgICAvLyBSZWNvdmVyeSBpcyBwcmltYXJpbHkgZm9yIGJyb3dzZXIgY3Jhc2hlcyBkdXJpbmcgZ2VuZXJhdGlvblxuICAgIGNvbnN0IGpvYklkID0gcmVjb3Zlcnkuam9iSWQ7XG4gICAgY29uc3QgaXNEcmFmdEpvYiA9IGpvYklkPy5zdGFydHNXaXRoKCdkcmFmdC0nKTtcbiAgICBcbiAgICAvLyBQcm9jZXNzIGRyYWZ0IGpvYnMgZmlyc3QgdG8gcmVzdG9yZSBkcmFmdCBzdGF0ZVxuICAgIGlmIChkcmFmdEpvYnMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coYPCfjqggRm91bmQgJHtkcmFmdEpvYnMubGVuZ3RofSBkcmFmdCBqb2JzIHRvIHJlc3RvcmVgKTtcbiAgICAgIFxuICAgICAgLy8gQ29sbGVjdCBhbGwgZHJhZnQgY2FyZHMgZnJvbSBhbGwgZHJhZnQgam9ic1xuICAgICAgY29uc3QgZHJhZnRzQnlJbmRleDogKEdlbmVyYXRlZENhcmQgfCBudWxsKVtdID0gbmV3IEFycmF5KDUpLmZpbGwobnVsbCk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgeyBqb2IgfSBvZiBkcmFmdEpvYnMpIHtcbiAgICAgICAgaWYgKGpvYi5kcmFmdENhcmRzICYmIEFycmF5LmlzQXJyYXkoam9iLmRyYWZ0Q2FyZHMpICYmIGpvYi5kcmFmdENhcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBkcmFmdENhcmQgPSBqb2IuZHJhZnRDYXJkc1swXTsgLy8gRWFjaCBqb2Igc3RvcmVzIG9uZSBkcmFmdFxuICAgICAgICAgIGNvbnN0IGRyYWZ0SW5kZXggPSBqb2IuZHJhZnRJbmRleDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZHJhZnRJbmRleCA+PSAwICYmIGRyYWZ0SW5kZXggPCA1KSB7XG4gICAgICAgICAgICBkcmFmdHNCeUluZGV4W2RyYWZ0SW5kZXhdID0gZHJhZnRDYXJkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZXQgbm9uLW51bGwgZHJhZnRzIGZvciBjb3VudGluZ1xuICAgICAgY29uc3QgYWxsRHJhZnRDYXJkcyA9IGRyYWZ0c0J5SW5kZXguZmlsdGVyKEJvb2xlYW4pIGFzIEdlbmVyYXRlZENhcmRbXTtcbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBhbGwgZHJhZnQgY2FyZHMgYXQgb25jZVxuICAgICAgaWYgKGFsbERyYWZ0Q2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+UhCBSZXN0b3JpbmcgJHthbGxEcmFmdENhcmRzLmxlbmd0aH0gZHJhZnQgY2FyZHMgZnJvbSAke2RyYWZ0Sm9icy5sZW5ndGh9IGpvYnNgKTtcbiAgICAgICAgLy8gT25seSBzZXQgZHJhZnQgbW9kZSB3aGVuIHdlIGhhdmUgYWN0dWFsIGNhcmRzXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn46vIFNldHRpbmcgaXNEcmFmdE1vZGUgdG8gdHJ1ZSAtIGRyYWZ0IGNhcmRzIGZvdW5kJyk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0RyYWZ0TW9kZSh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVzZSB0aGUgZHJhZnRzQnlJbmRleCB3aGljaCBhbHJlYWR5IGhhcyBkcmFmdHMgYXQgY29ycmVjdCBwb3NpdGlvbnNcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMoZHJhZnRzQnlJbmRleCk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25Db3VudChhbGxEcmFmdENhcmRzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgYXBwcm9wcmlhdGUgcHJvZ3Jlc3Mgc3RhdGVcbiAgICAgICAgaWYgKGFsbERyYWZ0Q2FyZHMubGVuZ3RoID09PSA1KSB7XG4gICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvblNob3duKHRydWUpO1xuICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcoZmFsc2UpO1xuICAgICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhcIlwiKTtcbiAgICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MoXCJcIik7XG4gICAgICAgICAgLy8gVGltZS1iYXNlZCBwcm9ncmVzcyB3aWxsIGJlIGNsZWFyZWQgYWJvdmVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyh0cnVlKTtcbiAgICAgICAgICBjb25zdCBwcm9ncmVzc01zZyA9IGDinKggJHthbGxEcmFmdENhcmRzLmxlbmd0aH0vNSBmcm9udCBjb3ZlciB2YXJpYXRpb25zIGNvbXBsZXRlLi4uICR7YWxsRHJhZnRDYXJkcy5sZW5ndGggPj0gMiA/IFwiWW91IGNhbiBzZWxlY3Qgb25lIG5vdyB0byBwcm9jZWVkIVwiIDogXCJcIn1gO1xuICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MocHJvZ3Jlc3NNc2cpO1xuICAgICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhwcm9ncmVzc01zZyk7XG4gICAgICAgICAgLy8gRG9uJ3Qgb3ZlcnJpZGUgdGltZS1iYXNlZCBwcm9ncmVzc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIElmIG5vIGRyYWZ0IGNhcmRzIHdlcmUgZm91bmQgYnV0IHdlIGhhdmUgZHJhZnQgam9icywgc2V0IGFwcHJvcHJpYXRlIHN0YXRlXG4gICAgICBpZiAoYWxsRHJhZnRDYXJkcy5sZW5ndGggPT09IDAgJiYgZHJhZnRKb2JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflIQgRHJhZnQgam9icyBmb3VuZCBidXQgbm8gY2FyZHMgeWV0IC0gc2V0dGluZyBnZW5lcmF0aW9uIHN0YXRlJyk7XG4gICAgICAgIC8vIFNldCBkcmFmdCBtb2RlIGFuZCBpbml0aWFsaXplIGVtcHR5IGFycmF5IGZvciBkcmFmdCBqb2JzIGluIHByb2dyZXNzXG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0RyYWZ0TW9kZSh0cnVlKTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMoW251bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGxdKTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyh0cnVlKTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKFwi8J+OqCBDcmVhdGluZyA1IGZyb250IGNvdmVyIHZhcmlhdGlvbnMgZm9yIHlvdSB0byBjaG9vc2UgZnJvbS4uLlwiKTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKFwi8J+OqCBDcmVhdGluZyA1IGZyb250IGNvdmVyIHZhcmlhdGlvbnMgZm9yIHlvdSB0byBjaG9vc2UgZnJvbS4uLlwiKTtcbiAgICAgICAgLy8gRG9uJ3QgcmVzZXQgcHJvZ3Jlc3MgLSBsZXQgdGltZS1iYXNlZCBwcm9ncmVzcyBjb250aW51ZVxuICAgICAgICAvLyBqb2JNYW5hZ2VtZW50LnNldFByb2dyZXNzUGVyY2VudGFnZSgwKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU3Vic2NyaWJlIHRvIGFsbCBub24tc3RhbGUgZHJhZnQgam9ic1xuICAgICAgZm9yIChjb25zdCB7IGpvYklkLCBqb2IgfSBvZiBkcmFmdEpvYnMpIHtcbiAgICAgICAgY29uc3Qgam9iQWdlID0gRGF0ZS5ub3coKSAtIChqb2IuY3JlYXRlZEF0IHx8IERhdGUubm93KCkpO1xuICAgICAgICBjb25zdCBpc1N0YWxlID0gam9iQWdlID4gNSAqIDYwICogMTAwMDtcbiAgICAgICAgXG4gICAgICAgIGlmICghaXNTdGFsZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OhIFN1YnNjcmliaW5nIHRvIGRyYWZ0IGpvYjogJHtqb2JJZH0gKGhhcyAke2pvYi5kcmFmdENhcmRzPy5sZW5ndGggfHwgMH0gY2FyZHMpYCk7XG4gICAgICAgICAgd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iKGpvYklkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBQcm9jZXNzIHJlbWFpbmluZyBqb2JzIChmaW5hbCBjYXJkIGdlbmVyYXRpb24pXG4gICAgZm9yIChjb25zdCB7IGpvYklkLCBqb2IgfSBvZiBmaW5hbEpvYnMpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OLIFByb2Nlc3Npbmcgam9iICR7am9iSWR9OmAsIHtcbiAgICAgICAgaXNEcmFmdDogam9iSWQuc3RhcnRzV2l0aCgnZHJhZnQtJyksXG4gICAgICAgIHN0YXR1czogam9iLnN0YXR1cyxcbiAgICAgICAgaGFzUHJvZ3Jlc3M6ICEham9iLmxhc3RQcm9ncmVzcyxcbiAgICAgICAgY3JlYXRlZEF0OiBqb2IuY3JlYXRlZEF0XG4gICAgICB9KTtcbiAgICAgIC8vIENoZWNrIGlmIGpvYiBpcyBzdGFsZSAob2xkZXIgdGhhbiA1IG1pbnV0ZXMgd2l0aG91dCBjb21wbGV0aW9uKVxuICAgICAgY29uc3Qgam9iQWdlID0gRGF0ZS5ub3coKSAtIChqb2IuY3JlYXRlZEF0IHx8IERhdGUubm93KCkpO1xuICAgICAgY29uc3QgaXNTdGFsZSA9IGpvYkFnZSA+IDUgKiA2MCAqIDEwMDAgJiYgam9iLnN0YXR1cyAhPT0gJ2NvbXBsZXRlZCc7XG4gICAgICBcbiAgICAgIGlmIChpc1N0YWxlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn6e5IENsZWFuaW5nIHVwIHN0YWxlIGpvYjogJHtqb2JJZH0gKGFnZTogJHtNYXRoLnJvdW5kKGpvYkFnZSAvIDEwMDApfXMpYCk7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQucmVtb3ZlSm9iRnJvbVN0b3JhZ2Uoam9iSWQpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBwcm9ncmVzcyBhbmQgc3RhdGVcbiAgICAgIC8vIERvbid0IHJlc3RvcmUgcHJvZ3Jlc3MgLSBsZXQgdGltZS1iYXNlZCBwcm9ncmVzcyBoYW5kbGUgaXRcbiAgICAgIC8vIGlmIChqb2IubGFzdFByb2dyZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vICAgam9iTWFuYWdlbWVudC5zZXRQcm9ncmVzc1BlcmNlbnRhZ2Uoam9iLmxhc3RQcm9ncmVzcyk7XG4gICAgICAvLyAgIGNhcmRHZW5lcmF0aW9uLnNldFByb2dyZXNzUGVyY2VudGFnZShqb2IubGFzdFByb2dyZXNzKTtcbiAgICAgIC8vICAgZHJhZnRHZW5lcmF0aW9uLnNldFByb2dyZXNzUGVyY2VudGFnZShqb2IubGFzdFByb2dyZXNzKTtcbiAgICAgIC8vIH1cbiAgICAgIFxuICAgICAgLy8gT25seSByZXN0b3JlIHByb2dyZXNzIHRleHQgaWYgdGhlIGpvYiBpcyBub3QgY29tcGxldGVkXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIHNob3dpbmcgXCJHZW5lcmF0aW9uIGNvbXBsZXRlISAoMTAwJSlcIiBmcm9tIG9sZCBjb21wbGV0ZWQgam9ic1xuICAgICAgaWYgKGpvYi5sYXN0UHJvZ3Jlc3NUZXh0ICYmIGpvYi5zdGF0dXMgIT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0R2VuZXJhdGlvblByb2dyZXNzKGpvYi5sYXN0UHJvZ3Jlc3NUZXh0KTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKGpvYi5sYXN0UHJvZ3Jlc3NUZXh0KTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhqb2IubGFzdFByb2dyZXNzVGV4dCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFJlc3RvcmUgZmluYWwgY2FyZCBnZW5lcmF0aW9uIHN0YXRlXG4gICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcodHJ1ZSk7XG4gICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBJZiB3ZSBoYXZlIGEgc2VsZWN0ZWQgZHJhZnQsIHJlc3RvcmUgaXRcbiAgICAgIGlmIChqb2Iuc2VsZWN0ZWREcmFmdEluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldFNlbGVjdGVkRHJhZnRJbmRleChqb2Iuc2VsZWN0ZWREcmFmdEluZGV4KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQoam9iSWQpO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgZWxhcHNlZCB0aW1lIHNpbmNlIGpvYiBzdGFydGVkXG4gICAgICBjb25zdCBqb2JTdGFydFRpbWUgPSBqb2IuY3JlYXRlZEF0IHx8IERhdGUubm93KCk7XG4gICAgICBjb25zdCBlbGFwc2VkU2luY2VTdGFydCA9IChEYXRlLm5vdygpIC0gam9iU3RhcnRUaW1lKSAvIDEwMDA7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IGVsYXBzZWQgdGltZSB0cmFja2luZ1xuICAgICAgam9iTWFuYWdlbWVudC5zdGFydEVsYXBzZWRUaW1lVHJhY2tpbmcoKTtcbiAgICAgIFxuICAgICAgLy8gU3Vic2NyaWJlIHRvIHRoZSBqb2IgdXBkYXRlc1xuICAgICAgd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iKGpvYklkKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGpvYiBleGlzdHMgb24gYmFja2VuZFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtCQUNLRU5EX0FQSV9CQVNFX1VSTH0vYXBpL2pvYi1zdGF0dXMvJHtqb2JJZH1gKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYPCfk6EgSm9iIHN0YXR1cyBjaGVjayBmb3IgJHtqb2JJZH06YCwge1xuICAgICAgICAgIG9rOiByZXNwb25zZS5vayxcbiAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICByZXN1bHRTdGF0dXM6IHJlc3VsdC5zdGF0dXMsXG4gICAgICAgICAgdXJsOiBgJHtCQUNLRU5EX0FQSV9CQVNFX1VSTH0vYXBpL2pvYi1zdGF0dXMvJHtqb2JJZH1gXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdub3RfZm91bmQnKSB7XG4gICAgICAgICAgLy8gSm9iIGRvZXNuJ3QgZXhpc3Qgb24gYmFja2VuZCwgY2xlYW4gdXAgYW5kIG5vdGlmeSB1c2VyXG4gICAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBKb2IgJHtqb2JJZH0gbm90IGZvdW5kIG9uIGJhY2tlbmQsIGNsZWFuaW5nIHVwLi4uYCk7XG4gICAgICAgICAgam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZShqb2JJZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVzZXQgZ2VuZXJhdGlvbiBzdGF0ZVxuICAgICAgICAgIGlmIChpc0RyYWZ0Sm9iKSB7XG4gICAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKGZhbHNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKGZhbHNlKTtcbiAgICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTaG93IGhlbHBmdWwgbWVzc2FnZSB0byB1c2VyXG4gICAgICAgICAgdG9hc3QuZXJyb3IoXG4gICAgICAgICAgICBgUHJldmlvdXMgJHtpc0RyYWZ0Sm9iID8gJ2RyYWZ0JyA6ICdjYXJkJ30gZ2VuZXJhdGlvbiBleHBpcmVkLiBQbGVhc2Ugc3RhcnQgYSBuZXcgb25lLmAsXG4gICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwIH1cbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEpvYiBleGlzdHMsIHNob3cgcmVzdW1pbmcgbWVzc2FnZVxuICAgICAgICAgIHRvYXN0LmluZm8oYFJlc3VtaW5nICR7aXNEcmFmdEpvYiA/ICdkcmFmdCcgOiAnY2FyZCd9IGdlbmVyYXRpb24uLi5gKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHZlcmlmeSBqb2Igc3RhdHVzOicsIGVycm9yKTtcbiAgICAgICAgLy8gQ29udGludWUgYW55d2F5LCBXZWJTb2NrZXQgd2lsbCBoYW5kbGUgaXRcbiAgICAgICAgdG9hc3QuaW5mbyhgQXR0ZW1wdGluZyB0byByZXN1bWUgJHtpc0RyYWZ0Sm9iID8gJ2RyYWZ0JyA6ICdjYXJkJ30gZ2VuZXJhdGlvbi4uLmApO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBSZXN0b3JhdGlvbiBjb21wbGV0ZSAtIGFsbG93IFdlYlNvY2tldCB1cGRhdGVzIHRvIGJlIHByb2Nlc3NlZFxuICAgIC8vIEFkZCBhIHNtYWxsIGRlbGF5IHRvIGVuc3VyZSBzdGF0ZSB1cGRhdGVzIGhhdmUgcHJvcGFnYXRlZFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ+KchSBKb2IgcmVzdG9yYXRpb24gY29tcGxldGUsIGFsbG93aW5nIFdlYlNvY2tldCB1cGRhdGVzJyk7XG4gICAgICBzZXRJc1Jlc3RvcmluZ0pvYnMoZmFsc2UpO1xuICAgIH0sIDEwMCk7XG4gIH0sIFtqb2JNYW5hZ2VtZW50LCBjYXJkR2VuZXJhdGlvbiwgZHJhZnRHZW5lcmF0aW9uLCB3ZWJTb2NrZXRdKTtcblxuICAvLyBMb2FkIHJlY292ZXJ5IGRhdGEgb24gY29tcG9uZW50IG1vdW50XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ/CfmoAgdXNlQ2FyZFN0dWRpbyBtb3VudGVkLCBjaGVja2luZyBmb3IgcmVjb3ZlcnkuLi4nKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgYWN0aXZlIHJlY292ZXJ5IGpvYlxuICAgIGNvbnN0IHJlY292ZXJ5ID0gc3RvcmFnZS5nZXRSZWNvdmVyeSgpO1xuICAgIFxuICAgIGlmIChyZWNvdmVyeSkge1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgRm91bmQgYWN0aXZlIGpvYiB0byByZWNvdmVyOicsIHJlY292ZXJ5LmpvYklkKTtcbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBqb2Igc3RhdGUgYW5kIHN1YnNjcmliZSB0byB1cGRhdGVzXG4gICAgICBqb2JNYW5hZ2VtZW50LnNldEN1cnJlbnRKb2JJZChyZWNvdmVyeS5qb2JJZCk7XG4gICAgICB3ZWJTb2NrZXQuc3Vic2NyaWJlVG9Kb2IocmVjb3Zlcnkuam9iSWQpO1xuICAgICAgXG4gICAgICAvLyBTZXQgZ2VuZXJhdGlvbiBzdGF0ZVxuICAgICAgY29uc3QgaXNEcmFmdCA9IHJlY292ZXJ5LmpvYklkLnN0YXJ0c1dpdGgoJ2RyYWZ0LScpO1xuICAgICAgaWYgKGlzRHJhZnQpIHtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzRHJhZnRNb2RlKHRydWUpO1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcodHJ1ZSk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MoJ/CfjqggUmVzdW1pbmcgZHJhZnQgZ2VuZXJhdGlvbi4uLicpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MoJ/CfjqggUmVzdW1pbmcgZHJhZnQgZ2VuZXJhdGlvbi4uLicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MoJ/CfjqggUmVzdW1pbmcgY2FyZCBnZW5lcmF0aW9uLi4uJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IGVsYXBzZWQgdGltZSB0cmFja2luZ1xuICAgICAgam9iTWFuYWdlbWVudC5zdGFydEVsYXBzZWRUaW1lVHJhY2tpbmcoaXNEcmFmdCA/ICdkcmFmdCcgOiAnZmluYWwnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWx3YXlzIG1hcmsgcmVzdG9yYXRpb24gYXMgY29tcGxldGVcbiAgICBzZXRJc1Jlc3RvcmluZ0pvYnMoZmFsc2UpO1xuICAgIFxuICAgIC8vIE1hcmsgcmVzdG9yYXRpb24gYXMgY29tcGxldGUgYWZ0ZXIgYSBzbWFsbCBkZWxheVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2V0SXNSZXN0b3JpbmdKb2JzKGZhbHNlKTtcbiAgICB9LCAxMDApO1xuICB9LCBbXSk7XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgc3RhdGUgYW5kIGZ1bmN0aW9ucyB0aGF0IHRoZSBVSSBuZWVkc1xuICByZXR1cm4ge1xuICAgIC8vIENvcmUgc3RhdGVcbiAgICBwcm9tcHQsXG4gICAgc2V0UHJvbXB0LFxuICAgIGZpbmFsQ2FyZE1lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLmZpbmFsQ2FyZE1lc3NhZ2UsXG4gICAgc2V0RmluYWxDYXJkTWVzc2FnZTogbWVzc2FnZUdlbmVyYXRpb24uc2V0RmluYWxDYXJkTWVzc2FnZSxcbiAgICB0b0ZpZWxkLFxuICAgIHNldFRvRmllbGQsXG4gICAgZnJvbUZpZWxkLFxuICAgIHNldEZyb21GaWVsZCxcbiAgICByZWxhdGlvbnNoaXBGaWVsZCxcbiAgICBzZXRSZWxhdGlvbnNoaXBGaWVsZCxcbiAgICBzZWxlY3RlZFR5cGUsXG4gICAgc2V0U2VsZWN0ZWRUeXBlLFxuICAgIGN1c3RvbUNhcmRUeXBlLFxuICAgIHNldEN1c3RvbUNhcmRUeXBlLFxuICAgIHNlbGVjdGVkVG9uZSxcbiAgICBzZXRTZWxlY3RlZFRvbmUsXG4gICAgaXNHZW5lcmF0aW5nOiBjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcgfHwgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZyxcbiAgICBzZXRJc0dlbmVyYXRpbmc6IGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyxcbiAgICBpc0dlbmVyYXRpbmdNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdNZXNzYWdlLFxuICAgIHNldElzR2VuZXJhdGluZ01lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZ01lc3NhZ2UsXG4gICAgZ2VuZXJhdGVkQ2FyZDogY2FyZEdlbmVyYXRpb24uZ2VuZXJhdGVkQ2FyZCxcbiAgICBzZXRHZW5lcmF0ZWRDYXJkOiBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0ZWRDYXJkLFxuICAgIG51bWJlck9mQ2FyZHMsXG4gICAgc2V0TnVtYmVyT2ZDYXJkcyxcbiAgICBnZW5lcmF0ZWRDYXJkczogY2FyZEdlbmVyYXRpb24uZ2VuZXJhdGVkQ2FyZHMsXG4gICAgc2V0R2VuZXJhdGVkQ2FyZHM6IGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRlZENhcmRzLFxuICAgIHNlbGVjdGVkQ2FyZEluZGV4OiBjYXJkR2VuZXJhdGlvbi5zZWxlY3RlZENhcmRJbmRleCxcbiAgICBzZXRTZWxlY3RlZENhcmRJbmRleDogY2FyZEdlbmVyYXRpb24uc2V0U2VsZWN0ZWRDYXJkSW5kZXgsXG4gICAgXG4gICAgLy8gQWR2YW5jZWQgb3B0aW9uc1xuICAgIHNob3dBZHZhbmNlZCxcbiAgICBzZXRTaG93QWR2YW5jZWQsXG4gICAgc2VsZWN0ZWRBcnRpc3RpY1N0eWxlLFxuICAgIHNldFNlbGVjdGVkQXJ0aXN0aWNTdHlsZSxcbiAgICBjdXN0b21TdHlsZURlc2NyaXB0aW9uLFxuICAgIHNldEN1c3RvbVN0eWxlRGVzY3JpcHRpb24sXG4gICAgc2VsZWN0ZWRJbWFnZU1vZGVsLFxuICAgIHNldFNlbGVjdGVkSW1hZ2VNb2RlbCxcbiAgICBzZWxlY3RlZERyYWZ0TW9kZWwsXG4gICAgc2V0U2VsZWN0ZWREcmFmdE1vZGVsLFxuICAgIFxuICAgIC8vIERyYWZ0IG1vZGVcbiAgICBpc0RyYWZ0TW9kZTogZHJhZnRHZW5lcmF0aW9uLmlzRHJhZnRNb2RlLFxuICAgIHNldElzRHJhZnRNb2RlOiBkcmFmdEdlbmVyYXRpb24uc2V0SXNEcmFmdE1vZGUsXG4gICAgZHJhZnRDYXJkczogZHJhZnRHZW5lcmF0aW9uLmRyYWZ0Q2FyZHMsXG4gICAgc2V0RHJhZnRDYXJkczogZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMsXG4gICAgc2VsZWN0ZWREcmFmdEluZGV4OiBkcmFmdEdlbmVyYXRpb24uc2VsZWN0ZWREcmFmdEluZGV4LFxuICAgIHNldFNlbGVjdGVkRHJhZnRJbmRleDogZHJhZnRHZW5lcmF0aW9uLnNldFNlbGVjdGVkRHJhZnRJbmRleCxcbiAgICBpc0dlbmVyYXRpbmdGaW5hbENhcmQ6IGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQsXG4gICAgc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkOiBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkLFxuICAgIHByZXZpZXdpbmdEcmFmdEluZGV4OiBkcmFmdEdlbmVyYXRpb24ucHJldmlld2luZ0RyYWZ0SW5kZXgsXG4gICAgc2V0UHJldmlld2luZ0RyYWZ0SW5kZXg6IGRyYWZ0R2VuZXJhdGlvbi5zZXRQcmV2aWV3aW5nRHJhZnRJbmRleCxcbiAgICBkcmFmdENvbXBsZXRpb25TaG93bjogZHJhZnRHZW5lcmF0aW9uLmRyYWZ0Q29tcGxldGlvblNob3duLFxuICAgIHNldERyYWZ0Q29tcGxldGlvblNob3duOiBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uU2hvd24sXG4gICAgZHJhZnRDb21wbGV0aW9uQ291bnQ6IGRyYWZ0R2VuZXJhdGlvbi5kcmFmdENvbXBsZXRpb25Db3VudCxcbiAgICBzZXREcmFmdENvbXBsZXRpb25Db3VudDogZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvbkNvdW50LFxuICAgIFxuICAgIC8vIFByb2dyZXNzIHRyYWNraW5nXG4gICAgZ2VuZXJhdGlvblByb2dyZXNzOiBkcmFmdEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nID8gZHJhZnRHZW5lcmF0aW9uLmdlbmVyYXRpb25Qcm9ncmVzcyA6IGNhcmRHZW5lcmF0aW9uLmdlbmVyYXRpb25Qcm9ncmVzcyxcbiAgICBzZXRHZW5lcmF0aW9uUHJvZ3Jlc3M6IGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyxcbiAgICBwcm9ncmVzc1BlcmNlbnRhZ2U6IGpvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlLCAvLyBTaW5nbGUgc291cmNlIG9mIHRydXRoIGJhc2VkIG9uIGVsYXBzZWQgdGltZVxuICAgIGlzQ2FyZENvbXBsZXRlZDogY2FyZEdlbmVyYXRpb24uaXNDYXJkQ29tcGxldGVkLFxuICAgIHNldElzQ2FyZENvbXBsZXRlZDogY2FyZEdlbmVyYXRpb24uc2V0SXNDYXJkQ29tcGxldGVkLFxuICAgIFxuICAgIC8vIFVwbG9hZCBhbmQgcGVyc29uYWxpemF0aW9uXG4gICAgcmVmZXJlbmNlSW1hZ2VzOiBmaWxlSGFuZGxpbmcucmVmZXJlbmNlSW1hZ2VzLFxuICAgIHNldFJlZmVyZW5jZUltYWdlczogZmlsZUhhbmRsaW5nLnNldFJlZmVyZW5jZUltYWdlcyxcbiAgICByZWZlcmVuY2VJbWFnZVVybHM6IGZpbGVIYW5kbGluZy5yZWZlcmVuY2VJbWFnZVVybHMsXG4gICAgc2V0UmVmZXJlbmNlSW1hZ2VVcmxzOiBmaWxlSGFuZGxpbmcuc2V0UmVmZXJlbmNlSW1hZ2VVcmxzLFxuICAgIGltYWdlVHJhbnNmb3JtYXRpb246IGZpbGVIYW5kbGluZy5pbWFnZVRyYW5zZm9ybWF0aW9uLFxuICAgIHNldEltYWdlVHJhbnNmb3JtYXRpb246IGZpbGVIYW5kbGluZy5zZXRJbWFnZVRyYW5zZm9ybWF0aW9uLFxuICAgIGlzVXBsb2FkaW5nOiBmaWxlSGFuZGxpbmcuaXNVcGxvYWRpbmcsXG4gICAgc2V0SXNVcGxvYWRpbmc6IGZpbGVIYW5kbGluZy5zZXRJc1VwbG9hZGluZyxcbiAgICBcbiAgICAvLyBFbWFpbCBhbmQgc2V0dGluZ3NcbiAgICB1c2VyRW1haWwsXG4gICAgc2V0VXNlckVtYWlsLFxuICAgIGlzSGFuZHdyaXR0ZW5NZXNzYWdlLFxuICAgIHNldElzSGFuZHdyaXR0ZW5NZXNzYWdlLFxuICAgIGlzRnJvbnRCYWNrT25seSxcbiAgICBzZXRJc0Zyb250QmFja09ubHksXG4gICAgc2VsZWN0ZWRQYXBlclNpemUsXG4gICAgc2V0U2VsZWN0ZWRQYXBlclNpemUsXG4gICAgXG4gICAgLy8gVUkgc3RhdGVcbiAgICBpc1RleHRhcmVhRXhwYW5kZWQsXG4gICAgc2V0SXNUZXh0YXJlYUV4cGFuZGVkLFxuICAgIGlzTWVzc2FnZUV4cGFuZGVkLFxuICAgIHNldElzTWVzc2FnZUV4cGFuZGVkLFxuICAgIHNob3dTZXR0aW5ncyxcbiAgICBzZXRTaG93U2V0dGluZ3MsXG4gICAgc2hvd1RlbXBsYXRlR2FsbGVyeSxcbiAgICBzZXRTaG93VGVtcGxhdGVHYWxsZXJ5LFxuICAgIHNob3dQcmludENvbmZpcm1hdGlvbixcbiAgICBzZXRTaG93UHJpbnRDb25maXJtYXRpb24sXG4gICAgXG4gICAgLy8gR2VuZXJhdGlvbiB0aW1lXG4gICAgZ2VuZXJhdGlvbkR1cmF0aW9uOiBjYXJkR2VuZXJhdGlvbi5nZW5lcmF0aW9uRHVyYXRpb24sXG4gICAgc2V0R2VuZXJhdGlvbkR1cmF0aW9uOiBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uRHVyYXRpb24sXG4gICAgY3VycmVudEVsYXBzZWRUaW1lOiBqb2JNYW5hZ2VtZW50LmN1cnJlbnRFbGFwc2VkVGltZSxcbiAgICBzZXRDdXJyZW50RWxhcHNlZFRpbWU6IGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEVsYXBzZWRUaW1lLFxuICAgIFxuICAgIC8vIEhlbHBlciBmdW5jdGlvbnNcbiAgICBmb3JtYXRHZW5lcmF0aW9uVGltZSxcbiAgICBmb3JtYXRDb3VudGRvd24sXG4gICAgc2VuZFRoYW5rWW91RW1haWwsXG4gICAgY2hhdFdpdGhBSSxcbiAgICBzY3JvbGxUb0NhcmRQcmV2aWV3LFxuICAgIFxuICAgIC8vIFRpbWUgdHJhY2tpbmcgZnVuY3Rpb25zXG4gICAgc3RhcnRFbGFwc2VkVGltZVRyYWNraW5nOiBqb2JNYW5hZ2VtZW50LnN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZyxcbiAgICBzdG9wRWxhcHNlZFRpbWVUcmFja2luZzogam9iTWFuYWdlbWVudC5zdG9wRWxhcHNlZFRpbWVUcmFja2luZyxcbiAgICBcbiAgICAvLyBGaWxlIGhhbmRsaW5nIGZ1bmN0aW9uc1xuICAgIGhhbmRsZUZpbGVVcGxvYWQ6IGZpbGVIYW5kbGluZy5oYW5kbGVGaWxlVXBsb2FkLFxuICAgIGhhbmRsZVJlbW92ZVJlZmVyZW5jZUltYWdlOiBmaWxlSGFuZGxpbmcuaGFuZGxlUmVtb3ZlUmVmZXJlbmNlSW1hZ2UsXG4gICAgXG4gICAgLy8gU2ltcGxpZmllZCBwaG90byByZWZlcmVuY2VzXG4gICAgcGhvdG9SZWZlcmVuY2VzOiBmaWxlSGFuZGxpbmcucGhvdG9SZWZlcmVuY2VzLFxuICAgIHNldFBob3RvUmVmZXJlbmNlczogZmlsZUhhbmRsaW5nLnNldFBob3RvUmVmZXJlbmNlcyxcbiAgICB1cGRhdGVQaG90b0Rlc2NyaXB0aW9uOiBmaWxlSGFuZGxpbmcudXBkYXRlUGhvdG9EZXNjcmlwdGlvbixcbiAgICBcbiAgICAvLyBNZXNzYWdlIGZ1bmN0aW9uc1xuICAgIGhhbmRsZUdldE1lc3NhZ2VIZWxwOiBtZXNzYWdlR2VuZXJhdGlvbi5oYW5kbGVHZXRNZXNzYWdlSGVscCxcbiAgICBhZGRNZXNzYWdlVG9IaXN0b3J5OiBtZXNzYWdlR2VuZXJhdGlvbi5hZGRNZXNzYWdlVG9IaXN0b3J5LFxuICAgIHVuZG9NZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi51bmRvTWVzc2FnZSxcbiAgICByZWRvTWVzc2FnZTogbWVzc2FnZUdlbmVyYXRpb24ucmVkb01lc3NhZ2UsXG4gICAgXG4gICAgLy8gSm9iIG1hbmFnZW1lbnRcbiAgICBzYXZlSm9iVG9TdG9yYWdlOiBqb2JNYW5hZ2VtZW50LnNhdmVKb2JUb1N0b3JhZ2UsXG4gICAgcmVtb3ZlSm9iRnJvbVN0b3JhZ2U6IGpvYk1hbmFnZW1lbnQucmVtb3ZlSm9iRnJvbVN0b3JhZ2UsXG4gICAgY2hlY2tQZW5kaW5nSm9icyxcbiAgICBpc1Jlc3RvcmluZ0pvYnMsXG4gICAgXG4gICAgLy8gTWFpbiBnZW5lcmF0aW9uIGZ1bmN0aW9uc1xuICAgIGhhbmRsZUdlbmVyYXRlQ2FyZEFzeW5jOiBjYXJkR2VuZXJhdGlvbi5oYW5kbGVHZW5lcmF0ZUNhcmRBc3luYyxcbiAgICBoYW5kbGVHZW5lcmF0ZURyYWZ0Q2FyZHM6IGRyYWZ0R2VuZXJhdGlvbi5oYW5kbGVHZW5lcmF0ZURyYWZ0Q2FyZHMsXG4gICAgaGFuZGxlR2VuZXJhdGVGaW5hbEZyb21EcmFmdDogZHJhZnRHZW5lcmF0aW9uLmhhbmRsZUdlbmVyYXRlRmluYWxGcm9tRHJhZnQsXG4gICAgXG4gICAgLy8gQWRkaXRpb25hbCBzdGF0ZSBmb3IgbWVzc2FnZSByZWZpbmVtZW50XG4gICAgbWVzc2FnZUhpc3Rvcnk6IG1lc3NhZ2VHZW5lcmF0aW9uLm1lc3NhZ2VIaXN0b3J5LFxuICAgIHNldE1lc3NhZ2VIaXN0b3J5OiBtZXNzYWdlR2VuZXJhdGlvbi5zZXRNZXNzYWdlSGlzdG9yeSxcbiAgICBjdXJyZW50TWVzc2FnZUluZGV4OiBtZXNzYWdlR2VuZXJhdGlvbi5jdXJyZW50TWVzc2FnZUluZGV4LFxuICAgIHNldEN1cnJlbnRNZXNzYWdlSW5kZXg6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldEN1cnJlbnRNZXNzYWdlSW5kZXgsXG4gICAgcmVmaW5lbWVudFByb21wdDogbWVzc2FnZUdlbmVyYXRpb24ucmVmaW5lbWVudFByb21wdCxcbiAgICBzZXRSZWZpbmVtZW50UHJvbXB0OiBtZXNzYWdlR2VuZXJhdGlvbi5zZXRSZWZpbmVtZW50UHJvbXB0LFxuICAgIGlzUmVmaW5pbmdNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5pc1JlZmluaW5nTWVzc2FnZSxcbiAgICBzZXRJc1JlZmluaW5nTWVzc2FnZTogbWVzc2FnZUdlbmVyYXRpb24uc2V0SXNSZWZpbmluZ01lc3NhZ2UsXG4gICAgc2hvd1JlZmluZW1lbnRCb3g6IG1lc3NhZ2VHZW5lcmF0aW9uLnNob3dSZWZpbmVtZW50Qm94LFxuICAgIHNldFNob3dSZWZpbmVtZW50Qm94OiBtZXNzYWdlR2VuZXJhdGlvbi5zZXRTaG93UmVmaW5lbWVudEJveCxcbiAgICBcbiAgICAvLyBUZW1wbGF0ZSBzdGF0ZVxuICAgIHNob3dUZW1wbGF0ZUN1c3RvbWl6YXRpb24sXG4gICAgc2V0U2hvd1RlbXBsYXRlQ3VzdG9taXphdGlvbixcbiAgICBzZWxlY3RlZFRlbXBsYXRlLFxuICAgIHNldFNlbGVjdGVkVGVtcGxhdGUsXG4gICAgdGVtcGxhdGVDdXN0b21pemF0aW9ucyxcbiAgICBzZXRUZW1wbGF0ZUN1c3RvbWl6YXRpb25zLFxuICAgIHRlbXBsYXRlU2VhcmNoUXVlcnksXG4gICAgc2V0VGVtcGxhdGVTZWFyY2hRdWVyeSxcbiAgICBpc1NlYXJjaGluZ1RlbXBsYXRlcyxcbiAgICBzZXRJc1NlYXJjaGluZ1RlbXBsYXRlcyxcbiAgICBhaUZpbHRlcmVkQ2FyZHMsXG4gICAgc2V0QWlGaWx0ZXJlZENhcmRzLFxuICAgIHNlYXJjaE1vZGUsXG4gICAgc2V0U2VhcmNoTW9kZSxcbiAgICB0ZXh0RmlsdGVyZWRDYXJkcyxcbiAgICBzZXRUZXh0RmlsdGVyZWRDYXJkcyxcbiAgICBzaG93UHJvbXB0cyxcbiAgICBzZXRTaG93UHJvbXB0cyxcbiAgICBcbiAgICAvLyBQcmludCBzdGF0ZVxuICAgIHByaW50T3B0aW9uLFxuICAgIHNldFByaW50T3B0aW9uLFxuICAgIFxuICAgIC8vIEFkZGl0aW9uYWwgZHJhZnQgbW9kZSBzdGF0ZVxuICAgIGhhbmR3cml0aW5nU2FtcGxlOiBmaWxlSGFuZGxpbmcuaGFuZHdyaXRpbmdTYW1wbGUsXG4gICAgc2V0SGFuZHdyaXRpbmdTYW1wbGU6IGZpbGVIYW5kbGluZy5zZXRIYW5kd3JpdGluZ1NhbXBsZSxcbiAgICBoYW5kd3JpdGluZ1NhbXBsZVVybDogZmlsZUhhbmRsaW5nLmhhbmR3cml0aW5nU2FtcGxlVXJsLFxuICAgIHNldEhhbmR3cml0aW5nU2FtcGxlVXJsOiBmaWxlSGFuZGxpbmcuc2V0SGFuZHdyaXRpbmdTYW1wbGVVcmwsXG4gICAgXG4gICAgXG4gICAgLy8gSm9iIHRyYWNraW5nXG4gICAgY3VycmVudEpvYklkOiBqb2JNYW5hZ2VtZW50LmN1cnJlbnRKb2JJZCxcbiAgICBzZXRDdXJyZW50Sm9iSWQ6IGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEpvYklkLFxuICAgIGNvdW50ZG93bixcbiAgICBzZXRDb3VudGRvd24sXG4gICAgY291bnRkb3duSW50ZXJ2YWwsXG4gICAgc2V0Q291bnRkb3duSW50ZXJ2YWwsXG4gICAgXG4gICAgLy8gU2VjdGlvbiBsb2FkaW5nIHN0YXRlc1xuICAgIHNlY3Rpb25Mb2FkaW5nU3RhdGVzLFxuICAgIHNldFNlY3Rpb25Mb2FkaW5nU3RhdGVzLFxuICAgIFxuICAgIC8vIEZhc3QgcHJldmlldyBtb2RlXG4gICAgZmFzdFByZXZpZXdNb2RlLFxuICAgIHNldEZhc3RQcmV2aWV3TW9kZSxcbiAgICBcbiAgICAvLyBBZGRpdGlvbmFsIHRyYWNraW5nXG4gICAgY3VycmVudENhcmRJZDogY2FyZEdlbmVyYXRpb24uY3VycmVudENhcmRJZCxcbiAgICBzZXRDdXJyZW50Q2FyZElkOiBjYXJkR2VuZXJhdGlvbi5zZXRDdXJyZW50Q2FyZElkLFxuICAgIGlzSW5pdGlhbExvYWRDb21wbGV0ZSxcbiAgICBzZXRJc0luaXRpYWxMb2FkQ29tcGxldGUsXG4gICAgXG4gICAgLy8gRWxhcHNlZCB0aW1lIHRyYWNraW5nXG4gICAgZ2VuZXJhdGlvblN0YXJ0VGltZTogam9iTWFuYWdlbWVudC5nZW5lcmF0aW9uU3RhcnRUaW1lLFxuICAgIHNldEdlbmVyYXRpb25TdGFydFRpbWU6IGpvYk1hbmFnZW1lbnQuc2V0R2VuZXJhdGlvblN0YXJ0VGltZSxcbiAgICBlbGFwc2VkVGltZUludGVydmFsOiBqb2JNYW5hZ2VtZW50LmVsYXBzZWRUaW1lSW50ZXJ2YWwsXG4gICAgc2V0RWxhcHNlZFRpbWVJbnRlcnZhbDogam9iTWFuYWdlbWVudC5zZXRFbGFwc2VkVGltZUludGVydmFsLFxuICAgIFxuICAgIC8vIENvbnN0YW50cyBmb3IgVUlcbiAgICBjYXJkVG9uZXMsXG4gICAgYXJ0aXN0aWNTdHlsZXMsXG4gICAgcGFwZXJTaXplcyxcbiAgICBcbiAgICAvLyBXZWJTb2NrZXQgZnVuY3Rpb25zIGFuZCBzdGF0ZVxuICAgIGlzU29ja2V0Q29ubmVjdGVkOiB3ZWJTb2NrZXQuaXNTb2NrZXRDb25uZWN0ZWQsXG4gICAgY29ubmVjdFdlYlNvY2tldDogd2ViU29ja2V0LmNvbm5lY3RXZWJTb2NrZXQsXG4gICAgZGlzY29ubmVjdFdlYlNvY2tldDogd2ViU29ja2V0LmRpc2Nvbm5lY3RXZWJTb2NrZXQsXG4gICAgc3Vic2NyaWJlVG9Kb2I6IHdlYlNvY2tldC5zdWJzY3JpYmVUb0pvYixcbiAgICB1bnN1YnNjcmliZUZyb21Kb2I6IHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21Kb2IsXG4gICAgaGFuZGxlSm9iVXBkYXRlLFxuICAgIGhhbmRsZUZpbmFsQ2FyZENvbXBsZXRpb246IGNhcmRHZW5lcmF0aW9uLmhhbmRsZUZpbmFsQ2FyZENvbXBsZXRpb24sXG4gIH07XG59Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJ1c2VSZWYiLCJ0b2FzdCIsInVzZVdlYlNvY2tldCIsInVzZUpvYk1hbmFnZW1lbnQiLCJ1c2VNZXNzYWdlR2VuZXJhdGlvbiIsInVzZUZpbGVIYW5kbGluZyIsInVzZURyYWZ0R2VuZXJhdGlvbiIsInVzZUNhcmRHZW5lcmF0aW9uIiwiY2FyZFRvbmVzIiwiYXJ0aXN0aWNTdHlsZXMiLCJwYXBlclNpemVzIiwiZm9ybWF0R2VuZXJhdGlvblRpbWUiLCJmb3JtYXRDb3VudGRvd24iLCJzZW5kVGhhbmtZb3VFbWFpbCIsImNoYXRXaXRoQUkiLCJzY3JvbGxUb0NhcmRQcmV2aWV3Iiwic3RvcmFnZSIsInVzZUNhcmRTdHVkaW8iLCJwcm9tcHQiLCJzZXRQcm9tcHQiLCJ0b0ZpZWxkIiwic2V0VG9GaWVsZCIsImZyb21GaWVsZCIsInNldEZyb21GaWVsZCIsInJlbGF0aW9uc2hpcEZpZWxkIiwic2V0UmVsYXRpb25zaGlwRmllbGQiLCJzZWxlY3RlZFR5cGUiLCJzZXRTZWxlY3RlZFR5cGUiLCJjdXN0b21DYXJkVHlwZSIsInNldEN1c3RvbUNhcmRUeXBlIiwic2VsZWN0ZWRUb25lIiwic2V0U2VsZWN0ZWRUb25lIiwic2hvd0FkdmFuY2VkIiwic2V0U2hvd0FkdmFuY2VkIiwic2VsZWN0ZWRBcnRpc3RpY1N0eWxlIiwic2V0U2VsZWN0ZWRBcnRpc3RpY1N0eWxlIiwiY3VzdG9tU3R5bGVEZXNjcmlwdGlvbiIsInNldEN1c3RvbVN0eWxlRGVzY3JpcHRpb24iLCJzZWxlY3RlZEltYWdlTW9kZWwiLCJzZXRTZWxlY3RlZEltYWdlTW9kZWwiLCJzZWxlY3RlZERyYWZ0TW9kZWwiLCJzZXRTZWxlY3RlZERyYWZ0TW9kZWwiLCJmYXN0UHJldmlld01vZGUiLCJzZXRGYXN0UHJldmlld01vZGUiLCJ1c2VyRW1haWwiLCJzZXRVc2VyRW1haWwiLCJudW1iZXJPZkNhcmRzIiwic2V0TnVtYmVyT2ZDYXJkcyIsImlzSGFuZHdyaXR0ZW5NZXNzYWdlIiwic2V0SXNIYW5kd3JpdHRlbk1lc3NhZ2UiLCJpc0Zyb250QmFja09ubHkiLCJzZXRJc0Zyb250QmFja09ubHkiLCJzZWxlY3RlZFBhcGVyU2l6ZSIsInNldFNlbGVjdGVkUGFwZXJTaXplIiwiaXNUZXh0YXJlYUV4cGFuZGVkIiwic2V0SXNUZXh0YXJlYUV4cGFuZGVkIiwiaXNNZXNzYWdlRXhwYW5kZWQiLCJzZXRJc01lc3NhZ2VFeHBhbmRlZCIsInNob3dTZXR0aW5ncyIsInNldFNob3dTZXR0aW5ncyIsInNob3dUZW1wbGF0ZUdhbGxlcnkiLCJzZXRTaG93VGVtcGxhdGVHYWxsZXJ5Iiwic2hvd1ByaW50Q29uZmlybWF0aW9uIiwic2V0U2hvd1ByaW50Q29uZmlybWF0aW9uIiwic2hvd1RlbXBsYXRlQ3VzdG9taXphdGlvbiIsInNldFNob3dUZW1wbGF0ZUN1c3RvbWl6YXRpb24iLCJpc1Jlc3RvcmluZ0pvYnMiLCJzZXRJc1Jlc3RvcmluZ0pvYnMiLCJzZWxlY3RlZFRlbXBsYXRlIiwic2V0U2VsZWN0ZWRUZW1wbGF0ZSIsImlzSW5pdGlhbExvYWRDb21wbGV0ZSIsInNldElzSW5pdGlhbExvYWRDb21wbGV0ZSIsInRlbXBsYXRlU2VhcmNoUXVlcnkiLCJzZXRUZW1wbGF0ZVNlYXJjaFF1ZXJ5IiwiaXNTZWFyY2hpbmdUZW1wbGF0ZXMiLCJzZXRJc1NlYXJjaGluZ1RlbXBsYXRlcyIsImFpRmlsdGVyZWRDYXJkcyIsInNldEFpRmlsdGVyZWRDYXJkcyIsInNlYXJjaE1vZGUiLCJzZXRTZWFyY2hNb2RlIiwidGV4dEZpbHRlcmVkQ2FyZHMiLCJzZXRUZXh0RmlsdGVyZWRDYXJkcyIsInNob3dQcm9tcHRzIiwic2V0U2hvd1Byb21wdHMiLCJwcmludE9wdGlvbiIsInNldFByaW50T3B0aW9uIiwidGVtcGxhdGVDdXN0b21pemF0aW9ucyIsInNldFRlbXBsYXRlQ3VzdG9taXphdGlvbnMiLCJwcm9tcHRDaGFuZ2VzIiwibWVzc2FnZUNoYW5nZXMiLCJ1c2VSZWZlcmVuY2VJbWFnZSIsInJlZmVyZW5jZUltYWdlRmlsZSIsInJlZmVyZW5jZUltYWdlVXJscyIsInJlZmVyZW5jZUltYWdlVHJhbnNmb3JtYXRpb24iLCJzZWN0aW9uTG9hZGluZ1N0YXRlcyIsInNldFNlY3Rpb25Mb2FkaW5nU3RhdGVzIiwiZnJvbnRDb3ZlciIsImJhY2tDb3ZlciIsImxlZnRJbnRlcmlvciIsInJpZ2h0SW50ZXJpb3IiLCJjb3VudGRvd24iLCJzZXRDb3VudGRvd24iLCJjb3VudGRvd25JbnRlcnZhbCIsInNldENvdW50ZG93bkludGVydmFsIiwid2ViU29ja2V0Iiwiam9iTWFuYWdlbWVudCIsImZpbGVIYW5kbGluZyIsIm1lc3NhZ2VHZW5lcmF0aW9uIiwicGhvdG9SZWZlcmVuY2VzIiwiZHJhZnRHZW5lcmF0aW9uUHJvcHMiLCJmaW5hbENhcmRNZXNzYWdlIiwic2F2ZUpvYlRvU3RvcmFnZSIsInN1YnNjcmliZVRvSm9iIiwidW5zdWJzY3JpYmVGcm9tQWxsSm9icyIsInN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZyIsInN0b3BFbGFwc2VkVGltZVRyYWNraW5nIiwiZHJhZnRHZW5lcmF0aW9uIiwiY2FyZEdlbmVyYXRpb25Qcm9wcyIsInJlbW92ZUpvYkZyb21TdG9yYWdlIiwic2V0Q3VycmVudEpvYklkIiwic2V0SXNEcmFmdE1vZGUiLCJzZXREcmFmdENhcmRzIiwic2V0U2VsZWN0ZWREcmFmdEluZGV4Iiwic2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkIiwic2V0UHJldmlld2luZ0RyYWZ0SW5kZXgiLCJzZXREcmFmdENvbXBsZXRpb25TaG93biIsInNldERyYWZ0Q29tcGxldGlvbkNvdW50IiwiY2FyZEdlbmVyYXRpb24iLCJoYW5kbGVKb2JVcGRhdGUiLCJkYXRhIiwiam9iX2lkIiwic3RhdHVzIiwicHJvZ3Jlc3MiLCJjYXJkRGF0YSIsImVycm9yIiwiY29tcGxldGVkQXQiLCJjb25zb2xlIiwibG9nIiwiaXNEcmFmdEpvYiIsInN0YXJ0c1dpdGgiLCJkcmFmdEluZGV4IiwicGFyc2VJbnQiLCJzcGxpdCIsImlzSW5EcmFmdE1vZGUiLCJpc0RyYWZ0TW9kZSIsImluY2x1ZGVzIiwic2V0R2VuZXJhdGlvblByb2dyZXNzIiwic3R5bGVJbmZvIiwidW5kZWZpbmVkIiwicHJlZGVmaW5lZFN0eWxlcyIsInN0eWxlTGFiZWxzIiwibGVuZ3RoIiwic3R5bGVOYW1lIiwic3R5bGVMYWJlbCIsImRyYWZ0Q2FyZCIsImlkIiwiRGF0ZSIsIm5vdyIsImxlZnRQYWdlIiwicmlnaHRQYWdlIiwiY3JlYXRlZEF0IiwiZ2VuZXJhdGVkUHJvbXB0cyIsInByZXYiLCJ1cGRhdGVkIiwicHVzaCIsInVwZGF0ZWREcmFmdHMiLCJkcmFmdENhcmRzIiwiY29tcGxldGVkQ291bnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwicHJvZ3Jlc3NNc2ciLCJpc0dlbmVyYXRpbmdGaW5hbENhcmQiLCJzZXRJc0dlbmVyYXRpbmciLCJzdWNjZXNzIiwidW5zdWJzY3JpYmVGcm9tSm9iIiwiaGFzQ2FyZERhdGEiLCJjYXJkRGF0YUtleXMiLCJPYmplY3QiLCJrZXlzIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1hcHBlZENhcmREYXRhIiwiaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvbiIsIndhcm4iLCJjdXJyZW50Sm9iUmVmIiwiY3VycmVudCIsImN1cnJlbnRKb2JJZCIsInNldEpvYlVwZGF0ZUhhbmRsZXIiLCJzdGFsZUpvYkxvZ2dlZFJlZiIsImlzU29ja2V0Q29ubmVjdGVkIiwiaXNHZW5lcmF0aW5nIiwiZ2VuZXJhdGlvblN0YXJ0VGltZSIsImpvYkFnZSIsImpvYklkIiwicmVjb25uZWN0VGltZXIiLCJzZXRUaW1lb3V0IiwiY29ubmVjdFdlYlNvY2tldCIsImNsZWFyVGltZW91dCIsImNoZWNrSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInRpbWVTaW5jZUxhc3RVcGRhdGUiLCJsYXN0Sm9iVXBkYXRlUmVmIiwicHJvZ3Jlc3NQZXJjZW50YWdlIiwiTWF0aCIsInJvdW5kIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiam9iU3RhdHVzIiwianNvbiIsImNsZWFySW50ZXJ2YWwiLCJjaGVja1BlbmRpbmdKb2JzIiwicmVjb3ZlcnkiLCJnZXRSZWNvdmVyeSIsImRyYWZ0Sm9icyIsImRyYWZ0c0J5SW5kZXgiLCJBcnJheSIsImZpbGwiLCJqb2IiLCJpc0FycmF5IiwiYWxsRHJhZnRDYXJkcyIsImlzU3RhbGUiLCJmaW5hbEpvYnMiLCJpc0RyYWZ0IiwiaGFzUHJvZ3Jlc3MiLCJsYXN0UHJvZ3Jlc3MiLCJsYXN0UHJvZ3Jlc3NUZXh0Iiwic2VsZWN0ZWREcmFmdEluZGV4Iiwiam9iU3RhcnRUaW1lIiwiZWxhcHNlZFNpbmNlU3RhcnQiLCJCQUNLRU5EX0FQSV9CQVNFX1VSTCIsInJlc3VsdCIsInJlc3VsdFN0YXR1cyIsInVybCIsImR1cmF0aW9uIiwiaW5mbyIsInNldEZpbmFsQ2FyZE1lc3NhZ2UiLCJpc0dlbmVyYXRpbmdNZXNzYWdlIiwic2V0SXNHZW5lcmF0aW5nTWVzc2FnZSIsImdlbmVyYXRlZENhcmQiLCJzZXRHZW5lcmF0ZWRDYXJkIiwiZ2VuZXJhdGVkQ2FyZHMiLCJzZXRHZW5lcmF0ZWRDYXJkcyIsInNlbGVjdGVkQ2FyZEluZGV4Iiwic2V0U2VsZWN0ZWRDYXJkSW5kZXgiLCJwcmV2aWV3aW5nRHJhZnRJbmRleCIsImRyYWZ0Q29tcGxldGlvblNob3duIiwiZHJhZnRDb21wbGV0aW9uQ291bnQiLCJnZW5lcmF0aW9uUHJvZ3Jlc3MiLCJpc0NhcmRDb21wbGV0ZWQiLCJzZXRJc0NhcmRDb21wbGV0ZWQiLCJyZWZlcmVuY2VJbWFnZXMiLCJzZXRSZWZlcmVuY2VJbWFnZXMiLCJzZXRSZWZlcmVuY2VJbWFnZVVybHMiLCJpbWFnZVRyYW5zZm9ybWF0aW9uIiwic2V0SW1hZ2VUcmFuc2Zvcm1hdGlvbiIsImlzVXBsb2FkaW5nIiwic2V0SXNVcGxvYWRpbmciLCJnZW5lcmF0aW9uRHVyYXRpb24iLCJzZXRHZW5lcmF0aW9uRHVyYXRpb24iLCJjdXJyZW50RWxhcHNlZFRpbWUiLCJzZXRDdXJyZW50RWxhcHNlZFRpbWUiLCJoYW5kbGVGaWxlVXBsb2FkIiwiaGFuZGxlUmVtb3ZlUmVmZXJlbmNlSW1hZ2UiLCJzZXRQaG90b1JlZmVyZW5jZXMiLCJ1cGRhdGVQaG90b0Rlc2NyaXB0aW9uIiwiaGFuZGxlR2V0TWVzc2FnZUhlbHAiLCJhZGRNZXNzYWdlVG9IaXN0b3J5IiwidW5kb01lc3NhZ2UiLCJyZWRvTWVzc2FnZSIsImhhbmRsZUdlbmVyYXRlQ2FyZEFzeW5jIiwiaGFuZGxlR2VuZXJhdGVEcmFmdENhcmRzIiwiaGFuZGxlR2VuZXJhdGVGaW5hbEZyb21EcmFmdCIsIm1lc3NhZ2VIaXN0b3J5Iiwic2V0TWVzc2FnZUhpc3RvcnkiLCJjdXJyZW50TWVzc2FnZUluZGV4Iiwic2V0Q3VycmVudE1lc3NhZ2VJbmRleCIsInJlZmluZW1lbnRQcm9tcHQiLCJzZXRSZWZpbmVtZW50UHJvbXB0IiwiaXNSZWZpbmluZ01lc3NhZ2UiLCJzZXRJc1JlZmluaW5nTWVzc2FnZSIsInNob3dSZWZpbmVtZW50Qm94Iiwic2V0U2hvd1JlZmluZW1lbnRCb3giLCJoYW5kd3JpdGluZ1NhbXBsZSIsInNldEhhbmR3cml0aW5nU2FtcGxlIiwiaGFuZHdyaXRpbmdTYW1wbGVVcmwiLCJzZXRIYW5kd3JpdGluZ1NhbXBsZVVybCIsImN1cnJlbnRDYXJkSWQiLCJzZXRDdXJyZW50Q2FyZElkIiwic2V0R2VuZXJhdGlvblN0YXJ0VGltZSIsImVsYXBzZWRUaW1lSW50ZXJ2YWwiLCJzZXRFbGFwc2VkVGltZUludGVydmFsIiwiZGlzY29ubmVjdFdlYlNvY2tldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useCardStudioRefactored.ts\n"));

/***/ })

});