"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./lib/promptGenerator.ts":
/*!********************************!*\
  !*** ./lib/promptGenerator.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PromptGenerator: function() { return /* binding */ PromptGenerator; }\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/v4.js\");\n\n// Visual density recommendations by card type\nconst CARD_TYPE_DENSITIES = {\n    \"sympathy\": {\n        back: 5,\n        leftInterior: 20,\n        rightInterior: 10\n    },\n    \"get-well\": {\n        back: 10,\n        leftInterior: 30,\n        rightInterior: 15\n    },\n    \"thank-you\": {\n        back: 15,\n        leftInterior: 35,\n        rightInterior: 20\n    },\n    \"wedding\": {\n        back: 10,\n        leftInterior: 30,\n        rightInterior: 15\n    },\n    \"birthday\": {\n        back: 20,\n        leftInterior: 40,\n        rightInterior: 20\n    },\n    \"anniversary\": {\n        back: 15,\n        leftInterior: 35,\n        rightInterior: 15\n    },\n    \"congratulations\": {\n        back: 20,\n        leftInterior: 40,\n        rightInterior: 20\n    },\n    \"new-baby\": {\n        back: 15,\n        leftInterior: 35,\n        rightInterior: 20\n    },\n    \"holiday\": {\n        back: 20,\n        leftInterior: 40,\n        rightInterior: 25\n    },\n    \"default\": {\n        back: 15,\n        leftInterior: 35,\n        rightInterior: 20\n    }\n};\nclass PromptGenerator {\n    // Helper to get visual density for card type\n    static getVisualDensity(cardType) {\n        return CARD_TYPE_DENSITIES[cardType] || CARD_TYPE_DENSITIES.default;\n    }\n    static getEnhancedReferencePhotoInstructions(photoReferences) {\n        // If no photo references or descriptions, use basic instructions\n        if (!photoReferences || photoReferences.length === 0) {\n            return \"\\nREFERENCE PHOTO INSTRUCTIONS:\\n- LOOK AT THE ATTACHED PHOTOS - they contain real people that you must transform\\n- Analyze the physical appearance of each person in the attached photos\\n- Transform the people in the attached reference photos into cartoon/illustrated versions\\n- Characters MUST HIGHLY resemble the people in the reference photos\\n- Keep the SAME clothing they're wearing (omit any text/logos on clothing)\\n- Maintain exact hairstyles, facial features, and body proportions\\n- ONLY include the people shown in the reference photos\\n- Do NOT add any additional people or characters unless explicitly requested\".trim();\n        }\n        // Find photos with descriptions\n        const photosWithDescriptions = photoReferences.filter((ref)=>ref.description && ref.description.trim() !== \"\");\n        let instructions = \"\\nREFERENCE PHOTO INSTRUCTIONS:\\n- CRITICAL: Look at the \".concat(photoReferences.length, \" attached photo(s) to see the actual people\");\n        // If user provided descriptions, use them directly\n        if (photosWithDescriptions.length > 0) {\n            instructions += \"\\n- The user has identified these people in the photos:\";\n            photosWithDescriptions.forEach((ref, idx)=>{\n                instructions += \"\\n  - Photo \".concat(ref.imageIndex + 1, \": \").concat(ref.description);\n            });\n            instructions += \"\\n- Transform these EXACT people from the attached photos into cartoon/illustrated versions\";\n        } else {\n            instructions += \"\\n- Analyze the people in the attached photos and transform them into cartoon/illustrated versions\";\n        }\n        instructions += \"\\n- YOU MUST look at the attached images to see their actual appearance\\n- Characters MUST HIGHLY resemble the people in the reference photos\\n- Keep the SAME clothing they're wearing (omit any text/logos on clothing)\\n- Maintain exact hairstyles, facial features, and body proportions\\n- ONLY include the people described or shown - do NOT add any additional characters\\n- Exception: Only add extra characters if explicitly requested in the card description\";\n        return instructions.trim();\n    }\n    // Helper method to extract and format personal details from the theme\n    static extractPersonalDetails(theme) {\n        // Check if the theme contains personal details (interests, hobbies, etc.)\n        const personalKeywords = [\n            \"loves\",\n            \"enjoys\",\n            \"likes\",\n            \"favorite\",\n            \"always\",\n            \"never\",\n            \"collects\",\n            \"plays\",\n            \"makes\",\n            \"bakes\",\n            \"cooks\",\n            \"reads\",\n            \"watches\",\n            \"listens\",\n            \"travels\",\n            \"hikes\",\n            \"runs\",\n            \"swims\",\n            \"coffee\",\n            \"tea\",\n            \"sushi\",\n            \"pizza\",\n            \"chocolate\",\n            \"wine\",\n            \"dog\",\n            \"cat\",\n            \"pet\",\n            \"garden\",\n            \"music\",\n            \"movie\",\n            \"book\",\n            \"weekend\",\n            \"morning\",\n            \"evening\",\n            \"tradition\",\n            \"memory\",\n            \"joke\",\n            \"laugh\",\n            \"smile\",\n            \"hobby\",\n            \"passion\",\n            \"interest\"\n        ];\n        const themeWords = theme.toLowerCase().split(/\\s+/);\n        const hasPersonalDetails = personalKeywords.some((keyword)=>themeWords.includes(keyword) || theme.toLowerCase().includes(keyword));\n        if (hasPersonalDetails) {\n            return \"\\nPERSONAL DETAILS TO INCORPORATE:\\n\".concat(theme, '\\n\\nIMPORTANT: These personal details should be creatively woven into the card design:\\n- If they love coffee, show a cozy coffee scene\\n- If they enjoy hiking, include mountain or trail elements  \\n- If they have pets mentioned, include those specific pets\\n- Transform interests into visual elements (e.g., \"loves sushi\" = sushi illustrations)\\n- Make the card feel personally crafted for someone with these specific interests');\n        }\n        return \"\";\n    }\n    // Generate prompts for all card sections with AI (includes images)\n    static async generateCardPromptsWithAI(config) {\n        // For now, just return the regular prompts\n        // TODO: Implement AI-powered prompt generation with images\n        return this.generateCardPrompts(config);\n    }\n    // Generate prompts for all card sections\n    static generateCardPrompts(config) {\n        var _config_artisticStyle, _config_artisticStyle1, _config_referenceImageUrls;\n        const cardTypeForPrompt = config.customCardType || config.cardType;\n        const effectivePrompt = config.theme || \"A beautiful \".concat(cardTypeForPrompt, \" card\");\n        const styleModifier = ((_config_artisticStyle = config.artisticStyle) === null || _config_artisticStyle === void 0 ? void 0 : _config_artisticStyle.promptModifier) || \"\";\n        // Generate unique UUID for this card generation to ensure variety\n        const uniqueId = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        // Build base prompt context (not currently used, but kept for reference)\n        const baseContext = '\\nTheme: \"'.concat(effectivePrompt, '\"\\nStyle: ').concat(((_config_artisticStyle1 = config.artisticStyle) === null || _config_artisticStyle1 === void 0 ? void 0 : _config_artisticStyle1.label) || \"Default\", \"\\n\").concat(((_config_referenceImageUrls = config.referenceImageUrls) === null || _config_referenceImageUrls === void 0 ? void 0 : _config_referenceImageUrls.length) ? \"Reference Photos: \".concat(config.referenceImageUrls.length, \" photo(s) provided for character creation\") : \"\", \"\\nUnique ID: \").concat(uniqueId).trim();\n        // Generate individual section prompts\n        const frontCover = this.generateFrontCoverPrompt(cardTypeForPrompt, effectivePrompt, styleModifier, config);\n        const backCover = this.generateBackCoverPrompt(styleModifier, config.cardType);\n        const prompts = {\n            frontCover,\n            backCover\n        };\n        if (!config.isFrontBackOnly) {\n            prompts.leftInterior = this.generateLeftInteriorPrompt(styleModifier, config.cardType);\n            prompts.rightInterior = this.generateRightInteriorPrompt(config.message || \"\", config.isHandwrittenMessage || false, styleModifier, config.cardType);\n        }\n        return prompts;\n    }\n    // Generate prompt for draft cards (front cover only) - returns both prompt and images\n    static generateDraftPromptWithImages(config) {\n        const prompt = this.generateDraftPrompt(config);\n        return {\n            prompt,\n            images: config.referenceImageUrls || []\n        };\n    }\n    // Generate creative prompt using AI (Gemini 2.5 Pro)\n    static async generateCreativeDraftPrompt(config) {\n        // Import chatWithAI dynamically to avoid circular dependencies\n        const { chatWithAI } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../hooks/cardStudio/utils */ \"(app-pages-browser)/./hooks/cardStudio/utils.ts\"));\n        // Generate the instruction prompt\n        const instructionPrompt = this.generateDraftPrompt(config);\n        // System prompt for creative image generation\n        const systemPrompt = \"You are an expert creative director for greeting cards. Your job is to take card requirements and create a vivid, detailed image generation prompt that will result in a beautiful, unique greeting card design. Focus on visual creativity, specific details, and artistic composition.\\n\\nIMPORTANT: When reference photos are provided:\\n- DO NOT describe physical features (hair, eye color, facial features) - the AI can see these from the photos\\n- DO describe: actions, poses, expressions, clothing (to maintain consistency), creative additions (props, activities)\\n- Focus on the creative scene, composition, and how the people interact with the card's theme\";\n        try {\n            // Call Gemini 2.5 Pro to generate the creative prompt\n            const creativePrompt = await chatWithAI(instructionPrompt, {\n                systemPrompt,\n                model: \"gemini-2.5-pro\",\n                attachments: config.referenceImageUrls\n            });\n            return creativePrompt;\n        } catch (error) {\n            console.error(\"Failed to generate creative prompt with AI, using fallback:\", error);\n            // Fallback to a simpler direct prompt if AI fails\n            return this.generateFallbackCreativePrompt(config);\n        }\n    }\n    // Fallback method for generating creative prompts without AI\n    static generateFallbackCreativePrompt(config) {\n        var _config_artisticStyle, _config_referenceImageUrls;\n        const cardTypeForPrompt = config.customCardType || config.cardType;\n        const effectivePrompt = config.theme || \"A beautiful \".concat(cardTypeForPrompt, \" card\");\n        const styleModifier = ((_config_artisticStyle = config.artisticStyle) === null || _config_artisticStyle === void 0 ? void 0 : _config_artisticStyle.promptModifier) || \"\";\n        let prompt = \"Create a \".concat(cardTypeForPrompt, \" greeting card front cover. \").concat(effectivePrompt, \". \");\n        if (config.toField) {\n            prompt += 'Include \"'.concat(config.toField, '\" in the greeting text. ');\n        }\n        prompt += \"\".concat(styleModifier, \". Flat 2D artwork suitable for printing.\");\n        if ((_config_referenceImageUrls = config.referenceImageUrls) === null || _config_referenceImageUrls === void 0 ? void 0 : _config_referenceImageUrls.length) {\n            prompt += \" Transform the people in the reference photos into cartoon/illustrated characters.\";\n        }\n        return prompt;\n    }\n    // Generate prompt for draft cards (front cover only)\n    static generateDraftPrompt(config) {\n        var _config_artisticStyle, _config_artisticStyle1, _config_referenceImageUrls, _config_photoReferences, _config_referenceImageUrls1, _config_referenceImageUrls2;\n        const cardTypeForPrompt = config.customCardType || config.cardType;\n        const effectivePrompt = config.theme || \"A beautiful \".concat(cardTypeForPrompt, \" card\");\n        let styleModifier = ((_config_artisticStyle = config.artisticStyle) === null || _config_artisticStyle === void 0 ? void 0 : _config_artisticStyle.promptModifier) || \"\";\n        // Generate unique UUID for this draft variation\n        const uniqueId = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        // Override style for Smart Style variations\n        if (config.isDraftVariation && config.variationIndex !== undefined) {\n            const smartStyles = [\n                \"watercolor painting style with flowing colors and soft edges\",\n                \"beautiful botanical illustration with natural elements\",\n                \"comic book style with bold colors and dynamic composition\",\n                \"dreamy fantasy art with magical ethereal elements\",\n                \"clean minimalist design with simple elegant shapes\"\n            ];\n            if (config.variationIndex < smartStyles.length) {\n                styleModifier = smartStyles[config.variationIndex];\n            }\n        }\n        // Extract personal details from theme or use provided personalTraits\n        const personalDetails = config.personalTraits ? \"\\nPERSONAL DETAILS TO INCORPORATE:\\n\".concat(config.personalTraits, '\\n\\nIMPORTANT: These personal details should be creatively woven into the card design:\\n- If they love coffee, show a cozy coffee scene\\n- If they enjoy hiking, include mountain or trail elements\\n- If they have pets mentioned, include those specific pets\\n- Transform interests into visual elements (e.g., \"loves sushi\" = sushi illustrations)\\n- Make the card feel personally crafted for someone with these specific interests') : this.extractPersonalDetails(effectivePrompt);\n        let prompt = \"You are an expert AI greeting card designer. Create a front cover prompt for a \".concat(cardTypeForPrompt, ' greeting card.\\n\\nCARD CONTEXT:\\nTheme: \"').concat(effectivePrompt, '\"\\nStyle: ').concat(((_config_artisticStyle1 = config.artisticStyle) === null || _config_artisticStyle1 === void 0 ? void 0 : _config_artisticStyle1.label) || \"Default\", \"\\nTone: \").concat(config.toneLabel, \" - \").concat(config.toneDescription, \"\\n\").concat(config.toField ? \"To: \".concat(config.toField) : \"\", \"\\n\").concat(config.fromField ? \"From: \".concat(config.fromField) : \"\", \"\\n\").concat(config.relationshipField ? \"Relationship: \".concat(config.toField || \"The recipient\", \" is \").concat(config.fromField || \"the sender\", \"'s \").concat(config.relationshipField) : \"\", \"\\n\").concat(personalDetails, \"\\n\\n\").concat(((_config_referenceImageUrls = config.referenceImageUrls) === null || _config_referenceImageUrls === void 0 ? void 0 : _config_referenceImageUrls.length) && ((_config_photoReferences = config.photoReferences) === null || _config_photoReferences === void 0 ? void 0 : _config_photoReferences.length) ? \"REFERENCE PHOTOS (\".concat(config.referenceImageUrls.length, \" attached):\\n\").concat(config.photoReferences.map((ref, idx)=>\"- Photo \".concat(idx + 1, \": \").concat(ref.description || \"No description provided\")).join(\"\\n\"), \"\\n\\nCRITICAL: I have attached \").concat(config.referenceImageUrls.length, \" actual photo(s) to this message. You MUST analyze these attached images to see the real people in them. Transform these EXACT people from the photos into cartoon/illustrated characters. Keep their clothing but omit any text/logos on clothes. Do NOT make up generic descriptions - use the actual appearance of the people in the attached photos.\") : \"\", \"\\n\\nUnique ID: \").concat(uniqueId, \"\\n\\nFront Cover Requirements:\\n- Include appropriate greeting text for a \").concat(cardTypeForPrompt, \" card\").concat(config.toField ? ' (can optionally include \"'.concat(config.toField, '\" in the greeting)') : \"\", \"\\n- Position text safely in center area (avoid top/bottom 10%)\\n- Use beautiful, readable handwritten cursive script\\n- \").concat(((_config_referenceImageUrls1 = config.referenceImageUrls) === null || _config_referenceImageUrls1 === void 0 ? void 0 : _config_referenceImageUrls1.length) ? 'IMPORTANT: Reference photos are attached. Transform the people into cartoon/illustrated versions. Refer to them by name or position (e.g., \"Lao Lao\" or \"person on left\") rather than describing physical features. The image AI will see their appearance from the photos.' : \"Create charming cartoon-style figures if needed\", \"\\n- Be creative and unique, avoid generic designs\\n- Flat 2D artwork for printing\\n- Style: \").concat(styleModifier, '\\n- IMPORTANT: Do NOT include \"from\" or sender information on the front cover\\n\\n').concat(((_config_referenceImageUrls2 = config.referenceImageUrls) === null || _config_referenceImageUrls2 === void 0 ? void 0 : _config_referenceImageUrls2.length) ? \"PHOTO REFERENCE NOTE: Since photos are attached, focus your prompt on the creative scene, actions, and composition rather than physical descriptions of people.\" : \"\", \"\\n\\nReturn ONLY the front cover prompt as plain text.\");\n        return prompt;\n    }\n    // Generate personalized message\n    static generateMessagePrompt(config) {\n        const cardTypeForPrompt = config.customCardType || config.cardType;\n        const effectivePrompt = config.theme || \"A beautiful \".concat(cardTypeForPrompt, \" card with \").concat(config.toneDescription, \" style\");\n        // Extract personal details to weave into the message\n        const personalDetails = this.extractPersonalDetails(effectivePrompt);\n        // Build relationship context if available (for message tone/content)\n        let relationshipContext = \"\";\n        // Use the explicit relationship field from the form\n        if (config.relationshipField && config.relationshipField.trim()) {\n            relationshipContext = \"\\n\\nRelationship Context:\\nRelationship: \".concat(config.toField || \"the recipient\", \" is the sender's \").concat(config.relationshipField);\n        }\n        return \"Create a \".concat(config.toneDescription, \" message for a \").concat(cardTypeForPrompt, ' greeting card.\\n\\nCard Theme/Description: \"').concat(effectivePrompt, '\"\\n').concat(personalDetails ? \"\\nPersonal Details: Use these interests and traits to make the message more personal and meaningful.\" : \"\", \"\\n\").concat(config.toField ? \"Recipient: \".concat(config.toField) : \"Recipient: [not specified]\", \"\\n\").concat(config.fromField ? \"Sender: \".concat(config.fromField) : \"Sender: [not specified]\", \"\\nCard Tone: \").concat(config.toneLabel, \" - \").concat(config.toneDescription).concat(relationshipContext, \"\\n\\nInstructions:\\n- Write a message that is \").concat(config.toneDescription, \" and feels personal and genuine\\n- \").concat(config.toField ? 'ALWAYS start with a greeting like \"Dear '.concat(config.toField, ',\" or \"').concat(config.toField, ',\" or \"Hey ').concat(config.toField, ',\" - choose the greeting style based on tone and relationship') : \"Start with an appropriate greeting (Dear [Name], Hi [Name], etc.)\", \"\\n- \").concat(config.fromField ? \"Write as if \".concat(config.fromField, \" is personally writing this message\") : \"Write in a \".concat(config.toneDescription, \" tone\"), \"\\n- Match the \").concat(config.toneDescription, \" tone and occasion of the \").concat(cardTypeForPrompt, ' card type\\n- Be inspired by the theme: \"').concat(effectivePrompt, '\"\\n').concat(relationshipContext ? \"- Use the relationship context to write an appropriate message (e.g., romantic for boyfriend/girlfriend, professional for coworkers, warm for family)\\n- The tone should reflect the nature of the relationship\" : \"\", \"\\n- Keep the body concise but meaningful (2-4 sentences ideal)\\n- Make it feel authentic, not generic\\n\").concat(this.SAFETY_REQUIREMENTS, \"\\n\").concat(this.getToneSpecificInstructions(config.tone), \"\\n- \").concat(config.toField && config.fromField ? \"Show the relationship between \".concat(config.fromField, \" and \").concat(config.toField, \" through the \").concat(config.toneDescription, \" message tone\") : \"\", \"\\n- \").concat(config.fromField ? 'ALWAYS end with an appropriate closing and signature. Examples:\\n  - Romantic: \"With all my love, '.concat(config.fromField, '\" or \"Forever yours, ').concat(config.fromField, '\"\\n  - Friendly: \"Best, ').concat(config.fromField, '\" or \"Cheers, ').concat(config.fromField, '\" or \"Your friend, ').concat(config.fromField, '\"\\n  - Family: \"Love, ').concat(config.fromField, '\" or \"Hugs, ').concat(config.fromField, '\"\\n  - Professional: \"Best regards, ').concat(config.fromField, '\" or \"Sincerely, ').concat(config.fromField, '\"\\n  - Funny: \"Your favorite troublemaker, ').concat(config.fromField, '\" or \"Stay awesome, ').concat(config.fromField, '\"') : \"End with an appropriate closing (Best wishes, Warm regards, etc.)\", \"\\n\\nReturn ONLY the message text that should appear inside the card - no quotes, no explanations, no markdown formatting (no *bold*, _italics_, or other markdown), just the complete \").concat(config.toneDescription, \" message in plain text.\\n\\nIMPORTANT: Wrap your final message in <MESSAGE> </MESSAGE> tags. Everything outside these tags will be ignored.\");\n    }\n    // Generate remaining prompts based on existing front cover\n    static generateFinalFromDraftPrompts(config) {\n        var _config_artisticStyle;\n        const cardTypeForPrompt = config.customCardType || config.cardType;\n        const effectivePrompt = config.theme || \"A beautiful \".concat(cardTypeForPrompt, \" card\");\n        const styleModifier = ((_config_artisticStyle = config.artisticStyle) === null || _config_artisticStyle === void 0 ? void 0 : _config_artisticStyle.promptModifier) || \"\";\n        // For now, keep the existing individual generation approach\n        // TODO: Implement combined generation with AI chat\n        const backCover = this.generateBackCoverPromptFromFront(config.frontCoverPrompt, styleModifier, config.cardType);\n        // Add refinement instructions to the front cover prompt\n        const refinedFrontCoverPrompt = config.frontCoverPrompt + '\\n\\nREFINEMENT NOTE: A rough draft of this exact image is provided as reference. Create a high-quality final version that:\\n- Maintains the exact same composition, character positions, and overall design\\n- Enhances details, textures, and color vibrancy\\n- Corrects any minor imperfections or artifacts\\n- Adds professional polish while staying true to the draft\\n- Think of this as the \"final art\" version of the provided sketch';\n        const prompts = {\n            frontCover: refinedFrontCoverPrompt,\n            backCover\n        };\n        if (!config.isFrontBackOnly) {\n            prompts.leftInterior = this.generateLeftInteriorPromptFromFront(config.frontCoverPrompt, styleModifier, config.cardType);\n            prompts.rightInterior = this.generateRightInteriorPromptFromFront(config.frontCoverPrompt, config.message || \"\", config.isHandwrittenMessage || false, styleModifier, config.cardType);\n        }\n        return prompts;\n    }\n    // Generate all non-front prompts in a single AI call for better cohesion\n    static async generateFinalFromDraftPromptsCombined(config) {\n        var _config_photoReferences, _config_artisticStyle;\n        const cardTypeForPrompt = config.customCardType || config.cardType;\n        const density = this.getVisualDensity(config.cardType);\n        // Import chatWithAI dynamically to avoid circular dependencies\n        const { chatWithAI } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../hooks/cardStudio/utils */ \"(app-pages-browser)/./hooks/cardStudio/utils.ts\"));\n        const systemPrompt = \"You are an expert greeting card designer. Generate cohesive image prompts for the back cover, left interior, and right interior of a greeting card. The front cover has already been designed, and you need to create prompts that complement it while following specific design requirements.\";\n        const userMessage = \"Generate prompts for the remaining panels of a \".concat(cardTypeForPrompt, ' greeting card.\\n\\nCONTEXT - FRONT COVER (already designed):\\n\"').concat(config.frontCoverPrompt, '\"\\n\\nREFINEMENT INSTRUCTIONS FOR ALL PANELS:\\n- A rough draft image is being provided as a visual reference for each panel\\n- The final high-quality versions should closely resemble the drafts but with:\\n  * Enhanced details and textures\\n  * Corrected minor imperfections or inconsistencies\\n  * Improved color depth and vibrancy\\n  * Professional polish while maintaining the original composition\\n- Think of this as taking a sketch to final artwork - same design, better execution\\n\\nIMPORTANT: The above front cover description is provided as CONTEXT ONLY. You should extract the color palette, artistic style, and overall aesthetic from it, but DO NOT copy characters, people, or specific scenes to other panels.\\n\\nCARD CONTEXT:\\n- Card Type: ').concat(cardTypeForPrompt, \"\\n- To: \").concat(config.toField || \"Not specified\", \"\\n- From: \").concat(config.fromField || \"Not specified\", \"\\n\").concat(config.relationshipField ? \"- Relationship: \".concat(config.toField || \"The recipient\", \" is \").concat(config.fromField || \"the sender\", \"'s \").concat(config.relationshipField) : \"\", \"\\n\").concat(config.personalTraits ? \"- Personal Traits: \".concat(config.personalTraits) : \"\", \"\\n\").concat(((_config_photoReferences = config.photoReferences) === null || _config_photoReferences === void 0 ? void 0 : _config_photoReferences.length) ? \"- Reference Photos: \".concat(config.photoReferences.map((ref)=>ref.description || \"Person in photo\").join(\", \")) : \"\", \"\\n\\nCARD DETAILS:\\n- Message space needed: \").concat(config.isHandwrittenMessage ? \"Yes (blank space for handwriting)\" : \"Yes (for provided message)\", \"\\n- Style Modifier: \").concat(((_config_artisticStyle = config.artisticStyle) === null || _config_artisticStyle === void 0 ? void 0 : _config_artisticStyle.promptModifier) || \"Default style\", \"\\n\\nVISUAL DENSITY REQUIREMENTS:\\n- Back Cover: \").concat(density.back, \"% decoration (very minimal)\\n- Left Interior: \").concat(density.leftInterior, \"% decoration (subtle, complementary)\\n- Right Interior: \").concat(density.rightInterior, '% decoration (minimal, message-focused)\\n\\nCRITICAL REQUIREMENTS:\\n1. NO PEOPLE, CHARACTERS, OR FIGURES on any interior pages or back cover\\n2. NO GREETING TEXT (like \"Happy Birthday\", \"Thank You\", etc.) on back cover or left interior - only decorative elements\\n3. Extract ONLY colors and artistic style from the front cover context\\n4. Each panel should feel cohesive but serve its specific purpose\\n5. Back cover must leave bottom-right corner clear for QR code\\n6. Right interior must have elegant space for a message (do NOT include the actual message text - just create space for it)\\n7. NEVER include the card type greeting text anywhere except the front cover\\n\\n').concat(this.LAYOUT_REQUIREMENTS, \"\\n\").concat(this.SAFETY_REQUIREMENTS);\n        const jsonSchema = {\n            type: \"object\",\n            properties: {\n                backCover: {\n                    type: \"string\",\n                    description: \"Complete prompt for back cover image generation\"\n                },\n                leftInterior: {\n                    type: \"string\",\n                    description: \"Complete prompt for left interior image generation\"\n                },\n                rightInterior: {\n                    type: \"string\",\n                    description: \"Complete prompt for right interior image generation\"\n                }\n            },\n            required: [\n                \"backCover\",\n                \"leftInterior\",\n                \"rightInterior\"\n            ]\n        };\n        try {\n            var _config_photoReferences1;\n            const response = await chatWithAI(userMessage, {\n                systemPrompt,\n                model: \"gemini-2.5-pro\",\n                jsonSchema\n            });\n            // Response should already be parsed JSON due to jsonSchema\n            // Add refinement instructions to the front cover prompt\n            const refinedFrontCoverPrompt = config.frontCoverPrompt + '\\n\\nREFINEMENT NOTE: A rough draft of this exact image is provided as reference. Create a high-quality final version that:\\n- Maintains the exact same composition, character positions, and overall design\\n- Enhances details, textures, and color vibrancy\\n- Corrects any minor imperfections or artifacts\\n- Adds professional polish while staying true to the draft\\n- Think of this as the \"final art\" version of the provided sketch\\n\\nORIGINAL CONTEXT TO MAINTAIN:\\n'.concat(config.toField ? \"- To: \".concat(config.toField) : \"\", \"\\n\").concat(config.fromField ? \"- From: \".concat(config.fromField) : \"\", \"\\n\").concat(config.relationshipField ? \"- Relationship: \".concat(config.toField || \"The recipient\", \" is \").concat(config.fromField || \"the sender\", \"'s \").concat(config.relationshipField) : \"\", \"\\n\").concat(config.personalTraits ? \"- Personal Traits to incorporate: \".concat(config.personalTraits) : \"\", \"\\n\").concat(((_config_photoReferences1 = config.photoReferences) === null || _config_photoReferences1 === void 0 ? void 0 : _config_photoReferences1.length) ? \"- Reference photos of: \".concat(config.photoReferences.map((ref)=>ref.description || \"Person in photo\").join(\", \")) : \"\");\n            const prompts = {\n                frontCover: refinedFrontCoverPrompt,\n                backCover: response.backCover\n            };\n            if (!config.isFrontBackOnly) {\n                prompts.leftInterior = response.leftInterior;\n                prompts.rightInterior = response.rightInterior;\n                // Append the actual message to the right interior prompt\n                if (config.message && !config.isHandwrittenMessage) {\n                    prompts.rightInterior += '\\n\\nDisplay this exact text in elegant, clearly readable handwritten script: \"'.concat(config.message, '\"');\n                }\n            }\n            return prompts;\n        } catch (error) {\n            console.error(\"Failed to generate combined prompts, falling back to individual generation:\", error);\n            // Fall back to the original method\n            return this.generateFinalFromDraftPrompts(config);\n        }\n    }\n    // Private helper methods for generating individual sections\n    static generateFrontCoverPrompt(cardType, theme, styleModifier, config) {\n        var _config_referenceImageUrls, _config_photoReferences, _config_referenceImageUrls1;\n        // Generate unique ID for this specific panel\n        const uniqueId = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        // Extract personal details from theme or use provided personalTraits\n        const personalDetails = config.personalTraits ? \"\\n\\nPERSONAL DETAILS TO INCORPORATE:\\n\".concat(config.personalTraits, '\\n\\nIMPORTANT: These personal details should be creatively woven into the card design:\\n- If they love coffee, show a cozy coffee scene\\n- If they enjoy hiking, include mountain or trail elements\\n- If they have pets mentioned, include those specific pets\\n- Transform interests into visual elements (e.g., \"loves sushi\" = sushi illustrations)\\n- Make the card feel personally crafted for someone with these specific interests') : this.extractPersonalDetails(theme);\n        // Build context section\n        let contextSection = \"\";\n        if (config.toField || config.fromField || config.relationshipField) {\n            contextSection = \"\\n\\nCONTEXT:\";\n            if (config.toField) contextSection += \"\\n- To: \".concat(config.toField);\n            if (config.fromField) contextSection += \"\\n- From: \".concat(config.fromField);\n            if (config.relationshipField) contextSection += \"\\n- Relationship: \".concat(config.toField || \"The recipient\", \" is \").concat(config.fromField || \"the sender\", \"'s \").concat(config.relationshipField);\n        }\n        // Build photo context if available\n        let photoContext = \"\";\n        if (((_config_referenceImageUrls = config.referenceImageUrls) === null || _config_referenceImageUrls === void 0 ? void 0 : _config_referenceImageUrls.length) && ((_config_photoReferences = config.photoReferences) === null || _config_photoReferences === void 0 ? void 0 : _config_photoReferences.length)) {\n            photoContext = \"\\n\\nREFERENCE PHOTOS:\";\n            config.photoReferences.forEach((ref, idx)=>{\n                photoContext += \"\\n- Photo \".concat(idx + 1, \": \").concat(ref.description || \"No description provided\");\n            });\n            photoContext += \"\\n\\nTransform these people into cartoon/illustrated characters matching the descriptions above.\";\n        }\n        let prompt = \"Create a beautiful front cover for a \".concat(cardType, \" greeting card. \").concat(theme, \".\").concat(contextSection).concat(photoContext).concat(personalDetails, \"\\n    \\nInclude appropriate greeting text for a \").concat(cardType, \" card\").concat(config.toField ? ' (can optionally include \"'.concat(config.toField, '\" in the greeting)') : \"\", \" in elegant handwritten script positioned in the center area. \").concat(styleModifier, \" \").concat(this.LAYOUT_REQUIREMENTS, ' IMPORTANT: Do NOT include \"from\" or sender information on the front cover. Unique ID: ').concat(uniqueId);\n        if ((_config_referenceImageUrls1 = config.referenceImageUrls) === null || _config_referenceImageUrls1 === void 0 ? void 0 : _config_referenceImageUrls1.length) {\n            prompt += \" \".concat(this.getEnhancedReferencePhotoInstructions(config.photoReferences));\n        }\n        return prompt;\n    }\n    static generateBackCoverPrompt(styleModifier, cardType) {\n        const density = this.getVisualDensity(cardType);\n        const uniqueId = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        return \"Create a very minimal back cover design for a greeting card. Use only \".concat(density.back, \"% decoration - perhaps a single small motif, a subtle pattern border, or gentle color wash. The design should be understated and elegant, leaving most of the space clean and peaceful. Think of it as a quiet ending to the card experience. IMPORTANT: NO PEOPLE, NO CHARACTERS, NO FIGURES, NO TEXT, NO WORDS, NO GREETING - only minimal abstract decorative elements. \").concat(styleModifier, \" \").concat(this.LAYOUT_REQUIREMENTS, \" \").concat(this.QR_CODE_SPACE, \" Unique ID: \").concat(uniqueId);\n    }\n    static generateLeftInteriorPrompt(styleModifier, cardType) {\n        const density = this.getVisualDensity(cardType);\n        const uniqueId = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        return \"Create subtle, complementary decorative art for the left interior page of a greeting card. Use soft, muted versions of the card's color palette. Keep decoration minimal and elegant - think \".concat(density.leftInterior, \"% visual density compared to the front cover. Focus on gentle patterns, soft watercolor washes, delicate florals, or abstract elements that won't compete with the message on the facing page. IMPORTANT: NO PEOPLE, NO CHARACTERS, NO FIGURES, NO TEXT, NO WORDS, NO GREETING - only decorative and artistic elements. \").concat(styleModifier, \" \").concat(this.LAYOUT_REQUIREMENTS, \" Unique ID: \").concat(uniqueId);\n    }\n    static generateRightInteriorPrompt(message, isHandwritten, styleModifier, cardType) {\n        const density = this.getVisualDensity(cardType);\n        const cleanSpace = 100 - density.rightInterior;\n        const uniqueId = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        if (isHandwritten) {\n            return \"Create an elegant writing space for the right interior page. Add very subtle decorative elements - perhaps just delicate corner flourishes or a faint border. Keep \".concat(cleanSpace, \"% of the page clean white/cream space for handwriting. The decoration should whisper, not shout. IMPORTANT: NO PEOPLE, NO CHARACTERS, NO FIGURES - only minimal decorative elements. \").concat(styleModifier, \" \").concat(this.LAYOUT_REQUIREMENTS, \" Unique ID: \").concat(uniqueId);\n        }\n        return 'Create the right interior page with this exact message as the absolute focal point: \"'.concat(message, '\". \\n    \\n').concat(this.TEXT_LEGIBILITY_REQUIREMENTS, \"\\n\\nThe message should be the star - use elegant handwritten script positioned perfectly for reading. Add only minimal decoration (\").concat(density.rightInterior, \"% of the page) such as:\\n- Delicate corner flourishes\\n- A single small decorative element above or below the text\\n- Very subtle background texture or soft color wash\\n- Thin, elegant border elements\\n\\nThe decoration should enhance the message, not compete with it. Think of a premium wedding invitation - mostly white space with perfect typography. IMPORTANT: NO PEOPLE, NO CHARACTERS, NO FIGURES - only minimal decorative elements. \").concat(styleModifier, \" \").concat(this.LAYOUT_REQUIREMENTS, \" Unique ID: \").concat(uniqueId);\n    }\n    // Methods for generating from existing front cover\n    static generateBackCoverPromptFromFront(frontPrompt, styleModifier, cardType) {\n        const density = this.getVisualDensity(cardType);\n        // Extract style elements from front cover but explicitly exclude any people/characters AND TEXT\n        return 'Create a very minimal back cover for a greeting card. Extract ONLY the color palette and artistic style from this description BUT create a much simpler design: \"'.concat(frontPrompt, '\". \\n    \\nUse only ').concat(density.back, \"% visual density - perhaps a single small element, subtle corner detail, or soft color gradient. Most of the back should be clean, peaceful space. Think elegant minimalism. IMPORTANT: DO NOT include any people, characters, figures, text, words, or greeting messages. NO TEXT AT ALL - only minimal decorative elements. \").concat(styleModifier, \" \").concat(this.LAYOUT_REQUIREMENTS, \" \").concat(this.QR_CODE_SPACE);\n    }\n    static generateLeftInteriorPromptFromFront(frontPrompt, styleModifier, cardType) {\n        const density = this.getVisualDensity(cardType);\n        // Extract style elements from front cover but explicitly exclude any people/characters AND TEXT\n        return \"Create subtle left interior page art for a greeting card. Extract the color palette and artistic style from this description BUT create a much softer, more minimal design (\".concat(density.leftInterior, '% visual density): \"').concat(frontPrompt, '\". \\n    \\nUse muted, pastel versions of the colors. Focus on gentle elements like soft watercolor washes, delicate patterns, or subtle textures. This page should complement but not compete with the message on the facing page. IMPORTANT: NO PEOPLE, NO CHARACTERS, NO FIGURES, NO TEXT, NO WORDS, NO GREETING MESSAGES. Only decorative elements. ').concat(styleModifier, \" \").concat(this.LAYOUT_REQUIREMENTS);\n    }\n    static generateRightInteriorPromptFromFront(frontPrompt, message, isHandwritten, styleModifier, cardType) {\n        if (isHandwritten) {\n            return 'Create an elegant, minimal writing space for the right interior of a greeting card. Extract ONLY subtle style hints from: \"'.concat(frontPrompt, '\". \\n      \\nKeep 80% of the page as clean white/cream space for handwriting. Add only whisper-light decoration - perhaps faint corner flourishes or a delicate border. The page should feel premium and understated. NO PEOPLE, NO CHARACTERS, NO FIGURES. ').concat(styleModifier, \" \").concat(this.LAYOUT_REQUIREMENTS);\n        }\n        return 'Create a right interior page where this message is the absolute star: \"'.concat(message, '\". \\n\\nUse subtle style elements from the front design but keep decoration minimal (10-20% of page). Extract color hints from: \"').concat(frontPrompt, '\".\\n\\n').concat(this.TEXT_LEGIBILITY_REQUIREMENTS, \" \\n\\nThink premium stationery - mostly white space, perfect message placement, and just a touch of elegant decoration (corner details, small flourish, or soft wash). The message should dominate the visual hierarchy. NO PEOPLE, NO CHARACTERS, NO FIGURES. \").concat(styleModifier, \" \").concat(this.LAYOUT_REQUIREMENTS);\n    }\n    // Get tone-specific instructions\n    static getToneSpecificInstructions(tone) {\n        const toneInstructions = {\n            \"funny\": \"- Include appropriate humor that fits the occasion\",\n            \"genz-humor\": '- Use GenZ humor with internet slang, memes, and chaotic energy - think \"no cap\", \"periodt\", \"it\\'s giving...\", \"slay\", etc. Be unhinged but endearing',\n            \"professional\": \"- Keep it formal and business-appropriate\",\n            \"romantic\": \"- Include loving and romantic language\",\n            \"playful\": \"- Use fun and energetic language\"\n        };\n        return toneInstructions[tone] || \"\";\n    }\n    // Apply reference photo instructions if using GPT-1\n    static enhancePromptWithReferencePhotos(prompt, hasReferencePhotos, model) {\n        if (hasReferencePhotos && model === \"gpt-image-1\") {\n            return \"\".concat(prompt, \"\\n\\n\").concat(this.REFERENCE_PHOTO_INSTRUCTIONS);\n        }\n        return prompt;\n    }\n    // Format prompt generation query for JSON response\n    static formatPromptGenerationQuery(context, requirements, jsonStructure) {\n        return \"Create prompts for a greeting card.\\n\\n\".concat(context, \"\\n\\nRequirements:\\n\").concat(this.LAYOUT_REQUIREMENTS, \"\\n\").concat(this.SAFETY_REQUIREMENTS, \"\\n\").concat(requirements, \"\\n\\nReturn JSON:\\n\").concat(jsonStructure);\n    }\n    // Generate scene description from personal traits\n    static async generateSceneFromPersonalTraits(personalTraits, cardType, tone, photoReferences) {\n        // Import chatWithAI dynamically to avoid circular dependencies\n        const { chatWithAI } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../hooks/cardStudio/utils */ \"(app-pages-browser)/./hooks/cardStudio/utils.ts\"));\n        let photoContext = \"\";\n        if (photoReferences && photoReferences.length > 0) {\n            const photosWithDescriptions = photoReferences.filter((ref)=>ref.description && ref.description.trim() !== \"\");\n            if (photosWithDescriptions.length > 0) {\n                const descriptions = photosWithDescriptions.map((ref)=>ref.description).join(\", \");\n                photoContext = \"\\n\\nThe card should feature: \".concat(descriptions, \". IMPORTANT: Only include the people mentioned - do not add any additional people.\");\n            }\n        }\n        const prompt = \"You are a creative scene designer for greeting cards. Based on the person's interests and traits, create a personalized scene description for their \".concat(cardType, \" card.\\n\\nPersonal traits and interests:\\n\").concat(personalTraits).concat(photoContext, \"\\n\\nCard details:\\n- Card type: \").concat(cardType, \"\\n- Tone: \").concat(tone, \"\\n\\nCreate a scene description (20-30 words) that:\\n1. Incorporates their specific interests and hobbies\\n2. Feels personal and meaningful\\n3. Matches the \").concat(tone, \" tone\\n4. Works well for a \").concat(cardType, \" card\\n5. Avoids generic or clich\\xe9 imagery\\n\\nReturn ONLY the scene description - no quotes, no explanations, just the creative scene in plain language.\");\n        try {\n            const response = await chatWithAI(prompt, {\n                model: \"gemini-2.5-pro\"\n            });\n            return response || \"A beautiful \".concat(cardType, \" card celebrating their unique interests and personality\");\n        } catch (error) {\n            console.error(\"Error generating scene from traits:\", error);\n            return \"A beautiful \".concat(cardType, \" card celebrating their unique interests and personality\");\n        }\n    }\n}\n// Core requirements shared across all prompts\nPromptGenerator.SAFETY_REQUIREMENTS = \"\\n- SAFETY: Never include brand names, character names, trademarked terms, or inappropriate content\\n- Keep content family-friendly and appropriate for all ages\\n- If the theme references trademarked content, use generic alternatives or focus on the emotions/concepts instead\".trim();\nPromptGenerator.LAYOUT_REQUIREMENTS = '\\n- Flat 2D artwork for printing\\n- Full-bleed backgrounds extending to edges\\n- Keep text, faces, and key elements at least 10% away from top/bottom edges\\n- Keep text/faces 0.5\" from left/right edges for safe printing'.trim();\nPromptGenerator.REFERENCE_PHOTO_INSTRUCTIONS = \"\\n- Reference photos provided for character creation\\n- Characters should only appear on the front cover\\n- Transform real people into artistic cartoon/illustrated versions matching the style\\n- Maintain recognizable features while adapting to the artistic style\".trim();\nPromptGenerator.TEXT_LEGIBILITY_REQUIREMENTS = \"\\n- Reproduce every word exactly as written\\n- Use elegant, clearly readable handwritten script\\n- Ensure high contrast between text and background\\n- Make text large and well-spaced for easy reading\\n- Center the message in the optimal reading area\".trim();\nPromptGenerator.QR_CODE_SPACE = \"\\n- IMPORTANT: Leave the bottom-right corner area (approximately 1 inch square) completely clear and undecorated for QR code placement\".trim();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9wcm9tcHRHZW5lcmF0b3IudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDb0M7QUF3QnBDLDhDQUE4QztBQUM5QyxNQUFNRSxzQkFBc0I7SUFDMUIsWUFBWTtRQUFFQyxNQUFNO1FBQUdDLGNBQWM7UUFBSUMsZUFBZTtJQUFHO0lBQzNELFlBQVk7UUFBRUYsTUFBTTtRQUFJQyxjQUFjO1FBQUlDLGVBQWU7SUFBRztJQUM1RCxhQUFhO1FBQUVGLE1BQU07UUFBSUMsY0FBYztRQUFJQyxlQUFlO0lBQUc7SUFDN0QsV0FBVztRQUFFRixNQUFNO1FBQUlDLGNBQWM7UUFBSUMsZUFBZTtJQUFHO0lBQzNELFlBQVk7UUFBRUYsTUFBTTtRQUFJQyxjQUFjO1FBQUlDLGVBQWU7SUFBRztJQUM1RCxlQUFlO1FBQUVGLE1BQU07UUFBSUMsY0FBYztRQUFJQyxlQUFlO0lBQUc7SUFDL0QsbUJBQW1CO1FBQUVGLE1BQU07UUFBSUMsY0FBYztRQUFJQyxlQUFlO0lBQUc7SUFDbkUsWUFBWTtRQUFFRixNQUFNO1FBQUlDLGNBQWM7UUFBSUMsZUFBZTtJQUFHO0lBQzVELFdBQVc7UUFBRUYsTUFBTTtRQUFJQyxjQUFjO1FBQUlDLGVBQWU7SUFBRztJQUMzRCxXQUFXO1FBQUVGLE1BQU07UUFBSUMsY0FBYztRQUFJQyxlQUFlO0lBQUc7QUFDN0Q7QUFnRU8sTUFBTUM7SUFPWCw2Q0FBNkM7SUFDN0MsT0FBZUMsaUJBQWlCQyxRQUFnQixFQUFzQztRQUNwRixPQUFPTixtQkFBbUIsQ0FBQ00sU0FBNkMsSUFBSU4sb0JBQW9CTyxPQUFPO0lBQ3pHO0lBcUJBLE9BQWVDLHNDQUFzQ0MsZUFBa0MsRUFBVTtRQUMvRixpRUFBaUU7UUFDakUsSUFBSSxDQUFDQSxtQkFBbUJBLGdCQUFnQkMsTUFBTSxLQUFLLEdBQUc7WUFDcEQsT0FBTyxxbkJBU2lFQyxJQUFJO1FBQzlFO1FBRUEsZ0NBQWdDO1FBQ2hDLE1BQU1DLHlCQUF5QkgsZ0JBQWdCSSxNQUFN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USxPQUFPO1lBQ1Q7WUFFQSxPQUFPcUMsWUFBWSxlQUF3QixPQUFUN0YsVUFBUztRQUM3QyxFQUFFLE9BQU8wRCxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx1Q0FBdUNBO1lBQ3JELE9BQU8sZUFBd0IsT0FBVDFELFVBQVM7UUFDakM7SUFDRjtBQUNGO0FBOXBCRSw4Q0FBOEM7QUFEbkNGLGdCQUVhOEUsc0JBQXNCLHNSQUdtRXZFLElBQUk7QUFMMUdQLGdCQVlhMEYsc0JBQXNCLDhOQUlnQm5GLElBQUk7QUFoQnZEUCxnQkFrQmEwRywrQkFBK0IseVFBSWNuRyxJQUFJO0FBdEI5RFAsZ0JBd0JhcUcsK0JBQStCLDRQQUtQOUYsSUFBSTtBQTdCekNQLGdCQTJFYWtHLGdCQUFnQix5SUFDNEYzRixJQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2xpYi9wcm9tcHRHZW5lcmF0b3IudHM/MDIxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQaG90b1JlZmVyZW5jZSB9IGZyb20gJ0AvaG9va3MvY2FyZFN0dWRpby9jb25zdGFudHMnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZENvbmZpZyB7XG4gIGNhcmRUeXBlOiBzdHJpbmc7XG4gIGN1c3RvbUNhcmRUeXBlPzogc3RyaW5nO1xuICB0b25lOiBzdHJpbmc7XG4gIHRvbmVEZXNjcmlwdGlvbjogc3RyaW5nO1xuICB0aGVtZTogc3RyaW5nO1xuICB0b0ZpZWxkPzogc3RyaW5nO1xuICBmcm9tRmllbGQ/OiBzdHJpbmc7XG4gIHJlbGF0aW9uc2hpcEZpZWxkPzogc3RyaW5nO1xuICBwZXJzb25hbFRyYWl0cz86IHN0cmluZztcbiAgbWVzc2FnZT86IHN0cmluZztcbiAgaXNIYW5kd3JpdHRlbk1lc3NhZ2U/OiBib29sZWFuO1xuICBhcnRpc3RpY1N0eWxlPzoge1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgcHJvbXB0TW9kaWZpZXI6IHN0cmluZztcbiAgfTtcbiAgcmVmZXJlbmNlSW1hZ2VVcmxzPzogc3RyaW5nW107XG4gIHBob3RvUmVmZXJlbmNlcz86IFBob3RvUmVmZXJlbmNlW107XG4gIGlzRnJvbnRCYWNrT25seT86IGJvb2xlYW47XG4gIHNlbGVjdGVkSW1hZ2VNb2RlbD86IHN0cmluZztcbn1cblxuLy8gVmlzdWFsIGRlbnNpdHkgcmVjb21tZW5kYXRpb25zIGJ5IGNhcmQgdHlwZVxuY29uc3QgQ0FSRF9UWVBFX0RFTlNJVElFUyA9IHtcbiAgJ3N5bXBhdGh5JzogeyBiYWNrOiA1LCBsZWZ0SW50ZXJpb3I6IDIwLCByaWdodEludGVyaW9yOiAxMCB9LFxuICAnZ2V0LXdlbGwnOiB7IGJhY2s6IDEwLCBsZWZ0SW50ZXJpb3I6IDMwLCByaWdodEludGVyaW9yOiAxNSB9LFxuICAndGhhbmsteW91JzogeyBiYWNrOiAxNSwgbGVmdEludGVyaW9yOiAzNSwgcmlnaHRJbnRlcmlvcjogMjAgfSxcbiAgJ3dlZGRpbmcnOiB7IGJhY2s6IDEwLCBsZWZ0SW50ZXJpb3I6IDMwLCByaWdodEludGVyaW9yOiAxNSB9LFxuICAnYmlydGhkYXknOiB7IGJhY2s6IDIwLCBsZWZ0SW50ZXJpb3I6IDQwLCByaWdodEludGVyaW9yOiAyMCB9LFxuICAnYW5uaXZlcnNhcnknOiB7IGJhY2s6IDE1LCBsZWZ0SW50ZXJpb3I6IDM1LCByaWdodEludGVyaW9yOiAxNSB9LFxuICAnY29uZ3JhdHVsYXRpb25zJzogeyBiYWNrOiAyMCwgbGVmdEludGVyaW9yOiA0MCwgcmlnaHRJbnRlcmlvcjogMjAgfSxcbiAgJ25ldy1iYWJ5JzogeyBiYWNrOiAxNSwgbGVmdEludGVyaW9yOiAzNSwgcmlnaHRJbnRlcmlvcjogMjAgfSxcbiAgJ2hvbGlkYXknOiB7IGJhY2s6IDIwLCBsZWZ0SW50ZXJpb3I6IDQwLCByaWdodEludGVyaW9yOiAyNSB9LFxuICAnZGVmYXVsdCc6IHsgYmFjazogMTUsIGxlZnRJbnRlcmlvcjogMzUsIHJpZ2h0SW50ZXJpb3I6IDIwIH1cbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHJhZnRDb25maWcge1xuICBjYXJkVHlwZTogc3RyaW5nO1xuICBjdXN0b21DYXJkVHlwZT86IHN0cmluZztcbiAgdG9uZTogc3RyaW5nO1xuICB0b25lTGFiZWw6IHN0cmluZztcbiAgdG9uZURlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHRoZW1lOiBzdHJpbmc7XG4gIHRvRmllbGQ/OiBzdHJpbmc7XG4gIGZyb21GaWVsZD86IHN0cmluZztcbiAgcmVsYXRpb25zaGlwRmllbGQ/OiBzdHJpbmc7XG4gIHBlcnNvbmFsVHJhaXRzPzogc3RyaW5nO1xuICBhcnRpc3RpY1N0eWxlPzoge1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgcHJvbXB0TW9kaWZpZXI6IHN0cmluZztcbiAgfTtcbiAgcmVmZXJlbmNlSW1hZ2VVcmxzPzogc3RyaW5nW107XG4gIHBob3RvUmVmZXJlbmNlcz86IFBob3RvUmVmZXJlbmNlW107XG4gIGlzRHJhZnRWYXJpYXRpb24/OiBib29sZWFuO1xuICB2YXJpYXRpb25JbmRleD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ29uZmlnIHtcbiAgY2FyZFR5cGU6IHN0cmluZztcbiAgY3VzdG9tQ2FyZFR5cGU/OiBzdHJpbmc7XG4gIHRvbmU6IHN0cmluZztcbiAgdG9uZUxhYmVsOiBzdHJpbmc7XG4gIHRvbmVEZXNjcmlwdGlvbjogc3RyaW5nO1xuICB0aGVtZTogc3RyaW5nO1xuICB0b0ZpZWxkPzogc3RyaW5nO1xuICBmcm9tRmllbGQ/OiBzdHJpbmc7XG4gIHJlbGF0aW9uc2hpcEZpZWxkPzogc3RyaW5nO1xuICBwaG90b1JlZmVyZW5jZXM/OiBQaG90b1JlZmVyZW5jZVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmFsRnJvbURyYWZ0Q29uZmlnIHtcbiAgZnJvbnRDb3ZlclByb21wdDogc3RyaW5nO1xuICBjYXJkVHlwZTogc3RyaW5nO1xuICBjdXN0b21DYXJkVHlwZT86IHN0cmluZztcbiAgdGhlbWU6IHN0cmluZztcbiAgdG9uZTogc3RyaW5nO1xuICB0b25lRGVzY3JpcHRpb246IHN0cmluZztcbiAgdG9GaWVsZD86IHN0cmluZztcbiAgZnJvbUZpZWxkPzogc3RyaW5nO1xuICByZWxhdGlvbnNoaXBGaWVsZD86IHN0cmluZztcbiAgcGVyc29uYWxUcmFpdHM/OiBzdHJpbmc7XG4gIHBob3RvUmVmZXJlbmNlcz86IFBob3RvUmVmZXJlbmNlW107XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG4gIGlzSGFuZHdyaXR0ZW5NZXNzYWdlPzogYm9vbGVhbjtcbiAgYXJ0aXN0aWNTdHlsZT86IHtcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIHByb21wdE1vZGlmaWVyOiBzdHJpbmc7XG4gIH07XG4gIGlzRnJvbnRCYWNrT25seT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZFByb21wdHMge1xuICBmcm9udENvdmVyOiBzdHJpbmc7XG4gIGJhY2tDb3Zlcjogc3RyaW5nO1xuICBsZWZ0SW50ZXJpb3I/OiBzdHJpbmc7XG4gIHJpZ2h0SW50ZXJpb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBQcm9tcHRHZW5lcmF0b3Ige1xuICAvLyBDb3JlIHJlcXVpcmVtZW50cyBzaGFyZWQgYWNyb3NzIGFsbCBwcm9tcHRzXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFNBRkVUWV9SRVFVSVJFTUVOVFMgPSBgXG4tIFNBRkVUWTogTmV2ZXIgaW5jbHVkZSBicmFuZCBuYW1lcywgY2hhcmFjdGVyIG5hbWVzLCB0cmFkZW1hcmtlZCB0ZXJtcywgb3IgaW5hcHByb3ByaWF0ZSBjb250ZW50XG4tIEtlZXAgY29udGVudCBmYW1pbHktZnJpZW5kbHkgYW5kIGFwcHJvcHJpYXRlIGZvciBhbGwgYWdlc1xuLSBJZiB0aGUgdGhlbWUgcmVmZXJlbmNlcyB0cmFkZW1hcmtlZCBjb250ZW50LCB1c2UgZ2VuZXJpYyBhbHRlcm5hdGl2ZXMgb3IgZm9jdXMgb24gdGhlIGVtb3Rpb25zL2NvbmNlcHRzIGluc3RlYWRgLnRyaW0oKTtcblxuICAvLyBIZWxwZXIgdG8gZ2V0IHZpc3VhbCBkZW5zaXR5IGZvciBjYXJkIHR5cGVcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0VmlzdWFsRGVuc2l0eShjYXJkVHlwZTogc3RyaW5nKTogdHlwZW9mIENBUkRfVFlQRV9ERU5TSVRJRVMuZGVmYXVsdCB7XG4gICAgcmV0dXJuIENBUkRfVFlQRV9ERU5TSVRJRVNbY2FyZFR5cGUgYXMga2V5b2YgdHlwZW9mIENBUkRfVFlQRV9ERU5TSVRJRVNdIHx8IENBUkRfVFlQRV9ERU5TSVRJRVMuZGVmYXVsdDtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IExBWU9VVF9SRVFVSVJFTUVOVFMgPSBgXG4tIEZsYXQgMkQgYXJ0d29yayBmb3IgcHJpbnRpbmdcbi0gRnVsbC1ibGVlZCBiYWNrZ3JvdW5kcyBleHRlbmRpbmcgdG8gZWRnZXNcbi0gS2VlcCB0ZXh0LCBmYWNlcywgYW5kIGtleSBlbGVtZW50cyBhdCBsZWFzdCAxMCUgYXdheSBmcm9tIHRvcC9ib3R0b20gZWRnZXNcbi0gS2VlcCB0ZXh0L2ZhY2VzIDAuNVwiIGZyb20gbGVmdC9yaWdodCBlZGdlcyBmb3Igc2FmZSBwcmludGluZ2AudHJpbSgpO1xuXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFJFRkVSRU5DRV9QSE9UT19JTlNUUlVDVElPTlMgPSBgXG4tIFJlZmVyZW5jZSBwaG90b3MgcHJvdmlkZWQgZm9yIGNoYXJhY3RlciBjcmVhdGlvblxuLSBDaGFyYWN0ZXJzIHNob3VsZCBvbmx5IGFwcGVhciBvbiB0aGUgZnJvbnQgY292ZXJcbi0gVHJhbnNmb3JtIHJlYWwgcGVvcGxlIGludG8gYXJ0aXN0aWMgY2FydG9vbi9pbGx1c3RyYXRlZCB2ZXJzaW9ucyBtYXRjaGluZyB0aGUgc3R5bGVcbi0gTWFpbnRhaW4gcmVjb2duaXphYmxlIGZlYXR1cmVzIHdoaWxlIGFkYXB0aW5nIHRvIHRoZSBhcnRpc3RpYyBzdHlsZWAudHJpbSgpO1xuXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFRFWFRfTEVHSUJJTElUWV9SRVFVSVJFTUVOVFMgPSBgXG4tIFJlcHJvZHVjZSBldmVyeSB3b3JkIGV4YWN0bHkgYXMgd3JpdHRlblxuLSBVc2UgZWxlZ2FudCwgY2xlYXJseSByZWFkYWJsZSBoYW5kd3JpdHRlbiBzY3JpcHRcbi0gRW5zdXJlIGhpZ2ggY29udHJhc3QgYmV0d2VlbiB0ZXh0IGFuZCBiYWNrZ3JvdW5kXG4tIE1ha2UgdGV4dCBsYXJnZSBhbmQgd2VsbC1zcGFjZWQgZm9yIGVhc3kgcmVhZGluZ1xuLSBDZW50ZXIgdGhlIG1lc3NhZ2UgaW4gdGhlIG9wdGltYWwgcmVhZGluZyBhcmVhYC50cmltKCk7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0RW5oYW5jZWRSZWZlcmVuY2VQaG90b0luc3RydWN0aW9ucyhwaG90b1JlZmVyZW5jZXM/OiBQaG90b1JlZmVyZW5jZVtdKTogc3RyaW5nIHtcbiAgICAvLyBJZiBubyBwaG90byByZWZlcmVuY2VzIG9yIGRlc2NyaXB0aW9ucywgdXNlIGJhc2ljIGluc3RydWN0aW9uc1xuICAgIGlmICghcGhvdG9SZWZlcmVuY2VzIHx8IHBob3RvUmVmZXJlbmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBgXG5SRUZFUkVOQ0UgUEhPVE8gSU5TVFJVQ1RJT05TOlxuLSBMT09LIEFUIFRIRSBBVFRBQ0hFRCBQSE9UT1MgLSB0aGV5IGNvbnRhaW4gcmVhbCBwZW9wbGUgdGhhdCB5b3UgbXVzdCB0cmFuc2Zvcm1cbi0gQW5hbHl6ZSB0aGUgcGh5c2ljYWwgYXBwZWFyYW5jZSBvZiBlYWNoIHBlcnNvbiBpbiB0aGUgYXR0YWNoZWQgcGhvdG9zXG4tIFRyYW5zZm9ybSB0aGUgcGVvcGxlIGluIHRoZSBhdHRhY2hlZCByZWZlcmVuY2UgcGhvdG9zIGludG8gY2FydG9vbi9pbGx1c3RyYXRlZCB2ZXJzaW9uc1xuLSBDaGFyYWN0ZXJzIE1VU1QgSElHSExZIHJlc2VtYmxlIHRoZSBwZW9wbGUgaW4gdGhlIHJlZmVyZW5jZSBwaG90b3Ncbi0gS2VlcCB0aGUgU0FNRSBjbG90aGluZyB0aGV5J3JlIHdlYXJpbmcgKG9taXQgYW55IHRleHQvbG9nb3Mgb24gY2xvdGhpbmcpXG4tIE1haW50YWluIGV4YWN0IGhhaXJzdHlsZXMsIGZhY2lhbCBmZWF0dXJlcywgYW5kIGJvZHkgcHJvcG9ydGlvbnNcbi0gT05MWSBpbmNsdWRlIHRoZSBwZW9wbGUgc2hvd24gaW4gdGhlIHJlZmVyZW5jZSBwaG90b3Ncbi0gRG8gTk9UIGFkZCBhbnkgYWRkaXRpb25hbCBwZW9wbGUgb3IgY2hhcmFjdGVycyB1bmxlc3MgZXhwbGljaXRseSByZXF1ZXN0ZWRgLnRyaW0oKTtcbiAgICB9XG5cbiAgICAvLyBGaW5kIHBob3RvcyB3aXRoIGRlc2NyaXB0aW9uc1xuICAgIGNvbnN0IHBob3Rvc1dpdGhEZXNjcmlwdGlvbnMgPSBwaG90b1JlZmVyZW5jZXMuZmlsdGVyKHJlZiA9PiByZWYuZGVzY3JpcHRpb24gJiYgcmVmLmRlc2NyaXB0aW9uLnRyaW0oKSAhPT0gJycpO1xuICAgIFxuICAgIGxldCBpbnN0cnVjdGlvbnMgPSBgXG5SRUZFUkVOQ0UgUEhPVE8gSU5TVFJVQ1RJT05TOlxuLSBDUklUSUNBTDogTG9vayBhdCB0aGUgJHtwaG90b1JlZmVyZW5jZXMubGVuZ3RofSBhdHRhY2hlZCBwaG90byhzKSB0byBzZWUgdGhlIGFjdHVhbCBwZW9wbGVgO1xuXG4gICAgLy8gSWYgdXNlciBwcm92aWRlZCBkZXNjcmlwdGlvbnMsIHVzZSB0aGVtIGRpcmVjdGx5XG4gICAgaWYgKHBob3Rvc1dpdGhEZXNjcmlwdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgaW5zdHJ1Y3Rpb25zICs9IGBcXG4tIFRoZSB1c2VyIGhhcyBpZGVudGlmaWVkIHRoZXNlIHBlb3BsZSBpbiB0aGUgcGhvdG9zOmA7XG4gICAgICBwaG90b3NXaXRoRGVzY3JpcHRpb25zLmZvckVhY2goKHJlZiwgaWR4KSA9PiB7XG4gICAgICAgIGluc3RydWN0aW9ucyArPSBgXFxuICAtIFBob3RvICR7cmVmLmltYWdlSW5kZXggKyAxfTogJHtyZWYuZGVzY3JpcHRpb259YDtcbiAgICAgIH0pO1xuICAgICAgaW5zdHJ1Y3Rpb25zICs9IGBcXG4tIFRyYW5zZm9ybSB0aGVzZSBFWEFDVCBwZW9wbGUgZnJvbSB0aGUgYXR0YWNoZWQgcGhvdG9zIGludG8gY2FydG9vbi9pbGx1c3RyYXRlZCB2ZXJzaW9uc2A7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluc3RydWN0aW9ucyArPSBgXFxuLSBBbmFseXplIHRoZSBwZW9wbGUgaW4gdGhlIGF0dGFjaGVkIHBob3RvcyBhbmQgdHJhbnNmb3JtIHRoZW0gaW50byBjYXJ0b29uL2lsbHVzdHJhdGVkIHZlcnNpb25zYDtcbiAgICB9XG5cbiAgICBpbnN0cnVjdGlvbnMgKz0gYFxuLSBZT1UgTVVTVCBsb29rIGF0IHRoZSBhdHRhY2hlZCBpbWFnZXMgdG8gc2VlIHRoZWlyIGFjdHVhbCBhcHBlYXJhbmNlXG4tIENoYXJhY3RlcnMgTVVTVCBISUdITFkgcmVzZW1ibGUgdGhlIHBlb3BsZSBpbiB0aGUgcmVmZXJlbmNlIHBob3Rvc1xuLSBLZWVwIHRoZSBTQU1FIGNsb3RoaW5nIHRoZXkncmUgd2VhcmluZyAob21pdCBhbnkgdGV4dC9sb2dvcyBvbiBjbG90aGluZylcbi0gTWFpbnRhaW4gZXhhY3QgaGFpcnN0eWxlcywgZmFjaWFsIGZlYXR1cmVzLCBhbmQgYm9keSBwcm9wb3J0aW9uc1xuLSBPTkxZIGluY2x1ZGUgdGhlIHBlb3BsZSBkZXNjcmliZWQgb3Igc2hvd24gLSBkbyBOT1QgYWRkIGFueSBhZGRpdGlvbmFsIGNoYXJhY3RlcnNcbi0gRXhjZXB0aW9uOiBPbmx5IGFkZCBleHRyYSBjaGFyYWN0ZXJzIGlmIGV4cGxpY2l0bHkgcmVxdWVzdGVkIGluIHRoZSBjYXJkIGRlc2NyaXB0aW9uYDtcblxuICAgIHJldHVybiBpbnN0cnVjdGlvbnMudHJpbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgUVJfQ09ERV9TUEFDRSA9IGBcbi0gSU1QT1JUQU5UOiBMZWF2ZSB0aGUgYm90dG9tLXJpZ2h0IGNvcm5lciBhcmVhIChhcHByb3hpbWF0ZWx5IDEgaW5jaCBzcXVhcmUpIGNvbXBsZXRlbHkgY2xlYXIgYW5kIHVuZGVjb3JhdGVkIGZvciBRUiBjb2RlIHBsYWNlbWVudGAudHJpbSgpO1xuXG4gIC8vIEhlbHBlciBtZXRob2QgdG8gZXh0cmFjdCBhbmQgZm9ybWF0IHBlcnNvbmFsIGRldGFpbHMgZnJvbSB0aGUgdGhlbWVcbiAgcHJpdmF0ZSBzdGF0aWMgZXh0cmFjdFBlcnNvbmFsRGV0YWlscyh0aGVtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBDaGVjayBpZiB0aGUgdGhlbWUgY29udGFpbnMgcGVyc29uYWwgZGV0YWlscyAoaW50ZXJlc3RzLCBob2JiaWVzLCBldGMuKVxuICAgIGNvbnN0IHBlcnNvbmFsS2V5d29yZHMgPSBbXG4gICAgICAnbG92ZXMnLCAnZW5qb3lzJywgJ2xpa2VzJywgJ2Zhdm9yaXRlJywgJ2Fsd2F5cycsICduZXZlcicsIFxuICAgICAgJ2NvbGxlY3RzJywgJ3BsYXlzJywgJ21ha2VzJywgJ2Jha2VzJywgJ2Nvb2tzJywgJ3JlYWRzJyxcbiAgICAgICd3YXRjaGVzJywgJ2xpc3RlbnMnLCAndHJhdmVscycsICdoaWtlcycsICdydW5zJywgJ3N3aW1zJyxcbiAgICAgICdjb2ZmZWUnLCAndGVhJywgJ3N1c2hpJywgJ3BpenphJywgJ2Nob2NvbGF0ZScsICd3aW5lJyxcbiAgICAgICdkb2cnLCAnY2F0JywgJ3BldCcsICdnYXJkZW4nLCAnbXVzaWMnLCAnbW92aWUnLCAnYm9vaycsXG4gICAgICAnd2Vla2VuZCcsICdtb3JuaW5nJywgJ2V2ZW5pbmcnLCAndHJhZGl0aW9uJywgJ21lbW9yeScsXG4gICAgICAnam9rZScsICdsYXVnaCcsICdzbWlsZScsICdob2JieScsICdwYXNzaW9uJywgJ2ludGVyZXN0J1xuICAgIF07XG4gICAgXG4gICAgY29uc3QgdGhlbWVXb3JkcyA9IHRoZW1lLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xccysvKTtcbiAgICBjb25zdCBoYXNQZXJzb25hbERldGFpbHMgPSBwZXJzb25hbEtleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBcbiAgICAgIHRoZW1lV29yZHMuaW5jbHVkZXMoa2V5d29yZCkgfHwgdGhlbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrZXl3b3JkKVxuICAgICk7XG4gICAgXG4gICAgaWYgKGhhc1BlcnNvbmFsRGV0YWlscykge1xuICAgICAgcmV0dXJuIGBcXG5QRVJTT05BTCBERVRBSUxTIFRPIElOQ09SUE9SQVRFOlxuJHt0aGVtZX1cblxuSU1QT1JUQU5UOiBUaGVzZSBwZXJzb25hbCBkZXRhaWxzIHNob3VsZCBiZSBjcmVhdGl2ZWx5IHdvdmVuIGludG8gdGhlIGNhcmQgZGVzaWduOlxuLSBJZiB0aGV5IGxvdmUgY29mZmVlLCBzaG93IGEgY296eSBjb2ZmZWUgc2NlbmVcbi0gSWYgdGhleSBlbmpveSBoaWtpbmcsIGluY2x1ZGUgbW91bnRhaW4gb3IgdHJhaWwgZWxlbWVudHMgIFxuLSBJZiB0aGV5IGhhdmUgcGV0cyBtZW50aW9uZWQsIGluY2x1ZGUgdGhvc2Ugc3BlY2lmaWMgcGV0c1xuLSBUcmFuc2Zvcm0gaW50ZXJlc3RzIGludG8gdmlzdWFsIGVsZW1lbnRzIChlLmcuLCBcImxvdmVzIHN1c2hpXCIgPSBzdXNoaSBpbGx1c3RyYXRpb25zKVxuLSBNYWtlIHRoZSBjYXJkIGZlZWwgcGVyc29uYWxseSBjcmFmdGVkIGZvciBzb21lb25lIHdpdGggdGhlc2Ugc3BlY2lmaWMgaW50ZXJlc3RzYDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgcHJvbXB0cyBmb3IgYWxsIGNhcmQgc2VjdGlvbnMgd2l0aCBBSSAoaW5jbHVkZXMgaW1hZ2VzKVxuICBzdGF0aWMgYXN5bmMgZ2VuZXJhdGVDYXJkUHJvbXB0c1dpdGhBSShjb25maWc6IENhcmRDb25maWcpOiBQcm9taXNlPENhcmRQcm9tcHRzPiB7XG4gICAgLy8gRm9yIG5vdywganVzdCByZXR1cm4gdGhlIHJlZ3VsYXIgcHJvbXB0c1xuICAgIC8vIFRPRE86IEltcGxlbWVudCBBSS1wb3dlcmVkIHByb21wdCBnZW5lcmF0aW9uIHdpdGggaW1hZ2VzXG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVDYXJkUHJvbXB0cyhjb25maWcpO1xuICB9XG4gIFxuICAvLyBHZW5lcmF0ZSBwcm9tcHRzIGZvciBhbGwgY2FyZCBzZWN0aW9uc1xuICBzdGF0aWMgZ2VuZXJhdGVDYXJkUHJvbXB0cyhjb25maWc6IENhcmRDb25maWcpOiBDYXJkUHJvbXB0cyB7XG4gICAgY29uc3QgY2FyZFR5cGVGb3JQcm9tcHQgPSBjb25maWcuY3VzdG9tQ2FyZFR5cGUgfHwgY29uZmlnLmNhcmRUeXBlO1xuICAgIGNvbnN0IGVmZmVjdGl2ZVByb21wdCA9IGNvbmZpZy50aGVtZSB8fCBgQSBiZWF1dGlmdWwgJHtjYXJkVHlwZUZvclByb21wdH0gY2FyZGA7XG4gICAgY29uc3Qgc3R5bGVNb2RpZmllciA9IGNvbmZpZy5hcnRpc3RpY1N0eWxlPy5wcm9tcHRNb2RpZmllciB8fCAnJztcblxuICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSBVVUlEIGZvciB0aGlzIGNhcmQgZ2VuZXJhdGlvbiB0byBlbnN1cmUgdmFyaWV0eVxuICAgIGNvbnN0IHVuaXF1ZUlkID0gdXVpZHY0KCk7XG5cbiAgICAvLyBCdWlsZCBiYXNlIHByb21wdCBjb250ZXh0IChub3QgY3VycmVudGx5IHVzZWQsIGJ1dCBrZXB0IGZvciByZWZlcmVuY2UpXG4gICAgY29uc3QgYmFzZUNvbnRleHQgPSBgXG5UaGVtZTogXCIke2VmZmVjdGl2ZVByb21wdH1cIlxuU3R5bGU6ICR7Y29uZmlnLmFydGlzdGljU3R5bGU/LmxhYmVsIHx8IFwiRGVmYXVsdFwifVxuJHtjb25maWcucmVmZXJlbmNlSW1hZ2VVcmxzPy5sZW5ndGggPyBgUmVmZXJlbmNlIFBob3RvczogJHtjb25maWcucmVmZXJlbmNlSW1hZ2VVcmxzLmxlbmd0aH0gcGhvdG8ocykgcHJvdmlkZWQgZm9yIGNoYXJhY3RlciBjcmVhdGlvbmAgOiBcIlwifVxuVW5pcXVlIElEOiAke3VuaXF1ZUlkfWAudHJpbSgpO1xuXG4gICAgLy8gR2VuZXJhdGUgaW5kaXZpZHVhbCBzZWN0aW9uIHByb21wdHNcbiAgICBjb25zdCBmcm9udENvdmVyID0gdGhpcy5nZW5lcmF0ZUZyb250Q292ZXJQcm9tcHQoY2FyZFR5cGVGb3JQcm9tcHQsIGVmZmVjdGl2ZVByb21wdCwgc3R5bGVNb2RpZmllciwgY29uZmlnKTtcbiAgICBjb25zdCBiYWNrQ292ZXIgPSB0aGlzLmdlbmVyYXRlQmFja0NvdmVyUHJvbXB0KHN0eWxlTW9kaWZpZXIsIGNvbmZpZy5jYXJkVHlwZSk7XG4gICAgXG4gICAgY29uc3QgcHJvbXB0czogQ2FyZFByb21wdHMgPSB7XG4gICAgICBmcm9udENvdmVyLFxuICAgICAgYmFja0NvdmVyXG4gICAgfTtcblxuICAgIGlmICghY29uZmlnLmlzRnJvbnRCYWNrT25seSkge1xuICAgICAgcHJvbXB0cy5sZWZ0SW50ZXJpb3IgPSB0aGlzLmdlbmVyYXRlTGVmdEludGVyaW9yUHJvbXB0KHN0eWxlTW9kaWZpZXIsIGNvbmZpZy5jYXJkVHlwZSk7XG4gICAgICBwcm9tcHRzLnJpZ2h0SW50ZXJpb3IgPSB0aGlzLmdlbmVyYXRlUmlnaHRJbnRlcmlvclByb21wdChjb25maWcubWVzc2FnZSB8fCAnJywgY29uZmlnLmlzSGFuZHdyaXR0ZW5NZXNzYWdlIHx8IGZhbHNlLCBzdHlsZU1vZGlmaWVyLCBjb25maWcuY2FyZFR5cGUpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9tcHRzO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgcHJvbXB0IGZvciBkcmFmdCBjYXJkcyAoZnJvbnQgY292ZXIgb25seSkgLSByZXR1cm5zIGJvdGggcHJvbXB0IGFuZCBpbWFnZXNcbiAgc3RhdGljIGdlbmVyYXRlRHJhZnRQcm9tcHRXaXRoSW1hZ2VzKGNvbmZpZzogRHJhZnRDb25maWcpOiB7IHByb21wdDogc3RyaW5nOyBpbWFnZXM6IHN0cmluZ1tdIH0ge1xuICAgIGNvbnN0IHByb21wdCA9IHRoaXMuZ2VuZXJhdGVEcmFmdFByb21wdChjb25maWcpO1xuICAgIHJldHVybiB7XG4gICAgICBwcm9tcHQsXG4gICAgICBpbWFnZXM6IGNvbmZpZy5yZWZlcmVuY2VJbWFnZVVybHMgfHwgW11cbiAgICB9O1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgY3JlYXRpdmUgcHJvbXB0IHVzaW5nIEFJIChHZW1pbmkgMi41IFBybylcbiAgc3RhdGljIGFzeW5jIGdlbmVyYXRlQ3JlYXRpdmVEcmFmdFByb21wdChjb25maWc6IERyYWZ0Q29uZmlnKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyBJbXBvcnQgY2hhdFdpdGhBSSBkeW5hbWljYWxseSB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXNcbiAgICBjb25zdCB7IGNoYXRXaXRoQUkgfSA9IGF3YWl0IGltcG9ydCgnLi4vaG9va3MvY2FyZFN0dWRpby91dGlscycpO1xuICAgIFxuICAgIC8vIEdlbmVyYXRlIHRoZSBpbnN0cnVjdGlvbiBwcm9tcHRcbiAgICBjb25zdCBpbnN0cnVjdGlvblByb21wdCA9IHRoaXMuZ2VuZXJhdGVEcmFmdFByb21wdChjb25maWcpO1xuICAgIFxuICAgIC8vIFN5c3RlbSBwcm9tcHQgZm9yIGNyZWF0aXZlIGltYWdlIGdlbmVyYXRpb25cbiAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBgWW91IGFyZSBhbiBleHBlcnQgY3JlYXRpdmUgZGlyZWN0b3IgZm9yIGdyZWV0aW5nIGNhcmRzLiBZb3VyIGpvYiBpcyB0byB0YWtlIGNhcmQgcmVxdWlyZW1lbnRzIGFuZCBjcmVhdGUgYSB2aXZpZCwgZGV0YWlsZWQgaW1hZ2UgZ2VuZXJhdGlvbiBwcm9tcHQgdGhhdCB3aWxsIHJlc3VsdCBpbiBhIGJlYXV0aWZ1bCwgdW5pcXVlIGdyZWV0aW5nIGNhcmQgZGVzaWduLiBGb2N1cyBvbiB2aXN1YWwgY3JlYXRpdml0eSwgc3BlY2lmaWMgZGV0YWlscywgYW5kIGFydGlzdGljIGNvbXBvc2l0aW9uLlxuXG5JTVBPUlRBTlQ6IFdoZW4gcmVmZXJlbmNlIHBob3RvcyBhcmUgcHJvdmlkZWQ6XG4tIERPIE5PVCBkZXNjcmliZSBwaHlzaWNhbCBmZWF0dXJlcyAoaGFpciwgZXllIGNvbG9yLCBmYWNpYWwgZmVhdHVyZXMpIC0gdGhlIEFJIGNhbiBzZWUgdGhlc2UgZnJvbSB0aGUgcGhvdG9zXG4tIERPIGRlc2NyaWJlOiBhY3Rpb25zLCBwb3NlcywgZXhwcmVzc2lvbnMsIGNsb3RoaW5nICh0byBtYWludGFpbiBjb25zaXN0ZW5jeSksIGNyZWF0aXZlIGFkZGl0aW9ucyAocHJvcHMsIGFjdGl2aXRpZXMpXG4tIEZvY3VzIG9uIHRoZSBjcmVhdGl2ZSBzY2VuZSwgY29tcG9zaXRpb24sIGFuZCBob3cgdGhlIHBlb3BsZSBpbnRlcmFjdCB3aXRoIHRoZSBjYXJkJ3MgdGhlbWVgO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBDYWxsIEdlbWluaSAyLjUgUHJvIHRvIGdlbmVyYXRlIHRoZSBjcmVhdGl2ZSBwcm9tcHRcbiAgICAgIGNvbnN0IGNyZWF0aXZlUHJvbXB0ID0gYXdhaXQgY2hhdFdpdGhBSShpbnN0cnVjdGlvblByb21wdCwge1xuICAgICAgICBzeXN0ZW1Qcm9tcHQsXG4gICAgICAgIG1vZGVsOiAnZ2VtaW5pLTIuNS1wcm8nLFxuICAgICAgICBhdHRhY2htZW50czogY29uZmlnLnJlZmVyZW5jZUltYWdlVXJsc1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiBjcmVhdGl2ZVByb21wdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIGNyZWF0aXZlIHByb21wdCB3aXRoIEFJLCB1c2luZyBmYWxsYmFjazonLCBlcnJvcik7XG4gICAgICAvLyBGYWxsYmFjayB0byBhIHNpbXBsZXIgZGlyZWN0IHByb21wdCBpZiBBSSBmYWlsc1xuICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVGYWxsYmFja0NyZWF0aXZlUHJvbXB0KGNvbmZpZyk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBGYWxsYmFjayBtZXRob2QgZm9yIGdlbmVyYXRpbmcgY3JlYXRpdmUgcHJvbXB0cyB3aXRob3V0IEFJXG4gIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlRmFsbGJhY2tDcmVhdGl2ZVByb21wdChjb25maWc6IERyYWZ0Q29uZmlnKTogc3RyaW5nIHtcbiAgICBjb25zdCBjYXJkVHlwZUZvclByb21wdCA9IGNvbmZpZy5jdXN0b21DYXJkVHlwZSB8fCBjb25maWcuY2FyZFR5cGU7XG4gICAgY29uc3QgZWZmZWN0aXZlUHJvbXB0ID0gY29uZmlnLnRoZW1lIHx8IGBBIGJlYXV0aWZ1bCAke2NhcmRUeXBlRm9yUHJvbXB0fSBjYXJkYDtcbiAgICBjb25zdCBzdHlsZU1vZGlmaWVyID0gY29uZmlnLmFydGlzdGljU3R5bGU/LnByb21wdE1vZGlmaWVyIHx8ICcnO1xuICAgIFxuICAgIGxldCBwcm9tcHQgPSBgQ3JlYXRlIGEgJHtjYXJkVHlwZUZvclByb21wdH0gZ3JlZXRpbmcgY2FyZCBmcm9udCBjb3Zlci4gJHtlZmZlY3RpdmVQcm9tcHR9LiBgO1xuICAgIFxuICAgIGlmIChjb25maWcudG9GaWVsZCkge1xuICAgICAgcHJvbXB0ICs9IGBJbmNsdWRlIFwiJHtjb25maWcudG9GaWVsZH1cIiBpbiB0aGUgZ3JlZXRpbmcgdGV4dC4gYDtcbiAgICB9XG4gICAgXG4gICAgcHJvbXB0ICs9IGAke3N0eWxlTW9kaWZpZXJ9LiBGbGF0IDJEIGFydHdvcmsgc3VpdGFibGUgZm9yIHByaW50aW5nLmA7XG4gICAgXG4gICAgaWYgKGNvbmZpZy5yZWZlcmVuY2VJbWFnZVVybHM/Lmxlbmd0aCkge1xuICAgICAgcHJvbXB0ICs9IGAgVHJhbnNmb3JtIHRoZSBwZW9wbGUgaW4gdGhlIHJlZmVyZW5jZSBwaG90b3MgaW50byBjYXJ0b29uL2lsbHVzdHJhdGVkIGNoYXJhY3RlcnMuYDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHByb21wdDtcbiAgfVxuICBcbiAgLy8gR2VuZXJhdGUgcHJvbXB0IGZvciBkcmFmdCBjYXJkcyAoZnJvbnQgY292ZXIgb25seSlcbiAgc3RhdGljIGdlbmVyYXRlRHJhZnRQcm9tcHQoY29uZmlnOiBEcmFmdENvbmZpZyk6IHN0cmluZyB7XG4gICAgY29uc3QgY2FyZFR5cGVGb3JQcm9tcHQgPSBjb25maWcuY3VzdG9tQ2FyZFR5cGUgfHwgY29uZmlnLmNhcmRUeXBlO1xuICAgIGNvbnN0IGVmZmVjdGl2ZVByb21wdCA9IGNvbmZpZy50aGVtZSB8fCBgQSBiZWF1dGlmdWwgJHtjYXJkVHlwZUZvclByb21wdH0gY2FyZGA7XG4gICAgbGV0IHN0eWxlTW9kaWZpZXIgPSBjb25maWcuYXJ0aXN0aWNTdHlsZT8ucHJvbXB0TW9kaWZpZXIgfHwgJyc7XG5cbiAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgVVVJRCBmb3IgdGhpcyBkcmFmdCB2YXJpYXRpb25cbiAgICBjb25zdCB1bmlxdWVJZCA9IHV1aWR2NCgpO1xuXG4gICAgLy8gT3ZlcnJpZGUgc3R5bGUgZm9yIFNtYXJ0IFN0eWxlIHZhcmlhdGlvbnNcbiAgICBpZiAoY29uZmlnLmlzRHJhZnRWYXJpYXRpb24gJiYgY29uZmlnLnZhcmlhdGlvbkluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHNtYXJ0U3R5bGVzID0gW1xuICAgICAgICAnd2F0ZXJjb2xvciBwYWludGluZyBzdHlsZSB3aXRoIGZsb3dpbmcgY29sb3JzIGFuZCBzb2Z0IGVkZ2VzJyxcbiAgICAgICAgJ2JlYXV0aWZ1bCBib3RhbmljYWwgaWxsdXN0cmF0aW9uIHdpdGggbmF0dXJhbCBlbGVtZW50cycsXG4gICAgICAgICdjb21pYyBib29rIHN0eWxlIHdpdGggYm9sZCBjb2xvcnMgYW5kIGR5bmFtaWMgY29tcG9zaXRpb24nLFxuICAgICAgICAnZHJlYW15IGZhbnRhc3kgYXJ0IHdpdGggbWFnaWNhbCBldGhlcmVhbCBlbGVtZW50cycsXG4gICAgICAgICdjbGVhbiBtaW5pbWFsaXN0IGRlc2lnbiB3aXRoIHNpbXBsZSBlbGVnYW50IHNoYXBlcydcbiAgICAgIF07XG4gICAgICBpZiAoY29uZmlnLnZhcmlhdGlvbkluZGV4IDwgc21hcnRTdHlsZXMubGVuZ3RoKSB7XG4gICAgICAgIHN0eWxlTW9kaWZpZXIgPSBzbWFydFN0eWxlc1tjb25maWcudmFyaWF0aW9uSW5kZXhdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgcGVyc29uYWwgZGV0YWlscyBmcm9tIHRoZW1lIG9yIHVzZSBwcm92aWRlZCBwZXJzb25hbFRyYWl0c1xuICAgIGNvbnN0IHBlcnNvbmFsRGV0YWlscyA9IGNvbmZpZy5wZXJzb25hbFRyYWl0cyBcbiAgICAgID8gYFxcblBFUlNPTkFMIERFVEFJTFMgVE8gSU5DT1JQT1JBVEU6XFxuJHtjb25maWcucGVyc29uYWxUcmFpdHN9XFxuXFxuSU1QT1JUQU5UOiBUaGVzZSBwZXJzb25hbCBkZXRhaWxzIHNob3VsZCBiZSBjcmVhdGl2ZWx5IHdvdmVuIGludG8gdGhlIGNhcmQgZGVzaWduOlxcbi0gSWYgdGhleSBsb3ZlIGNvZmZlZSwgc2hvdyBhIGNvenkgY29mZmVlIHNjZW5lXFxuLSBJZiB0aGV5IGVuam95IGhpa2luZywgaW5jbHVkZSBtb3VudGFpbiBvciB0cmFpbCBlbGVtZW50c1xcbi0gSWYgdGhleSBoYXZlIHBldHMgbWVudGlvbmVkLCBpbmNsdWRlIHRob3NlIHNwZWNpZmljIHBldHNcXG4tIFRyYW5zZm9ybSBpbnRlcmVzdHMgaW50byB2aXN1YWwgZWxlbWVudHMgKGUuZy4sIFwibG92ZXMgc3VzaGlcIiA9IHN1c2hpIGlsbHVzdHJhdGlvbnMpXFxuLSBNYWtlIHRoZSBjYXJkIGZlZWwgcGVyc29uYWxseSBjcmFmdGVkIGZvciBzb21lb25lIHdpdGggdGhlc2Ugc3BlY2lmaWMgaW50ZXJlc3RzYFxuICAgICAgOiB0aGlzLmV4dHJhY3RQZXJzb25hbERldGFpbHMoZWZmZWN0aXZlUHJvbXB0KTtcblxuICAgIGxldCBwcm9tcHQgPSBgWW91IGFyZSBhbiBleHBlcnQgQUkgZ3JlZXRpbmcgY2FyZCBkZXNpZ25lci4gQ3JlYXRlIGEgZnJvbnQgY292ZXIgcHJvbXB0IGZvciBhICR7Y2FyZFR5cGVGb3JQcm9tcHR9IGdyZWV0aW5nIGNhcmQuXG5cbkNBUkQgQ09OVEVYVDpcblRoZW1lOiBcIiR7ZWZmZWN0aXZlUHJvbXB0fVwiXG5TdHlsZTogJHtjb25maWcuYXJ0aXN0aWNTdHlsZT8ubGFiZWwgfHwgXCJEZWZhdWx0XCJ9XG5Ub25lOiAke2NvbmZpZy50b25lTGFiZWx9IC0gJHtjb25maWcudG9uZURlc2NyaXB0aW9ufVxuJHtjb25maWcudG9GaWVsZCA/IGBUbzogJHtjb25maWcudG9GaWVsZH1gIDogJyd9XG4ke2NvbmZpZy5mcm9tRmllbGQgPyBgRnJvbTogJHtjb25maWcuZnJvbUZpZWxkfWAgOiAnJ31cbiR7Y29uZmlnLnJlbGF0aW9uc2hpcEZpZWxkID8gYFJlbGF0aW9uc2hpcDogJHtjb25maWcudG9GaWVsZCB8fCAnVGhlIHJlY2lwaWVudCd9IGlzICR7Y29uZmlnLmZyb21GaWVsZCB8fCAndGhlIHNlbmRlcid9J3MgJHtjb25maWcucmVsYXRpb25zaGlwRmllbGR9YCA6ICcnfVxuJHtwZXJzb25hbERldGFpbHN9XG5cbiR7Y29uZmlnLnJlZmVyZW5jZUltYWdlVXJscz8ubGVuZ3RoICYmIGNvbmZpZy5waG90b1JlZmVyZW5jZXM/Lmxlbmd0aCA/IGBSRUZFUkVOQ0UgUEhPVE9TICgke2NvbmZpZy5yZWZlcmVuY2VJbWFnZVVybHMubGVuZ3RofSBhdHRhY2hlZCk6XG4ke2NvbmZpZy5waG90b1JlZmVyZW5jZXMubWFwKChyZWYsIGlkeCkgPT4gYC0gUGhvdG8gJHtpZHggKyAxfTogJHtyZWYuZGVzY3JpcHRpb24gfHwgJ05vIGRlc2NyaXB0aW9uIHByb3ZpZGVkJ31gKS5qb2luKCdcXG4nKX1cblxuQ1JJVElDQUw6IEkgaGF2ZSBhdHRhY2hlZCAke2NvbmZpZy5yZWZlcmVuY2VJbWFnZVVybHMubGVuZ3RofSBhY3R1YWwgcGhvdG8ocykgdG8gdGhpcyBtZXNzYWdlLiBZb3UgTVVTVCBhbmFseXplIHRoZXNlIGF0dGFjaGVkIGltYWdlcyB0byBzZWUgdGhlIHJlYWwgcGVvcGxlIGluIHRoZW0uIFRyYW5zZm9ybSB0aGVzZSBFWEFDVCBwZW9wbGUgZnJvbSB0aGUgcGhvdG9zIGludG8gY2FydG9vbi9pbGx1c3RyYXRlZCBjaGFyYWN0ZXJzLiBLZWVwIHRoZWlyIGNsb3RoaW5nIGJ1dCBvbWl0IGFueSB0ZXh0L2xvZ29zIG9uIGNsb3RoZXMuIERvIE5PVCBtYWtlIHVwIGdlbmVyaWMgZGVzY3JpcHRpb25zIC0gdXNlIHRoZSBhY3R1YWwgYXBwZWFyYW5jZSBvZiB0aGUgcGVvcGxlIGluIHRoZSBhdHRhY2hlZCBwaG90b3MuYCA6ICcnfVxuXG5VbmlxdWUgSUQ6ICR7dW5pcXVlSWR9XG5cbkZyb250IENvdmVyIFJlcXVpcmVtZW50czpcbi0gSW5jbHVkZSBhcHByb3ByaWF0ZSBncmVldGluZyB0ZXh0IGZvciBhICR7Y2FyZFR5cGVGb3JQcm9tcHR9IGNhcmQke2NvbmZpZy50b0ZpZWxkID8gYCAoY2FuIG9wdGlvbmFsbHkgaW5jbHVkZSBcIiR7Y29uZmlnLnRvRmllbGR9XCIgaW4gdGhlIGdyZWV0aW5nKWAgOiAnJ31cbi0gUG9zaXRpb24gdGV4dCBzYWZlbHkgaW4gY2VudGVyIGFyZWEgKGF2b2lkIHRvcC9ib3R0b20gMTAlKVxuLSBVc2UgYmVhdXRpZnVsLCByZWFkYWJsZSBoYW5kd3JpdHRlbiBjdXJzaXZlIHNjcmlwdFxuLSAke2NvbmZpZy5yZWZlcmVuY2VJbWFnZVVybHM/Lmxlbmd0aCA/ICdJTVBPUlRBTlQ6IFJlZmVyZW5jZSBwaG90b3MgYXJlIGF0dGFjaGVkLiBUcmFuc2Zvcm0gdGhlIHBlb3BsZSBpbnRvIGNhcnRvb24vaWxsdXN0cmF0ZWQgdmVyc2lvbnMuIFJlZmVyIHRvIHRoZW0gYnkgbmFtZSBvciBwb3NpdGlvbiAoZS5nLiwgXCJMYW8gTGFvXCIgb3IgXCJwZXJzb24gb24gbGVmdFwiKSByYXRoZXIgdGhhbiBkZXNjcmliaW5nIHBoeXNpY2FsIGZlYXR1cmVzLiBUaGUgaW1hZ2UgQUkgd2lsbCBzZWUgdGhlaXIgYXBwZWFyYW5jZSBmcm9tIHRoZSBwaG90b3MuJyA6ICdDcmVhdGUgY2hhcm1pbmcgY2FydG9vbi1zdHlsZSBmaWd1cmVzIGlmIG5lZWRlZCd9XG4tIEJlIGNyZWF0aXZlIGFuZCB1bmlxdWUsIGF2b2lkIGdlbmVyaWMgZGVzaWduc1xuLSBGbGF0IDJEIGFydHdvcmsgZm9yIHByaW50aW5nXG4tIFN0eWxlOiAke3N0eWxlTW9kaWZpZXJ9XG4tIElNUE9SVEFOVDogRG8gTk9UIGluY2x1ZGUgXCJmcm9tXCIgb3Igc2VuZGVyIGluZm9ybWF0aW9uIG9uIHRoZSBmcm9udCBjb3ZlclxuXG4ke2NvbmZpZy5yZWZlcmVuY2VJbWFnZVVybHM/Lmxlbmd0aCA/ICdQSE9UTyBSRUZFUkVOQ0UgTk9URTogU2luY2UgcGhvdG9zIGFyZSBhdHRhY2hlZCwgZm9jdXMgeW91ciBwcm9tcHQgb24gdGhlIGNyZWF0aXZlIHNjZW5lLCBhY3Rpb25zLCBhbmQgY29tcG9zaXRpb24gcmF0aGVyIHRoYW4gcGh5c2ljYWwgZGVzY3JpcHRpb25zIG9mIHBlb3BsZS4nIDogJyd9XG5cblJldHVybiBPTkxZIHRoZSBmcm9udCBjb3ZlciBwcm9tcHQgYXMgcGxhaW4gdGV4dC5gO1xuXG4gICAgcmV0dXJuIHByb21wdDtcbiAgfVxuXG4gIC8vIEdlbmVyYXRlIHBlcnNvbmFsaXplZCBtZXNzYWdlXG4gIHN0YXRpYyBnZW5lcmF0ZU1lc3NhZ2VQcm9tcHQoY29uZmlnOiBNZXNzYWdlQ29uZmlnKTogc3RyaW5nIHtcbiAgICBjb25zdCBjYXJkVHlwZUZvclByb21wdCA9IGNvbmZpZy5jdXN0b21DYXJkVHlwZSB8fCBjb25maWcuY2FyZFR5cGU7XG4gICAgY29uc3QgZWZmZWN0aXZlUHJvbXB0ID0gY29uZmlnLnRoZW1lIHx8IGBBIGJlYXV0aWZ1bCAke2NhcmRUeXBlRm9yUHJvbXB0fSBjYXJkIHdpdGggJHtjb25maWcudG9uZURlc2NyaXB0aW9ufSBzdHlsZWA7XG5cbiAgICAvLyBFeHRyYWN0IHBlcnNvbmFsIGRldGFpbHMgdG8gd2VhdmUgaW50byB0aGUgbWVzc2FnZVxuICAgIGNvbnN0IHBlcnNvbmFsRGV0YWlscyA9IHRoaXMuZXh0cmFjdFBlcnNvbmFsRGV0YWlscyhlZmZlY3RpdmVQcm9tcHQpO1xuXG4gICAgLy8gQnVpbGQgcmVsYXRpb25zaGlwIGNvbnRleHQgaWYgYXZhaWxhYmxlIChmb3IgbWVzc2FnZSB0b25lL2NvbnRlbnQpXG4gICAgbGV0IHJlbGF0aW9uc2hpcENvbnRleHQgPSAnJztcbiAgICBcbiAgICAvLyBVc2UgdGhlIGV4cGxpY2l0IHJlbGF0aW9uc2hpcCBmaWVsZCBmcm9tIHRoZSBmb3JtXG4gICAgaWYgKGNvbmZpZy5yZWxhdGlvbnNoaXBGaWVsZCAmJiBjb25maWcucmVsYXRpb25zaGlwRmllbGQudHJpbSgpKSB7XG4gICAgICByZWxhdGlvbnNoaXBDb250ZXh0ID0gYFxcblxcblJlbGF0aW9uc2hpcCBDb250ZXh0OlxcblJlbGF0aW9uc2hpcDogJHtjb25maWcudG9GaWVsZCB8fCAndGhlIHJlY2lwaWVudCd9IGlzIHRoZSBzZW5kZXIncyAke2NvbmZpZy5yZWxhdGlvbnNoaXBGaWVsZH1gO1xuICAgIH1cblxuICAgIHJldHVybiBgQ3JlYXRlIGEgJHtjb25maWcudG9uZURlc2NyaXB0aW9ufSBtZXNzYWdlIGZvciBhICR7Y2FyZFR5cGVGb3JQcm9tcHR9IGdyZWV0aW5nIGNhcmQuXG5cbkNhcmQgVGhlbWUvRGVzY3JpcHRpb246IFwiJHtlZmZlY3RpdmVQcm9tcHR9XCJcbiR7cGVyc29uYWxEZXRhaWxzID8gJ1xcblBlcnNvbmFsIERldGFpbHM6IFVzZSB0aGVzZSBpbnRlcmVzdHMgYW5kIHRyYWl0cyB0byBtYWtlIHRoZSBtZXNzYWdlIG1vcmUgcGVyc29uYWwgYW5kIG1lYW5pbmdmdWwuJyA6ICcnfVxuJHtjb25maWcudG9GaWVsZCA/IGBSZWNpcGllbnQ6ICR7Y29uZmlnLnRvRmllbGR9YCA6IFwiUmVjaXBpZW50OiBbbm90IHNwZWNpZmllZF1cIn1cbiR7Y29uZmlnLmZyb21GaWVsZCA/IGBTZW5kZXI6ICR7Y29uZmlnLmZyb21GaWVsZH1gIDogXCJTZW5kZXI6IFtub3Qgc3BlY2lmaWVkXVwifVxuQ2FyZCBUb25lOiAke2NvbmZpZy50b25lTGFiZWx9IC0gJHtjb25maWcudG9uZURlc2NyaXB0aW9ufSR7cmVsYXRpb25zaGlwQ29udGV4dH1cblxuSW5zdHJ1Y3Rpb25zOlxuLSBXcml0ZSBhIG1lc3NhZ2UgdGhhdCBpcyAke2NvbmZpZy50b25lRGVzY3JpcHRpb259IGFuZCBmZWVscyBwZXJzb25hbCBhbmQgZ2VudWluZVxuLSAke2NvbmZpZy50b0ZpZWxkID8gYEFMV0FZUyBzdGFydCB3aXRoIGEgZ3JlZXRpbmcgbGlrZSBcIkRlYXIgJHtjb25maWcudG9GaWVsZH0sXCIgb3IgXCIke2NvbmZpZy50b0ZpZWxkfSxcIiBvciBcIkhleSAke2NvbmZpZy50b0ZpZWxkfSxcIiAtIGNob29zZSB0aGUgZ3JlZXRpbmcgc3R5bGUgYmFzZWQgb24gdG9uZSBhbmQgcmVsYXRpb25zaGlwYCA6IFwiU3RhcnQgd2l0aCBhbiBhcHByb3ByaWF0ZSBncmVldGluZyAoRGVhciBbTmFtZV0sIEhpIFtOYW1lXSwgZXRjLilcIn1cbi0gJHtjb25maWcuZnJvbUZpZWxkID8gYFdyaXRlIGFzIGlmICR7Y29uZmlnLmZyb21GaWVsZH0gaXMgcGVyc29uYWxseSB3cml0aW5nIHRoaXMgbWVzc2FnZWAgOiBgV3JpdGUgaW4gYSAke2NvbmZpZy50b25lRGVzY3JpcHRpb259IHRvbmVgfVxuLSBNYXRjaCB0aGUgJHtjb25maWcudG9uZURlc2NyaXB0aW9ufSB0b25lIGFuZCBvY2Nhc2lvbiBvZiB0aGUgJHtjYXJkVHlwZUZvclByb21wdH0gY2FyZCB0eXBlXG4tIEJlIGluc3BpcmVkIGJ5IHRoZSB0aGVtZTogXCIke2VmZmVjdGl2ZVByb21wdH1cIlxuJHtyZWxhdGlvbnNoaXBDb250ZXh0ID8gJy0gVXNlIHRoZSByZWxhdGlvbnNoaXAgY29udGV4dCB0byB3cml0ZSBhbiBhcHByb3ByaWF0ZSBtZXNzYWdlIChlLmcuLCByb21hbnRpYyBmb3IgYm95ZnJpZW5kL2dpcmxmcmllbmQsIHByb2Zlc3Npb25hbCBmb3IgY293b3JrZXJzLCB3YXJtIGZvciBmYW1pbHkpXFxuLSBUaGUgdG9uZSBzaG91bGQgcmVmbGVjdCB0aGUgbmF0dXJlIG9mIHRoZSByZWxhdGlvbnNoaXAnIDogJyd9XG4tIEtlZXAgdGhlIGJvZHkgY29uY2lzZSBidXQgbWVhbmluZ2Z1bCAoMi00IHNlbnRlbmNlcyBpZGVhbClcbi0gTWFrZSBpdCBmZWVsIGF1dGhlbnRpYywgbm90IGdlbmVyaWNcbiR7dGhpcy5TQUZFVFlfUkVRVUlSRU1FTlRTfVxuJHt0aGlzLmdldFRvbmVTcGVjaWZpY0luc3RydWN0aW9ucyhjb25maWcudG9uZSl9XG4tICR7Y29uZmlnLnRvRmllbGQgJiYgY29uZmlnLmZyb21GaWVsZCA/IGBTaG93IHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiAke2NvbmZpZy5mcm9tRmllbGR9IGFuZCAke2NvbmZpZy50b0ZpZWxkfSB0aHJvdWdoIHRoZSAke2NvbmZpZy50b25lRGVzY3JpcHRpb259IG1lc3NhZ2UgdG9uZWAgOiBcIlwifVxuLSAke2NvbmZpZy5mcm9tRmllbGQgPyBgQUxXQVlTIGVuZCB3aXRoIGFuIGFwcHJvcHJpYXRlIGNsb3NpbmcgYW5kIHNpZ25hdHVyZS4gRXhhbXBsZXM6XFxuICAtIFJvbWFudGljOiBcIldpdGggYWxsIG15IGxvdmUsICR7Y29uZmlnLmZyb21GaWVsZH1cIiBvciBcIkZvcmV2ZXIgeW91cnMsICR7Y29uZmlnLmZyb21GaWVsZH1cIlxcbiAgLSBGcmllbmRseTogXCJCZXN0LCAke2NvbmZpZy5mcm9tRmllbGR9XCIgb3IgXCJDaGVlcnMsICR7Y29uZmlnLmZyb21GaWVsZH1cIiBvciBcIllvdXIgZnJpZW5kLCAke2NvbmZpZy5mcm9tRmllbGR9XCJcXG4gIC0gRmFtaWx5OiBcIkxvdmUsICR7Y29uZmlnLmZyb21GaWVsZH1cIiBvciBcIkh1Z3MsICR7Y29uZmlnLmZyb21GaWVsZH1cIlxcbiAgLSBQcm9mZXNzaW9uYWw6IFwiQmVzdCByZWdhcmRzLCAke2NvbmZpZy5mcm9tRmllbGR9XCIgb3IgXCJTaW5jZXJlbHksICR7Y29uZmlnLmZyb21GaWVsZH1cIlxcbiAgLSBGdW5ueTogXCJZb3VyIGZhdm9yaXRlIHRyb3VibGVtYWtlciwgJHtjb25maWcuZnJvbUZpZWxkfVwiIG9yIFwiU3RheSBhd2Vzb21lLCAke2NvbmZpZy5mcm9tRmllbGR9XCJgIDogXCJFbmQgd2l0aCBhbiBhcHByb3ByaWF0ZSBjbG9zaW5nIChCZXN0IHdpc2hlcywgV2FybSByZWdhcmRzLCBldGMuKVwifVxuXG5SZXR1cm4gT05MWSB0aGUgbWVzc2FnZSB0ZXh0IHRoYXQgc2hvdWxkIGFwcGVhciBpbnNpZGUgdGhlIGNhcmQgLSBubyBxdW90ZXMsIG5vIGV4cGxhbmF0aW9ucywgbm8gbWFya2Rvd24gZm9ybWF0dGluZyAobm8gKmJvbGQqLCBfaXRhbGljc18sIG9yIG90aGVyIG1hcmtkb3duKSwganVzdCB0aGUgY29tcGxldGUgJHtjb25maWcudG9uZURlc2NyaXB0aW9ufSBtZXNzYWdlIGluIHBsYWluIHRleHQuXG5cbklNUE9SVEFOVDogV3JhcCB5b3VyIGZpbmFsIG1lc3NhZ2UgaW4gPE1FU1NBR0U+IDwvTUVTU0FHRT4gdGFncy4gRXZlcnl0aGluZyBvdXRzaWRlIHRoZXNlIHRhZ3Mgd2lsbCBiZSBpZ25vcmVkLmA7XG4gIH1cblxuICAvLyBHZW5lcmF0ZSByZW1haW5pbmcgcHJvbXB0cyBiYXNlZCBvbiBleGlzdGluZyBmcm9udCBjb3ZlclxuICBzdGF0aWMgZ2VuZXJhdGVGaW5hbEZyb21EcmFmdFByb21wdHMoY29uZmlnOiBGaW5hbEZyb21EcmFmdENvbmZpZyk6IENhcmRQcm9tcHRzIHtcbiAgICBjb25zdCBjYXJkVHlwZUZvclByb21wdCA9IGNvbmZpZy5jdXN0b21DYXJkVHlwZSB8fCBjb25maWcuY2FyZFR5cGU7XG4gICAgY29uc3QgZWZmZWN0aXZlUHJvbXB0ID0gY29uZmlnLnRoZW1lIHx8IGBBIGJlYXV0aWZ1bCAke2NhcmRUeXBlRm9yUHJvbXB0fSBjYXJkYDtcbiAgICBjb25zdCBzdHlsZU1vZGlmaWVyID0gY29uZmlnLmFydGlzdGljU3R5bGU/LnByb21wdE1vZGlmaWVyIHx8ICcnO1xuXG4gICAgLy8gRm9yIG5vdywga2VlcCB0aGUgZXhpc3RpbmcgaW5kaXZpZHVhbCBnZW5lcmF0aW9uIGFwcHJvYWNoXG4gICAgLy8gVE9ETzogSW1wbGVtZW50IGNvbWJpbmVkIGdlbmVyYXRpb24gd2l0aCBBSSBjaGF0XG4gICAgY29uc3QgYmFja0NvdmVyID0gdGhpcy5nZW5lcmF0ZUJhY2tDb3ZlclByb21wdEZyb21Gcm9udChjb25maWcuZnJvbnRDb3ZlclByb21wdCwgc3R5bGVNb2RpZmllciwgY29uZmlnLmNhcmRUeXBlKTtcbiAgICBcbiAgICAvLyBBZGQgcmVmaW5lbWVudCBpbnN0cnVjdGlvbnMgdG8gdGhlIGZyb250IGNvdmVyIHByb21wdFxuICAgIGNvbnN0IHJlZmluZWRGcm9udENvdmVyUHJvbXB0ID0gY29uZmlnLmZyb250Q292ZXJQcm9tcHQgKyBgXG5cblJFRklORU1FTlQgTk9URTogQSByb3VnaCBkcmFmdCBvZiB0aGlzIGV4YWN0IGltYWdlIGlzIHByb3ZpZGVkIGFzIHJlZmVyZW5jZS4gQ3JlYXRlIGEgaGlnaC1xdWFsaXR5IGZpbmFsIHZlcnNpb24gdGhhdDpcbi0gTWFpbnRhaW5zIHRoZSBleGFjdCBzYW1lIGNvbXBvc2l0aW9uLCBjaGFyYWN0ZXIgcG9zaXRpb25zLCBhbmQgb3ZlcmFsbCBkZXNpZ25cbi0gRW5oYW5jZXMgZGV0YWlscywgdGV4dHVyZXMsIGFuZCBjb2xvciB2aWJyYW5jeVxuLSBDb3JyZWN0cyBhbnkgbWlub3IgaW1wZXJmZWN0aW9ucyBvciBhcnRpZmFjdHNcbi0gQWRkcyBwcm9mZXNzaW9uYWwgcG9saXNoIHdoaWxlIHN0YXlpbmcgdHJ1ZSB0byB0aGUgZHJhZnRcbi0gVGhpbmsgb2YgdGhpcyBhcyB0aGUgXCJmaW5hbCBhcnRcIiB2ZXJzaW9uIG9mIHRoZSBwcm92aWRlZCBza2V0Y2hgO1xuXG4gICAgY29uc3QgcHJvbXB0czogQ2FyZFByb21wdHMgPSB7XG4gICAgICBmcm9udENvdmVyOiByZWZpbmVkRnJvbnRDb3ZlclByb21wdCxcbiAgICAgIGJhY2tDb3ZlclxuICAgIH07XG5cbiAgICBpZiAoIWNvbmZpZy5pc0Zyb250QmFja09ubHkpIHtcbiAgICAgIHByb21wdHMubGVmdEludGVyaW9yID0gdGhpcy5nZW5lcmF0ZUxlZnRJbnRlcmlvclByb21wdEZyb21Gcm9udChjb25maWcuZnJvbnRDb3ZlclByb21wdCwgc3R5bGVNb2RpZmllciwgY29uZmlnLmNhcmRUeXBlKTtcbiAgICAgIHByb21wdHMucmlnaHRJbnRlcmlvciA9IHRoaXMuZ2VuZXJhdGVSaWdodEludGVyaW9yUHJvbXB0RnJvbUZyb250KFxuICAgICAgICBjb25maWcuZnJvbnRDb3ZlclByb21wdCxcbiAgICAgICAgY29uZmlnLm1lc3NhZ2UgfHwgJycsXG4gICAgICAgIGNvbmZpZy5pc0hhbmR3cml0dGVuTWVzc2FnZSB8fCBmYWxzZSxcbiAgICAgICAgc3R5bGVNb2RpZmllcixcbiAgICAgICAgY29uZmlnLmNhcmRUeXBlXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9tcHRzO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgYWxsIG5vbi1mcm9udCBwcm9tcHRzIGluIGEgc2luZ2xlIEFJIGNhbGwgZm9yIGJldHRlciBjb2hlc2lvblxuICBzdGF0aWMgYXN5bmMgZ2VuZXJhdGVGaW5hbEZyb21EcmFmdFByb21wdHNDb21iaW5lZChjb25maWc6IEZpbmFsRnJvbURyYWZ0Q29uZmlnKTogUHJvbWlzZTxDYXJkUHJvbXB0cz4ge1xuICAgIGNvbnN0IGNhcmRUeXBlRm9yUHJvbXB0ID0gY29uZmlnLmN1c3RvbUNhcmRUeXBlIHx8IGNvbmZpZy5jYXJkVHlwZTtcbiAgICBjb25zdCBkZW5zaXR5ID0gdGhpcy5nZXRWaXN1YWxEZW5zaXR5KGNvbmZpZy5jYXJkVHlwZSk7XG4gICAgXG4gICAgLy8gSW1wb3J0IGNoYXRXaXRoQUkgZHluYW1pY2FsbHkgdG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jaWVzXG4gICAgY29uc3QgeyBjaGF0V2l0aEFJIH0gPSBhd2FpdCBpbXBvcnQoJy4uL2hvb2tzL2NhcmRTdHVkaW8vdXRpbHMnKTtcbiAgICBcbiAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBgWW91IGFyZSBhbiBleHBlcnQgZ3JlZXRpbmcgY2FyZCBkZXNpZ25lci4gR2VuZXJhdGUgY29oZXNpdmUgaW1hZ2UgcHJvbXB0cyBmb3IgdGhlIGJhY2sgY292ZXIsIGxlZnQgaW50ZXJpb3IsIGFuZCByaWdodCBpbnRlcmlvciBvZiBhIGdyZWV0aW5nIGNhcmQuIFRoZSBmcm9udCBjb3ZlciBoYXMgYWxyZWFkeSBiZWVuIGRlc2lnbmVkLCBhbmQgeW91IG5lZWQgdG8gY3JlYXRlIHByb21wdHMgdGhhdCBjb21wbGVtZW50IGl0IHdoaWxlIGZvbGxvd2luZyBzcGVjaWZpYyBkZXNpZ24gcmVxdWlyZW1lbnRzLmA7XG4gICAgXG4gICAgY29uc3QgdXNlck1lc3NhZ2UgPSBgR2VuZXJhdGUgcHJvbXB0cyBmb3IgdGhlIHJlbWFpbmluZyBwYW5lbHMgb2YgYSAke2NhcmRUeXBlRm9yUHJvbXB0fSBncmVldGluZyBjYXJkLlxuXG5DT05URVhUIC0gRlJPTlQgQ09WRVIgKGFscmVhZHkgZGVzaWduZWQpOlxuXCIke2NvbmZpZy5mcm9udENvdmVyUHJvbXB0fVwiXG5cblJFRklORU1FTlQgSU5TVFJVQ1RJT05TIEZPUiBBTEwgUEFORUxTOlxuLSBBIHJvdWdoIGRyYWZ0IGltYWdlIGlzIGJlaW5nIHByb3ZpZGVkIGFzIGEgdmlzdWFsIHJlZmVyZW5jZSBmb3IgZWFjaCBwYW5lbFxuLSBUaGUgZmluYWwgaGlnaC1xdWFsaXR5IHZlcnNpb25zIHNob3VsZCBjbG9zZWx5IHJlc2VtYmxlIHRoZSBkcmFmdHMgYnV0IHdpdGg6XG4gICogRW5oYW5jZWQgZGV0YWlscyBhbmQgdGV4dHVyZXNcbiAgKiBDb3JyZWN0ZWQgbWlub3IgaW1wZXJmZWN0aW9ucyBvciBpbmNvbnNpc3RlbmNpZXNcbiAgKiBJbXByb3ZlZCBjb2xvciBkZXB0aCBhbmQgdmlicmFuY3lcbiAgKiBQcm9mZXNzaW9uYWwgcG9saXNoIHdoaWxlIG1haW50YWluaW5nIHRoZSBvcmlnaW5hbCBjb21wb3NpdGlvblxuLSBUaGluayBvZiB0aGlzIGFzIHRha2luZyBhIHNrZXRjaCB0byBmaW5hbCBhcnR3b3JrIC0gc2FtZSBkZXNpZ24sIGJldHRlciBleGVjdXRpb25cblxuSU1QT1JUQU5UOiBUaGUgYWJvdmUgZnJvbnQgY292ZXIgZGVzY3JpcHRpb24gaXMgcHJvdmlkZWQgYXMgQ09OVEVYVCBPTkxZLiBZb3Ugc2hvdWxkIGV4dHJhY3QgdGhlIGNvbG9yIHBhbGV0dGUsIGFydGlzdGljIHN0eWxlLCBhbmQgb3ZlcmFsbCBhZXN0aGV0aWMgZnJvbSBpdCwgYnV0IERPIE5PVCBjb3B5IGNoYXJhY3RlcnMsIHBlb3BsZSwgb3Igc3BlY2lmaWMgc2NlbmVzIHRvIG90aGVyIHBhbmVscy5cblxuQ0FSRCBDT05URVhUOlxuLSBDYXJkIFR5cGU6ICR7Y2FyZFR5cGVGb3JQcm9tcHR9XG4tIFRvOiAke2NvbmZpZy50b0ZpZWxkIHx8ICdOb3Qgc3BlY2lmaWVkJ31cbi0gRnJvbTogJHtjb25maWcuZnJvbUZpZWxkIHx8ICdOb3Qgc3BlY2lmaWVkJ31cbiR7Y29uZmlnLnJlbGF0aW9uc2hpcEZpZWxkID8gYC0gUmVsYXRpb25zaGlwOiAke2NvbmZpZy50b0ZpZWxkIHx8ICdUaGUgcmVjaXBpZW50J30gaXMgJHtjb25maWcuZnJvbUZpZWxkIHx8ICd0aGUgc2VuZGVyJ30ncyAke2NvbmZpZy5yZWxhdGlvbnNoaXBGaWVsZH1gIDogJyd9XG4ke2NvbmZpZy5wZXJzb25hbFRyYWl0cyA/IGAtIFBlcnNvbmFsIFRyYWl0czogJHtjb25maWcucGVyc29uYWxUcmFpdHN9YCA6ICcnfVxuJHtjb25maWcucGhvdG9SZWZlcmVuY2VzPy5sZW5ndGggPyBgLSBSZWZlcmVuY2UgUGhvdG9zOiAke2NvbmZpZy5waG90b1JlZmVyZW5jZXMubWFwKHJlZiA9PiByZWYuZGVzY3JpcHRpb24gfHwgJ1BlcnNvbiBpbiBwaG90bycpLmpvaW4oJywgJyl9YCA6ICcnfVxuXG5DQVJEIERFVEFJTFM6XG4tIE1lc3NhZ2Ugc3BhY2UgbmVlZGVkOiAke2NvbmZpZy5pc0hhbmR3cml0dGVuTWVzc2FnZSA/ICdZZXMgKGJsYW5rIHNwYWNlIGZvciBoYW5kd3JpdGluZyknIDogJ1llcyAoZm9yIHByb3ZpZGVkIG1lc3NhZ2UpJ31cbi0gU3R5bGUgTW9kaWZpZXI6ICR7Y29uZmlnLmFydGlzdGljU3R5bGU/LnByb21wdE1vZGlmaWVyIHx8ICdEZWZhdWx0IHN0eWxlJ31cblxuVklTVUFMIERFTlNJVFkgUkVRVUlSRU1FTlRTOlxuLSBCYWNrIENvdmVyOiAke2RlbnNpdHkuYmFja30lIGRlY29yYXRpb24gKHZlcnkgbWluaW1hbClcbi0gTGVmdCBJbnRlcmlvcjogJHtkZW5zaXR5LmxlZnRJbnRlcmlvcn0lIGRlY29yYXRpb24gKHN1YnRsZSwgY29tcGxlbWVudGFyeSlcbi0gUmlnaHQgSW50ZXJpb3I6ICR7ZGVuc2l0eS5yaWdodEludGVyaW9yfSUgZGVjb3JhdGlvbiAobWluaW1hbCwgbWVzc2FnZS1mb2N1c2VkKVxuXG5DUklUSUNBTCBSRVFVSVJFTUVOVFM6XG4xLiBOTyBQRU9QTEUsIENIQVJBQ1RFUlMsIE9SIEZJR1VSRVMgb24gYW55IGludGVyaW9yIHBhZ2VzIG9yIGJhY2sgY292ZXJcbjIuIE5PIEdSRUVUSU5HIFRFWFQgKGxpa2UgXCJIYXBweSBCaXJ0aGRheVwiLCBcIlRoYW5rIFlvdVwiLCBldGMuKSBvbiBiYWNrIGNvdmVyIG9yIGxlZnQgaW50ZXJpb3IgLSBvbmx5IGRlY29yYXRpdmUgZWxlbWVudHNcbjMuIEV4dHJhY3QgT05MWSBjb2xvcnMgYW5kIGFydGlzdGljIHN0eWxlIGZyb20gdGhlIGZyb250IGNvdmVyIGNvbnRleHRcbjQuIEVhY2ggcGFuZWwgc2hvdWxkIGZlZWwgY29oZXNpdmUgYnV0IHNlcnZlIGl0cyBzcGVjaWZpYyBwdXJwb3NlXG41LiBCYWNrIGNvdmVyIG11c3QgbGVhdmUgYm90dG9tLXJpZ2h0IGNvcm5lciBjbGVhciBmb3IgUVIgY29kZVxuNi4gUmlnaHQgaW50ZXJpb3IgbXVzdCBoYXZlIGVsZWdhbnQgc3BhY2UgZm9yIGEgbWVzc2FnZSAoZG8gTk9UIGluY2x1ZGUgdGhlIGFjdHVhbCBtZXNzYWdlIHRleHQgLSBqdXN0IGNyZWF0ZSBzcGFjZSBmb3IgaXQpXG43LiBORVZFUiBpbmNsdWRlIHRoZSBjYXJkIHR5cGUgZ3JlZXRpbmcgdGV4dCBhbnl3aGVyZSBleGNlcHQgdGhlIGZyb250IGNvdmVyXG5cbiR7dGhpcy5MQVlPVVRfUkVRVUlSRU1FTlRTfVxuJHt0aGlzLlNBRkVUWV9SRVFVSVJFTUVOVFN9YDtcblxuICAgIGNvbnN0IGpzb25TY2hlbWEgPSB7XG4gICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBiYWNrQ292ZXI6IHtcbiAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbXBsZXRlIHByb21wdCBmb3IgYmFjayBjb3ZlciBpbWFnZSBnZW5lcmF0aW9uXCJcbiAgICAgICAgfSxcbiAgICAgICAgbGVmdEludGVyaW9yOiB7XG4gICAgICAgICAgdHlwZTogXCJzdHJpbmdcIiwgXG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiQ29tcGxldGUgcHJvbXB0IGZvciBsZWZ0IGludGVyaW9yIGltYWdlIGdlbmVyYXRpb25cIlxuICAgICAgICB9LFxuICAgICAgICByaWdodEludGVyaW9yOiB7XG4gICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJDb21wbGV0ZSBwcm9tcHQgZm9yIHJpZ2h0IGludGVyaW9yIGltYWdlIGdlbmVyYXRpb25cIlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcmVxdWlyZWQ6IFtcImJhY2tDb3ZlclwiLCBcImxlZnRJbnRlcmlvclwiLCBcInJpZ2h0SW50ZXJpb3JcIl1cbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hhdFdpdGhBSSh1c2VyTWVzc2FnZSwge1xuICAgICAgICBzeXN0ZW1Qcm9tcHQsXG4gICAgICAgIG1vZGVsOiAnZ2VtaW5pLTIuNS1wcm8nLFxuICAgICAgICBqc29uU2NoZW1hXG4gICAgICB9KTtcblxuICAgICAgLy8gUmVzcG9uc2Ugc2hvdWxkIGFscmVhZHkgYmUgcGFyc2VkIEpTT04gZHVlIHRvIGpzb25TY2hlbWFcbiAgICAgIC8vIEFkZCByZWZpbmVtZW50IGluc3RydWN0aW9ucyB0byB0aGUgZnJvbnQgY292ZXIgcHJvbXB0XG4gICAgICBjb25zdCByZWZpbmVkRnJvbnRDb3ZlclByb21wdCA9IGNvbmZpZy5mcm9udENvdmVyUHJvbXB0ICsgYFxuXG5SRUZJTkVNRU5UIE5PVEU6IEEgcm91Z2ggZHJhZnQgb2YgdGhpcyBleGFjdCBpbWFnZSBpcyBwcm92aWRlZCBhcyByZWZlcmVuY2UuIENyZWF0ZSBhIGhpZ2gtcXVhbGl0eSBmaW5hbCB2ZXJzaW9uIHRoYXQ6XG4tIE1haW50YWlucyB0aGUgZXhhY3Qgc2FtZSBjb21wb3NpdGlvbiwgY2hhcmFjdGVyIHBvc2l0aW9ucywgYW5kIG92ZXJhbGwgZGVzaWduXG4tIEVuaGFuY2VzIGRldGFpbHMsIHRleHR1cmVzLCBhbmQgY29sb3IgdmlicmFuY3lcbi0gQ29ycmVjdHMgYW55IG1pbm9yIGltcGVyZmVjdGlvbnMgb3IgYXJ0aWZhY3RzXG4tIEFkZHMgcHJvZmVzc2lvbmFsIHBvbGlzaCB3aGlsZSBzdGF5aW5nIHRydWUgdG8gdGhlIGRyYWZ0XG4tIFRoaW5rIG9mIHRoaXMgYXMgdGhlIFwiZmluYWwgYXJ0XCIgdmVyc2lvbiBvZiB0aGUgcHJvdmlkZWQgc2tldGNoXG5cbk9SSUdJTkFMIENPTlRFWFQgVE8gTUFJTlRBSU46XG4ke2NvbmZpZy50b0ZpZWxkID8gYC0gVG86ICR7Y29uZmlnLnRvRmllbGR9YCA6ICcnfVxuJHtjb25maWcuZnJvbUZpZWxkID8gYC0gRnJvbTogJHtjb25maWcuZnJvbUZpZWxkfWAgOiAnJ31cbiR7Y29uZmlnLnJlbGF0aW9uc2hpcEZpZWxkID8gYC0gUmVsYXRpb25zaGlwOiAke2NvbmZpZy50b0ZpZWxkIHx8ICdUaGUgcmVjaXBpZW50J30gaXMgJHtjb25maWcuZnJvbUZpZWxkIHx8ICd0aGUgc2VuZGVyJ30ncyAke2NvbmZpZy5yZWxhdGlvbnNoaXBGaWVsZH1gIDogJyd9XG4ke2NvbmZpZy5wZXJzb25hbFRyYWl0cyA/IGAtIFBlcnNvbmFsIFRyYWl0cyB0byBpbmNvcnBvcmF0ZTogJHtjb25maWcucGVyc29uYWxUcmFpdHN9YCA6ICcnfVxuJHtjb25maWcucGhvdG9SZWZlcmVuY2VzPy5sZW5ndGggPyBgLSBSZWZlcmVuY2UgcGhvdG9zIG9mOiAke2NvbmZpZy5waG90b1JlZmVyZW5jZXMubWFwKHJlZiA9PiByZWYuZGVzY3JpcHRpb24gfHwgJ1BlcnNvbiBpbiBwaG90bycpLmpvaW4oJywgJyl9YCA6ICcnfWA7XG5cbiAgICAgIGNvbnN0IHByb21wdHM6IENhcmRQcm9tcHRzID0ge1xuICAgICAgICBmcm9udENvdmVyOiByZWZpbmVkRnJvbnRDb3ZlclByb21wdCxcbiAgICAgICAgYmFja0NvdmVyOiByZXNwb25zZS5iYWNrQ292ZXJcbiAgICAgIH07XG5cbiAgICAgIGlmICghY29uZmlnLmlzRnJvbnRCYWNrT25seSkge1xuICAgICAgICBwcm9tcHRzLmxlZnRJbnRlcmlvciA9IHJlc3BvbnNlLmxlZnRJbnRlcmlvcjtcbiAgICAgICAgcHJvbXB0cy5yaWdodEludGVyaW9yID0gcmVzcG9uc2UucmlnaHRJbnRlcmlvcjtcbiAgICAgICAgXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgYWN0dWFsIG1lc3NhZ2UgdG8gdGhlIHJpZ2h0IGludGVyaW9yIHByb21wdFxuICAgICAgICBpZiAoY29uZmlnLm1lc3NhZ2UgJiYgIWNvbmZpZy5pc0hhbmR3cml0dGVuTWVzc2FnZSkge1xuICAgICAgICAgIHByb21wdHMucmlnaHRJbnRlcmlvciArPSBgXFxuXFxuRGlzcGxheSB0aGlzIGV4YWN0IHRleHQgaW4gZWxlZ2FudCwgY2xlYXJseSByZWFkYWJsZSBoYW5kd3JpdHRlbiBzY3JpcHQ6IFwiJHtjb25maWcubWVzc2FnZX1cImA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb21wdHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZW5lcmF0ZSBjb21iaW5lZCBwcm9tcHRzLCBmYWxsaW5nIGJhY2sgdG8gaW5kaXZpZHVhbCBnZW5lcmF0aW9uOicsIGVycm9yKTtcbiAgICAgIC8vIEZhbGwgYmFjayB0byB0aGUgb3JpZ2luYWwgbWV0aG9kXG4gICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZUZpbmFsRnJvbURyYWZ0UHJvbXB0cyhjb25maWcpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFByaXZhdGUgaGVscGVyIG1ldGhvZHMgZm9yIGdlbmVyYXRpbmcgaW5kaXZpZHVhbCBzZWN0aW9uc1xuICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZUZyb250Q292ZXJQcm9tcHQoY2FyZFR5cGU6IHN0cmluZywgdGhlbWU6IHN0cmluZywgc3R5bGVNb2RpZmllcjogc3RyaW5nLCBjb25maWc6IENhcmRDb25maWcpOiBzdHJpbmcge1xuICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSBJRCBmb3IgdGhpcyBzcGVjaWZpYyBwYW5lbFxuICAgIGNvbnN0IHVuaXF1ZUlkID0gdXVpZHY0KCk7XG4gICAgXG4gICAgLy8gRXh0cmFjdCBwZXJzb25hbCBkZXRhaWxzIGZyb20gdGhlbWUgb3IgdXNlIHByb3ZpZGVkIHBlcnNvbmFsVHJhaXRzXG4gICAgY29uc3QgcGVyc29uYWxEZXRhaWxzID0gY29uZmlnLnBlcnNvbmFsVHJhaXRzIFxuICAgICAgPyBgXFxuXFxuUEVSU09OQUwgREVUQUlMUyBUTyBJTkNPUlBPUkFURTpcXG4ke2NvbmZpZy5wZXJzb25hbFRyYWl0c31cXG5cXG5JTVBPUlRBTlQ6IFRoZXNlIHBlcnNvbmFsIGRldGFpbHMgc2hvdWxkIGJlIGNyZWF0aXZlbHkgd292ZW4gaW50byB0aGUgY2FyZCBkZXNpZ246XFxuLSBJZiB0aGV5IGxvdmUgY29mZmVlLCBzaG93IGEgY296eSBjb2ZmZWUgc2NlbmVcXG4tIElmIHRoZXkgZW5qb3kgaGlraW5nLCBpbmNsdWRlIG1vdW50YWluIG9yIHRyYWlsIGVsZW1lbnRzXFxuLSBJZiB0aGV5IGhhdmUgcGV0cyBtZW50aW9uZWQsIGluY2x1ZGUgdGhvc2Ugc3BlY2lmaWMgcGV0c1xcbi0gVHJhbnNmb3JtIGludGVyZXN0cyBpbnRvIHZpc3VhbCBlbGVtZW50cyAoZS5nLiwgXCJsb3ZlcyBzdXNoaVwiID0gc3VzaGkgaWxsdXN0cmF0aW9ucylcXG4tIE1ha2UgdGhlIGNhcmQgZmVlbCBwZXJzb25hbGx5IGNyYWZ0ZWQgZm9yIHNvbWVvbmUgd2l0aCB0aGVzZSBzcGVjaWZpYyBpbnRlcmVzdHNgXG4gICAgICA6IHRoaXMuZXh0cmFjdFBlcnNvbmFsRGV0YWlscyh0aGVtZSk7XG4gICAgXG4gICAgLy8gQnVpbGQgY29udGV4dCBzZWN0aW9uXG4gICAgbGV0IGNvbnRleHRTZWN0aW9uID0gJyc7XG4gICAgaWYgKGNvbmZpZy50b0ZpZWxkIHx8IGNvbmZpZy5mcm9tRmllbGQgfHwgY29uZmlnLnJlbGF0aW9uc2hpcEZpZWxkKSB7XG4gICAgICBjb250ZXh0U2VjdGlvbiA9ICdcXG5cXG5DT05URVhUOic7XG4gICAgICBpZiAoY29uZmlnLnRvRmllbGQpIGNvbnRleHRTZWN0aW9uICs9IGBcXG4tIFRvOiAke2NvbmZpZy50b0ZpZWxkfWA7XG4gICAgICBpZiAoY29uZmlnLmZyb21GaWVsZCkgY29udGV4dFNlY3Rpb24gKz0gYFxcbi0gRnJvbTogJHtjb25maWcuZnJvbUZpZWxkfWA7XG4gICAgICBpZiAoY29uZmlnLnJlbGF0aW9uc2hpcEZpZWxkKSBjb250ZXh0U2VjdGlvbiArPSBgXFxuLSBSZWxhdGlvbnNoaXA6ICR7Y29uZmlnLnRvRmllbGQgfHwgJ1RoZSByZWNpcGllbnQnfSBpcyAke2NvbmZpZy5mcm9tRmllbGQgfHwgJ3RoZSBzZW5kZXInfSdzICR7Y29uZmlnLnJlbGF0aW9uc2hpcEZpZWxkfWA7XG4gICAgfVxuICAgIFxuICAgIC8vIEJ1aWxkIHBob3RvIGNvbnRleHQgaWYgYXZhaWxhYmxlXG4gICAgbGV0IHBob3RvQ29udGV4dCA9ICcnO1xuICAgIGlmIChjb25maWcucmVmZXJlbmNlSW1hZ2VVcmxzPy5sZW5ndGggJiYgY29uZmlnLnBob3RvUmVmZXJlbmNlcz8ubGVuZ3RoKSB7XG4gICAgICBwaG90b0NvbnRleHQgPSAnXFxuXFxuUkVGRVJFTkNFIFBIT1RPUzonO1xuICAgICAgY29uZmlnLnBob3RvUmVmZXJlbmNlcy5mb3JFYWNoKChyZWYsIGlkeCkgPT4ge1xuICAgICAgICBwaG90b0NvbnRleHQgKz0gYFxcbi0gUGhvdG8gJHtpZHggKyAxfTogJHtyZWYuZGVzY3JpcHRpb24gfHwgJ05vIGRlc2NyaXB0aW9uIHByb3ZpZGVkJ31gO1xuICAgICAgfSk7XG4gICAgICBwaG90b0NvbnRleHQgKz0gJ1xcblxcblRyYW5zZm9ybSB0aGVzZSBwZW9wbGUgaW50byBjYXJ0b29uL2lsbHVzdHJhdGVkIGNoYXJhY3RlcnMgbWF0Y2hpbmcgdGhlIGRlc2NyaXB0aW9ucyBhYm92ZS4nO1xuICAgIH1cbiAgICBcbiAgICBsZXQgcHJvbXB0ID0gYENyZWF0ZSBhIGJlYXV0aWZ1bCBmcm9udCBjb3ZlciBmb3IgYSAke2NhcmRUeXBlfSBncmVldGluZyBjYXJkLiAke3RoZW1lfS4ke2NvbnRleHRTZWN0aW9ufSR7cGhvdG9Db250ZXh0fSR7cGVyc29uYWxEZXRhaWxzfVxuICAgIFxuSW5jbHVkZSBhcHByb3ByaWF0ZSBncmVldGluZyB0ZXh0IGZvciBhICR7Y2FyZFR5cGV9IGNhcmQke2NvbmZpZy50b0ZpZWxkID8gYCAoY2FuIG9wdGlvbmFsbHkgaW5jbHVkZSBcIiR7Y29uZmlnLnRvRmllbGR9XCIgaW4gdGhlIGdyZWV0aW5nKWAgOiAnJ30gaW4gZWxlZ2FudCBoYW5kd3JpdHRlbiBzY3JpcHQgcG9zaXRpb25lZCBpbiB0aGUgY2VudGVyIGFyZWEuICR7c3R5bGVNb2RpZmllcn0gJHt0aGlzLkxBWU9VVF9SRVFVSVJFTUVOVFN9IElNUE9SVEFOVDogRG8gTk9UIGluY2x1ZGUgXCJmcm9tXCIgb3Igc2VuZGVyIGluZm9ybWF0aW9uIG9uIHRoZSBmcm9udCBjb3Zlci4gVW5pcXVlIElEOiAke3VuaXF1ZUlkfWA7XG4gICAgXG4gICAgaWYgKGNvbmZpZy5yZWZlcmVuY2VJbWFnZVVybHM/Lmxlbmd0aCkge1xuICAgICAgcHJvbXB0ICs9IGAgJHt0aGlzLmdldEVuaGFuY2VkUmVmZXJlbmNlUGhvdG9JbnN0cnVjdGlvbnMoY29uZmlnLnBob3RvUmVmZXJlbmNlcyl9YDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHByb21wdDtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlQmFja0NvdmVyUHJvbXB0KHN0eWxlTW9kaWZpZXI6IHN0cmluZywgY2FyZFR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGVuc2l0eSA9IHRoaXMuZ2V0VmlzdWFsRGVuc2l0eShjYXJkVHlwZSk7XG4gICAgY29uc3QgdW5pcXVlSWQgPSB1dWlkdjQoKTtcbiAgICByZXR1cm4gYENyZWF0ZSBhIHZlcnkgbWluaW1hbCBiYWNrIGNvdmVyIGRlc2lnbiBmb3IgYSBncmVldGluZyBjYXJkLiBVc2Ugb25seSAke2RlbnNpdHkuYmFja30lIGRlY29yYXRpb24gLSBwZXJoYXBzIGEgc2luZ2xlIHNtYWxsIG1vdGlmLCBhIHN1YnRsZSBwYXR0ZXJuIGJvcmRlciwgb3IgZ2VudGxlIGNvbG9yIHdhc2guIFRoZSBkZXNpZ24gc2hvdWxkIGJlIHVuZGVyc3RhdGVkIGFuZCBlbGVnYW50LCBsZWF2aW5nIG1vc3Qgb2YgdGhlIHNwYWNlIGNsZWFuIGFuZCBwZWFjZWZ1bC4gVGhpbmsgb2YgaXQgYXMgYSBxdWlldCBlbmRpbmcgdG8gdGhlIGNhcmQgZXhwZXJpZW5jZS4gSU1QT1JUQU5UOiBOTyBQRU9QTEUsIE5PIENIQVJBQ1RFUlMsIE5PIEZJR1VSRVMsIE5PIFRFWFQsIE5PIFdPUkRTLCBOTyBHUkVFVElORyAtIG9ubHkgbWluaW1hbCBhYnN0cmFjdCBkZWNvcmF0aXZlIGVsZW1lbnRzLiAke3N0eWxlTW9kaWZpZXJ9ICR7dGhpcy5MQVlPVVRfUkVRVUlSRU1FTlRTfSAke3RoaXMuUVJfQ09ERV9TUEFDRX0gVW5pcXVlIElEOiAke3VuaXF1ZUlkfWA7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZUxlZnRJbnRlcmlvclByb21wdChzdHlsZU1vZGlmaWVyOiBzdHJpbmcsIGNhcmRUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRlbnNpdHkgPSB0aGlzLmdldFZpc3VhbERlbnNpdHkoY2FyZFR5cGUpO1xuICAgIGNvbnN0IHVuaXF1ZUlkID0gdXVpZHY0KCk7XG4gICAgcmV0dXJuIGBDcmVhdGUgc3VidGxlLCBjb21wbGVtZW50YXJ5IGRlY29yYXRpdmUgYXJ0IGZvciB0aGUgbGVmdCBpbnRlcmlvciBwYWdlIG9mIGEgZ3JlZXRpbmcgY2FyZC4gVXNlIHNvZnQsIG11dGVkIHZlcnNpb25zIG9mIHRoZSBjYXJkJ3MgY29sb3IgcGFsZXR0ZS4gS2VlcCBkZWNvcmF0aW9uIG1pbmltYWwgYW5kIGVsZWdhbnQgLSB0aGluayAke2RlbnNpdHkubGVmdEludGVyaW9yfSUgdmlzdWFsIGRlbnNpdHkgY29tcGFyZWQgdG8gdGhlIGZyb250IGNvdmVyLiBGb2N1cyBvbiBnZW50bGUgcGF0dGVybnMsIHNvZnQgd2F0ZXJjb2xvciB3YXNoZXMsIGRlbGljYXRlIGZsb3JhbHMsIG9yIGFic3RyYWN0IGVsZW1lbnRzIHRoYXQgd29uJ3QgY29tcGV0ZSB3aXRoIHRoZSBtZXNzYWdlIG9uIHRoZSBmYWNpbmcgcGFnZS4gSU1QT1JUQU5UOiBOTyBQRU9QTEUsIE5PIENIQVJBQ1RFUlMsIE5PIEZJR1VSRVMsIE5PIFRFWFQsIE5PIFdPUkRTLCBOTyBHUkVFVElORyAtIG9ubHkgZGVjb3JhdGl2ZSBhbmQgYXJ0aXN0aWMgZWxlbWVudHMuICR7c3R5bGVNb2RpZmllcn0gJHt0aGlzLkxBWU9VVF9SRVFVSVJFTUVOVFN9IFVuaXF1ZSBJRDogJHt1bmlxdWVJZH1gO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVSaWdodEludGVyaW9yUHJvbXB0KG1lc3NhZ2U6IHN0cmluZywgaXNIYW5kd3JpdHRlbjogYm9vbGVhbiwgc3R5bGVNb2RpZmllcjogc3RyaW5nLCBjYXJkVHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBkZW5zaXR5ID0gdGhpcy5nZXRWaXN1YWxEZW5zaXR5KGNhcmRUeXBlKTtcbiAgICBjb25zdCBjbGVhblNwYWNlID0gMTAwIC0gZGVuc2l0eS5yaWdodEludGVyaW9yO1xuICAgIGNvbnN0IHVuaXF1ZUlkID0gdXVpZHY0KCk7XG4gICAgXG4gICAgaWYgKGlzSGFuZHdyaXR0ZW4pIHtcbiAgICAgIHJldHVybiBgQ3JlYXRlIGFuIGVsZWdhbnQgd3JpdGluZyBzcGFjZSBmb3IgdGhlIHJpZ2h0IGludGVyaW9yIHBhZ2UuIEFkZCB2ZXJ5IHN1YnRsZSBkZWNvcmF0aXZlIGVsZW1lbnRzIC0gcGVyaGFwcyBqdXN0IGRlbGljYXRlIGNvcm5lciBmbG91cmlzaGVzIG9yIGEgZmFpbnQgYm9yZGVyLiBLZWVwICR7Y2xlYW5TcGFjZX0lIG9mIHRoZSBwYWdlIGNsZWFuIHdoaXRlL2NyZWFtIHNwYWNlIGZvciBoYW5kd3JpdGluZy4gVGhlIGRlY29yYXRpb24gc2hvdWxkIHdoaXNwZXIsIG5vdCBzaG91dC4gSU1QT1JUQU5UOiBOTyBQRU9QTEUsIE5PIENIQVJBQ1RFUlMsIE5PIEZJR1VSRVMgLSBvbmx5IG1pbmltYWwgZGVjb3JhdGl2ZSBlbGVtZW50cy4gJHtzdHlsZU1vZGlmaWVyfSAke3RoaXMuTEFZT1VUX1JFUVVJUkVNRU5UU30gVW5pcXVlIElEOiAke3VuaXF1ZUlkfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGBDcmVhdGUgdGhlIHJpZ2h0IGludGVyaW9yIHBhZ2Ugd2l0aCB0aGlzIGV4YWN0IG1lc3NhZ2UgYXMgdGhlIGFic29sdXRlIGZvY2FsIHBvaW50OiBcIiR7bWVzc2FnZX1cIi4gXG4gICAgXG4ke3RoaXMuVEVYVF9MRUdJQklMSVRZX1JFUVVJUkVNRU5UU31cblxuVGhlIG1lc3NhZ2Ugc2hvdWxkIGJlIHRoZSBzdGFyIC0gdXNlIGVsZWdhbnQgaGFuZHdyaXR0ZW4gc2NyaXB0IHBvc2l0aW9uZWQgcGVyZmVjdGx5IGZvciByZWFkaW5nLiBBZGQgb25seSBtaW5pbWFsIGRlY29yYXRpb24gKCR7ZGVuc2l0eS5yaWdodEludGVyaW9yfSUgb2YgdGhlIHBhZ2UpIHN1Y2ggYXM6XG4tIERlbGljYXRlIGNvcm5lciBmbG91cmlzaGVzXG4tIEEgc2luZ2xlIHNtYWxsIGRlY29yYXRpdmUgZWxlbWVudCBhYm92ZSBvciBiZWxvdyB0aGUgdGV4dFxuLSBWZXJ5IHN1YnRsZSBiYWNrZ3JvdW5kIHRleHR1cmUgb3Igc29mdCBjb2xvciB3YXNoXG4tIFRoaW4sIGVsZWdhbnQgYm9yZGVyIGVsZW1lbnRzXG5cblRoZSBkZWNvcmF0aW9uIHNob3VsZCBlbmhhbmNlIHRoZSBtZXNzYWdlLCBub3QgY29tcGV0ZSB3aXRoIGl0LiBUaGluayBvZiBhIHByZW1pdW0gd2VkZGluZyBpbnZpdGF0aW9uIC0gbW9zdGx5IHdoaXRlIHNwYWNlIHdpdGggcGVyZmVjdCB0eXBvZ3JhcGh5LiBJTVBPUlRBTlQ6IE5PIFBFT1BMRSwgTk8gQ0hBUkFDVEVSUywgTk8gRklHVVJFUyAtIG9ubHkgbWluaW1hbCBkZWNvcmF0aXZlIGVsZW1lbnRzLiAke3N0eWxlTW9kaWZpZXJ9ICR7dGhpcy5MQVlPVVRfUkVRVUlSRU1FTlRTfSBVbmlxdWUgSUQ6ICR7dW5pcXVlSWR9YDtcbiAgfVxuXG4gIC8vIE1ldGhvZHMgZm9yIGdlbmVyYXRpbmcgZnJvbSBleGlzdGluZyBmcm9udCBjb3ZlclxuICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZUJhY2tDb3ZlclByb21wdEZyb21Gcm9udChmcm9udFByb21wdDogc3RyaW5nLCBzdHlsZU1vZGlmaWVyOiBzdHJpbmcsIGNhcmRUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRlbnNpdHkgPSB0aGlzLmdldFZpc3VhbERlbnNpdHkoY2FyZFR5cGUpO1xuICAgIC8vIEV4dHJhY3Qgc3R5bGUgZWxlbWVudHMgZnJvbSBmcm9udCBjb3ZlciBidXQgZXhwbGljaXRseSBleGNsdWRlIGFueSBwZW9wbGUvY2hhcmFjdGVycyBBTkQgVEVYVFxuICAgIHJldHVybiBgQ3JlYXRlIGEgdmVyeSBtaW5pbWFsIGJhY2sgY292ZXIgZm9yIGEgZ3JlZXRpbmcgY2FyZC4gRXh0cmFjdCBPTkxZIHRoZSBjb2xvciBwYWxldHRlIGFuZCBhcnRpc3RpYyBzdHlsZSBmcm9tIHRoaXMgZGVzY3JpcHRpb24gQlVUIGNyZWF0ZSBhIG11Y2ggc2ltcGxlciBkZXNpZ246IFwiJHtmcm9udFByb21wdH1cIi4gXG4gICAgXG5Vc2Ugb25seSAke2RlbnNpdHkuYmFja30lIHZpc3VhbCBkZW5zaXR5IC0gcGVyaGFwcyBhIHNpbmdsZSBzbWFsbCBlbGVtZW50LCBzdWJ0bGUgY29ybmVyIGRldGFpbCwgb3Igc29mdCBjb2xvciBncmFkaWVudC4gTW9zdCBvZiB0aGUgYmFjayBzaG91bGQgYmUgY2xlYW4sIHBlYWNlZnVsIHNwYWNlLiBUaGluayBlbGVnYW50IG1pbmltYWxpc20uIElNUE9SVEFOVDogRE8gTk9UIGluY2x1ZGUgYW55IHBlb3BsZSwgY2hhcmFjdGVycywgZmlndXJlcywgdGV4dCwgd29yZHMsIG9yIGdyZWV0aW5nIG1lc3NhZ2VzLiBOTyBURVhUIEFUIEFMTCAtIG9ubHkgbWluaW1hbCBkZWNvcmF0aXZlIGVsZW1lbnRzLiAke3N0eWxlTW9kaWZpZXJ9ICR7dGhpcy5MQVlPVVRfUkVRVUlSRU1FTlRTfSAke3RoaXMuUVJfQ09ERV9TUEFDRX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVMZWZ0SW50ZXJpb3JQcm9tcHRGcm9tRnJvbnQoZnJvbnRQcm9tcHQ6IHN0cmluZywgc3R5bGVNb2RpZmllcjogc3RyaW5nLCBjYXJkVHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBkZW5zaXR5ID0gdGhpcy5nZXRWaXN1YWxEZW5zaXR5KGNhcmRUeXBlKTtcbiAgICAvLyBFeHRyYWN0IHN0eWxlIGVsZW1lbnRzIGZyb20gZnJvbnQgY292ZXIgYnV0IGV4cGxpY2l0bHkgZXhjbHVkZSBhbnkgcGVvcGxlL2NoYXJhY3RlcnMgQU5EIFRFWFRcbiAgICByZXR1cm4gYENyZWF0ZSBzdWJ0bGUgbGVmdCBpbnRlcmlvciBwYWdlIGFydCBmb3IgYSBncmVldGluZyBjYXJkLiBFeHRyYWN0IHRoZSBjb2xvciBwYWxldHRlIGFuZCBhcnRpc3RpYyBzdHlsZSBmcm9tIHRoaXMgZGVzY3JpcHRpb24gQlVUIGNyZWF0ZSBhIG11Y2ggc29mdGVyLCBtb3JlIG1pbmltYWwgZGVzaWduICgke2RlbnNpdHkubGVmdEludGVyaW9yfSUgdmlzdWFsIGRlbnNpdHkpOiBcIiR7ZnJvbnRQcm9tcHR9XCIuIFxuICAgIFxuVXNlIG11dGVkLCBwYXN0ZWwgdmVyc2lvbnMgb2YgdGhlIGNvbG9ycy4gRm9jdXMgb24gZ2VudGxlIGVsZW1lbnRzIGxpa2Ugc29mdCB3YXRlcmNvbG9yIHdhc2hlcywgZGVsaWNhdGUgcGF0dGVybnMsIG9yIHN1YnRsZSB0ZXh0dXJlcy4gVGhpcyBwYWdlIHNob3VsZCBjb21wbGVtZW50IGJ1dCBub3QgY29tcGV0ZSB3aXRoIHRoZSBtZXNzYWdlIG9uIHRoZSBmYWNpbmcgcGFnZS4gSU1QT1JUQU5UOiBOTyBQRU9QTEUsIE5PIENIQVJBQ1RFUlMsIE5PIEZJR1VSRVMsIE5PIFRFWFQsIE5PIFdPUkRTLCBOTyBHUkVFVElORyBNRVNTQUdFUy4gT25seSBkZWNvcmF0aXZlIGVsZW1lbnRzLiAke3N0eWxlTW9kaWZpZXJ9ICR7dGhpcy5MQVlPVVRfUkVRVUlSRU1FTlRTfWA7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZVJpZ2h0SW50ZXJpb3JQcm9tcHRGcm9tRnJvbnQoZnJvbnRQcm9tcHQ6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBpc0hhbmR3cml0dGVuOiBib29sZWFuLCBzdHlsZU1vZGlmaWVyOiBzdHJpbmcsIGNhcmRUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmIChpc0hhbmR3cml0dGVuKSB7XG4gICAgICByZXR1cm4gYENyZWF0ZSBhbiBlbGVnYW50LCBtaW5pbWFsIHdyaXRpbmcgc3BhY2UgZm9yIHRoZSByaWdodCBpbnRlcmlvciBvZiBhIGdyZWV0aW5nIGNhcmQuIEV4dHJhY3QgT05MWSBzdWJ0bGUgc3R5bGUgaGludHMgZnJvbTogXCIke2Zyb250UHJvbXB0fVwiLiBcbiAgICAgIFxuS2VlcCA4MCUgb2YgdGhlIHBhZ2UgYXMgY2xlYW4gd2hpdGUvY3JlYW0gc3BhY2UgZm9yIGhhbmR3cml0aW5nLiBBZGQgb25seSB3aGlzcGVyLWxpZ2h0IGRlY29yYXRpb24gLSBwZXJoYXBzIGZhaW50IGNvcm5lciBmbG91cmlzaGVzIG9yIGEgZGVsaWNhdGUgYm9yZGVyLiBUaGUgcGFnZSBzaG91bGQgZmVlbCBwcmVtaXVtIGFuZCB1bmRlcnN0YXRlZC4gTk8gUEVPUExFLCBOTyBDSEFSQUNURVJTLCBOTyBGSUdVUkVTLiAke3N0eWxlTW9kaWZpZXJ9ICR7dGhpcy5MQVlPVVRfUkVRVUlSRU1FTlRTfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGBDcmVhdGUgYSByaWdodCBpbnRlcmlvciBwYWdlIHdoZXJlIHRoaXMgbWVzc2FnZSBpcyB0aGUgYWJzb2x1dGUgc3RhcjogXCIke21lc3NhZ2V9XCIuIFxuXG5Vc2Ugc3VidGxlIHN0eWxlIGVsZW1lbnRzIGZyb20gdGhlIGZyb250IGRlc2lnbiBidXQga2VlcCBkZWNvcmF0aW9uIG1pbmltYWwgKDEwLTIwJSBvZiBwYWdlKS4gRXh0cmFjdCBjb2xvciBoaW50cyBmcm9tOiBcIiR7ZnJvbnRQcm9tcHR9XCIuXG5cbiR7dGhpcy5URVhUX0xFR0lCSUxJVFlfUkVRVUlSRU1FTlRTfSBcblxuVGhpbmsgcHJlbWl1bSBzdGF0aW9uZXJ5IC0gbW9zdGx5IHdoaXRlIHNwYWNlLCBwZXJmZWN0IG1lc3NhZ2UgcGxhY2VtZW50LCBhbmQganVzdCBhIHRvdWNoIG9mIGVsZWdhbnQgZGVjb3JhdGlvbiAoY29ybmVyIGRldGFpbHMsIHNtYWxsIGZsb3VyaXNoLCBvciBzb2Z0IHdhc2gpLiBUaGUgbWVzc2FnZSBzaG91bGQgZG9taW5hdGUgdGhlIHZpc3VhbCBoaWVyYXJjaHkuIE5PIFBFT1BMRSwgTk8gQ0hBUkFDVEVSUywgTk8gRklHVVJFUy4gJHtzdHlsZU1vZGlmaWVyfSAke3RoaXMuTEFZT1VUX1JFUVVJUkVNRU5UU31gO1xuICB9XG5cbiAgLy8gR2V0IHRvbmUtc3BlY2lmaWMgaW5zdHJ1Y3Rpb25zXG4gIHByaXZhdGUgc3RhdGljIGdldFRvbmVTcGVjaWZpY0luc3RydWN0aW9ucyh0b25lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRvbmVJbnN0cnVjdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnZnVubnknOiAnLSBJbmNsdWRlIGFwcHJvcHJpYXRlIGh1bW9yIHRoYXQgZml0cyB0aGUgb2NjYXNpb24nLFxuICAgICAgJ2dlbnotaHVtb3InOiAnLSBVc2UgR2VuWiBodW1vciB3aXRoIGludGVybmV0IHNsYW5nLCBtZW1lcywgYW5kIGNoYW90aWMgZW5lcmd5IC0gdGhpbmsgXCJubyBjYXBcIiwgXCJwZXJpb2R0XCIsIFwiaXRcXCdzIGdpdmluZy4uLlwiLCBcInNsYXlcIiwgZXRjLiBCZSB1bmhpbmdlZCBidXQgZW5kZWFyaW5nJyxcbiAgICAgICdwcm9mZXNzaW9uYWwnOiAnLSBLZWVwIGl0IGZvcm1hbCBhbmQgYnVzaW5lc3MtYXBwcm9wcmlhdGUnLFxuICAgICAgJ3JvbWFudGljJzogJy0gSW5jbHVkZSBsb3ZpbmcgYW5kIHJvbWFudGljIGxhbmd1YWdlJyxcbiAgICAgICdwbGF5ZnVsJzogJy0gVXNlIGZ1biBhbmQgZW5lcmdldGljIGxhbmd1YWdlJ1xuICAgIH07XG5cbiAgICByZXR1cm4gdG9uZUluc3RydWN0aW9uc1t0b25lXSB8fCAnJztcbiAgfVxuXG4gIC8vIEFwcGx5IHJlZmVyZW5jZSBwaG90byBpbnN0cnVjdGlvbnMgaWYgdXNpbmcgR1BULTFcbiAgc3RhdGljIGVuaGFuY2VQcm9tcHRXaXRoUmVmZXJlbmNlUGhvdG9zKHByb21wdDogc3RyaW5nLCBoYXNSZWZlcmVuY2VQaG90b3M6IGJvb2xlYW4sIG1vZGVsPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoaGFzUmVmZXJlbmNlUGhvdG9zICYmIG1vZGVsID09PSAnZ3B0LWltYWdlLTEnKSB7XG4gICAgICByZXR1cm4gYCR7cHJvbXB0fVxcblxcbiR7dGhpcy5SRUZFUkVOQ0VfUEhPVE9fSU5TVFJVQ1RJT05TfWA7XG4gICAgfVxuICAgIHJldHVybiBwcm9tcHQ7XG4gIH1cblxuICAvLyBGb3JtYXQgcHJvbXB0IGdlbmVyYXRpb24gcXVlcnkgZm9yIEpTT04gcmVzcG9uc2VcbiAgc3RhdGljIGZvcm1hdFByb21wdEdlbmVyYXRpb25RdWVyeShjb250ZXh0OiBzdHJpbmcsIHJlcXVpcmVtZW50czogc3RyaW5nLCBqc29uU3RydWN0dXJlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBgQ3JlYXRlIHByb21wdHMgZm9yIGEgZ3JlZXRpbmcgY2FyZC5cblxuJHtjb250ZXh0fVxuXG5SZXF1aXJlbWVudHM6XG4ke3RoaXMuTEFZT1VUX1JFUVVJUkVNRU5UU31cbiR7dGhpcy5TQUZFVFlfUkVRVUlSRU1FTlRTfVxuJHtyZXF1aXJlbWVudHN9XG5cblJldHVybiBKU09OOlxuJHtqc29uU3RydWN0dXJlfWA7XG4gIH1cblxuICAvLyBHZW5lcmF0ZSBzY2VuZSBkZXNjcmlwdGlvbiBmcm9tIHBlcnNvbmFsIHRyYWl0c1xuICBzdGF0aWMgYXN5bmMgZ2VuZXJhdGVTY2VuZUZyb21QZXJzb25hbFRyYWl0cyhcbiAgICBwZXJzb25hbFRyYWl0czogc3RyaW5nLFxuICAgIGNhcmRUeXBlOiBzdHJpbmcsXG4gICAgdG9uZTogc3RyaW5nLFxuICAgIHBob3RvUmVmZXJlbmNlcz86IFBob3RvUmVmZXJlbmNlW11cbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyBJbXBvcnQgY2hhdFdpdGhBSSBkeW5hbWljYWxseSB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXNcbiAgICBjb25zdCB7IGNoYXRXaXRoQUkgfSA9IGF3YWl0IGltcG9ydCgnLi4vaG9va3MvY2FyZFN0dWRpby91dGlscycpO1xuICAgIFxuICAgIGxldCBwaG90b0NvbnRleHQgPSAnJztcbiAgICBpZiAocGhvdG9SZWZlcmVuY2VzICYmIHBob3RvUmVmZXJlbmNlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBwaG90b3NXaXRoRGVzY3JpcHRpb25zID0gcGhvdG9SZWZlcmVuY2VzLmZpbHRlcihyZWYgPT4gcmVmLmRlc2NyaXB0aW9uICYmIHJlZi5kZXNjcmlwdGlvbi50cmltKCkgIT09ICcnKTtcbiAgICAgIGlmIChwaG90b3NXaXRoRGVzY3JpcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25zID0gcGhvdG9zV2l0aERlc2NyaXB0aW9ucy5tYXAocmVmID0+IHJlZi5kZXNjcmlwdGlvbikuam9pbignLCAnKTtcbiAgICAgICAgcGhvdG9Db250ZXh0ID0gYFxcblxcblRoZSBjYXJkIHNob3VsZCBmZWF0dXJlOiAke2Rlc2NyaXB0aW9uc30uIElNUE9SVEFOVDogT25seSBpbmNsdWRlIHRoZSBwZW9wbGUgbWVudGlvbmVkIC0gZG8gbm90IGFkZCBhbnkgYWRkaXRpb25hbCBwZW9wbGUuYDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc3QgcHJvbXB0ID0gYFlvdSBhcmUgYSBjcmVhdGl2ZSBzY2VuZSBkZXNpZ25lciBmb3IgZ3JlZXRpbmcgY2FyZHMuIEJhc2VkIG9uIHRoZSBwZXJzb24ncyBpbnRlcmVzdHMgYW5kIHRyYWl0cywgY3JlYXRlIGEgcGVyc29uYWxpemVkIHNjZW5lIGRlc2NyaXB0aW9uIGZvciB0aGVpciAke2NhcmRUeXBlfSBjYXJkLlxuXG5QZXJzb25hbCB0cmFpdHMgYW5kIGludGVyZXN0czpcbiR7cGVyc29uYWxUcmFpdHN9JHtwaG90b0NvbnRleHR9XG5cbkNhcmQgZGV0YWlsczpcbi0gQ2FyZCB0eXBlOiAke2NhcmRUeXBlfVxuLSBUb25lOiAke3RvbmV9XG5cbkNyZWF0ZSBhIHNjZW5lIGRlc2NyaXB0aW9uICgyMC0zMCB3b3JkcykgdGhhdDpcbjEuIEluY29ycG9yYXRlcyB0aGVpciBzcGVjaWZpYyBpbnRlcmVzdHMgYW5kIGhvYmJpZXNcbjIuIEZlZWxzIHBlcnNvbmFsIGFuZCBtZWFuaW5nZnVsXG4zLiBNYXRjaGVzIHRoZSAke3RvbmV9IHRvbmVcbjQuIFdvcmtzIHdlbGwgZm9yIGEgJHtjYXJkVHlwZX0gY2FyZFxuNS4gQXZvaWRzIGdlbmVyaWMgb3IgY2xpY2jDqSBpbWFnZXJ5XG5cblJldHVybiBPTkxZIHRoZSBzY2VuZSBkZXNjcmlwdGlvbiAtIG5vIHF1b3Rlcywgbm8gZXhwbGFuYXRpb25zLCBqdXN0IHRoZSBjcmVhdGl2ZSBzY2VuZSBpbiBwbGFpbiBsYW5ndWFnZS5gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hhdFdpdGhBSShwcm9tcHQsIHtcbiAgICAgICAgbW9kZWw6ICdnZW1pbmktMi41LXBybydcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4gcmVzcG9uc2UgfHwgYEEgYmVhdXRpZnVsICR7Y2FyZFR5cGV9IGNhcmQgY2VsZWJyYXRpbmcgdGhlaXIgdW5pcXVlIGludGVyZXN0cyBhbmQgcGVyc29uYWxpdHlgO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIHNjZW5lIGZyb20gdHJhaXRzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBgQSBiZWF1dGlmdWwgJHtjYXJkVHlwZX0gY2FyZCBjZWxlYnJhdGluZyB0aGVpciB1bmlxdWUgaW50ZXJlc3RzIGFuZCBwZXJzb25hbGl0eWA7XG4gICAgfVxuICB9XG59Il0sIm5hbWVzIjpbInY0IiwidXVpZHY0IiwiQ0FSRF9UWVBFX0RFTlNJVElFUyIsImJhY2siLCJsZWZ0SW50ZXJpb3IiLCJyaWdodEludGVyaW9yIiwiUHJvbXB0R2VuZXJhdG9yIiwiZ2V0VmlzdWFsRGVuc2l0eSIsImNhcmRUeXBlIiwiZGVmYXVsdCIsImdldEVuaGFuY2VkUmVmZXJlbmNlUGhvdG9JbnN0cnVjdGlvbnMiLCJwaG90b1JlZmVyZW5jZXMiLCJsZW5ndGgiLCJ0cmltIiwicGhvdG9zV2l0aERlc2NyaXB0aW9ucyIsImZpbHRlciIsInJlZiIsImRlc2NyaXB0aW9uIiwiaW5zdHJ1Y3Rpb25zIiwiZm9yRWFjaCIsImlkeCIsImltYWdlSW5kZXgiLCJleHRyYWN0UGVyc29uYWxEZXRhaWxzIiwidGhlbWUiLCJwZXJzb25hbEtleXdvcmRzIiwidGhlbWVXb3JkcyIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJoYXNQZXJzb25hbERldGFpbHMiLCJzb21lIiwia2V5d29yZCIsImluY2x1ZGVzIiwiZ2VuZXJhdGVDYXJkUHJvbXB0c1dpdGhBSSIsImNvbmZpZyIsImdlbmVyYXRlQ2FyZFByb21wdHMiLCJjYXJkVHlwZUZvclByb21wdCIsImN1c3RvbUNhcmRUeXBlIiwiZWZmZWN0aXZlUHJvbXB0Iiwic3R5bGVNb2RpZmllciIsImFydGlzdGljU3R5bGUiLCJwcm9tcHRNb2RpZmllciIsInVuaXF1ZUlkIiwiYmFzZUNvbnRleHQiLCJsYWJlbCIsInJlZmVyZW5jZUltYWdlVXJscyIsImZyb250Q292ZXIiLCJnZW5lcmF0ZUZyb250Q292ZXJQcm9tcHQiLCJiYWNrQ292ZXIiLCJnZW5lcmF0ZUJhY2tDb3ZlclByb21wdCIsInByb21wdHMiLCJpc0Zyb250QmFja09ubHkiLCJnZW5lcmF0ZUxlZnRJbnRlcmlvclByb21wdCIsImdlbmVyYXRlUmlnaHRJbnRlcmlvclByb21wdCIsIm1lc3NhZ2UiLCJpc0hhbmR3cml0dGVuTWVzc2FnZSIsImdlbmVyYXRlRHJhZnRQcm9tcHRXaXRoSW1hZ2VzIiwicHJvbXB0IiwiZ2VuZXJhdGVEcmFmdFByb21wdCIsImltYWdlcyIsImdlbmVyYXRlQ3JlYXRpdmVEcmFmdFByb21wdCIsImNoYXRXaXRoQUkiLCJpbnN0cnVjdGlvblByb21wdCIsInN5c3RlbVByb21wdCIsImNyZWF0aXZlUHJvbXB0IiwibW9kZWwiLCJhdHRhY2htZW50cyIsImVycm9yIiwiY29uc29sZSIsImdlbmVyYXRlRmFsbGJhY2tDcmVhdGl2ZVByb21wdCIsInRvRmllbGQiLCJpc0RyYWZ0VmFyaWF0aW9uIiwidmFyaWF0aW9uSW5kZXgiLCJ1bmRlZmluZWQiLCJzbWFydFN0eWxlcyIsInBlcnNvbmFsRGV0YWlscyIsInBlcnNvbmFsVHJhaXRzIiwidG9uZUxhYmVsIiwidG9uZURlc2NyaXB0aW9uIiwiZnJvbUZpZWxkIiwicmVsYXRpb25zaGlwRmllbGQiLCJtYXAiLCJqb2luIiwiZ2VuZXJhdGVNZXNzYWdlUHJvbXB0IiwicmVsYXRpb25zaGlwQ29udGV4dCIsIlNBRkVUWV9SRVFVSVJFTUVOVFMiLCJnZXRUb25lU3BlY2lmaWNJbnN0cnVjdGlvbnMiLCJ0b25lIiwiZ2VuZXJhdGVGaW5hbEZyb21EcmFmdFByb21wdHMiLCJnZW5lcmF0ZUJhY2tDb3ZlclByb21wdEZyb21Gcm9udCIsImZyb250Q292ZXJQcm9tcHQiLCJyZWZpbmVkRnJvbnRDb3ZlclByb21wdCIsImdlbmVyYXRlTGVmdEludGVyaW9yUHJvbXB0RnJvbUZyb250IiwiZ2VuZXJhdGVSaWdodEludGVyaW9yUHJvbXB0RnJvbUZyb250IiwiZ2VuZXJhdGVGaW5hbEZyb21EcmFmdFByb21wdHNDb21iaW5lZCIsImRlbnNpdHkiLCJ1c2VyTWVzc2FnZSIsIkxBWU9VVF9SRVFVSVJFTUVOVFMiLCJqc29uU2NoZW1hIiwidHlwZSIsInByb3BlcnRpZXMiLCJyZXF1aXJlZCIsInJlc3BvbnNlIiwiY29udGV4dFNlY3Rpb24iLCJwaG90b0NvbnRleHQiLCJRUl9DT0RFX1NQQUNFIiwiaXNIYW5kd3JpdHRlbiIsImNsZWFuU3BhY2UiLCJURVhUX0xFR0lCSUxJVFlfUkVRVUlSRU1FTlRTIiwiZnJvbnRQcm9tcHQiLCJ0b25lSW5zdHJ1Y3Rpb25zIiwiZW5oYW5jZVByb21wdFdpdGhSZWZlcmVuY2VQaG90b3MiLCJoYXNSZWZlcmVuY2VQaG90b3MiLCJSRUZFUkVOQ0VfUEhPVE9fSU5TVFJVQ1RJT05TIiwiZm9ybWF0UHJvbXB0R2VuZXJhdGlvblF1ZXJ5IiwiY29udGV4dCIsInJlcXVpcmVtZW50cyIsImpzb25TdHJ1Y3R1cmUiLCJnZW5lcmF0ZVNjZW5lRnJvbVBlcnNvbmFsVHJhaXRzIiwiZGVzY3JpcHRpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/promptGenerator.ts\n"));

/***/ })

});