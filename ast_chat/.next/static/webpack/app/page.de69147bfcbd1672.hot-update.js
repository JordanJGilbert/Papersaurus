"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./hooks/cardStudio/useDraftGeneration.ts":
/*!************************************************!*\
  !*** ./hooks/cardStudio/useDraftGeneration.ts ***!
  \************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDraftGeneration: function() { return /* binding */ useDraftGeneration; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sonner */ \"(app-pages-browser)/./node_modules/sonner/dist/index.mjs\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var _lib_promptGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/promptGenerator */ \"(app-pages-browser)/./lib/promptGenerator.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants */ \"(app-pages-browser)/./hooks/cardStudio/constants.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils */ \"(app-pages-browser)/./hooks/cardStudio/utils.ts\");\n/* __next_internal_client_entry_do_not_use__ useDraftGeneration auto */ \n\n\n\n\n\nfunction useDraftGeneration(props) {\n    // Draft mode state\n    const [isDraftMode, setIsDraftMode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [draftCards, setDraftCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [selectedDraftIndex, setSelectedDraftIndex] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(-1);\n    const [isGeneratingFinalCard, setIsGeneratingFinalCard] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [previewingDraftIndex, setPreviewingDraftIndex] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(-1);\n    const [draftCompletionShown, setDraftCompletionShown] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [draftCompletionCount, setDraftCompletionCount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [isGenerating, setIsGenerating] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [generationProgress, setGenerationProgress] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [generatedCard, setGeneratedCard] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [generatedCards, setGeneratedCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [isCardCompleted, setIsCardCompleted] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [currentJobId, setCurrentJobId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    // Draft mode generation - creates 5 front cover variations\n    const handleGenerateDraftCards = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        const { userEmail, selectedArtisticStyle, customStyleDescription, referenceImageUrls, selectedDraftModel, selectedType, customCardType, selectedTone, prompt, toField, fromField, selectedPaperSize, saveJobToStorage, subscribeToJob, startElapsedTimeTracking } = props;\n        if (!userEmail.trim()) {\n            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Please enter your email address\");\n            return;\n        }\n        // Basic email validation\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        if (!emailRegex.test(userEmail)) {\n            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Please enter a valid email address\");\n            return;\n        }\n        // Validate custom style if selected\n        if (selectedArtisticStyle === \"custom\" && !customStyleDescription.trim()) {\n            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Please describe your custom artistic style\");\n            return;\n        }\n        // Validate reference images with model compatibility\n        if (referenceImageUrls.length > 0 && selectedDraftModel !== \"gpt-image-1\") {\n            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Reference photos are only supported with GPT Image 1 model. Please switch to GPT Image 1 for draft mode or remove reference photos.\");\n            return;\n        }\n        // Stop any existing timers first\n        props.stopElapsedTimeTracking();\n        // Clear any existing progress interval\n        if (progressInterval) {\n            clearInterval(progressInterval);\n            setProgressInterval(null);\n        }\n        // Clear ALL WebSocket subscriptions before starting\n        if (props.unsubscribeFromAllJobs) {\n            props.unsubscribeFromAllJobs();\n        }\n        // Clear all old draft jobs from localStorage before starting new generation\n        if (true) {\n            console.log(\"\\uD83E\\uDDF9 Clearing old draft jobs before starting new generation\");\n            const keys = Object.keys(localStorage);\n            keys.forEach((key)=>{\n                if (key.startsWith(\"cardJob_draft-\")) {\n                    localStorage.removeItem(key);\n                }\n            });\n            // Also clear from pending jobs list\n            const pendingJobs = JSON.parse(localStorage.getItem(\"pendingCardJobs\") || \"[]\");\n            const filteredJobs = pendingJobs.filter((id)=>!id.startsWith(\"draft-\"));\n            localStorage.setItem(\"pendingCardJobs\", JSON.stringify(filteredJobs));\n        }\n        setIsDraftMode(true);\n        setIsGenerating(true);\n        startElapsedTimeTracking(\"draft\");\n        setGenerationProgress(\"\\uD83C\\uDFA8 Creating 5 front cover variations for you to choose from...\");\n        setDraftCards([\n            null,\n            null,\n            null,\n            null,\n            null\n        ]); // Initialize with 5 empty slots\n        setSelectedDraftIndex(-1);\n        setDraftCompletionShown(false);\n        setDraftCompletionCount(0);\n        // Clear any previous card state\n        setGeneratedCard(null);\n        setGeneratedCards([]);\n        setIsCardCompleted(false);\n        // Simple time-based progress - increases by ~2.2% per second (45 seconds to reach 100%)\n        const interval = setInterval(()=>{\n            setProgressPercentage((prev)=>{\n                const newProgress = prev + 2.2;\n                return newProgress >= 95 ? 95 : newProgress; // Cap at 95% until completion\n            });\n        }, 1000); // Update every second\n        setProgressInterval(interval);\n        try {\n            console.log(\"\\uD83D\\uDE80 Starting draft mode generation with 5 variations\");\n            const cardTypeForPrompt = selectedType === \"custom\" ? customCardType : selectedType;\n            const selectedToneObj = _constants__WEBPACK_IMPORTED_MODULE_3__.cardTones.find((tone)=>tone.id === selectedTone);\n            const toneDescription = selectedToneObj ? selectedToneObj.description.toLowerCase() : \"heartfelt and sincere\";\n            const effectivePrompt = prompt.trim() || \"A beautiful \".concat(cardTypeForPrompt, \" card with \").concat(toneDescription, \" style\");\n            // Generate 5 draft variations\n            const draftPromises = Array.from({\n                length: 5\n            }, async (_, index)=>{\n                try {\n                    var _paperSizes_find, _paperSizes_find1;\n                    console.log(\"\\uD83C\\uDFA8 Starting draft variation \".concat(index + 1));\n                    // For smart style, use predefined styles\n                    let styleOverride = undefined;\n                    let styleLabel = undefined;\n                    if (selectedArtisticStyle === \"ai-smart-style\") {\n                        const predefinedStyles = [\n                            \"watercolor\",\n                            \"botanical\",\n                            \"comic-book\",\n                            \"dreamy-fantasy\",\n                            \"minimalist\"\n                        ];\n                        const styleLabels = [\n                            \"\\uD83C\\uDFA8 Watercolor\",\n                            \"\\uD83C\\uDF3F Botanical\",\n                            \"\\uD83D\\uDCA5 Comic Book\",\n                            \"\\uD83C\\uDF38 Dreamy Fantasy\",\n                            \"✨ Minimalist\"\n                        ];\n                        styleOverride = predefinedStyles[index];\n                        styleLabel = styleLabels[index];\n                    }\n                    // Generate front cover prompt\n                    const selectedStyle = _constants__WEBPACK_IMPORTED_MODULE_3__.artisticStyles.find((style)=>style.id === (styleOverride || selectedArtisticStyle));\n                    const draftConfig = {\n                        cardType: selectedType,\n                        customCardType: customCardType,\n                        tone: selectedTone,\n                        toneLabel: selectedToneObj ? selectedToneObj.label : \"Heartfelt\",\n                        toneDescription: toneDescription,\n                        theme: effectivePrompt,\n                        toField: toField,\n                        fromField: fromField,\n                        artisticStyle: selectedStyle,\n                        referenceImageUrls: referenceImageUrls,\n                        photoAnalyses: props.photoAnalyses,\n                        isDraftVariation: selectedArtisticStyle === \"smart\",\n                        variationIndex: index\n                    };\n                    const { prompt: frontCoverPromptQuery, images } = _lib_promptGenerator__WEBPACK_IMPORTED_MODULE_2__.PromptGenerator.generateDraftPromptWithImages(draftConfig);\n                    const frontCoverPrompt = await (0,_utils__WEBPACK_IMPORTED_MODULE_4__.chatWithAI)(frontCoverPromptQuery, {\n                        model: \"gemini-2.5-pro\",\n                        attachments: images\n                    });\n                    if (!(frontCoverPrompt === null || frontCoverPrompt === void 0 ? void 0 : frontCoverPrompt.trim())) {\n                        throw new Error(\"Failed to generate front cover prompt\");\n                    }\n                    // Enhance with reference image instructions\n                    let enhancedFrontCoverPrompt = frontCoverPrompt.trim();\n                    enhancedFrontCoverPrompt = _lib_promptGenerator__WEBPACK_IMPORTED_MODULE_2__.PromptGenerator.enhancePromptWithReferencePhotos(enhancedFrontCoverPrompt, referenceImageUrls.length > 0, selectedDraftModel);\n                    // Generate the image\n                    const jobId = \"draft-\".concat(index, \"-\").concat((0,uuid__WEBPACK_IMPORTED_MODULE_5__[\"default\"])());\n                    const inputImages = [];\n                    if (referenceImageUrls.length > 0 && selectedDraftModel === \"gpt-image-1\") {\n                        inputImages.push(...referenceImageUrls);\n                    }\n                    const response = await fetch(\"/api/generate-card-async\", {\n                        method: \"POST\",\n                        headers: {\n                            \"Content-Type\": \"application/json\"\n                        },\n                        body: JSON.stringify({\n                            jobId,\n                            prompts: {\n                                frontCover: enhancedFrontCoverPrompt\n                            },\n                            config: {\n                                userNumber: \"+17145986105\",\n                                modelVersion: selectedDraftModel,\n                                aspectRatio: ((_paperSizes_find = _constants__WEBPACK_IMPORTED_MODULE_3__.paperSizes.find((size)=>size.id === selectedPaperSize)) === null || _paperSizes_find === void 0 ? void 0 : _paperSizes_find.aspectRatio) || \"9:16\",\n                                quality: \"low\",\n                                outputFormat: \"jpeg\",\n                                outputCompression: 100,\n                                moderation: \"low\",\n                                dimensions: ((_paperSizes_find1 = _constants__WEBPACK_IMPORTED_MODULE_3__.paperSizes.find((size)=>size.id === selectedPaperSize)) === null || _paperSizes_find1 === void 0 ? void 0 : _paperSizes_find1.dimensions) || \"1024x1536\",\n                                isFrontBackOnly: true,\n                                userEmail,\n                                cardType: cardTypeForPrompt,\n                                toField,\n                                fromField,\n                                isDraftMode: true,\n                                ...inputImages.length > 0 && {\n                                    input_images: inputImages,\n                                    input_images_mode: \"front_cover_only\"\n                                }\n                            }\n                        })\n                    });\n                    if (!response.ok) {\n                        throw new Error(\"Server error: \".concat(response.status));\n                    }\n                    const result = await response.json();\n                    if (result.status !== \"processing\") {\n                        throw new Error(result.message || \"Failed to start draft generation\");\n                    }\n                    console.log(\"✅ Draft variation \".concat(index + 1, \" job started:\"), jobId);\n                    // Save draft job to storage for recovery\n                    saveJobToStorage(jobId, {\n                        isDraft: true,\n                        draftIndex: index,\n                        styleInfo: styleOverride ? {\n                            styleName: styleOverride,\n                            styleLabel: styleLabel\n                        } : undefined,\n                        frontCoverPrompt: enhancedFrontCoverPrompt,\n                        userEmail,\n                        selectedType,\n                        selectedTone,\n                        toField,\n                        fromField,\n                        draftCards: [] // Will be updated as drafts complete\n                    });\n                    // Subscribe to WebSocket updates\n                    subscribeToJob(jobId);\n                } catch (error) {\n                    console.error(\"❌ Draft variation \".concat(index + 1, \" failed:\"), error);\n                    sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Draft variation \".concat(index + 1, \" failed: \").concat(error instanceof Error ? error.message : \"Unknown error\"));\n                }\n            });\n            // Wait for all draft generations to start\n            await Promise.allSettled(draftPromises);\n            console.log(\"\\uD83D\\uDE80 All draft variations started\");\n        } catch (error) {\n            console.error(\"Draft card generation error:\", error);\n            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Failed to start draft generation: \".concat(error instanceof Error ? error.message : \"Unknown error\"));\n            setIsGenerating(false);\n            setIsDraftMode(false);\n            setDraftCompletionShown(false);\n            setDraftCompletionCount(0);\n            setGenerationProgress(\"\");\n            props.stopElapsedTimeTracking();\n            // Clear progress interval on error\n            if (progressInterval) {\n                clearInterval(progressInterval);\n                setProgressInterval(null);\n            }\n        }\n    }, [\n        props,\n        progressInterval\n    ]);\n    // Generate final high-quality card from selected draft\n    const handleGenerateFinalFromDraft = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (displayIndex)=>{\n        // Prevent duplicate calls\n        if (isGeneratingFinalCard) {\n            console.log(\"⚠️ Final card generation already in progress, skipping duplicate call\");\n            return;\n        }\n        const selectedDraft = draftCards[displayIndex];\n        if (!selectedDraft) {\n            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Please wait for the draft to complete before selecting\");\n            return;\n        }\n        const { selectedType, customCardType, selectedTone, prompt, toField, fromField, finalCardMessage, isHandwrittenMessage, selectedArtisticStyle, customStyleDescription, isFrontBackOnly, selectedImageModel, selectedPaperSize, userEmail, referenceImageUrls, startElapsedTimeTracking, subscribeToJob } = props;\n        // Stop any existing timers first\n        props.stopElapsedTimeTracking();\n        // Clear any existing progress interval\n        clearProgressInterval();\n        setIsGeneratingFinalCard(true);\n        setIsDraftMode(false); // Switch out of draft mode for final generation\n        setSelectedDraftIndex(displayIndex);\n        startElapsedTimeTracking(\"final\");\n        setGenerationProgress(\"\\uD83C\\uDFA8 Creating high-quality version of your selected design...\");\n        setProgressPercentage(0);\n        // Simple time-based progress for final card - increases by ~1.1% per second (90 seconds to reach 100%)\n        const interval = setInterval(()=>{\n            setProgressPercentage((prev)=>{\n                const newProgress = prev + 1.1;\n                return newProgress >= 95 ? 95 : newProgress; // Cap at 95% until completion\n            });\n        }, 1000); // Update every second\n        setProgressInterval(interval);\n        try {\n            var _selectedDraft_generatedPrompts, _paperSizes_find, _paperSizes_find1;\n            const jobId = (0,uuid__WEBPACK_IMPORTED_MODULE_5__[\"default\"])();\n            // Generate the missing prompts\n            const storedFrontCoverPrompt = (_selectedDraft_generatedPrompts = selectedDraft.generatedPrompts) === null || _selectedDraft_generatedPrompts === void 0 ? void 0 : _selectedDraft_generatedPrompts.frontCover;\n            if (!storedFrontCoverPrompt) {\n                throw new Error(\"Selected draft is missing frontCover prompt\");\n            }\n            const cardTypeForPrompt = selectedType === \"custom\" ? customCardType : selectedType;\n            const selectedToneObj = _constants__WEBPACK_IMPORTED_MODULE_3__.cardTones.find((tone)=>tone.id === selectedTone);\n            const toneDescription = selectedToneObj ? selectedToneObj.description.toLowerCase() : \"heartfelt and sincere\";\n            const effectivePrompt = prompt.trim() || \"A beautiful \".concat(cardTypeForPrompt, \" card with \").concat(toneDescription, \" style\");\n            let messageContent = finalCardMessage;\n            if (isHandwrittenMessage) {\n                messageContent = \"[Blank space for handwritten message]\";\n            }\n            // Get style from the selected draft\n            const draftStyleInfo = selectedDraft.styleInfo;\n            let selectedStyle;\n            if (draftStyleInfo && draftStyleInfo.styleName) {\n                selectedStyle = _constants__WEBPACK_IMPORTED_MODULE_3__.artisticStyles.find((style)=>style.id === draftStyleInfo.styleName);\n            } else {\n                selectedStyle = _constants__WEBPACK_IMPORTED_MODULE_3__.artisticStyles.find((style)=>style.id === selectedArtisticStyle);\n            }\n            // Use PromptGenerator for final card from draft\n            const finalFromDraftConfig = {\n                frontCoverPrompt: storedFrontCoverPrompt,\n                cardType: selectedType,\n                customCardType: customCardType,\n                theme: effectivePrompt,\n                tone: selectedTone,\n                toneDescription: toneDescription,\n                toField: toField,\n                fromField: fromField,\n                message: messageContent,\n                isHandwrittenMessage: isHandwrittenMessage,\n                artisticStyle: selectedStyle,\n                isFrontBackOnly: isFrontBackOnly\n            };\n            const finalPrompts = await _lib_promptGenerator__WEBPACK_IMPORTED_MODULE_2__.PromptGenerator.generateFinalFromDraftPromptsCombined(finalFromDraftConfig);\n            if (!finalPrompts || !finalPrompts.frontCover || !finalPrompts.backCover) {\n                throw new Error(\"Failed to generate complete prompts for final card\");\n            }\n            // Prepare input images for final generation\n            const inputImages = [];\n            if (referenceImageUrls.length > 0 && selectedImageModel === \"gpt-image-1\") {\n                inputImages.push(...referenceImageUrls);\n            }\n            const response = await fetch(\"/api/generate-card-async\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    jobId,\n                    prompts: finalPrompts,\n                    config: {\n                        userNumber: \"+17145986105\",\n                        modelVersion: selectedImageModel,\n                        aspectRatio: ((_paperSizes_find = _constants__WEBPACK_IMPORTED_MODULE_3__.paperSizes.find((size)=>size.id === selectedPaperSize)) === null || _paperSizes_find === void 0 ? void 0 : _paperSizes_find.aspectRatio) || \"9:16\",\n                        quality: \"high\",\n                        outputFormat: \"jpeg\",\n                        outputCompression: 100,\n                        moderation: \"low\",\n                        dimensions: ((_paperSizes_find1 = _constants__WEBPACK_IMPORTED_MODULE_3__.paperSizes.find((size)=>size.id === selectedPaperSize)) === null || _paperSizes_find1 === void 0 ? void 0 : _paperSizes_find1.dimensions) || \"1024x1536\",\n                        isFrontBackOnly,\n                        userEmail,\n                        cardType: selectedType === \"custom\" ? customCardType : selectedType,\n                        toField,\n                        fromField,\n                        isDraftMode: false,\n                        ...inputImages.length > 0 && {\n                            input_images: inputImages,\n                            input_images_mode: \"front_cover_only\"\n                        }\n                    }\n                })\n            });\n            if (!response.ok) {\n                throw new Error(\"Server error: \".concat(response.status));\n            }\n            const result = await response.json();\n            if (result.status !== \"processing\") {\n                throw new Error(result.message || \"Failed to start final card generation\");\n            }\n            setCurrentJobId(jobId);\n            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.success(\"\\uD83C\\uDFA8 Generating high-quality version of your selected design!\");\n            // Subscribe to WebSocket updates\n            subscribeToJob(jobId);\n        } catch (error) {\n            console.error(\"Final card generation error:\", error);\n            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Failed to generate final card. Please try again.\");\n            setIsGeneratingFinalCard(false);\n            setGenerationProgress(\"\");\n            setProgressPercentage(0);\n            props.stopElapsedTimeTracking();\n            clearProgressInterval(); // Clear time-based progress on error\n        }\n    }, [\n        draftCards,\n        isGeneratingFinalCard,\n        props\n    ]);\n    return {\n        isDraftMode,\n        setIsDraftMode,\n        draftCards,\n        setDraftCards,\n        selectedDraftIndex,\n        setSelectedDraftIndex,\n        isGeneratingFinalCard,\n        setIsGeneratingFinalCard,\n        previewingDraftIndex,\n        setPreviewingDraftIndex,\n        draftCompletionShown,\n        setDraftCompletionShown,\n        draftCompletionCount,\n        setDraftCompletionCount,\n        handleGenerateDraftCards,\n        handleGenerateFinalFromDraft,\n        isGenerating,\n        setIsGenerating,\n        generationProgress,\n        setGenerationProgress,\n        progressPercentage,\n        setProgressPercentage,\n        generatedCard,\n        setGeneratedCard,\n        generatedCards,\n        setGeneratedCards,\n        isCardCompleted,\n        setIsCardCompleted,\n        currentJobId,\n        setCurrentJobId,\n        clearProgressInterval\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL2NhcmRTdHVkaW8vdXNlRHJhZnRHZW5lcmF0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O3dFQUU4QztBQUNmO0FBQ0s7QUFDdUQ7QUFDTztBQUM3RDtBQThCOUIsU0FBU1UsbUJBQW1CQyxLQUEyQjtJQUM1RCxtQkFBbUI7SUFDbkIsTUFBTSxDQUFDQyxhQUFhQyxlQUFlLEdBQUdiLCtDQUFRQSxDQUFVO0lBQ3hELE1BQU0sQ0FBQ2MsWUFBWUMsY0FBYyxHQUFHZiwrQ0FBUUEsQ0FBMkIsRUFBRTtJQUN6RSxNQUFNLENBQUNnQixvQkFBb0JDLHNCQUFzQixHQUFHakIsK0NBQVFBLENBQVMsQ0FBQztJQUN0RSxNQUFNLENBQUNrQix1QkFBdUJDLHlCQUF5QixHQUFHbkIsK0NBQVFBLENBQVU7SUFDNUUsTUFBTSxDQUFDb0Isc0JBQXNCQyx3QkFBd0IsR0FBR3JCLCtDQUFRQSxDQUFTLENBQUM7SUFDMUUsTUFBTSxDQUFDc0Isc0JBQXNCQyx3QkFBd0IsR0FBR3ZCLCtDQUFRQSxDQUFVO0lBQzFFLE1BQU0sQ0FBQ3dCLHNCQUFzQkMsd0JBQXdCLEdBQUd6QiwrQ0FBUUEsQ0FBUztJQUN6RSxNQUFNLENBQUMwQixjQUFjQyxnQkFBZ0IsR0FBRzNCLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQzRCLG9CQUFvQkMsc0JBQXNCLEdBQUc3QiwrQ0FBUUEsQ0FBQztJQUM3RCxNQUFNLENBQUM4QixlQUFlQyxpQkFBaUIsR0FBRy9CLCtDQUFRQSxDQUF1QjtJQUN6RSxNQUFNLENBQUNnQyxnQkFBZ0JDLGtCQUFrQixHQUFHakMsK0NBQVFBLENBQWtCLEVBQUU7SUFDeEUsTUFBTSxDQUFDa0MsaUJBQWlCQyxtQkFBbUIsR0FBR25DLCtDQUFRQSxDQUFDO0lBQ3ZELE1BQU0sQ0FBQ29DLGNBQWNDLGdCQUFnQixHQUFHckMsK0NBQVFBLENBQWdCO0lBRWhFLDJEQUEyRDtJQUMzRCxNQUFNc0MsMkJBQTJCckMsa0RBQVdBLENBQUM7UUFDM0MsTUFBTSxFQUNKc0MsU0FBUyxFQUNUQyxxQkFBcUIsRUFDckJDLHNCQUFzQixFQUN0QkMsa0JBQWtCLEVBQ2xCQyxrQkFBa0IsRUFDbEJDLFlBQVksRUFDWkMsY0FBYyxFQUNkQyxZQUFZLEVBQ1pDLE1BQU0sRUFDTkMsT0FBTyxFQUNQQyxTQUFTLEVBQ1RDLGlCQUFpQixFQUNqQkMsZ0JBQWdCLEVBQ2hCQyxjQUFjLEVBQ2RDLHdCQUF3QixFQUN6QixHQUFHMUM7UUFFSixJQUFJLENBQUM0QixVQUFVZSxJQUFJLElBQUk7WUFDckJwRCx5Q0FBS0EsQ0FBQ3FELEtBQUssQ0FBQztZQUNaO1FBQ0Y7UUFFQSx5QkFBeUI7UUFDekIsTUFBTUMsYUFBYTtRQUNuQixJQUFJLENBQUNBLFdBQVdDLElBQUksQ0FBQ2xCLFlBQVk7WUFDL0JyQyx5Q0FBS0EsQ0FBQ3FELEtBQUssQ0FBQztZQUNaO1FBQ0Y7UUFFQSxvQ0FBb0M7UUFDcEMsSUFBSWYsMEJBQTBCLFlBQVksQ0FBQ0MsdUJBQXVCYSxJQUFJLElBQUk7WUFDeEVwRCx5Q0FBS0EsQ0FBQ3FELEtBQUssQ0FBQztZQUNaO1FBQ0Y7UUFFQSxxREFBcUQ7UUFDckQsSUFBSWIsbUJBQW1CZ0IsTUFBTSxHQUFHLEtBQUtmLHVCQUF1QixlQUFlO1lBQ3pFekMseUNBQUtBLENBQUNxRCxLQUFLLENBQUM7WUFDWjtRQUNGO1FBRUEsaUNBQWlDO1FBQ2pDNUMsTUFBTWdELHVCQUF1QjtRQUU3Qix1Q0FBdUM7UUFDdkMsSUFBSUMsa0JBQWtCO1lBQ3BCQyxjQUFjRDtZQUNkRSxvQkFBb0I7UUFDdEI7UUFFQSxvREFBb0Q7UUFDcEQsSUFBSW5ELE1BQU1vRCxzQkFBc0IsRUFBRTtZQUNoQ3BELE1BQU1vRCxzQkFBc0I7UUFDOUI7UUFFQSw0RUFBNEU7UUFDNUUsSUFBSSxJQUFrQixFQUFhO1lBQ2pDQyxRQUFRQyxHQUFHLENBQUM7WUFDWixNQUFNQyxPQUFPQyxPQUFPRCxJQUFJLENBQUNFO1lBQ3pCRixLQUFLRyxPQUFPLENBQUNDLENBQUFBO2dCQUNYLElBQUlBLElBQUlDLFVBQVUsQ0FBQyxtQkFBbUI7b0JBQ3BDSCxhQUFhSSxVQUFVLENBQUNGO2dCQUMxQjtZQUNGO1lBQ0Esb0NBQW9DO1lBQ3BDLE1BQU1HLGNBQWNDLEtBQUtDLEtBQUssQ0FBQ1AsYUFBYVEsT0FBTyxDQUFDLHNCQUFzQjtZQUMxRSxNQUFNQyxlQUFlSixZQUFZSyxNQUFNLENBQUMsQ0FBQ0MsS0FBZSxDQUFDQSxHQUFHUixVQUFVLENBQUM7WUFDdkVILGFBQWFZLE9BQU8sQ0FBQyxtQkFBbUJOLEtBQUtPLFNBQVMsQ0FBQ0o7UUFDekQ7UUFFQWhFLGVBQWU7UUFDZmMsZ0JBQWdCO1FBQ2hCMEIseUJBQXlCO1FBQ3pCeEIsc0JBQXNCO1FBQ3RCZCxjQUFjO1lBQUM7WUFBTTtZQUFNO1lBQU07WUFBTTtTQUFLLEdBQUcsZ0NBQWdDO1FBQy9FRSxzQkFBc0IsQ0FBQztRQUN2Qk0sd0JBQXdCO1FBQ3hCRSx3QkFBd0I7UUFFeEIsZ0NBQWdDO1FBQ2hDTSxpQkFBaUI7UUFDakJFLGtCQUFrQixFQUFFO1FBQ3BCRSxtQkFBbUI7UUFFbkIsd0ZBQXdGO1FBQ3hGLE1BQU0rQyxXQUFXQyxZQUFZO1lBQzNCQyxzQkFBc0JDLENBQUFBO2dCQUNwQixNQUFNQyxjQUFjRCxPQUFPO2dCQUMzQixPQUFPQyxlQUFlLEtBQUssS0FBS0EsYUFBYSw4QkFBOEI7WUFDN0U7UUFDRixHQUFHLE9BQU8sc0JBQXNCO1FBRWhDeEIsb0JBQW9Cb0I7UUFFcEIsSUFBSTtZQUNGbEIsUUFBUUMsR0FBRyxDQUFDO1lBRVosTUFBTXNCLG9CQUFvQjNDLGlCQUFpQixXQUFXQyxpQkFBaUJEO1lBQ3ZFLE1BQU00QyxrQkFBa0JoRixpREFBU0EsQ0FBQ2lGLElBQUksQ0FBQ0MsQ0FBQUEsT0FBUUEsS0FBS1gsRUFBRSxLQUFLakM7WUFDM0QsTUFBTTZDLGtCQUFrQkgsa0JBQWtCQSxnQkFBZ0JJLFdBQVcsQ0FBQ0MsV0FBVyxLQUFLO1lBQ3RGLE1BQU1DLGtCQUFrQi9DLE9BQU9PLElBQUksTUFBTSxlQUE4Q3FDLE9BQS9CSixtQkFBa0IsZUFBNkIsT0FBaEJJLGlCQUFnQjtZQUV2Ryw4QkFBOEI7WUFDOUIsTUFBTUksZ0JBQWdCQyxNQUFNQyxJQUFJLENBQUM7Z0JBQUV2QyxRQUFRO1lBQUUsR0FBRyxPQUFPd0MsR0FBR0M7Z0JBQ3hELElBQUk7d0JBcUVpQjVGLGtCQUtEQTtvQkF6RWxCeUQsUUFBUUMsR0FBRyxDQUFDLHlDQUF5QyxPQUFWa0MsUUFBUTtvQkFFbkQseUNBQXlDO29CQUN6QyxJQUFJQyxnQkFBb0NDO29CQUN4QyxJQUFJQyxhQUFpQ0Q7b0JBQ3JDLElBQUk3RCwwQkFBMEIsa0JBQWtCO3dCQUM5QyxNQUFNK0QsbUJBQW1COzRCQUFDOzRCQUFjOzRCQUFhOzRCQUFjOzRCQUFrQjt5QkFBYTt3QkFDbEcsTUFBTUMsY0FBYzs0QkFBQzs0QkFBaUI7NEJBQWdCOzRCQUFpQjs0QkFBcUI7eUJBQWU7d0JBRTNHSixnQkFBZ0JHLGdCQUFnQixDQUFDSixNQUFNO3dCQUN2Q0csYUFBYUUsV0FBVyxDQUFDTCxNQUFNO29CQUNqQztvQkFFQSw4QkFBOEI7b0JBQzlCLE1BQU1NLGdCQUFnQm5HLHNEQUFjQSxDQUFDbUYsSUFBSSxDQUFDaUIsQ0FBQUEsUUFBU0EsTUFBTTNCLEVBQUUsS0FBTXFCLENBQUFBLGlCQUFpQjVELHFCQUFvQjtvQkFFdEcsTUFBTW1FLGNBQTJCO3dCQUMvQkMsVUFBVWhFO3dCQUNWQyxnQkFBZ0JBO3dCQUNoQjZDLE1BQU01Qzt3QkFDTitELFdBQVdyQixrQkFBa0JBLGdCQUFnQnNCLEtBQUssR0FBRzt3QkFDckRuQixpQkFBaUJBO3dCQUNqQm9CLE9BQU9qQjt3QkFDUDlDLFNBQVNBO3dCQUNUQyxXQUFXQTt3QkFDWCtELGVBQWVQO3dCQUNmL0Qsb0JBQW9CQTt3QkFDcEJ1RSxlQUFldEcsTUFBTXNHLGFBQWE7d0JBQ2xDQyxrQkFBa0IxRSwwQkFBMEI7d0JBQzVDMkUsZ0JBQWdCaEI7b0JBQ2xCO29CQUVBLE1BQU0sRUFBRXBELFFBQVFxRSxxQkFBcUIsRUFBRUMsTUFBTSxFQUFFLEdBQUdoSCxpRUFBZUEsQ0FBQ2lILDZCQUE2QixDQUFDWDtvQkFHaEcsTUFBTVksbUJBQW1CLE1BQU05RyxrREFBVUEsQ0FBQzJHLHVCQUF1Qjt3QkFDL0RJLE9BQU87d0JBQ1BDLGFBQWFKO29CQUNmO29CQUVBLElBQUksRUFBQ0UsNkJBQUFBLHVDQUFBQSxpQkFBa0JqRSxJQUFJLEtBQUk7d0JBQzdCLE1BQU0sSUFBSW9FLE1BQU07b0JBQ2xCO29CQUVBLDRDQUE0QztvQkFDNUMsSUFBSUMsMkJBQTJCSixpQkFBaUJqRSxJQUFJO29CQUNwRHFFLDJCQUEyQnRILGlFQUFlQSxDQUFDdUgsZ0NBQWdDLENBQ3pFRCwwQkFDQWpGLG1CQUFtQmdCLE1BQU0sR0FBRyxHQUM1QmY7b0JBR0YscUJBQXFCO29CQUNyQixNQUFNa0YsUUFBUSxTQUFrQnpILE9BQVQrRixPQUFNLEtBQVksT0FBVC9GLGdEQUFNQTtvQkFDdEMsTUFBTTBILGNBQXdCLEVBQUU7b0JBQ2hDLElBQUlwRixtQkFBbUJnQixNQUFNLEdBQUcsS0FBS2YsdUJBQXVCLGVBQWU7d0JBQ3pFbUYsWUFBWUMsSUFBSSxJQUFJckY7b0JBQ3RCO29CQUVBLE1BQU1zRixXQUFXLE1BQU1DLE1BQU0sNEJBQTRCO3dCQUN2REMsUUFBUTt3QkFDUkMsU0FBUzs0QkFBRSxnQkFBZ0I7d0JBQW1CO3dCQUM5Q0MsTUFBTTFELEtBQUtPLFNBQVMsQ0FBQzs0QkFDbkI0Qzs0QkFDQVEsU0FBUztnQ0FBRUMsWUFBWVg7NEJBQXlCOzRCQUNoRFksUUFBUTtnQ0FDTkMsWUFBWTtnQ0FDWkMsY0FBYzlGO2dDQUNkK0YsYUFBYW5JLEVBQUFBLG1CQUFBQSxrREFBVUEsQ0FBQ2tGLElBQUksQ0FBQ2tELENBQUFBLE9BQVFBLEtBQUs1RCxFQUFFLEtBQUs3QixnQ0FBcEMzQyx1Q0FBQUEsaUJBQXdEbUksV0FBVyxLQUFJO2dDQUNwRkUsU0FBUztnQ0FDVEMsY0FBYztnQ0FDZEMsbUJBQW1CO2dDQUNuQkMsWUFBWTtnQ0FDWkMsWUFBWXpJLEVBQUFBLG9CQUFBQSxrREFBVUEsQ0FBQ2tGLElBQUksQ0FBQ2tELENBQUFBLE9BQVFBLEtBQUs1RCxFQUFFLEtBQUs3QixnQ0FBcEMzQyx3Q0FBQUEsa0JBQXdEeUksVUFBVSxLQUFJO2dDQUNsRkMsaUJBQWlCO2dDQUNqQjFHO2dDQUNBcUUsVUFBVXJCO2dDQUNWdkM7Z0NBQ0FDO2dDQUNBckMsYUFBYTtnQ0FDYixHQUFJa0gsWUFBWXBFLE1BQU0sR0FBRyxLQUFLO29DQUM1QndGLGNBQWNwQjtvQ0FDZHFCLG1CQUFtQjtnQ0FDckIsQ0FBQzs0QkFDSDt3QkFDRjtvQkFDRjtvQkFFQSxJQUFJLENBQUNuQixTQUFTb0IsRUFBRSxFQUFFO3dCQUNoQixNQUFNLElBQUkxQixNQUFNLGlCQUFpQyxPQUFoQk0sU0FBU3FCLE1BQU07b0JBQ2xEO29CQUVBLE1BQU1DLFNBQVMsTUFBTXRCLFNBQVN1QixJQUFJO29CQUVsQyxJQUFJRCxPQUFPRCxNQUFNLEtBQUssY0FBYzt3QkFDbEMsTUFBTSxJQUFJM0IsTUFBTTRCLE9BQU9FLE9BQU8sSUFBSTtvQkFDcEM7b0JBRUF4RixRQUFRQyxHQUFHLENBQUMscUJBQStCLE9BQVZrQyxRQUFRLEdBQUUsa0JBQWdCMEI7b0JBRTNELHlDQUF5QztvQkFDekMxRSxpQkFBaUIwRSxPQUFPO3dCQUN0QjRCLFNBQVM7d0JBQ1RDLFlBQVl2RDt3QkFDWndELFdBQVd2RCxnQkFBZ0I7NEJBQUV3RCxXQUFXeEQ7NEJBQWVFLFlBQVlBO3dCQUFXLElBQUlEO3dCQUNsRmtCLGtCQUFrQkk7d0JBQ2xCcEY7d0JBQ0FLO3dCQUNBRTt3QkFDQUU7d0JBQ0FDO3dCQUNBbkMsWUFBWSxFQUFFLENBQUUscUNBQXFDO29CQUN2RDtvQkFFQSxpQ0FBaUM7b0JBQ2pDc0MsZUFBZXlFO2dCQUVqQixFQUFFLE9BQU90RSxPQUFPO29CQUNkUyxRQUFRVCxLQUFLLENBQUMscUJBQStCLE9BQVY0QyxRQUFRLEdBQUUsYUFBVzVDO29CQUN4RHJELHlDQUFLQSxDQUFDcUQsS0FBSyxDQUFDLG1CQUF3Q0EsT0FBckI0QyxRQUFRLEdBQUUsYUFBb0UsT0FBekQ1QyxpQkFBaUJtRSxRQUFRbkUsTUFBTWlHLE9BQU8sR0FBRztnQkFDL0Y7WUFDRjtZQUVBLDBDQUEwQztZQUMxQyxNQUFNSyxRQUFRQyxVQUFVLENBQUMvRDtZQUN6Qi9CLFFBQVFDLEdBQUcsQ0FBQztRQUVkLEVBQUUsT0FBT1YsT0FBTztZQUNkUyxRQUFRVCxLQUFLLENBQUMsZ0NBQWdDQTtZQUM5Q3JELHlDQUFLQSxDQUFDcUQsS0FBSyxDQUFDLHFDQUE4RixPQUF6REEsaUJBQWlCbUUsUUFBUW5FLE1BQU1pRyxPQUFPLEdBQUc7WUFFMUY3SCxnQkFBZ0I7WUFDaEJkLGVBQWU7WUFDZlUsd0JBQXdCO1lBQ3hCRSx3QkFBd0I7WUFDeEJJLHNCQUFzQjtZQUN0QmxCLE1BQU1nRCx1QkFBdUI7WUFFN0IsbUNBQW1DO1lBQ25DLElBQUlDLGtCQUFrQjtnQkFDcEJDLGNBQWNEO2dCQUNkRSxvQkFBb0I7WUFDdEI7UUFDRjtJQUNGLEdBQUc7UUFBQ25EO1FBQU9pRDtLQUFpQjtJQUU1Qix1REFBdUQ7SUFDdkQsTUFBTW1HLCtCQUErQjlKLGtEQUFXQSxDQUFDLE9BQU8rSjtRQUN0RCwwQkFBMEI7UUFDMUIsSUFBSTlJLHVCQUF1QjtZQUN6QjhDLFFBQVFDLEdBQUcsQ0FBQztZQUNaO1FBQ0Y7UUFFQSxNQUFNZ0csZ0JBQWdCbkosVUFBVSxDQUFDa0osYUFBYTtRQUM5QyxJQUFJLENBQUNDLGVBQWU7WUFDbEIvSix5Q0FBS0EsQ0FBQ3FELEtBQUssQ0FBQztZQUNaO1FBQ0Y7UUFFQSxNQUFNLEVBQ0pYLFlBQVksRUFDWkMsY0FBYyxFQUNkQyxZQUFZLEVBQ1pDLE1BQU0sRUFDTkMsT0FBTyxFQUNQQyxTQUFTLEVBQ1RpSCxnQkFBZ0IsRUFDaEJDLG9CQUFvQixFQUNwQjNILHFCQUFxQixFQUNyQkMsc0JBQXNCLEVBQ3RCd0csZUFBZSxFQUNmbUIsa0JBQWtCLEVBQ2xCbEgsaUJBQWlCLEVBQ2pCWCxTQUFTLEVBQ1RHLGtCQUFrQixFQUNsQlcsd0JBQXdCLEVBQ3hCRCxjQUFjLEVBQ2YsR0FBR3pDO1FBRUosaUNBQWlDO1FBQ2pDQSxNQUFNZ0QsdUJBQXVCO1FBRTdCLHVDQUF1QztRQUN2QzBHO1FBRUFsSix5QkFBeUI7UUFDekJOLGVBQWUsUUFBUSxnREFBZ0Q7UUFDdkVJLHNCQUFzQitJO1FBQ3RCM0cseUJBQXlCO1FBQ3pCeEIsc0JBQXNCO1FBQ3RCdUQsc0JBQXNCO1FBRXRCLHVHQUF1RztRQUN2RyxNQUFNRixXQUFXQyxZQUFZO1lBQzNCQyxzQkFBc0JDLENBQUFBO2dCQUNwQixNQUFNQyxjQUFjRCxPQUFPO2dCQUMzQixPQUFPQyxlQUFlLEtBQUssS0FBS0EsYUFBYSw4QkFBOEI7WUFDN0U7UUFDRixHQUFHLE9BQU8sc0JBQXNCO1FBRWhDeEIsb0JBQW9Cb0I7UUFFcEIsSUFBSTtnQkFJNkIrRSxpQ0E2RFoxSixrQkFLREE7WUFyRWxCLE1BQU1zSCxRQUFRekgsZ0RBQU1BO1lBRXBCLCtCQUErQjtZQUMvQixNQUFNa0ssMEJBQXlCTCxrQ0FBQUEsY0FBY00sZ0JBQWdCLGNBQTlCTixzREFBQUEsZ0NBQWdDM0IsVUFBVTtZQUN6RSxJQUFJLENBQUNnQyx3QkFBd0I7Z0JBQzNCLE1BQU0sSUFBSTVDLE1BQU07WUFDbEI7WUFFQSxNQUFNbkMsb0JBQW9CM0MsaUJBQWlCLFdBQVdDLGlCQUFpQkQ7WUFDdkUsTUFBTTRDLGtCQUFrQmhGLGlEQUFTQSxDQUFDaUYsSUFBSSxDQUFDQyxDQUFBQSxPQUFRQSxLQUFLWCxFQUFFLEtBQUtqQztZQUMzRCxNQUFNNkMsa0JBQWtCSCxrQkFBa0JBLGdCQUFnQkksV0FBVyxDQUFDQyxXQUFXLEtBQUs7WUFDdEYsTUFBTUMsa0JBQWtCL0MsT0FBT08sSUFBSSxNQUFNLGVBQThDcUMsT0FBL0JKLG1CQUFrQixlQUE2QixPQUFoQkksaUJBQWdCO1lBRXZHLElBQUk2RSxpQkFBaUJOO1lBQ3JCLElBQUlDLHNCQUFzQjtnQkFDeEJLLGlCQUFpQjtZQUNuQjtZQUVBLG9DQUFvQztZQUNwQyxNQUFNQyxpQkFBaUJSLGNBQWNOLFNBQVM7WUFDOUMsSUFBSWxEO1lBQ0osSUFBSWdFLGtCQUFrQkEsZUFBZWIsU0FBUyxFQUFFO2dCQUM5Q25ELGdCQUFnQm5HLHNEQUFjQSxDQUFDbUYsSUFBSSxDQUFDaUIsQ0FBQUEsUUFBU0EsTUFBTTNCLEVBQUUsS0FBSzBGLGVBQWViLFNBQVM7WUFDcEYsT0FBTztnQkFDTG5ELGdCQUFnQm5HLHNEQUFjQSxDQUFDbUYsSUFBSSxDQUFDaUIsQ0FBQUEsUUFBU0EsTUFBTTNCLEVBQUUsS0FBS3ZDO1lBQzVEO1lBRUEsZ0RBQWdEO1lBQ2hELE1BQU1rSSx1QkFBNkM7Z0JBQ2pEbkQsa0JBQWtCK0M7Z0JBQ2xCMUQsVUFBVWhFO2dCQUNWQyxnQkFBZ0JBO2dCQUNoQmtFLE9BQU9qQjtnQkFDUEosTUFBTTVDO2dCQUNONkMsaUJBQWlCQTtnQkFDakIzQyxTQUFTQTtnQkFDVEMsV0FBV0E7Z0JBQ1h1RyxTQUFTZ0I7Z0JBQ1RMLHNCQUFzQkE7Z0JBQ3RCbkQsZUFBZVA7Z0JBQ2Z3QyxpQkFBaUJBO1lBQ25CO1lBRUEsTUFBTTBCLGVBQWUsTUFBTXRLLGlFQUFlQSxDQUFDdUsscUNBQXFDLENBQUNGO1lBRWpGLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNBLGFBQWFyQyxVQUFVLElBQUksQ0FBQ3FDLGFBQWFFLFNBQVMsRUFBRTtnQkFDeEUsTUFBTSxJQUFJbkQsTUFBTTtZQUNsQjtZQUVBLDRDQUE0QztZQUM1QyxNQUFNSSxjQUF3QixFQUFFO1lBQ2hDLElBQUlwRixtQkFBbUJnQixNQUFNLEdBQUcsS0FBSzBHLHVCQUF1QixlQUFlO2dCQUN6RXRDLFlBQVlDLElBQUksSUFBSXJGO1lBQ3RCO1lBRUEsTUFBTXNGLFdBQVcsTUFBTUMsTUFBTSw0QkFBNEI7Z0JBQ3ZEQyxRQUFRO2dCQUNSQyxTQUFTO29CQUFFLGdCQUFnQjtnQkFBbUI7Z0JBQzlDQyxNQUFNMUQsS0FBS08sU0FBUyxDQUFDO29CQUNuQjRDO29CQUNBUSxTQUFTc0M7b0JBQ1RwQyxRQUFRO3dCQUNOQyxZQUFZO3dCQUNaQyxjQUFjMkI7d0JBQ2QxQixhQUFhbkksRUFBQUEsbUJBQUFBLGtEQUFVQSxDQUFDa0YsSUFBSSxDQUFDa0QsQ0FBQUEsT0FBUUEsS0FBSzVELEVBQUUsS0FBSzdCLGdDQUFwQzNDLHVDQUFBQSxpQkFBd0RtSSxXQUFXLEtBQUk7d0JBQ3BGRSxTQUFTO3dCQUNUQyxjQUFjO3dCQUNkQyxtQkFBbUI7d0JBQ25CQyxZQUFZO3dCQUNaQyxZQUFZekksRUFBQUEsb0JBQUFBLGtEQUFVQSxDQUFDa0YsSUFBSSxDQUFDa0QsQ0FBQUEsT0FBUUEsS0FBSzVELEVBQUUsS0FBSzdCLGdDQUFwQzNDLHdDQUFBQSxrQkFBd0R5SSxVQUFVLEtBQUk7d0JBQ2xGQzt3QkFDQTFHO3dCQUNBcUUsVUFBVWhFLGlCQUFpQixXQUFXQyxpQkFBaUJEO3dCQUN2REk7d0JBQ0FDO3dCQUNBckMsYUFBYTt3QkFDYixHQUFJa0gsWUFBWXBFLE1BQU0sR0FBRyxLQUFLOzRCQUM1QndGLGNBQWNwQjs0QkFDZHFCLG1CQUFtQjt3QkFDckIsQ0FBQztvQkFDSDtnQkFDRjtZQUNGO1lBRUEsSUFBSSxDQUFDbkIsU0FBU29CLEVBQUUsRUFBRTtnQkFDaEIsTUFBTSxJQUFJMUIsTUFBTSxpQkFBaUMsT0FBaEJNLFNBQVNxQixNQUFNO1lBQ2xEO1lBRUEsTUFBTUMsU0FBUyxNQUFNdEIsU0FBU3VCLElBQUk7WUFFbEMsSUFBSUQsT0FBT0QsTUFBTSxLQUFLLGNBQWM7Z0JBQ2xDLE1BQU0sSUFBSTNCLE1BQU00QixPQUFPRSxPQUFPLElBQUk7WUFDcEM7WUFFQW5ILGdCQUFnQndGO1lBQ2hCM0gseUNBQUtBLENBQUM0SyxPQUFPLENBQUM7WUFFZCxpQ0FBaUM7WUFDakMxSCxlQUFleUU7UUFFakIsRUFBRSxPQUFPdEUsT0FBTztZQUNkUyxRQUFRVCxLQUFLLENBQUMsZ0NBQWdDQTtZQUM5Q3JELHlDQUFLQSxDQUFDcUQsS0FBSyxDQUFDO1lBQ1pwQyx5QkFBeUI7WUFDekJVLHNCQUFzQjtZQUN0QnVELHNCQUFzQjtZQUN0QnpFLE1BQU1nRCx1QkFBdUI7WUFDN0IwRyx5QkFBeUIscUNBQXFDO1FBQ2hFO0lBQ0YsR0FBRztRQUFDdko7UUFBWUk7UUFBdUJQO0tBQU07SUFFN0MsT0FBTztRQUNMQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBYTtRQUNBeUg7UUFDQXJJO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FrSjtRQUNBM0Y7UUFDQXREO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FnSTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vaG9va3MvY2FyZFN0dWRpby91c2VEcmFmdEdlbmVyYXRpb24udHM/NGM0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gXCJzb25uZXJcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgUHJvbXB0R2VuZXJhdG9yLCBEcmFmdENvbmZpZywgRmluYWxGcm9tRHJhZnRDb25maWcgfSBmcm9tICdAL2xpYi9wcm9tcHRHZW5lcmF0b3InO1xuaW1wb3J0IHsgR2VuZXJhdGVkQ2FyZCwgYXJ0aXN0aWNTdHlsZXMsIHBhcGVyU2l6ZXMsIGNhcmRUb25lcywgUGhvdG9BbmFseXNpcyB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IGNoYXRXaXRoQUkgfSBmcm9tICcuL3V0aWxzJztcblxuaW50ZXJmYWNlIERyYWZ0R2VuZXJhdGlvblByb3BzIHtcbiAgLy8gRm9ybSBkYXRhXG4gIHNlbGVjdGVkVHlwZTogc3RyaW5nO1xuICBjdXN0b21DYXJkVHlwZTogc3RyaW5nO1xuICBzZWxlY3RlZFRvbmU6IHN0cmluZztcbiAgc2VsZWN0ZWRBcnRpc3RpY1N0eWxlOiBzdHJpbmc7XG4gIGN1c3RvbVN0eWxlRGVzY3JpcHRpb246IHN0cmluZztcbiAgc2VsZWN0ZWREcmFmdE1vZGVsOiBzdHJpbmc7XG4gIHNlbGVjdGVkSW1hZ2VNb2RlbDogc3RyaW5nO1xuICBzZWxlY3RlZFBhcGVyU2l6ZTogc3RyaW5nO1xuICBwcm9tcHQ6IHN0cmluZztcbiAgdG9GaWVsZDogc3RyaW5nO1xuICBmcm9tRmllbGQ6IHN0cmluZztcbiAgdXNlckVtYWlsOiBzdHJpbmc7XG4gIGZpbmFsQ2FyZE1lc3NhZ2U6IHN0cmluZztcbiAgaXNIYW5kd3JpdHRlbk1lc3NhZ2U6IGJvb2xlYW47XG4gIGlzRnJvbnRCYWNrT25seTogYm9vbGVhbjtcbiAgcmVmZXJlbmNlSW1hZ2VVcmxzOiBzdHJpbmdbXTtcbiAgcGhvdG9BbmFseXNlcz86IFBob3RvQW5hbHlzaXNbXTtcbiAgXG4gIC8vIEpvYiBtYW5hZ2VtZW50XG4gIHNhdmVKb2JUb1N0b3JhZ2U6IChqb2JJZDogc3RyaW5nLCBqb2JEYXRhOiBhbnkpID0+IHZvaWQ7XG4gIHN1YnNjcmliZVRvSm9iOiAoam9iSWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgdW5zdWJzY3JpYmVGcm9tQWxsSm9icz86ICgpID0+IHZvaWQ7XG4gIHN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZzogKGpvYlR5cGU/OiAnZHJhZnQnIHwgJ2ZpbmFsJykgPT4gdm9pZDtcbiAgc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmc6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEcmFmdEdlbmVyYXRpb24ocHJvcHM6IERyYWZ0R2VuZXJhdGlvblByb3BzKSB7XG4gIC8vIERyYWZ0IG1vZGUgc3RhdGVcbiAgY29uc3QgW2lzRHJhZnRNb2RlLCBzZXRJc0RyYWZ0TW9kZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtkcmFmdENhcmRzLCBzZXREcmFmdENhcmRzXSA9IHVzZVN0YXRlPChHZW5lcmF0ZWRDYXJkIHwgbnVsbClbXT4oW10pO1xuICBjb25zdCBbc2VsZWN0ZWREcmFmdEluZGV4LCBzZXRTZWxlY3RlZERyYWZ0SW5kZXhdID0gdXNlU3RhdGU8bnVtYmVyPigtMSk7XG4gIGNvbnN0IFtpc0dlbmVyYXRpbmdGaW5hbENhcmQsIHNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtwcmV2aWV3aW5nRHJhZnRJbmRleCwgc2V0UHJldmlld2luZ0RyYWZ0SW5kZXhdID0gdXNlU3RhdGU8bnVtYmVyPigtMSk7XG4gIGNvbnN0IFtkcmFmdENvbXBsZXRpb25TaG93biwgc2V0RHJhZnRDb21wbGV0aW9uU2hvd25dID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCBbZHJhZnRDb21wbGV0aW9uQ291bnQsIHNldERyYWZ0Q29tcGxldGlvbkNvdW50XSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG4gIGNvbnN0IFtpc0dlbmVyYXRpbmcsIHNldElzR2VuZXJhdGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtnZW5lcmF0aW9uUHJvZ3Jlc3MsIHNldEdlbmVyYXRpb25Qcm9ncmVzc10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2dlbmVyYXRlZENhcmQsIHNldEdlbmVyYXRlZENhcmRdID0gdXNlU3RhdGU8R2VuZXJhdGVkQ2FyZCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbZ2VuZXJhdGVkQ2FyZHMsIHNldEdlbmVyYXRlZENhcmRzXSA9IHVzZVN0YXRlPEdlbmVyYXRlZENhcmRbXT4oW10pO1xuICBjb25zdCBbaXNDYXJkQ29tcGxldGVkLCBzZXRJc0NhcmRDb21wbGV0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY3VycmVudEpvYklkLCBzZXRDdXJyZW50Sm9iSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gRHJhZnQgbW9kZSBnZW5lcmF0aW9uIC0gY3JlYXRlcyA1IGZyb250IGNvdmVyIHZhcmlhdGlvbnNcbiAgY29uc3QgaGFuZGxlR2VuZXJhdGVEcmFmdENhcmRzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHVzZXJFbWFpbCxcbiAgICAgIHNlbGVjdGVkQXJ0aXN0aWNTdHlsZSxcbiAgICAgIGN1c3RvbVN0eWxlRGVzY3JpcHRpb24sXG4gICAgICByZWZlcmVuY2VJbWFnZVVybHMsXG4gICAgICBzZWxlY3RlZERyYWZ0TW9kZWwsXG4gICAgICBzZWxlY3RlZFR5cGUsXG4gICAgICBjdXN0b21DYXJkVHlwZSxcbiAgICAgIHNlbGVjdGVkVG9uZSxcbiAgICAgIHByb21wdCxcbiAgICAgIHRvRmllbGQsXG4gICAgICBmcm9tRmllbGQsXG4gICAgICBzZWxlY3RlZFBhcGVyU2l6ZSxcbiAgICAgIHNhdmVKb2JUb1N0b3JhZ2UsXG4gICAgICBzdWJzY3JpYmVUb0pvYixcbiAgICAgIHN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZ1xuICAgIH0gPSBwcm9wcztcblxuICAgIGlmICghdXNlckVtYWlsLnRyaW0oKSkge1xuICAgICAgdG9hc3QuZXJyb3IoXCJQbGVhc2UgZW50ZXIgeW91ciBlbWFpbCBhZGRyZXNzXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEJhc2ljIGVtYWlsIHZhbGlkYXRpb25cbiAgICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC87XG4gICAgaWYgKCFlbWFpbFJlZ2V4LnRlc3QodXNlckVtYWlsKSkge1xuICAgICAgdG9hc3QuZXJyb3IoXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGN1c3RvbSBzdHlsZSBpZiBzZWxlY3RlZFxuICAgIGlmIChzZWxlY3RlZEFydGlzdGljU3R5bGUgPT09IFwiY3VzdG9tXCIgJiYgIWN1c3RvbVN0eWxlRGVzY3JpcHRpb24udHJpbSgpKSB7XG4gICAgICB0b2FzdC5lcnJvcihcIlBsZWFzZSBkZXNjcmliZSB5b3VyIGN1c3RvbSBhcnRpc3RpYyBzdHlsZVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSByZWZlcmVuY2UgaW1hZ2VzIHdpdGggbW9kZWwgY29tcGF0aWJpbGl0eVxuICAgIGlmIChyZWZlcmVuY2VJbWFnZVVybHMubGVuZ3RoID4gMCAmJiBzZWxlY3RlZERyYWZ0TW9kZWwgIT09IFwiZ3B0LWltYWdlLTFcIikge1xuICAgICAgdG9hc3QuZXJyb3IoXCJSZWZlcmVuY2UgcGhvdG9zIGFyZSBvbmx5IHN1cHBvcnRlZCB3aXRoIEdQVCBJbWFnZSAxIG1vZGVsLiBQbGVhc2Ugc3dpdGNoIHRvIEdQVCBJbWFnZSAxIGZvciBkcmFmdCBtb2RlIG9yIHJlbW92ZSByZWZlcmVuY2UgcGhvdG9zLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTdG9wIGFueSBleGlzdGluZyB0aW1lcnMgZmlyc3RcbiAgICBwcm9wcy5zdG9wRWxhcHNlZFRpbWVUcmFja2luZygpO1xuICAgIFxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBwcm9ncmVzcyBpbnRlcnZhbFxuICAgIGlmIChwcm9ncmVzc0ludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHByb2dyZXNzSW50ZXJ2YWwpO1xuICAgICAgc2V0UHJvZ3Jlc3NJbnRlcnZhbChudWxsKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYXIgQUxMIFdlYlNvY2tldCBzdWJzY3JpcHRpb25zIGJlZm9yZSBzdGFydGluZ1xuICAgIGlmIChwcm9wcy51bnN1YnNjcmliZUZyb21BbGxKb2JzKSB7XG4gICAgICBwcm9wcy51bnN1YnNjcmliZUZyb21BbGxKb2JzKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIENsZWFyIGFsbCBvbGQgZHJhZnQgam9icyBmcm9tIGxvY2FsU3RvcmFnZSBiZWZvcmUgc3RhcnRpbmcgbmV3IGdlbmVyYXRpb25cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn6e5IENsZWFyaW5nIG9sZCBkcmFmdCBqb2JzIGJlZm9yZSBzdGFydGluZyBuZXcgZ2VuZXJhdGlvbicpO1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGxvY2FsU3RvcmFnZSk7XG4gICAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdjYXJkSm9iX2RyYWZ0LScpKSB7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBBbHNvIGNsZWFyIGZyb20gcGVuZGluZyBqb2JzIGxpc3RcbiAgICAgIGNvbnN0IHBlbmRpbmdKb2JzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGVuZGluZ0NhcmRKb2JzJykgfHwgJ1tdJyk7XG4gICAgICBjb25zdCBmaWx0ZXJlZEpvYnMgPSBwZW5kaW5nSm9icy5maWx0ZXIoKGlkOiBzdHJpbmcpID0+ICFpZC5zdGFydHNXaXRoKCdkcmFmdC0nKSk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGVuZGluZ0NhcmRKb2JzJywgSlNPTi5zdHJpbmdpZnkoZmlsdGVyZWRKb2JzKSk7XG4gICAgfVxuICAgIFxuICAgIHNldElzRHJhZnRNb2RlKHRydWUpO1xuICAgIHNldElzR2VuZXJhdGluZyh0cnVlKTtcbiAgICBzdGFydEVsYXBzZWRUaW1lVHJhY2tpbmcoJ2RyYWZ0Jyk7XG4gICAgc2V0R2VuZXJhdGlvblByb2dyZXNzKFwi8J+OqCBDcmVhdGluZyA1IGZyb250IGNvdmVyIHZhcmlhdGlvbnMgZm9yIHlvdSB0byBjaG9vc2UgZnJvbS4uLlwiKTtcbiAgICBzZXREcmFmdENhcmRzKFtudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsXSk7IC8vIEluaXRpYWxpemUgd2l0aCA1IGVtcHR5IHNsb3RzXG4gICAgc2V0U2VsZWN0ZWREcmFmdEluZGV4KC0xKTtcbiAgICBzZXREcmFmdENvbXBsZXRpb25TaG93bihmYWxzZSk7XG4gICAgc2V0RHJhZnRDb21wbGV0aW9uQ291bnQoMCk7XG4gICAgXG4gICAgLy8gQ2xlYXIgYW55IHByZXZpb3VzIGNhcmQgc3RhdGVcbiAgICBzZXRHZW5lcmF0ZWRDYXJkKG51bGwpO1xuICAgIHNldEdlbmVyYXRlZENhcmRzKFtdKTtcbiAgICBzZXRJc0NhcmRDb21wbGV0ZWQoZmFsc2UpO1xuICAgIFxuICAgIC8vIFNpbXBsZSB0aW1lLWJhc2VkIHByb2dyZXNzIC0gaW5jcmVhc2VzIGJ5IH4yLjIlIHBlciBzZWNvbmQgKDQ1IHNlY29uZHMgdG8gcmVhY2ggMTAwJSlcbiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHNldFByb2dyZXNzUGVyY2VudGFnZShwcmV2ID0+IHtcbiAgICAgICAgY29uc3QgbmV3UHJvZ3Jlc3MgPSBwcmV2ICsgMi4yO1xuICAgICAgICByZXR1cm4gbmV3UHJvZ3Jlc3MgPj0gOTUgPyA5NSA6IG5ld1Byb2dyZXNzOyAvLyBDYXAgYXQgOTUlIHVudGlsIGNvbXBsZXRpb25cbiAgICAgIH0pO1xuICAgIH0sIDEwMDApOyAvLyBVcGRhdGUgZXZlcnkgc2Vjb25kXG4gICAgXG4gICAgc2V0UHJvZ3Jlc3NJbnRlcnZhbChpbnRlcnZhbCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coXCLwn5qAIFN0YXJ0aW5nIGRyYWZ0IG1vZGUgZ2VuZXJhdGlvbiB3aXRoIDUgdmFyaWF0aW9uc1wiKTtcbiAgICAgIFxuICAgICAgY29uc3QgY2FyZFR5cGVGb3JQcm9tcHQgPSBzZWxlY3RlZFR5cGUgPT09IFwiY3VzdG9tXCIgPyBjdXN0b21DYXJkVHlwZSA6IHNlbGVjdGVkVHlwZTtcbiAgICAgIGNvbnN0IHNlbGVjdGVkVG9uZU9iaiA9IGNhcmRUb25lcy5maW5kKHRvbmUgPT4gdG9uZS5pZCA9PT0gc2VsZWN0ZWRUb25lKTtcbiAgICAgIGNvbnN0IHRvbmVEZXNjcmlwdGlvbiA9IHNlbGVjdGVkVG9uZU9iaiA/IHNlbGVjdGVkVG9uZU9iai5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpIDogXCJoZWFydGZlbHQgYW5kIHNpbmNlcmVcIjtcbiAgICAgIGNvbnN0IGVmZmVjdGl2ZVByb21wdCA9IHByb21wdC50cmltKCkgfHwgYEEgYmVhdXRpZnVsICR7Y2FyZFR5cGVGb3JQcm9tcHR9IGNhcmQgd2l0aCAke3RvbmVEZXNjcmlwdGlvbn0gc3R5bGVgO1xuXG4gICAgICAvLyBHZW5lcmF0ZSA1IGRyYWZ0IHZhcmlhdGlvbnNcbiAgICAgIGNvbnN0IGRyYWZ0UHJvbWlzZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1IH0sIGFzeW5jIChfLCBpbmRleCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn46oIFN0YXJ0aW5nIGRyYWZ0IHZhcmlhdGlvbiAke2luZGV4ICsgMX1gKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGb3Igc21hcnQgc3R5bGUsIHVzZSBwcmVkZWZpbmVkIHN0eWxlc1xuICAgICAgICAgIGxldCBzdHlsZU92ZXJyaWRlOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbGV0IHN0eWxlTGFiZWw6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRBcnRpc3RpY1N0eWxlID09PSBcImFpLXNtYXJ0LXN0eWxlXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZWRlZmluZWRTdHlsZXMgPSBbXCJ3YXRlcmNvbG9yXCIsIFwiYm90YW5pY2FsXCIsIFwiY29taWMtYm9va1wiLCBcImRyZWFteS1mYW50YXN5XCIsIFwibWluaW1hbGlzdFwiXTtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlTGFiZWxzID0gW1wi8J+OqCBXYXRlcmNvbG9yXCIsIFwi8J+MvyBCb3RhbmljYWxcIiwgXCLwn5KlIENvbWljIEJvb2tcIiwgXCLwn4y4IERyZWFteSBGYW50YXN5XCIsIFwi4pyoIE1pbmltYWxpc3RcIl07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHN0eWxlT3ZlcnJpZGUgPSBwcmVkZWZpbmVkU3R5bGVzW2luZGV4XTtcbiAgICAgICAgICAgIHN0eWxlTGFiZWwgPSBzdHlsZUxhYmVsc1tpbmRleF07XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEdlbmVyYXRlIGZyb250IGNvdmVyIHByb21wdFxuICAgICAgICAgIGNvbnN0IHNlbGVjdGVkU3R5bGUgPSBhcnRpc3RpY1N0eWxlcy5maW5kKHN0eWxlID0+IHN0eWxlLmlkID09PSAoc3R5bGVPdmVycmlkZSB8fCBzZWxlY3RlZEFydGlzdGljU3R5bGUpKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBkcmFmdENvbmZpZzogRHJhZnRDb25maWcgPSB7XG4gICAgICAgICAgICBjYXJkVHlwZTogc2VsZWN0ZWRUeXBlLFxuICAgICAgICAgICAgY3VzdG9tQ2FyZFR5cGU6IGN1c3RvbUNhcmRUeXBlLFxuICAgICAgICAgICAgdG9uZTogc2VsZWN0ZWRUb25lLFxuICAgICAgICAgICAgdG9uZUxhYmVsOiBzZWxlY3RlZFRvbmVPYmogPyBzZWxlY3RlZFRvbmVPYmoubGFiZWwgOiBcIkhlYXJ0ZmVsdFwiLFxuICAgICAgICAgICAgdG9uZURlc2NyaXB0aW9uOiB0b25lRGVzY3JpcHRpb24sXG4gICAgICAgICAgICB0aGVtZTogZWZmZWN0aXZlUHJvbXB0LFxuICAgICAgICAgICAgdG9GaWVsZDogdG9GaWVsZCxcbiAgICAgICAgICAgIGZyb21GaWVsZDogZnJvbUZpZWxkLFxuICAgICAgICAgICAgYXJ0aXN0aWNTdHlsZTogc2VsZWN0ZWRTdHlsZSxcbiAgICAgICAgICAgIHJlZmVyZW5jZUltYWdlVXJsczogcmVmZXJlbmNlSW1hZ2VVcmxzLFxuICAgICAgICAgICAgcGhvdG9BbmFseXNlczogcHJvcHMucGhvdG9BbmFseXNlcyxcbiAgICAgICAgICAgIGlzRHJhZnRWYXJpYXRpb246IHNlbGVjdGVkQXJ0aXN0aWNTdHlsZSA9PT0gXCJzbWFydFwiLFxuICAgICAgICAgICAgdmFyaWF0aW9uSW5kZXg6IGluZGV4XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvbnN0IHsgcHJvbXB0OiBmcm9udENvdmVyUHJvbXB0UXVlcnksIGltYWdlcyB9ID0gUHJvbXB0R2VuZXJhdG9yLmdlbmVyYXRlRHJhZnRQcm9tcHRXaXRoSW1hZ2VzKGRyYWZ0Q29uZmlnKTtcbiAgICAgICAgICBcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBmcm9udENvdmVyUHJvbXB0ID0gYXdhaXQgY2hhdFdpdGhBSShmcm9udENvdmVyUHJvbXB0UXVlcnksIHtcbiAgICAgICAgICAgIG1vZGVsOiBcImdlbWluaS0yLjUtcHJvXCIsXG4gICAgICAgICAgICBhdHRhY2htZW50czogaW1hZ2VzXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoIWZyb250Q292ZXJQcm9tcHQ/LnRyaW0oKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdlbmVyYXRlIGZyb250IGNvdmVyIHByb21wdFwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFbmhhbmNlIHdpdGggcmVmZXJlbmNlIGltYWdlIGluc3RydWN0aW9uc1xuICAgICAgICAgIGxldCBlbmhhbmNlZEZyb250Q292ZXJQcm9tcHQgPSBmcm9udENvdmVyUHJvbXB0LnRyaW0oKTtcbiAgICAgICAgICBlbmhhbmNlZEZyb250Q292ZXJQcm9tcHQgPSBQcm9tcHRHZW5lcmF0b3IuZW5oYW5jZVByb21wdFdpdGhSZWZlcmVuY2VQaG90b3MoXG4gICAgICAgICAgICBlbmhhbmNlZEZyb250Q292ZXJQcm9tcHQsXG4gICAgICAgICAgICByZWZlcmVuY2VJbWFnZVVybHMubGVuZ3RoID4gMCxcbiAgICAgICAgICAgIHNlbGVjdGVkRHJhZnRNb2RlbFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBHZW5lcmF0ZSB0aGUgaW1hZ2VcbiAgICAgICAgICBjb25zdCBqb2JJZCA9IGBkcmFmdC0ke2luZGV4fS0ke3V1aWR2NCgpfWA7XG4gICAgICAgICAgY29uc3QgaW5wdXRJbWFnZXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgaWYgKHJlZmVyZW5jZUltYWdlVXJscy5sZW5ndGggPiAwICYmIHNlbGVjdGVkRHJhZnRNb2RlbCA9PT0gXCJncHQtaW1hZ2UtMVwiKSB7XG4gICAgICAgICAgICBpbnB1dEltYWdlcy5wdXNoKC4uLnJlZmVyZW5jZUltYWdlVXJscyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9nZW5lcmF0ZS1jYXJkLWFzeW5jJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgam9iSWQsXG4gICAgICAgICAgICAgIHByb21wdHM6IHsgZnJvbnRDb3ZlcjogZW5oYW5jZWRGcm9udENvdmVyUHJvbXB0IH0sXG4gICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgIHVzZXJOdW1iZXI6IFwiKzE3MTQ1OTg2MTA1XCIsXG4gICAgICAgICAgICAgICAgbW9kZWxWZXJzaW9uOiBzZWxlY3RlZERyYWZ0TW9kZWwsXG4gICAgICAgICAgICAgICAgYXNwZWN0UmF0aW86IHBhcGVyU2l6ZXMuZmluZChzaXplID0+IHNpemUuaWQgPT09IHNlbGVjdGVkUGFwZXJTaXplKT8uYXNwZWN0UmF0aW8gfHwgXCI5OjE2XCIsXG4gICAgICAgICAgICAgICAgcXVhbGl0eTogXCJsb3dcIixcbiAgICAgICAgICAgICAgICBvdXRwdXRGb3JtYXQ6IFwianBlZ1wiLFxuICAgICAgICAgICAgICAgIG91dHB1dENvbXByZXNzaW9uOiAxMDAsXG4gICAgICAgICAgICAgICAgbW9kZXJhdGlvbjogXCJsb3dcIixcbiAgICAgICAgICAgICAgICBkaW1lbnNpb25zOiBwYXBlclNpemVzLmZpbmQoc2l6ZSA9PiBzaXplLmlkID09PSBzZWxlY3RlZFBhcGVyU2l6ZSk/LmRpbWVuc2lvbnMgfHwgXCIxMDI0eDE1MzZcIixcbiAgICAgICAgICAgICAgICBpc0Zyb250QmFja09ubHk6IHRydWUsXG4gICAgICAgICAgICAgICAgdXNlckVtYWlsLFxuICAgICAgICAgICAgICAgIGNhcmRUeXBlOiBjYXJkVHlwZUZvclByb21wdCxcbiAgICAgICAgICAgICAgICB0b0ZpZWxkLFxuICAgICAgICAgICAgICAgIGZyb21GaWVsZCxcbiAgICAgICAgICAgICAgICBpc0RyYWZ0TW9kZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAuLi4oaW5wdXRJbWFnZXMubGVuZ3RoID4gMCAmJiB7IFxuICAgICAgICAgICAgICAgICAgaW5wdXRfaW1hZ2VzOiBpbnB1dEltYWdlcyxcbiAgICAgICAgICAgICAgICAgIGlucHV0X2ltYWdlc19tb2RlOiBcImZyb250X2NvdmVyX29ubHlcIlxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNlcnZlciBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzICE9PSAncHJvY2Vzc2luZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHN0YXJ0IGRyYWZ0IGdlbmVyYXRpb24nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIERyYWZ0IHZhcmlhdGlvbiAke2luZGV4ICsgMX0gam9iIHN0YXJ0ZWQ6YCwgam9iSWQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNhdmUgZHJhZnQgam9iIHRvIHN0b3JhZ2UgZm9yIHJlY292ZXJ5XG4gICAgICAgICAgc2F2ZUpvYlRvU3RvcmFnZShqb2JJZCwge1xuICAgICAgICAgICAgaXNEcmFmdDogdHJ1ZSxcbiAgICAgICAgICAgIGRyYWZ0SW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgc3R5bGVJbmZvOiBzdHlsZU92ZXJyaWRlID8geyBzdHlsZU5hbWU6IHN0eWxlT3ZlcnJpZGUsIHN0eWxlTGFiZWw6IHN0eWxlTGFiZWwgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGZyb250Q292ZXJQcm9tcHQ6IGVuaGFuY2VkRnJvbnRDb3ZlclByb21wdCxcbiAgICAgICAgICAgIHVzZXJFbWFpbCxcbiAgICAgICAgICAgIHNlbGVjdGVkVHlwZSxcbiAgICAgICAgICAgIHNlbGVjdGVkVG9uZSxcbiAgICAgICAgICAgIHRvRmllbGQsXG4gICAgICAgICAgICBmcm9tRmllbGQsXG4gICAgICAgICAgICBkcmFmdENhcmRzOiBbXSAgLy8gV2lsbCBiZSB1cGRhdGVkIGFzIGRyYWZ0cyBjb21wbGV0ZVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gU3Vic2NyaWJlIHRvIFdlYlNvY2tldCB1cGRhdGVzXG4gICAgICAgICAgc3Vic2NyaWJlVG9Kb2Ioam9iSWQpO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIERyYWZ0IHZhcmlhdGlvbiAke2luZGV4ICsgMX0gZmFpbGVkOmAsIGVycm9yKTtcbiAgICAgICAgICB0b2FzdC5lcnJvcihgRHJhZnQgdmFyaWF0aW9uICR7aW5kZXggKyAxfSBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBXYWl0IGZvciBhbGwgZHJhZnQgZ2VuZXJhdGlvbnMgdG8gc3RhcnRcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChkcmFmdFByb21pc2VzKTtcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+agCBBbGwgZHJhZnQgdmFyaWF0aW9ucyBzdGFydGVkXCIpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0RyYWZ0IGNhcmQgZ2VuZXJhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICB0b2FzdC5lcnJvcihgRmFpbGVkIHRvIHN0YXJ0IGRyYWZ0IGdlbmVyYXRpb246ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICBcbiAgICAgIHNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICBzZXRJc0RyYWZ0TW9kZShmYWxzZSk7XG4gICAgICBzZXREcmFmdENvbXBsZXRpb25TaG93bihmYWxzZSk7XG4gICAgICBzZXREcmFmdENvbXBsZXRpb25Db3VudCgwKTtcbiAgICAgIHNldEdlbmVyYXRpb25Qcm9ncmVzcyhcIlwiKTtcbiAgICAgIHByb3BzLnN0b3BFbGFwc2VkVGltZVRyYWNraW5nKCk7XG4gICAgICBcbiAgICAgIC8vIENsZWFyIHByb2dyZXNzIGludGVydmFsIG9uIGVycm9yXG4gICAgICBpZiAocHJvZ3Jlc3NJbnRlcnZhbCkge1xuICAgICAgICBjbGVhckludGVydmFsKHByb2dyZXNzSW50ZXJ2YWwpO1xuICAgICAgICBzZXRQcm9ncmVzc0ludGVydmFsKG51bGwpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW3Byb3BzLCBwcm9ncmVzc0ludGVydmFsXSk7XG5cbiAgLy8gR2VuZXJhdGUgZmluYWwgaGlnaC1xdWFsaXR5IGNhcmQgZnJvbSBzZWxlY3RlZCBkcmFmdFxuICBjb25zdCBoYW5kbGVHZW5lcmF0ZUZpbmFsRnJvbURyYWZ0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKGRpc3BsYXlJbmRleDogbnVtYmVyKSA9PiB7XG4gICAgLy8gUHJldmVudCBkdXBsaWNhdGUgY2FsbHNcbiAgICBpZiAoaXNHZW5lcmF0aW5nRmluYWxDYXJkKSB7XG4gICAgICBjb25zb2xlLmxvZygn4pqg77iPIEZpbmFsIGNhcmQgZ2VuZXJhdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzLCBza2lwcGluZyBkdXBsaWNhdGUgY2FsbCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZWxlY3RlZERyYWZ0ID0gZHJhZnRDYXJkc1tkaXNwbGF5SW5kZXhdO1xuICAgIGlmICghc2VsZWN0ZWREcmFmdCkge1xuICAgICAgdG9hc3QuZXJyb3IoXCJQbGVhc2Ugd2FpdCBmb3IgdGhlIGRyYWZ0IHRvIGNvbXBsZXRlIGJlZm9yZSBzZWxlY3RpbmdcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgc2VsZWN0ZWRUeXBlLFxuICAgICAgY3VzdG9tQ2FyZFR5cGUsXG4gICAgICBzZWxlY3RlZFRvbmUsXG4gICAgICBwcm9tcHQsXG4gICAgICB0b0ZpZWxkLFxuICAgICAgZnJvbUZpZWxkLFxuICAgICAgZmluYWxDYXJkTWVzc2FnZSxcbiAgICAgIGlzSGFuZHdyaXR0ZW5NZXNzYWdlLFxuICAgICAgc2VsZWN0ZWRBcnRpc3RpY1N0eWxlLFxuICAgICAgY3VzdG9tU3R5bGVEZXNjcmlwdGlvbixcbiAgICAgIGlzRnJvbnRCYWNrT25seSxcbiAgICAgIHNlbGVjdGVkSW1hZ2VNb2RlbCxcbiAgICAgIHNlbGVjdGVkUGFwZXJTaXplLFxuICAgICAgdXNlckVtYWlsLFxuICAgICAgcmVmZXJlbmNlSW1hZ2VVcmxzLFxuICAgICAgc3RhcnRFbGFwc2VkVGltZVRyYWNraW5nLFxuICAgICAgc3Vic2NyaWJlVG9Kb2JcbiAgICB9ID0gcHJvcHM7XG5cbiAgICAvLyBTdG9wIGFueSBleGlzdGluZyB0aW1lcnMgZmlyc3RcbiAgICBwcm9wcy5zdG9wRWxhcHNlZFRpbWVUcmFja2luZygpO1xuICAgIFxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBwcm9ncmVzcyBpbnRlcnZhbFxuICAgIGNsZWFyUHJvZ3Jlc3NJbnRlcnZhbCgpO1xuICAgIFxuICAgIHNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZCh0cnVlKTtcbiAgICBzZXRJc0RyYWZ0TW9kZShmYWxzZSk7IC8vIFN3aXRjaCBvdXQgb2YgZHJhZnQgbW9kZSBmb3IgZmluYWwgZ2VuZXJhdGlvblxuICAgIHNldFNlbGVjdGVkRHJhZnRJbmRleChkaXNwbGF5SW5kZXgpO1xuICAgIHN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZygnZmluYWwnKTtcbiAgICBzZXRHZW5lcmF0aW9uUHJvZ3Jlc3MoXCLwn46oIENyZWF0aW5nIGhpZ2gtcXVhbGl0eSB2ZXJzaW9uIG9mIHlvdXIgc2VsZWN0ZWQgZGVzaWduLi4uXCIpO1xuICAgIHNldFByb2dyZXNzUGVyY2VudGFnZSgwKTtcbiAgICBcbiAgICAvLyBTaW1wbGUgdGltZS1iYXNlZCBwcm9ncmVzcyBmb3IgZmluYWwgY2FyZCAtIGluY3JlYXNlcyBieSB+MS4xJSBwZXIgc2Vjb25kICg5MCBzZWNvbmRzIHRvIHJlYWNoIDEwMCUpXG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBzZXRQcm9ncmVzc1BlcmNlbnRhZ2UocHJldiA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1Byb2dyZXNzID0gcHJldiArIDEuMTtcbiAgICAgICAgcmV0dXJuIG5ld1Byb2dyZXNzID49IDk1ID8gOTUgOiBuZXdQcm9ncmVzczsgLy8gQ2FwIGF0IDk1JSB1bnRpbCBjb21wbGV0aW9uXG4gICAgICB9KTtcbiAgICB9LCAxMDAwKTsgLy8gVXBkYXRlIGV2ZXJ5IHNlY29uZFxuICAgIFxuICAgIHNldFByb2dyZXNzSW50ZXJ2YWwoaW50ZXJ2YWwpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGpvYklkID0gdXVpZHY0KCk7XG4gICAgICBcbiAgICAgIC8vIEdlbmVyYXRlIHRoZSBtaXNzaW5nIHByb21wdHNcbiAgICAgIGNvbnN0IHN0b3JlZEZyb250Q292ZXJQcm9tcHQgPSBzZWxlY3RlZERyYWZ0LmdlbmVyYXRlZFByb21wdHM/LmZyb250Q292ZXI7XG4gICAgICBpZiAoIXN0b3JlZEZyb250Q292ZXJQcm9tcHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2VsZWN0ZWQgZHJhZnQgaXMgbWlzc2luZyBmcm9udENvdmVyIHByb21wdFwiKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgY2FyZFR5cGVGb3JQcm9tcHQgPSBzZWxlY3RlZFR5cGUgPT09IFwiY3VzdG9tXCIgPyBjdXN0b21DYXJkVHlwZSA6IHNlbGVjdGVkVHlwZTtcbiAgICAgIGNvbnN0IHNlbGVjdGVkVG9uZU9iaiA9IGNhcmRUb25lcy5maW5kKHRvbmUgPT4gdG9uZS5pZCA9PT0gc2VsZWN0ZWRUb25lKTtcbiAgICAgIGNvbnN0IHRvbmVEZXNjcmlwdGlvbiA9IHNlbGVjdGVkVG9uZU9iaiA/IHNlbGVjdGVkVG9uZU9iai5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpIDogXCJoZWFydGZlbHQgYW5kIHNpbmNlcmVcIjtcbiAgICAgIGNvbnN0IGVmZmVjdGl2ZVByb21wdCA9IHByb21wdC50cmltKCkgfHwgYEEgYmVhdXRpZnVsICR7Y2FyZFR5cGVGb3JQcm9tcHR9IGNhcmQgd2l0aCAke3RvbmVEZXNjcmlwdGlvbn0gc3R5bGVgO1xuICAgICAgXG4gICAgICBsZXQgbWVzc2FnZUNvbnRlbnQgPSBmaW5hbENhcmRNZXNzYWdlO1xuICAgICAgaWYgKGlzSGFuZHdyaXR0ZW5NZXNzYWdlKSB7XG4gICAgICAgIG1lc3NhZ2VDb250ZW50ID0gXCJbQmxhbmsgc3BhY2UgZm9yIGhhbmR3cml0dGVuIG1lc3NhZ2VdXCI7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCBzdHlsZSBmcm9tIHRoZSBzZWxlY3RlZCBkcmFmdFxuICAgICAgY29uc3QgZHJhZnRTdHlsZUluZm8gPSBzZWxlY3RlZERyYWZ0LnN0eWxlSW5mbztcbiAgICAgIGxldCBzZWxlY3RlZFN0eWxlO1xuICAgICAgaWYgKGRyYWZ0U3R5bGVJbmZvICYmIGRyYWZ0U3R5bGVJbmZvLnN0eWxlTmFtZSkge1xuICAgICAgICBzZWxlY3RlZFN0eWxlID0gYXJ0aXN0aWNTdHlsZXMuZmluZChzdHlsZSA9PiBzdHlsZS5pZCA9PT0gZHJhZnRTdHlsZUluZm8uc3R5bGVOYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkU3R5bGUgPSBhcnRpc3RpY1N0eWxlcy5maW5kKHN0eWxlID0+IHN0eWxlLmlkID09PSBzZWxlY3RlZEFydGlzdGljU3R5bGUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVc2UgUHJvbXB0R2VuZXJhdG9yIGZvciBmaW5hbCBjYXJkIGZyb20gZHJhZnRcbiAgICAgIGNvbnN0IGZpbmFsRnJvbURyYWZ0Q29uZmlnOiBGaW5hbEZyb21EcmFmdENvbmZpZyA9IHtcbiAgICAgICAgZnJvbnRDb3ZlclByb21wdDogc3RvcmVkRnJvbnRDb3ZlclByb21wdCxcbiAgICAgICAgY2FyZFR5cGU6IHNlbGVjdGVkVHlwZSxcbiAgICAgICAgY3VzdG9tQ2FyZFR5cGU6IGN1c3RvbUNhcmRUeXBlLFxuICAgICAgICB0aGVtZTogZWZmZWN0aXZlUHJvbXB0LFxuICAgICAgICB0b25lOiBzZWxlY3RlZFRvbmUsXG4gICAgICAgIHRvbmVEZXNjcmlwdGlvbjogdG9uZURlc2NyaXB0aW9uLFxuICAgICAgICB0b0ZpZWxkOiB0b0ZpZWxkLFxuICAgICAgICBmcm9tRmllbGQ6IGZyb21GaWVsZCxcbiAgICAgICAgbWVzc2FnZTogbWVzc2FnZUNvbnRlbnQsXG4gICAgICAgIGlzSGFuZHdyaXR0ZW5NZXNzYWdlOiBpc0hhbmR3cml0dGVuTWVzc2FnZSxcbiAgICAgICAgYXJ0aXN0aWNTdHlsZTogc2VsZWN0ZWRTdHlsZSxcbiAgICAgICAgaXNGcm9udEJhY2tPbmx5OiBpc0Zyb250QmFja09ubHlcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGZpbmFsUHJvbXB0cyA9IGF3YWl0IFByb21wdEdlbmVyYXRvci5nZW5lcmF0ZUZpbmFsRnJvbURyYWZ0UHJvbXB0c0NvbWJpbmVkKGZpbmFsRnJvbURyYWZ0Q29uZmlnKTtcblxuICAgICAgaWYgKCFmaW5hbFByb21wdHMgfHwgIWZpbmFsUHJvbXB0cy5mcm9udENvdmVyIHx8ICFmaW5hbFByb21wdHMuYmFja0NvdmVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZW5lcmF0ZSBjb21wbGV0ZSBwcm9tcHRzIGZvciBmaW5hbCBjYXJkXCIpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQcmVwYXJlIGlucHV0IGltYWdlcyBmb3IgZmluYWwgZ2VuZXJhdGlvblxuICAgICAgY29uc3QgaW5wdXRJbWFnZXM6IHN0cmluZ1tdID0gW107XG4gICAgICBpZiAocmVmZXJlbmNlSW1hZ2VVcmxzLmxlbmd0aCA+IDAgJiYgc2VsZWN0ZWRJbWFnZU1vZGVsID09PSBcImdwdC1pbWFnZS0xXCIpIHtcbiAgICAgICAgaW5wdXRJbWFnZXMucHVzaCguLi5yZWZlcmVuY2VJbWFnZVVybHMpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2dlbmVyYXRlLWNhcmQtYXN5bmMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGpvYklkLFxuICAgICAgICAgIHByb21wdHM6IGZpbmFsUHJvbXB0cyxcbiAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgIHVzZXJOdW1iZXI6IFwiKzE3MTQ1OTg2MTA1XCIsXG4gICAgICAgICAgICBtb2RlbFZlcnNpb246IHNlbGVjdGVkSW1hZ2VNb2RlbCxcbiAgICAgICAgICAgIGFzcGVjdFJhdGlvOiBwYXBlclNpemVzLmZpbmQoc2l6ZSA9PiBzaXplLmlkID09PSBzZWxlY3RlZFBhcGVyU2l6ZSk/LmFzcGVjdFJhdGlvIHx8IFwiOToxNlwiLFxuICAgICAgICAgICAgcXVhbGl0eTogXCJoaWdoXCIsXG4gICAgICAgICAgICBvdXRwdXRGb3JtYXQ6IFwianBlZ1wiLFxuICAgICAgICAgICAgb3V0cHV0Q29tcHJlc3Npb246IDEwMCxcbiAgICAgICAgICAgIG1vZGVyYXRpb246IFwibG93XCIsXG4gICAgICAgICAgICBkaW1lbnNpb25zOiBwYXBlclNpemVzLmZpbmQoc2l6ZSA9PiBzaXplLmlkID09PSBzZWxlY3RlZFBhcGVyU2l6ZSk/LmRpbWVuc2lvbnMgfHwgXCIxMDI0eDE1MzZcIixcbiAgICAgICAgICAgIGlzRnJvbnRCYWNrT25seSxcbiAgICAgICAgICAgIHVzZXJFbWFpbCxcbiAgICAgICAgICAgIGNhcmRUeXBlOiBzZWxlY3RlZFR5cGUgPT09IFwiY3VzdG9tXCIgPyBjdXN0b21DYXJkVHlwZSA6IHNlbGVjdGVkVHlwZSxcbiAgICAgICAgICAgIHRvRmllbGQsXG4gICAgICAgICAgICBmcm9tRmllbGQsXG4gICAgICAgICAgICBpc0RyYWZ0TW9kZTogZmFsc2UsXG4gICAgICAgICAgICAuLi4oaW5wdXRJbWFnZXMubGVuZ3RoID4gMCAmJiB7IFxuICAgICAgICAgICAgICBpbnB1dF9pbWFnZXM6IGlucHV0SW1hZ2VzLFxuICAgICAgICAgICAgICBpbnB1dF9pbWFnZXNfbW9kZTogXCJmcm9udF9jb3Zlcl9vbmx5XCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTZXJ2ZXIgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIGlmIChyZXN1bHQuc3RhdHVzICE9PSAncHJvY2Vzc2luZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gc3RhcnQgZmluYWwgY2FyZCBnZW5lcmF0aW9uJyk7XG4gICAgICB9XG5cbiAgICAgIHNldEN1cnJlbnRKb2JJZChqb2JJZCk7XG4gICAgICB0b2FzdC5zdWNjZXNzKFwi8J+OqCBHZW5lcmF0aW5nIGhpZ2gtcXVhbGl0eSB2ZXJzaW9uIG9mIHlvdXIgc2VsZWN0ZWQgZGVzaWduIVwiKTtcbiAgICAgIFxuICAgICAgLy8gU3Vic2NyaWJlIHRvIFdlYlNvY2tldCB1cGRhdGVzXG4gICAgICBzdWJzY3JpYmVUb0pvYihqb2JJZCk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmluYWwgY2FyZCBnZW5lcmF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRvYXN0LmVycm9yKFwiRmFpbGVkIHRvIGdlbmVyYXRlIGZpbmFsIGNhcmQuIFBsZWFzZSB0cnkgYWdhaW4uXCIpO1xuICAgICAgc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkKGZhbHNlKTtcbiAgICAgIHNldEdlbmVyYXRpb25Qcm9ncmVzcyhcIlwiKTtcbiAgICAgIHNldFByb2dyZXNzUGVyY2VudGFnZSgwKTtcbiAgICAgIHByb3BzLnN0b3BFbGFwc2VkVGltZVRyYWNraW5nKCk7XG4gICAgICBjbGVhclByb2dyZXNzSW50ZXJ2YWwoKTsgLy8gQ2xlYXIgdGltZS1iYXNlZCBwcm9ncmVzcyBvbiBlcnJvclxuICAgIH1cbiAgfSwgW2RyYWZ0Q2FyZHMsIGlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCwgcHJvcHNdKTtcblxuICByZXR1cm4ge1xuICAgIGlzRHJhZnRNb2RlLFxuICAgIHNldElzRHJhZnRNb2RlLFxuICAgIGRyYWZ0Q2FyZHMsXG4gICAgc2V0RHJhZnRDYXJkcyxcbiAgICBzZWxlY3RlZERyYWZ0SW5kZXgsXG4gICAgc2V0U2VsZWN0ZWREcmFmdEluZGV4LFxuICAgIGlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCxcbiAgICBzZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQsXG4gICAgcHJldmlld2luZ0RyYWZ0SW5kZXgsXG4gICAgc2V0UHJldmlld2luZ0RyYWZ0SW5kZXgsXG4gICAgZHJhZnRDb21wbGV0aW9uU2hvd24sXG4gICAgc2V0RHJhZnRDb21wbGV0aW9uU2hvd24sXG4gICAgZHJhZnRDb21wbGV0aW9uQ291bnQsXG4gICAgc2V0RHJhZnRDb21wbGV0aW9uQ291bnQsXG4gICAgaGFuZGxlR2VuZXJhdGVEcmFmdENhcmRzLFxuICAgIGhhbmRsZUdlbmVyYXRlRmluYWxGcm9tRHJhZnQsXG4gICAgaXNHZW5lcmF0aW5nLFxuICAgIHNldElzR2VuZXJhdGluZyxcbiAgICBnZW5lcmF0aW9uUHJvZ3Jlc3MsXG4gICAgc2V0R2VuZXJhdGlvblByb2dyZXNzLFxuICAgIHByb2dyZXNzUGVyY2VudGFnZSxcbiAgICBzZXRQcm9ncmVzc1BlcmNlbnRhZ2UsXG4gICAgZ2VuZXJhdGVkQ2FyZCxcbiAgICBzZXRHZW5lcmF0ZWRDYXJkLFxuICAgIGdlbmVyYXRlZENhcmRzLFxuICAgIHNldEdlbmVyYXRlZENhcmRzLFxuICAgIGlzQ2FyZENvbXBsZXRlZCxcbiAgICBzZXRJc0NhcmRDb21wbGV0ZWQsXG4gICAgY3VycmVudEpvYklkLFxuICAgIHNldEN1cnJlbnRKb2JJZCxcbiAgICBjbGVhclByb2dyZXNzSW50ZXJ2YWxcbiAgfTtcbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInRvYXN0IiwidjQiLCJ1dWlkdjQiLCJQcm9tcHRHZW5lcmF0b3IiLCJhcnRpc3RpY1N0eWxlcyIsInBhcGVyU2l6ZXMiLCJjYXJkVG9uZXMiLCJjaGF0V2l0aEFJIiwidXNlRHJhZnRHZW5lcmF0aW9uIiwicHJvcHMiLCJpc0RyYWZ0TW9kZSIsInNldElzRHJhZnRNb2RlIiwiZHJhZnRDYXJkcyIsInNldERyYWZ0Q2FyZHMiLCJzZWxlY3RlZERyYWZ0SW5kZXgiLCJzZXRTZWxlY3RlZERyYWZ0SW5kZXgiLCJpc0dlbmVyYXRpbmdGaW5hbENhcmQiLCJzZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQiLCJwcmV2aWV3aW5nRHJhZnRJbmRleCIsInNldFByZXZpZXdpbmdEcmFmdEluZGV4IiwiZHJhZnRDb21wbGV0aW9uU2hvd24iLCJzZXREcmFmdENvbXBsZXRpb25TaG93biIsImRyYWZ0Q29tcGxldGlvbkNvdW50Iiwic2V0RHJhZnRDb21wbGV0aW9uQ291bnQiLCJpc0dlbmVyYXRpbmciLCJzZXRJc0dlbmVyYXRpbmciLCJnZW5lcmF0aW9uUHJvZ3Jlc3MiLCJzZXRHZW5lcmF0aW9uUHJvZ3Jlc3MiLCJnZW5lcmF0ZWRDYXJkIiwic2V0R2VuZXJhdGVkQ2FyZCIsImdlbmVyYXRlZENhcmRzIiwic2V0R2VuZXJhdGVkQ2FyZHMiLCJpc0NhcmRDb21wbGV0ZWQiLCJzZXRJc0NhcmRDb21wbGV0ZWQiLCJjdXJyZW50Sm9iSWQiLCJzZXRDdXJyZW50Sm9iSWQiLCJoYW5kbGVHZW5lcmF0ZURyYWZ0Q2FyZHMiLCJ1c2VyRW1haWwiLCJzZWxlY3RlZEFydGlzdGljU3R5bGUiLCJjdXN0b21TdHlsZURlc2NyaXB0aW9uIiwicmVmZXJlbmNlSW1hZ2VVcmxzIiwic2VsZWN0ZWREcmFmdE1vZGVsIiwic2VsZWN0ZWRUeXBlIiwiY3VzdG9tQ2FyZFR5cGUiLCJzZWxlY3RlZFRvbmUiLCJwcm9tcHQiLCJ0b0ZpZWxkIiwiZnJvbUZpZWxkIiwic2VsZWN0ZWRQYXBlclNpemUiLCJzYXZlSm9iVG9TdG9yYWdlIiwic3Vic2NyaWJlVG9Kb2IiLCJzdGFydEVsYXBzZWRUaW1lVHJhY2tpbmciLCJ0cmltIiwiZXJyb3IiLCJlbWFpbFJlZ2V4IiwidGVzdCIsImxlbmd0aCIsInN0b3BFbGFwc2VkVGltZVRyYWNraW5nIiwicHJvZ3Jlc3NJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJzZXRQcm9ncmVzc0ludGVydmFsIiwidW5zdWJzY3JpYmVGcm9tQWxsSm9icyIsImNvbnNvbGUiLCJsb2ciLCJrZXlzIiwiT2JqZWN0IiwibG9jYWxTdG9yYWdlIiwiZm9yRWFjaCIsImtleSIsInN0YXJ0c1dpdGgiLCJyZW1vdmVJdGVtIiwicGVuZGluZ0pvYnMiLCJKU09OIiwicGFyc2UiLCJnZXRJdGVtIiwiZmlsdGVyZWRKb2JzIiwiZmlsdGVyIiwiaWQiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInNldFByb2dyZXNzUGVyY2VudGFnZSIsInByZXYiLCJuZXdQcm9ncmVzcyIsImNhcmRUeXBlRm9yUHJvbXB0Iiwic2VsZWN0ZWRUb25lT2JqIiwiZmluZCIsInRvbmUiLCJ0b25lRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsInRvTG93ZXJDYXNlIiwiZWZmZWN0aXZlUHJvbXB0IiwiZHJhZnRQcm9taXNlcyIsIkFycmF5IiwiZnJvbSIsIl8iLCJpbmRleCIsInN0eWxlT3ZlcnJpZGUiLCJ1bmRlZmluZWQiLCJzdHlsZUxhYmVsIiwicHJlZGVmaW5lZFN0eWxlcyIsInN0eWxlTGFiZWxzIiwic2VsZWN0ZWRTdHlsZSIsInN0eWxlIiwiZHJhZnRDb25maWciLCJjYXJkVHlwZSIsInRvbmVMYWJlbCIsImxhYmVsIiwidGhlbWUiLCJhcnRpc3RpY1N0eWxlIiwicGhvdG9BbmFseXNlcyIsImlzRHJhZnRWYXJpYXRpb24iLCJ2YXJpYXRpb25JbmRleCIsImZyb250Q292ZXJQcm9tcHRRdWVyeSIsImltYWdlcyIsImdlbmVyYXRlRHJhZnRQcm9tcHRXaXRoSW1hZ2VzIiwiZnJvbnRDb3ZlclByb21wdCIsIm1vZGVsIiwiYXR0YWNobWVudHMiLCJFcnJvciIsImVuaGFuY2VkRnJvbnRDb3ZlclByb21wdCIsImVuaGFuY2VQcm9tcHRXaXRoUmVmZXJlbmNlUGhvdG9zIiwiam9iSWQiLCJpbnB1dEltYWdlcyIsInB1c2giLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJwcm9tcHRzIiwiZnJvbnRDb3ZlciIsImNvbmZpZyIsInVzZXJOdW1iZXIiLCJtb2RlbFZlcnNpb24iLCJhc3BlY3RSYXRpbyIsInNpemUiLCJxdWFsaXR5Iiwib3V0cHV0Rm9ybWF0Iiwib3V0cHV0Q29tcHJlc3Npb24iLCJtb2RlcmF0aW9uIiwiZGltZW5zaW9ucyIsImlzRnJvbnRCYWNrT25seSIsImlucHV0X2ltYWdlcyIsImlucHV0X2ltYWdlc19tb2RlIiwib2siLCJzdGF0dXMiLCJyZXN1bHQiLCJqc29uIiwibWVzc2FnZSIsImlzRHJhZnQiLCJkcmFmdEluZGV4Iiwic3R5bGVJbmZvIiwic3R5bGVOYW1lIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJoYW5kbGVHZW5lcmF0ZUZpbmFsRnJvbURyYWZ0IiwiZGlzcGxheUluZGV4Iiwic2VsZWN0ZWREcmFmdCIsImZpbmFsQ2FyZE1lc3NhZ2UiLCJpc0hhbmR3cml0dGVuTWVzc2FnZSIsInNlbGVjdGVkSW1hZ2VNb2RlbCIsImNsZWFyUHJvZ3Jlc3NJbnRlcnZhbCIsInN0b3JlZEZyb250Q292ZXJQcm9tcHQiLCJnZW5lcmF0ZWRQcm9tcHRzIiwibWVzc2FnZUNvbnRlbnQiLCJkcmFmdFN0eWxlSW5mbyIsImZpbmFsRnJvbURyYWZ0Q29uZmlnIiwiZmluYWxQcm9tcHRzIiwiZ2VuZXJhdGVGaW5hbEZyb21EcmFmdFByb21wdHNDb21iaW5lZCIsImJhY2tDb3ZlciIsInN1Y2Nlc3MiLCJwcm9ncmVzc1BlcmNlbnRhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/cardStudio/useDraftGeneration.ts\n"));

/***/ })

});