"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/wizard/CardWizardEffects.tsx":
/*!*************************************************!*\
  !*** ./components/wizard/CardWizardEffects.tsx ***!
  \*************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CardWizardEffects: function() { return /* binding */ CardWizardEffects; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ CardWizardEffects auto */ var _s = $RefreshSig$();\n\nfunction CardWizardEffects(param) {\n    let { cardStudio, cardForm, cardHistory, wizardState, updateWizardState, isResumingDraft, isRestoringJobs } = param;\n    _s();\n    // Track the current session ID to update the same session\n    const [currentDraftSessionId, setCurrentDraftSessionId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [lastSavedDraftCount, setLastSavedDraftCount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    // Check for pending jobs on component mount but don't auto-navigate\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const restorePendingJobs = async ()=>{\n            console.log(\"\\uD83D\\uDD04 CardWizardEffects: Starting checkPendingJobs...\");\n            // First check for saved draft session\n            let currentSession = null;\n            try {\n                currentSession = JSON.parse(localStorage.getItem(\"vibe-current-draft-session\") || \"null\");\n            } catch (e) {\n                currentSession = null;\n            }\n            if (currentSession && currentSession.draftCards && currentSession.draftCards.length > 0) {\n                console.log(\"\\uD83D\\uDD04 Found saved draft session with\", currentSession.draftCards.length, \"drafts\");\n                // Check if draft is less than 2 hours old\n                const draftAge = Date.now() - new Date(currentSession.savedAt).getTime();\n                const twoHours = 2 * 60 * 60 * 1000;\n                if (draftAge < twoHours) {\n                    // Restore draft cards but don't navigate\n                    cardStudio.setDraftCards(currentSession.draftCards);\n                    cardStudio.setIsDraftMode(true);\n                    // Restore form data if needed\n                    if (currentSession.formData) {\n                        cardForm.updateFormData(currentSession.formData);\n                    }\n                    // Don't auto-navigate - let user choose via Resume Draft button\n                    console.log(\"\\uD83D\\uDD04 Draft session restored, user can resume via UI\");\n                    // Set the current session ID for updates\n                    setCurrentDraftSessionId(currentSession.id);\n                    setLastSavedDraftCount(currentSession.draftCards.length);\n                } else {\n                    // Draft is too old, remove it\n                    console.log(\"\\uD83D\\uDD04 Draft session expired, removing...\");\n                    localStorage.removeItem(\"vibe-current-draft-session\");\n                    cardHistory.removeDraftSession(currentSession.id);\n                }\n                return; // Skip pending jobs check if we processed a draft session\n            }\n            await cardStudio.checkPendingJobs();\n            // Only auto-navigate if there's an active generation in progress\n            // Don't navigate for completed drafts - let user choose\n            if (cardStudio.isGenerating && cardStudio.generationProgress) {\n                if (cardStudio.isGeneratingFinalCard) {\n                    console.log(\"\\uD83D\\uDD04 Restoring to Step 6 due to ongoing final generation\");\n                    // Mark all previous steps as completed\n                    for(let i = 1; i <= 5; i++){\n                        if (!wizardState.completedSteps.includes(i)) wizardState.markStepCompleted(i);\n                    }\n                    wizardState.updateCurrentStep(6);\n                } else if (cardStudio.isDraftMode && cardStudio.isGenerating) {\n                    console.log(\"\\uD83D\\uDD04 Restoring to Step 5 due to ongoing draft generation\");\n                    // Mark previous steps as completed\n                    if (!wizardState.completedSteps.includes(1)) wizardState.markStepCompleted(1);\n                    if (!wizardState.completedSteps.includes(2)) wizardState.markStepCompleted(2);\n                    if (!wizardState.completedSteps.includes(3)) wizardState.markStepCompleted(3);\n                    if (!wizardState.completedSteps.includes(4)) wizardState.markStepCompleted(4);\n                    wizardState.updateCurrentStep(5);\n                }\n            } else {\n                // No active generation - reset wizard to step 1 if we're on a later step\n                // This handles the case where user left off on step 5 but isn't actively generating\n                if (wizardState.currentStep > 1 && !cardStudio.isGenerating) {\n                    console.log(\"\\uD83D\\uDD04 No active generation, resetting to Step 1\");\n                    wizardState.updateCurrentStep(1);\n                }\n            }\n        // If we have completed drafts but no active generation, stay on Step 1\n        // User can choose to resume via the UI\n        };\n        restorePendingJobs();\n    }, []);\n    // Only mark step 1 as completed if user has made selections, but don't auto-advance\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!wizardState.isInitialLoadComplete || !cardForm.isInitialLoadComplete) return;\n        // Only mark step as completed, don't navigate\n        if (wizardState.currentStep === 1 && !wizardState.completedSteps.includes(1)) {\n            const formData = cardForm.formData;\n            // Mark step 1 as completed if user has made selections\n            if (formData.selectedType && formData.selectedTone) {\n                console.log(\"âœ… Marking step 1 as completed based on saved data\");\n                wizardState.markStepCompleted(1);\n            }\n        }\n    }, [\n        wizardState.isInitialLoadComplete,\n        cardForm.isInitialLoadComplete\n    ]);\n    // Only navigate to Step 5 when NEW draft cards are being generated (not restored)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Only navigate if we're actively generating NEW drafts, not restoring old ones\n        if (cardStudio.draftCards.length > 0 && wizardState.currentStep < 5 && cardStudio.isGenerating && !isRestoringJobs) {\n            console.log(\"\\uD83D\\uDCCB New draft cards being generated, navigating to Step 5\");\n            // Mark previous steps as completed\n            for(let i = 1; i <= 4; i++){\n                if (!wizardState.completedSteps.includes(i)) {\n                    wizardState.markStepCompleted(i);\n                }\n            }\n            wizardState.updateCurrentStep(5);\n        }\n    }, [\n        cardStudio.draftCards.length,\n        cardStudio.isGenerating,\n        isRestoringJobs\n    ]);\n    // Auto-save drafts when user creates draft cards\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Only save if we have draft cards and not resuming or restoring\n        if (cardStudio.draftCards.length > 0) {\n            console.log(\"\\uD83D\\uDD0D Auto-save check:\", {\n                hasCards: cardStudio.draftCards.length > 0,\n                isInitialLoadComplete: cardForm.isInitialLoadComplete,\n                isResumingDraft,\n                isRestoringJobs,\n                shouldSave: cardForm.isInitialLoadComplete && !isResumingDraft && !isRestoringJobs\n            });\n        }\n        if (cardStudio.draftCards.length > 0 && cardForm.isInitialLoadComplete && !isResumingDraft && !isRestoringJobs) {\n            // Count non-null draft cards\n            const validDrafts = cardStudio.draftCards.filter((card)=>card !== null).length;\n            // Only save when:\n            // 1. All 5 drafts are complete (validDrafts === 5)\n            // 2. This is the first draft and we haven't saved yet (validDrafts === 1 && !currentDraftSessionId)\n            // 3. User selected a draft (selectedDraftIndex >= 0)\n            const shouldSave = validDrafts === 5 && lastSavedDraftCount < 5 || // All drafts complete\n            validDrafts === 1 && !currentDraftSessionId || // First draft\n            cardStudio.selectedDraftIndex >= 0 && validDrafts > lastSavedDraftCount // User selected\n            ;\n            if (shouldSave && validDrafts > 0) {\n                // Save or update the session with the same ID\n                const sessionId = cardHistory.saveDraftSession(cardForm.formData, cardStudio.draftCards, cardStudio.selectedDraftIndex, currentDraftSessionId || undefined // Use existing session ID if available\n                );\n                // Store the session ID for future updates\n                if (!currentDraftSessionId) {\n                    setCurrentDraftSessionId(sessionId);\n                }\n                // Update the last saved count\n                setLastSavedDraftCount(validDrafts);\n                console.log(\"\\uD83D\\uDCBE Draft session saved: \".concat(validDrafts, \"/5 drafts complete\"));\n            }\n        }\n    }, [\n        cardStudio.draftCards,\n        cardStudio.selectedDraftIndex,\n        cardForm.formData,\n        cardForm.isInitialLoadComplete,\n        isResumingDraft,\n        isRestoringJobs,\n        currentDraftSessionId,\n        lastSavedDraftCount\n    ]);\n    // Reset session ID when drafts are cleared\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const validDrafts = cardStudio.draftCards.filter((card)=>card !== null).length;\n        if (validDrafts === 0) {\n            setCurrentDraftSessionId(null);\n            setLastSavedDraftCount(0);\n        }\n    }, [\n        cardStudio.draftCards\n    ]);\n    // Auto-save completed cards and ensure we're on Step 6\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardStudio.generatedCard && cardStudio.isCardCompleted) {\n            cardHistory.addCompletedCard(cardStudio.generatedCard);\n            // Clear draft session since card is completed\n            if (currentDraftSessionId) {\n                console.log(\"\\uD83E\\uDDF9 Clearing draft session after successful card completion\");\n                localStorage.removeItem(\"vibe-current-draft-session\");\n                cardHistory.removeDraftSession(currentDraftSessionId);\n                setCurrentDraftSessionId(null);\n                setLastSavedDraftCount(0);\n            }\n            // Ensure we're on Step 6 to see the completed card\n            if (wizardState.currentStep !== 6) {\n                console.log(\"\\uD83D\\uDCCD Card completed but not on Step 6, navigating there now...\");\n                wizardState.updateCurrentStep(6);\n            }\n        }\n    }, [\n        cardStudio.generatedCard,\n        cardStudio.isCardCompleted,\n        wizardState.currentStep,\n        currentDraftSessionId\n    ]);\n    // Sync form data with cardStudio when form data changes\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!cardForm.isInitialLoadComplete) return;\n        const { formData } = cardForm;\n        // Update cardStudio with form data\n        cardStudio.setSelectedType(formData.selectedType);\n        cardStudio.setCustomCardType(formData.customCardType);\n        cardStudio.setSelectedTone(formData.selectedTone);\n        cardStudio.setToField(formData.toField);\n        cardStudio.setFromField(formData.fromField);\n        cardStudio.setRelationshipField(formData.relationshipField);\n        cardStudio.setPrompt(formData.prompt);\n        cardStudio.setFinalCardMessage(formData.finalCardMessage);\n        cardStudio.setIsHandwrittenMessage(formData.isHandwrittenMessage);\n        cardStudio.setSelectedArtisticStyle(formData.selectedArtisticStyle);\n        cardStudio.setCustomStyleDescription(formData.customStyleDescription);\n        // Skip syncing reference images from form to cardStudio\n        // This should only flow from cardStudio -> form after uploads\n        // cardStudio.setReferenceImages(formData.referenceImages);\n        // cardStudio.setReferenceImageUrls(formData.referenceImageUrls);\n        cardStudio.setUserEmail(formData.userEmail);\n        cardStudio.setSelectedImageModel(formData.selectedImageModel);\n        cardStudio.setSelectedDraftModel(formData.selectedDraftModel);\n        cardStudio.setSelectedPaperSize(formData.selectedPaperSize);\n        cardStudio.setNumberOfCards(formData.numberOfCards);\n        cardStudio.setIsFrontBackOnly(formData.isFrontBackOnly);\n    }, [\n        cardForm.formData,\n        cardForm.isInitialLoadComplete\n    ]);\n    // Auto-complete step 1 once user makes selections\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardForm.validateStep(1) && !wizardState.completedSteps.includes(1)) {\n            wizardState.markStepCompleted(1);\n        }\n    }, [\n        cardForm.formData.selectedType,\n        cardForm.formData.selectedTone,\n        cardForm.formData.customCardType,\n        wizardState\n    ]);\n    // Auto-complete step 4 once email is valid\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardForm.validateStep(4) && !wizardState.completedSteps.includes(4)) {\n            wizardState.markStepCompleted(4);\n        }\n    }, [\n        cardForm.formData.userEmail,\n        wizardState\n    ]);\n    // Auto-advance to Step 6 when final card generation starts\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardStudio.isGeneratingFinalCard && wizardState.currentStep < 6) {\n            console.log(\"\\uD83D\\uDE80 Auto-advancing to Step 6: Final Generation\");\n            if (!wizardState.completedSteps.includes(5)) {\n                wizardState.markStepCompleted(5);\n            }\n            wizardState.updateCurrentStep(6);\n        }\n    }, [\n        cardStudio.isGeneratingFinalCard,\n        wizardState\n    ]);\n    // Sync reference images from cardStudio to form when they change\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!cardForm.isInitialLoadComplete) return;\n        // Sync if cardStudio has images but form doesn't, or if photoReferences changed\n        const shouldSync = cardStudio.referenceImageUrls.length > 0 && cardForm.formData.referenceImageUrls.length !== cardStudio.referenceImageUrls.length || cardStudio.photoReferences && cardStudio.photoReferences !== cardForm.formData.photoReferences;\n        if (shouldSync) {\n            cardForm.updateFormData({\n                referenceImages: cardStudio.referenceImages,\n                referenceImageUrls: cardStudio.referenceImageUrls,\n                photoReferences: cardStudio.photoReferences\n            });\n        }\n    }, [\n        cardStudio.referenceImageUrls,\n        cardStudio.referenceImages,\n        cardStudio.photoReferences,\n        cardForm.isInitialLoadComplete\n    ]);\n    return null;\n}\n_s(CardWizardEffects, \"8icF1iS0y70QOL81ZXfYgpSjIkA=\");\n_c = CardWizardEffects;\nvar _c;\n$RefreshReg$(_c, \"CardWizardEffects\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvd2l6YXJkL0NhcmRXaXphcmRFZmZlY3RzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRTRDO0FBZXJDLFNBQVNFLGtCQUFrQixLQVFUO1FBUlMsRUFDaENDLFVBQVUsRUFDVkMsUUFBUSxFQUNSQyxXQUFXLEVBQ1hDLFdBQVcsRUFDWEMsaUJBQWlCLEVBQ2pCQyxlQUFlLEVBQ2ZDLGVBQWUsRUFDUSxHQVJTOztJQVNoQywwREFBMEQ7SUFDMUQsTUFBTSxDQUFDQyx1QkFBdUJDLHlCQUF5QixHQUFHViwrQ0FBUUEsQ0FBZ0I7SUFDbEYsTUFBTSxDQUFDVyxxQkFBcUJDLHVCQUF1QixHQUFHWiwrQ0FBUUEsQ0FBUztJQUN2RSxvRUFBb0U7SUFDcEVELGdEQUFTQSxDQUFDO1FBQ1IsTUFBTWMscUJBQXFCO1lBQ3pCQyxRQUFRQyxHQUFHLENBQUM7WUFFWixzQ0FBc0M7WUFDdEMsSUFBSUMsaUJBQWlCO1lBQ3JCLElBQUk7Z0JBQ0ZBLGlCQUFpQkMsS0FBS0MsS0FBSyxDQUFDQyxhQUFhQyxPQUFPLENBQUMsaUNBQWlDO1lBQ3BGLEVBQUUsVUFBTTtnQkFDTkosaUJBQWlCO1lBQ25CO1lBQ0EsSUFBSUEsa0JBQWtCQSxlQUFlSyxVQUFVLElBQUlMLGVBQWVLLFVBQVUsQ0FBQ0MsTUFBTSxHQUFHLEdBQUc7Z0JBQ3ZGUixRQUFRQyxHQUFHLENBQUMsK0NBQXFDQyxlQUFlSyxVQUFVLENBQUNDLE1BQU0sRUFBRTtnQkFFbkYsMENBQTBDO2dCQUMxQyxNQUFNQyxXQUFXQyxLQUFLQyxHQUFHLEtBQUssSUFBSUQsS0FBS1IsZUFBZVUsT0FBTyxFQUFFQyxPQUFPO2dCQUN0RSxNQUFNQyxXQUFXLElBQUksS0FBSyxLQUFLO2dCQUUvQixJQUFJTCxXQUFXSyxVQUFVO29CQUN2Qix5Q0FBeUM7b0JBQ3pDMUIsV0FBVzJCLGFBQWEsQ0FBQ2IsZUFBZUssVUFBVTtvQkFDbERuQixXQUFXNEIsY0FBYyxDQUFDO29CQUUx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LENBQUMsSUFBSTtnQkFDM0NyQyxZQUFZc0MsaUJBQWlCLENBQUM7WUFDaEM7WUFDQXRDLFlBQVl1QyxpQkFBaUIsQ0FBQztRQUNoQztJQUNGLEdBQUc7UUFBQzFDLFdBQVdxQyxxQkFBcUI7UUFBRWxDO0tBQVk7SUFFbEQsaUVBQWlFO0lBQ2pFTixnREFBU0EsQ0FBQztRQUNSLElBQUksQ0FBQ0ksU0FBUzRDLHFCQUFxQixFQUFFO1FBRXJDLGdGQUFnRjtRQUNoRixNQUFNZ0QsYUFDSixXQUFZQyxrQkFBa0IsQ0FBQzFFLE1BQU0sR0FBRyxLQUN2Q25CLFNBQVM0QixRQUFRLENBQUNpRSxrQkFBa0IsQ0FBQzFFLE1BQU0sS0FBS3BCLFdBQVc4RixrQkFBa0IsQ0FBQzFFLE1BQU0sSUFDcEZwQixXQUFXK0YsZUFBZSxJQUFJL0YsV0FBVytGLGVBQWUsS0FBSzlGLFNBQVM0QixRQUFRLENBQUNrRSxlQUFlO1FBR2pHLElBQUlGLFlBQVk7WUFDZDVGLFNBQVM2QixjQUFjLENBQUM7Z0JBQ3RCa0UsaUJBQWlCaEcsV0FBV2dHLGVBQWU7Z0JBQzNDRixvQkFBb0I5RixXQUFXOEYsa0JBQWtCO2dCQUNqREMsaUJBQWlCL0YsV0FBVytGLGVBQWU7WUFDN0M7UUFDRjtJQUNGLEdBQUc7UUFBQy9GLFdBQVc4RixrQkFBa0I7UUFBRTlGLFdBQVdnRyxlQUFlO1FBQUVoRyxXQUFXK0YsZUFBZTtRQUFFOUYsU0FBUzRDLHFCQUFxQjtLQUFDO0lBRTFILE9BQU87QUFDVDtHQTNSZ0I5QztLQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL3dpemFyZC9DYXJkV2l6YXJkRWZmZWN0cy50c3g/ZGE0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQ2FyZEZvcm1EYXRhIH0gZnJvbSBcIkAvaG9va3MvdXNlQ2FyZEZvcm1cIjtcbmltcG9ydCB7IEdlbmVyYXRlZENhcmQgfSBmcm9tIFwiQC9ob29rcy9jYXJkU3R1ZGlvL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgc3RvcmFnZSB9IGZyb20gXCJAL2xpYi9zdG9yYWdlTWFuYWdlclwiO1xuXG5pbnRlcmZhY2UgQ2FyZFdpemFyZEVmZmVjdHNQcm9wcyB7XG4gIGNhcmRTdHVkaW86IGFueTtcbiAgY2FyZEZvcm06IGFueTtcbiAgY2FyZEhpc3Rvcnk6IGFueTtcbiAgd2l6YXJkU3RhdGU6IGFueTtcbiAgdXBkYXRlV2l6YXJkU3RhdGU6ICh1cGRhdGVzOiBhbnkpID0+IHZvaWQ7XG4gIGlzUmVzdW1pbmdEcmFmdDogYm9vbGVhbjtcbiAgaXNSZXN0b3JpbmdKb2JzOiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ2FyZFdpemFyZEVmZmVjdHMoe1xuICBjYXJkU3R1ZGlvLFxuICBjYXJkRm9ybSxcbiAgY2FyZEhpc3RvcnksXG4gIHdpemFyZFN0YXRlLFxuICB1cGRhdGVXaXphcmRTdGF0ZSxcbiAgaXNSZXN1bWluZ0RyYWZ0LFxuICBpc1Jlc3RvcmluZ0pvYnNcbn06IENhcmRXaXphcmRFZmZlY3RzUHJvcHMpIHtcbiAgLy8gVHJhY2sgdGhlIGN1cnJlbnQgc2Vzc2lvbiBJRCB0byB1cGRhdGUgdGhlIHNhbWUgc2Vzc2lvblxuICBjb25zdCBbY3VycmVudERyYWZ0U2Vzc2lvbklkLCBzZXRDdXJyZW50RHJhZnRTZXNzaW9uSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtsYXN0U2F2ZWREcmFmdENvdW50LCBzZXRMYXN0U2F2ZWREcmFmdENvdW50XSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG4gIC8vIENoZWNrIGZvciBwZW5kaW5nIGpvYnMgb24gY29tcG9uZW50IG1vdW50IGJ1dCBkb24ndCBhdXRvLW5hdmlnYXRlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgcmVzdG9yZVBlbmRpbmdKb2JzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ/CflIQgQ2FyZFdpemFyZEVmZmVjdHM6IFN0YXJ0aW5nIGNoZWNrUGVuZGluZ0pvYnMuLi4nKTtcbiAgICAgIFxuICAgICAgLy8gRmlyc3QgY2hlY2sgZm9yIHNhdmVkIGRyYWZ0IHNlc3Npb25cbiAgICAgIGxldCBjdXJyZW50U2Vzc2lvbiA9IG51bGw7XG4gICAgICB0cnkge1xuICAgICAgICBjdXJyZW50U2Vzc2lvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3ZpYmUtY3VycmVudC1kcmFmdC1zZXNzaW9uJykgfHwgJ251bGwnKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBjdXJyZW50U2Vzc2lvbiA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFNlc3Npb24gJiYgY3VycmVudFNlc3Npb24uZHJhZnRDYXJkcyAmJiBjdXJyZW50U2Vzc2lvbi5kcmFmdENhcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflIQgRm91bmQgc2F2ZWQgZHJhZnQgc2Vzc2lvbiB3aXRoJywgY3VycmVudFNlc3Npb24uZHJhZnRDYXJkcy5sZW5ndGgsICdkcmFmdHMnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIGRyYWZ0IGlzIGxlc3MgdGhhbiAyIGhvdXJzIG9sZFxuICAgICAgICBjb25zdCBkcmFmdEFnZSA9IERhdGUubm93KCkgLSBuZXcgRGF0ZShjdXJyZW50U2Vzc2lvbi5zYXZlZEF0KS5nZXRUaW1lKCk7XG4gICAgICAgIGNvbnN0IHR3b0hvdXJzID0gMiAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRyYWZ0QWdlIDwgdHdvSG91cnMpIHtcbiAgICAgICAgICAvLyBSZXN0b3JlIGRyYWZ0IGNhcmRzIGJ1dCBkb24ndCBuYXZpZ2F0ZVxuICAgICAgICAgIGNhcmRTdHVkaW8uc2V0RHJhZnRDYXJkcyhjdXJyZW50U2Vzc2lvbi5kcmFmdENhcmRzKTtcbiAgICAgICAgICBjYXJkU3R1ZGlvLnNldElzRHJhZnRNb2RlKHRydWUpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJlc3RvcmUgZm9ybSBkYXRhIGlmIG5lZWRlZFxuICAgICAgICAgIGlmIChjdXJyZW50U2Vzc2lvbi5mb3JtRGF0YSkge1xuICAgICAgICAgICAgY2FyZEZvcm0udXBkYXRlRm9ybURhdGEoY3VycmVudFNlc3Npb24uZm9ybURhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBEb24ndCBhdXRvLW5hdmlnYXRlIC0gbGV0IHVzZXIgY2hvb3NlIHZpYSBSZXN1bWUgRHJhZnQgYnV0dG9uXG4gICAgICAgICAgY29uc29sZS5sb2coJ/CflIQgRHJhZnQgc2Vzc2lvbiByZXN0b3JlZCwgdXNlciBjYW4gcmVzdW1lIHZpYSBVSScpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCB0aGUgY3VycmVudCBzZXNzaW9uIElEIGZvciB1cGRhdGVzXG4gICAgICAgICAgc2V0Q3VycmVudERyYWZ0U2Vzc2lvbklkKGN1cnJlbnRTZXNzaW9uLmlkKTtcbiAgICAgICAgICBzZXRMYXN0U2F2ZWREcmFmdENvdW50KGN1cnJlbnRTZXNzaW9uLmRyYWZ0Q2FyZHMubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBEcmFmdCBpcyB0b28gb2xkLCByZW1vdmUgaXRcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBEcmFmdCBzZXNzaW9uIGV4cGlyZWQsIHJlbW92aW5nLi4uJyk7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3ZpYmUtY3VycmVudC1kcmFmdC1zZXNzaW9uJyk7XG4gICAgICAgICAgY2FyZEhpc3RvcnkucmVtb3ZlRHJhZnRTZXNzaW9uKGN1cnJlbnRTZXNzaW9uLmlkKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuOyAvLyBTa2lwIHBlbmRpbmcgam9icyBjaGVjayBpZiB3ZSBwcm9jZXNzZWQgYSBkcmFmdCBzZXNzaW9uXG4gICAgICB9XG4gICAgICBcbiAgICAgIGF3YWl0IGNhcmRTdHVkaW8uY2hlY2tQZW5kaW5nSm9icygpO1xuICAgICAgXG4gICAgICAvLyBPbmx5IGF1dG8tbmF2aWdhdGUgaWYgdGhlcmUncyBhbiBhY3RpdmUgZ2VuZXJhdGlvbiBpbiBwcm9ncmVzc1xuICAgICAgLy8gRG9uJ3QgbmF2aWdhdGUgZm9yIGNvbXBsZXRlZCBkcmFmdHMgLSBsZXQgdXNlciBjaG9vc2VcbiAgICAgIGlmIChjYXJkU3R1ZGlvLmlzR2VuZXJhdGluZyAmJiBjYXJkU3R1ZGlvLmdlbmVyYXRpb25Qcm9ncmVzcykge1xuICAgICAgICBpZiAoY2FyZFN0dWRpby5pc0dlbmVyYXRpbmdGaW5hbENhcmQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBSZXN0b3JpbmcgdG8gU3RlcCA2IGR1ZSB0byBvbmdvaW5nIGZpbmFsIGdlbmVyYXRpb24nKTtcbiAgICAgICAgICAvLyBNYXJrIGFsbCBwcmV2aW91cyBzdGVwcyBhcyBjb21wbGV0ZWRcbiAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA1OyBpKyspIHtcbiAgICAgICAgICAgIGlmICghd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoaSkpIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKGkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB3aXphcmRTdGF0ZS51cGRhdGVDdXJyZW50U3RlcCg2KTtcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkU3R1ZGlvLmlzRHJhZnRNb2RlICYmIGNhcmRTdHVkaW8uaXNHZW5lcmF0aW5nKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CflIQgUmVzdG9yaW5nIHRvIFN0ZXAgNSBkdWUgdG8gb25nb2luZyBkcmFmdCBnZW5lcmF0aW9uJyk7XG4gICAgICAgICAgLy8gTWFyayBwcmV2aW91cyBzdGVwcyBhcyBjb21wbGV0ZWRcbiAgICAgICAgICBpZiAoIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKDEpKSB3aXphcmRTdGF0ZS5tYXJrU3RlcENvbXBsZXRlZCgxKTtcbiAgICAgICAgICBpZiAoIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKDIpKSB3aXphcmRTdGF0ZS5tYXJrU3RlcENvbXBsZXRlZCgyKTtcbiAgICAgICAgICBpZiAoIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKDMpKSB3aXphcmRTdGF0ZS5tYXJrU3RlcENvbXBsZXRlZCgzKTtcbiAgICAgICAgICBpZiAoIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKDQpKSB3aXphcmRTdGF0ZS5tYXJrU3RlcENvbXBsZXRlZCg0KTtcbiAgICAgICAgICB3aXphcmRTdGF0ZS51cGRhdGVDdXJyZW50U3RlcCg1KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm8gYWN0aXZlIGdlbmVyYXRpb24gLSByZXNldCB3aXphcmQgdG8gc3RlcCAxIGlmIHdlJ3JlIG9uIGEgbGF0ZXIgc3RlcFxuICAgICAgICAvLyBUaGlzIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmUgdXNlciBsZWZ0IG9mZiBvbiBzdGVwIDUgYnV0IGlzbid0IGFjdGl2ZWx5IGdlbmVyYXRpbmdcbiAgICAgICAgaWYgKHdpemFyZFN0YXRlLmN1cnJlbnRTdGVwID4gMSAmJiAhY2FyZFN0dWRpby5pc0dlbmVyYXRpbmcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBObyBhY3RpdmUgZ2VuZXJhdGlvbiwgcmVzZXR0aW5nIHRvIFN0ZXAgMScpO1xuICAgICAgICAgIHdpemFyZFN0YXRlLnVwZGF0ZUN1cnJlbnRTdGVwKDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBJZiB3ZSBoYXZlIGNvbXBsZXRlZCBkcmFmdHMgYnV0IG5vIGFjdGl2ZSBnZW5lcmF0aW9uLCBzdGF5IG9uIFN0ZXAgMVxuICAgICAgLy8gVXNlciBjYW4gY2hvb3NlIHRvIHJlc3VtZSB2aWEgdGhlIFVJXG4gICAgfTtcbiAgICBcbiAgICByZXN0b3JlUGVuZGluZ0pvYnMoKTtcbiAgfSwgW10pO1xuXG4gIC8vIE9ubHkgbWFyayBzdGVwIDEgYXMgY29tcGxldGVkIGlmIHVzZXIgaGFzIG1hZGUgc2VsZWN0aW9ucywgYnV0IGRvbid0IGF1dG8tYWR2YW5jZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghd2l6YXJkU3RhdGUuaXNJbml0aWFsTG9hZENvbXBsZXRlIHx8ICFjYXJkRm9ybS5pc0luaXRpYWxMb2FkQ29tcGxldGUpIHJldHVybjtcbiAgICBcbiAgICAvLyBPbmx5IG1hcmsgc3RlcCBhcyBjb21wbGV0ZWQsIGRvbid0IG5hdmlnYXRlXG4gICAgaWYgKHdpemFyZFN0YXRlLmN1cnJlbnRTdGVwID09PSAxICYmICF3aXphcmRTdGF0ZS5jb21wbGV0ZWRTdGVwcy5pbmNsdWRlcygxKSkge1xuICAgICAgY29uc3QgZm9ybURhdGEgPSBjYXJkRm9ybS5mb3JtRGF0YTtcbiAgICAgIFxuICAgICAgLy8gTWFyayBzdGVwIDEgYXMgY29tcGxldGVkIGlmIHVzZXIgaGFzIG1hZGUgc2VsZWN0aW9uc1xuICAgICAgaWYgKGZvcm1EYXRhLnNlbGVjdGVkVHlwZSAmJiBmb3JtRGF0YS5zZWxlY3RlZFRvbmUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBNYXJraW5nIHN0ZXAgMSBhcyBjb21wbGV0ZWQgYmFzZWQgb24gc2F2ZWQgZGF0YScpO1xuICAgICAgICB3aXphcmRTdGF0ZS5tYXJrU3RlcENvbXBsZXRlZCgxKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFt3aXphcmRTdGF0ZS5pc0luaXRpYWxMb2FkQ29tcGxldGUsIGNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZV0pO1xuXG4gIC8vIE9ubHkgbmF2aWdhdGUgdG8gU3RlcCA1IHdoZW4gTkVXIGRyYWZ0IGNhcmRzIGFyZSBiZWluZyBnZW5lcmF0ZWQgKG5vdCByZXN0b3JlZClcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IG5hdmlnYXRlIGlmIHdlJ3JlIGFjdGl2ZWx5IGdlbmVyYXRpbmcgTkVXIGRyYWZ0cywgbm90IHJlc3RvcmluZyBvbGQgb25lc1xuICAgIGlmIChjYXJkU3R1ZGlvLmRyYWZ0Q2FyZHMubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgd2l6YXJkU3RhdGUuY3VycmVudFN0ZXAgPCA1ICYmIFxuICAgICAgICBjYXJkU3R1ZGlvLmlzR2VuZXJhdGluZyAmJiBcbiAgICAgICAgIWlzUmVzdG9yaW5nSm9icykge1xuICAgICAgY29uc29sZS5sb2coJ/Cfk4sgTmV3IGRyYWZ0IGNhcmRzIGJlaW5nIGdlbmVyYXRlZCwgbmF2aWdhdGluZyB0byBTdGVwIDUnKTtcbiAgICAgIC8vIE1hcmsgcHJldmlvdXMgc3RlcHMgYXMgY29tcGxldGVkXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSA0OyBpKyspIHtcbiAgICAgICAgaWYgKCF3aXphcmRTdGF0ZS5jb21wbGV0ZWRTdGVwcy5pbmNsdWRlcyhpKSkge1xuICAgICAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB3aXphcmRTdGF0ZS51cGRhdGVDdXJyZW50U3RlcCg1KTtcbiAgICB9XG4gIH0sIFtjYXJkU3R1ZGlvLmRyYWZ0Q2FyZHMubGVuZ3RoLCBjYXJkU3R1ZGlvLmlzR2VuZXJhdGluZywgaXNSZXN0b3JpbmdKb2JzXSk7XG5cbiAgLy8gQXV0by1zYXZlIGRyYWZ0cyB3aGVuIHVzZXIgY3JlYXRlcyBkcmFmdCBjYXJkc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgc2F2ZSBpZiB3ZSBoYXZlIGRyYWZ0IGNhcmRzIGFuZCBub3QgcmVzdW1pbmcgb3IgcmVzdG9yaW5nXG4gICAgaWYgKGNhcmRTdHVkaW8uZHJhZnRDYXJkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBBdXRvLXNhdmUgY2hlY2s6Jywge1xuICAgICAgICBoYXNDYXJkczogY2FyZFN0dWRpby5kcmFmdENhcmRzLmxlbmd0aCA+IDAsXG4gICAgICAgIGlzSW5pdGlhbExvYWRDb21wbGV0ZTogY2FyZEZvcm0uaXNJbml0aWFsTG9hZENvbXBsZXRlLFxuICAgICAgICBpc1Jlc3VtaW5nRHJhZnQsXG4gICAgICAgIGlzUmVzdG9yaW5nSm9icyxcbiAgICAgICAgc2hvdWxkU2F2ZTogY2FyZEZvcm0uaXNJbml0aWFsTG9hZENvbXBsZXRlICYmICFpc1Jlc3VtaW5nRHJhZnQgJiYgIWlzUmVzdG9yaW5nSm9ic1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChjYXJkU3R1ZGlvLmRyYWZ0Q2FyZHMubGVuZ3RoID4gMCAmJiBjYXJkRm9ybS5pc0luaXRpYWxMb2FkQ29tcGxldGUgJiYgIWlzUmVzdW1pbmdEcmFmdCAmJiAhaXNSZXN0b3JpbmdKb2JzKSB7XG4gICAgICAvLyBDb3VudCBub24tbnVsbCBkcmFmdCBjYXJkc1xuICAgICAgY29uc3QgdmFsaWREcmFmdHMgPSBjYXJkU3R1ZGlvLmRyYWZ0Q2FyZHMuZmlsdGVyKGNhcmQgPT4gY2FyZCAhPT0gbnVsbCkubGVuZ3RoO1xuICAgICAgXG4gICAgICAvLyBPbmx5IHNhdmUgd2hlbjpcbiAgICAgIC8vIDEuIEFsbCA1IGRyYWZ0cyBhcmUgY29tcGxldGUgKHZhbGlkRHJhZnRzID09PSA1KVxuICAgICAgLy8gMi4gVGhpcyBpcyB0aGUgZmlyc3QgZHJhZnQgYW5kIHdlIGhhdmVuJ3Qgc2F2ZWQgeWV0ICh2YWxpZERyYWZ0cyA9PT0gMSAmJiAhY3VycmVudERyYWZ0U2Vzc2lvbklkKVxuICAgICAgLy8gMy4gVXNlciBzZWxlY3RlZCBhIGRyYWZ0IChzZWxlY3RlZERyYWZ0SW5kZXggPj0gMClcbiAgICAgIGNvbnN0IHNob3VsZFNhdmUgPSAoXG4gICAgICAgICh2YWxpZERyYWZ0cyA9PT0gNSAmJiBsYXN0U2F2ZWREcmFmdENvdW50IDwgNSkgfHwgLy8gQWxsIGRyYWZ0cyBjb21wbGV0ZVxuICAgICAgICAodmFsaWREcmFmdHMgPT09IDEgJiYgIWN1cnJlbnREcmFmdFNlc3Npb25JZCkgfHwgLy8gRmlyc3QgZHJhZnRcbiAgICAgICAgKGNhcmRTdHVkaW8uc2VsZWN0ZWREcmFmdEluZGV4ID49IDAgJiYgdmFsaWREcmFmdHMgPiBsYXN0U2F2ZWREcmFmdENvdW50KSAvLyBVc2VyIHNlbGVjdGVkXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAoc2hvdWxkU2F2ZSAmJiB2YWxpZERyYWZ0cyA+IDApIHtcbiAgICAgICAgLy8gU2F2ZSBvciB1cGRhdGUgdGhlIHNlc3Npb24gd2l0aCB0aGUgc2FtZSBJRFxuICAgICAgICBjb25zdCBzZXNzaW9uSWQgPSBjYXJkSGlzdG9yeS5zYXZlRHJhZnRTZXNzaW9uKFxuICAgICAgICAgIGNhcmRGb3JtLmZvcm1EYXRhLFxuICAgICAgICAgIGNhcmRTdHVkaW8uZHJhZnRDYXJkcyxcbiAgICAgICAgICBjYXJkU3R1ZGlvLnNlbGVjdGVkRHJhZnRJbmRleCxcbiAgICAgICAgICBjdXJyZW50RHJhZnRTZXNzaW9uSWQgfHwgdW5kZWZpbmVkIC8vIFVzZSBleGlzdGluZyBzZXNzaW9uIElEIGlmIGF2YWlsYWJsZVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gU3RvcmUgdGhlIHNlc3Npb24gSUQgZm9yIGZ1dHVyZSB1cGRhdGVzXG4gICAgICAgIGlmICghY3VycmVudERyYWZ0U2Vzc2lvbklkKSB7XG4gICAgICAgICAgc2V0Q3VycmVudERyYWZ0U2Vzc2lvbklkKHNlc3Npb25JZCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgbGFzdCBzYXZlZCBjb3VudFxuICAgICAgICBzZXRMYXN0U2F2ZWREcmFmdENvdW50KHZhbGlkRHJhZnRzKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5K+IERyYWZ0IHNlc3Npb24gc2F2ZWQ6ICR7dmFsaWREcmFmdHN9LzUgZHJhZnRzIGNvbXBsZXRlYCk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY2FyZFN0dWRpby5kcmFmdENhcmRzLCBjYXJkU3R1ZGlvLnNlbGVjdGVkRHJhZnRJbmRleCwgY2FyZEZvcm0uZm9ybURhdGEsIGNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZSwgaXNSZXN1bWluZ0RyYWZ0LCBpc1Jlc3RvcmluZ0pvYnMsIGN1cnJlbnREcmFmdFNlc3Npb25JZCwgbGFzdFNhdmVkRHJhZnRDb3VudF0pO1xuICBcbiAgLy8gUmVzZXQgc2Vzc2lvbiBJRCB3aGVuIGRyYWZ0cyBhcmUgY2xlYXJlZFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkRHJhZnRzID0gY2FyZFN0dWRpby5kcmFmdENhcmRzLmZpbHRlcihjYXJkID0+IGNhcmQgIT09IG51bGwpLmxlbmd0aDtcbiAgICBpZiAodmFsaWREcmFmdHMgPT09IDApIHtcbiAgICAgIHNldEN1cnJlbnREcmFmdFNlc3Npb25JZChudWxsKTtcbiAgICAgIHNldExhc3RTYXZlZERyYWZ0Q291bnQoMCk7XG4gICAgfVxuICB9LCBbY2FyZFN0dWRpby5kcmFmdENhcmRzXSk7XG5cbiAgLy8gQXV0by1zYXZlIGNvbXBsZXRlZCBjYXJkcyBhbmQgZW5zdXJlIHdlJ3JlIG9uIFN0ZXAgNlxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjYXJkU3R1ZGlvLmdlbmVyYXRlZENhcmQgJiYgY2FyZFN0dWRpby5pc0NhcmRDb21wbGV0ZWQpIHtcbiAgICAgIGNhcmRIaXN0b3J5LmFkZENvbXBsZXRlZENhcmQoY2FyZFN0dWRpby5nZW5lcmF0ZWRDYXJkKTtcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgZHJhZnQgc2Vzc2lvbiBzaW5jZSBjYXJkIGlzIGNvbXBsZXRlZFxuICAgICAgaWYgKGN1cnJlbnREcmFmdFNlc3Npb25JZCkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+nuSBDbGVhcmluZyBkcmFmdCBzZXNzaW9uIGFmdGVyIHN1Y2Nlc3NmdWwgY2FyZCBjb21wbGV0aW9uJyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd2aWJlLWN1cnJlbnQtZHJhZnQtc2Vzc2lvbicpO1xuICAgICAgICBjYXJkSGlzdG9yeS5yZW1vdmVEcmFmdFNlc3Npb24oY3VycmVudERyYWZ0U2Vzc2lvbklkKTtcbiAgICAgICAgc2V0Q3VycmVudERyYWZ0U2Vzc2lvbklkKG51bGwpO1xuICAgICAgICBzZXRMYXN0U2F2ZWREcmFmdENvdW50KDApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBFbnN1cmUgd2UncmUgb24gU3RlcCA2IHRvIHNlZSB0aGUgY29tcGxldGVkIGNhcmRcbiAgICAgIGlmICh3aXphcmRTdGF0ZS5jdXJyZW50U3RlcCAhPT0gNikge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TjSBDYXJkIGNvbXBsZXRlZCBidXQgbm90IG9uIFN0ZXAgNiwgbmF2aWdhdGluZyB0aGVyZSBub3cuLi4nKTtcbiAgICAgICAgd2l6YXJkU3RhdGUudXBkYXRlQ3VycmVudFN0ZXAoNik7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY2FyZFN0dWRpby5nZW5lcmF0ZWRDYXJkLCBjYXJkU3R1ZGlvLmlzQ2FyZENvbXBsZXRlZCwgd2l6YXJkU3RhdGUuY3VycmVudFN0ZXAsIGN1cnJlbnREcmFmdFNlc3Npb25JZF0pO1xuXG4gIC8vIFN5bmMgZm9ybSBkYXRhIHdpdGggY2FyZFN0dWRpbyB3aGVuIGZvcm0gZGF0YSBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjYXJkRm9ybS5pc0luaXRpYWxMb2FkQ29tcGxldGUpIHJldHVybjtcblxuICAgIGNvbnN0IHsgZm9ybURhdGEgfSA9IGNhcmRGb3JtO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjYXJkU3R1ZGlvIHdpdGggZm9ybSBkYXRhXG4gICAgY2FyZFN0dWRpby5zZXRTZWxlY3RlZFR5cGUoZm9ybURhdGEuc2VsZWN0ZWRUeXBlKTtcbiAgICBjYXJkU3R1ZGlvLnNldEN1c3RvbUNhcmRUeXBlKGZvcm1EYXRhLmN1c3RvbUNhcmRUeXBlKTtcbiAgICBjYXJkU3R1ZGlvLnNldFNlbGVjdGVkVG9uZShmb3JtRGF0YS5zZWxlY3RlZFRvbmUpO1xuICAgIGNhcmRTdHVkaW8uc2V0VG9GaWVsZChmb3JtRGF0YS50b0ZpZWxkKTtcbiAgICBjYXJkU3R1ZGlvLnNldEZyb21GaWVsZChmb3JtRGF0YS5mcm9tRmllbGQpO1xuICAgIGNhcmRTdHVkaW8uc2V0UmVsYXRpb25zaGlwRmllbGQoZm9ybURhdGEucmVsYXRpb25zaGlwRmllbGQpO1xuICAgIGNhcmRTdHVkaW8uc2V0UHJvbXB0KGZvcm1EYXRhLnByb21wdCk7XG4gICAgY2FyZFN0dWRpby5zZXRGaW5hbENhcmRNZXNzYWdlKGZvcm1EYXRhLmZpbmFsQ2FyZE1lc3NhZ2UpO1xuICAgIGNhcmRTdHVkaW8uc2V0SXNIYW5kd3JpdHRlbk1lc3NhZ2UoZm9ybURhdGEuaXNIYW5kd3JpdHRlbk1lc3NhZ2UpO1xuICAgIGNhcmRTdHVkaW8uc2V0U2VsZWN0ZWRBcnRpc3RpY1N0eWxlKGZvcm1EYXRhLnNlbGVjdGVkQXJ0aXN0aWNTdHlsZSk7XG4gICAgY2FyZFN0dWRpby5zZXRDdXN0b21TdHlsZURlc2NyaXB0aW9uKGZvcm1EYXRhLmN1c3RvbVN0eWxlRGVzY3JpcHRpb24pO1xuICAgIC8vIFNraXAgc3luY2luZyByZWZlcmVuY2UgaW1hZ2VzIGZyb20gZm9ybSB0byBjYXJkU3R1ZGlvXG4gICAgLy8gVGhpcyBzaG91bGQgb25seSBmbG93IGZyb20gY2FyZFN0dWRpbyAtPiBmb3JtIGFmdGVyIHVwbG9hZHNcbiAgICAvLyBjYXJkU3R1ZGlvLnNldFJlZmVyZW5jZUltYWdlcyhmb3JtRGF0YS5yZWZlcmVuY2VJbWFnZXMpO1xuICAgIC8vIGNhcmRTdHVkaW8uc2V0UmVmZXJlbmNlSW1hZ2VVcmxzKGZvcm1EYXRhLnJlZmVyZW5jZUltYWdlVXJscyk7XG4gICAgY2FyZFN0dWRpby5zZXRVc2VyRW1haWwoZm9ybURhdGEudXNlckVtYWlsKTtcbiAgICBjYXJkU3R1ZGlvLnNldFNlbGVjdGVkSW1hZ2VNb2RlbChmb3JtRGF0YS5zZWxlY3RlZEltYWdlTW9kZWwpO1xuICAgIGNhcmRTdHVkaW8uc2V0U2VsZWN0ZWREcmFmdE1vZGVsKGZvcm1EYXRhLnNlbGVjdGVkRHJhZnRNb2RlbCk7XG4gICAgY2FyZFN0dWRpby5zZXRTZWxlY3RlZFBhcGVyU2l6ZShmb3JtRGF0YS5zZWxlY3RlZFBhcGVyU2l6ZSk7XG4gICAgY2FyZFN0dWRpby5zZXROdW1iZXJPZkNhcmRzKGZvcm1EYXRhLm51bWJlck9mQ2FyZHMpO1xuICAgIGNhcmRTdHVkaW8uc2V0SXNGcm9udEJhY2tPbmx5KGZvcm1EYXRhLmlzRnJvbnRCYWNrT25seSk7XG4gIH0sIFtjYXJkRm9ybS5mb3JtRGF0YSwgY2FyZEZvcm0uaXNJbml0aWFsTG9hZENvbXBsZXRlXSk7XG5cbiAgLy8gQXV0by1jb21wbGV0ZSBzdGVwIDEgb25jZSB1c2VyIG1ha2VzIHNlbGVjdGlvbnNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2FyZEZvcm0udmFsaWRhdGVTdGVwKDEpICYmICF3aXphcmRTdGF0ZS5jb21wbGV0ZWRTdGVwcy5pbmNsdWRlcygxKSkge1xuICAgICAgd2l6YXJkU3RhdGUubWFya1N0ZXBDb21wbGV0ZWQoMSk7XG4gICAgfVxuICB9LCBbY2FyZEZvcm0uZm9ybURhdGEuc2VsZWN0ZWRUeXBlLCBjYXJkRm9ybS5mb3JtRGF0YS5zZWxlY3RlZFRvbmUsIGNhcmRGb3JtLmZvcm1EYXRhLmN1c3RvbUNhcmRUeXBlLCB3aXphcmRTdGF0ZV0pO1xuXG4gIC8vIEF1dG8tY29tcGxldGUgc3RlcCA0IG9uY2UgZW1haWwgaXMgdmFsaWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2FyZEZvcm0udmFsaWRhdGVTdGVwKDQpICYmICF3aXphcmRTdGF0ZS5jb21wbGV0ZWRTdGVwcy5pbmNsdWRlcyg0KSkge1xuICAgICAgd2l6YXJkU3RhdGUubWFya1N0ZXBDb21wbGV0ZWQoNCk7XG4gICAgfVxuICB9LCBbY2FyZEZvcm0uZm9ybURhdGEudXNlckVtYWlsLCB3aXphcmRTdGF0ZV0pO1xuXG4gIC8vIEF1dG8tYWR2YW5jZSB0byBTdGVwIDYgd2hlbiBmaW5hbCBjYXJkIGdlbmVyYXRpb24gc3RhcnRzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNhcmRTdHVkaW8uaXNHZW5lcmF0aW5nRmluYWxDYXJkICYmIHdpemFyZFN0YXRlLmN1cnJlbnRTdGVwIDwgNikge1xuICAgICAgY29uc29sZS5sb2coJ/CfmoAgQXV0by1hZHZhbmNpbmcgdG8gU3RlcCA2OiBGaW5hbCBHZW5lcmF0aW9uJyk7XG4gICAgICBpZiAoIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKDUpKSB7XG4gICAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDUpO1xuICAgICAgfVxuICAgICAgd2l6YXJkU3RhdGUudXBkYXRlQ3VycmVudFN0ZXAoNik7XG4gICAgfVxuICB9LCBbY2FyZFN0dWRpby5pc0dlbmVyYXRpbmdGaW5hbENhcmQsIHdpemFyZFN0YXRlXSk7XG5cbiAgLy8gU3luYyByZWZlcmVuY2UgaW1hZ2VzIGZyb20gY2FyZFN0dWRpbyB0byBmb3JtIHdoZW4gdGhleSBjaGFuZ2VcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZSkgcmV0dXJuO1xuICAgIFxuICAgIC8vIFN5bmMgaWYgY2FyZFN0dWRpbyBoYXMgaW1hZ2VzIGJ1dCBmb3JtIGRvZXNuJ3QsIG9yIGlmIHBob3RvUmVmZXJlbmNlcyBjaGFuZ2VkXG4gICAgY29uc3Qgc2hvdWxkU3luYyA9IChcbiAgICAgIChjYXJkU3R1ZGlvLnJlZmVyZW5jZUltYWdlVXJscy5sZW5ndGggPiAwICYmIFxuICAgICAgIGNhcmRGb3JtLmZvcm1EYXRhLnJlZmVyZW5jZUltYWdlVXJscy5sZW5ndGggIT09IGNhcmRTdHVkaW8ucmVmZXJlbmNlSW1hZ2VVcmxzLmxlbmd0aCkgfHxcbiAgICAgIChjYXJkU3R1ZGlvLnBob3RvUmVmZXJlbmNlcyAmJiBjYXJkU3R1ZGlvLnBob3RvUmVmZXJlbmNlcyAhPT0gY2FyZEZvcm0uZm9ybURhdGEucGhvdG9SZWZlcmVuY2VzKVxuICAgICk7XG4gICAgXG4gICAgaWYgKHNob3VsZFN5bmMpIHtcbiAgICAgIGNhcmRGb3JtLnVwZGF0ZUZvcm1EYXRhKHtcbiAgICAgICAgcmVmZXJlbmNlSW1hZ2VzOiBjYXJkU3R1ZGlvLnJlZmVyZW5jZUltYWdlcyxcbiAgICAgICAgcmVmZXJlbmNlSW1hZ2VVcmxzOiBjYXJkU3R1ZGlvLnJlZmVyZW5jZUltYWdlVXJscyxcbiAgICAgICAgcGhvdG9SZWZlcmVuY2VzOiBjYXJkU3R1ZGlvLnBob3RvUmVmZXJlbmNlc1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbY2FyZFN0dWRpby5yZWZlcmVuY2VJbWFnZVVybHMsIGNhcmRTdHVkaW8ucmVmZXJlbmNlSW1hZ2VzLCBjYXJkU3R1ZGlvLnBob3RvUmVmZXJlbmNlcywgY2FyZEZvcm0uaXNJbml0aWFsTG9hZENvbXBsZXRlXSk7XG5cbiAgcmV0dXJuIG51bGw7XG59Il0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVN0YXRlIiwiQ2FyZFdpemFyZEVmZmVjdHMiLCJjYXJkU3R1ZGlvIiwiY2FyZEZvcm0iLCJjYXJkSGlzdG9yeSIsIndpemFyZFN0YXRlIiwidXBkYXRlV2l6YXJkU3RhdGUiLCJpc1Jlc3VtaW5nRHJhZnQiLCJpc1Jlc3RvcmluZ0pvYnMiLCJjdXJyZW50RHJhZnRTZXNzaW9uSWQiLCJzZXRDdXJyZW50RHJhZnRTZXNzaW9uSWQiLCJsYXN0U2F2ZWREcmFmdENvdW50Iiwic2V0TGFzdFNhdmVkRHJhZnRDb3VudCIsInJlc3RvcmVQZW5kaW5nSm9icyIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50U2Vzc2lvbiIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJkcmFmdENhcmRzIiwibGVuZ3RoIiwiZHJhZnRBZ2UiLCJEYXRlIiwibm93Iiwic2F2ZWRBdCIsImdldFRpbWUiLCJ0d29Ib3VycyIsInNldERyYWZ0Q2FyZHMiLCJzZXRJc0RyYWZ0TW9kZSIsImZvcm1EYXRhIiwidXBkYXRlRm9ybURhdGEiLCJpZCIsInJlbW92ZUl0ZW0iLCJyZW1vdmVEcmFmdFNlc3Npb24iLCJjaGVja1BlbmRpbmdKb2JzIiwiaXNHZW5lcmF0aW5nIiwiZ2VuZXJhdGlvblByb2dyZXNzIiwiaXNHZW5lcmF0aW5nRmluYWxDYXJkIiwiaSIsImNvbXBsZXRlZFN0ZXBzIiwiaW5jbHVkZXMiLCJtYXJrU3RlcENvbXBsZXRlZCIsInVwZGF0ZUN1cnJlbnRTdGVwIiwiaXNEcmFmdE1vZGUiLCJjdXJyZW50U3RlcCIsImlzSW5pdGlhbExvYWRDb21wbGV0ZSIsInNlbGVjdGVkVHlwZSIsInNlbGVjdGVkVG9uZSIsImhhc0NhcmRzIiwic2hvdWxkU2F2ZSIsInZhbGlkRHJhZnRzIiwiZmlsdGVyIiwiY2FyZCIsInNlbGVjdGVkRHJhZnRJbmRleCIsInNlc3Npb25JZCIsInNhdmVEcmFmdFNlc3Npb24iLCJ1bmRlZmluZWQiLCJnZW5lcmF0ZWRDYXJkIiwiaXNDYXJkQ29tcGxldGVkIiwiYWRkQ29tcGxldGVkQ2FyZCIsInNldFNlbGVjdGVkVHlwZSIsInNldEN1c3RvbUNhcmRUeXBlIiwiY3VzdG9tQ2FyZFR5cGUiLCJzZXRTZWxlY3RlZFRvbmUiLCJzZXRUb0ZpZWxkIiwidG9GaWVsZCIsInNldEZyb21GaWVsZCIsImZyb21GaWVsZCIsInNldFJlbGF0aW9uc2hpcEZpZWxkIiwicmVsYXRpb25zaGlwRmllbGQiLCJzZXRQcm9tcHQiLCJwcm9tcHQiLCJzZXRGaW5hbENhcmRNZXNzYWdlIiwiZmluYWxDYXJkTWVzc2FnZSIsInNldElzSGFuZHdyaXR0ZW5NZXNzYWdlIiwiaXNIYW5kd3JpdHRlbk1lc3NhZ2UiLCJzZXRTZWxlY3RlZEFydGlzdGljU3R5bGUiLCJzZWxlY3RlZEFydGlzdGljU3R5bGUiLCJzZXRDdXN0b21TdHlsZURlc2NyaXB0aW9uIiwiY3VzdG9tU3R5bGVEZXNjcmlwdGlvbiIsInNldFVzZXJFbWFpbCIsInVzZXJFbWFpbCIsInNldFNlbGVjdGVkSW1hZ2VNb2RlbCIsInNlbGVjdGVkSW1hZ2VNb2RlbCIsInNldFNlbGVjdGVkRHJhZnRNb2RlbCIsInNlbGVjdGVkRHJhZnRNb2RlbCIsInNldFNlbGVjdGVkUGFwZXJTaXplIiwic2VsZWN0ZWRQYXBlclNpemUiLCJzZXROdW1iZXJPZkNhcmRzIiwibnVtYmVyT2ZDYXJkcyIsInNldElzRnJvbnRCYWNrT25seSIsImlzRnJvbnRCYWNrT25seSIsInZhbGlkYXRlU3RlcCIsInNob3VsZFN5bmMiLCJyZWZlcmVuY2VJbWFnZVVybHMiLCJwaG90b1JlZmVyZW5jZXMiLCJyZWZlcmVuY2VJbWFnZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/wizard/CardWizardEffects.tsx\n"));

/***/ })

});