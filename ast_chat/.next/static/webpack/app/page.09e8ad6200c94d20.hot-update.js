"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/wizard/CardWizardEffects.tsx":
/*!*************************************************!*\
  !*** ./components/wizard/CardWizardEffects.tsx ***!
  \*************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CardWizardEffects: function() { return /* binding */ CardWizardEffects; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ CardWizardEffects auto */ var _s = $RefreshSig$();\n\nfunction CardWizardEffects(param) {\n    let { cardStudio, cardForm, cardHistory, wizardState, updateWizardState, isResumingDraft, isRestoringJobs } = param;\n    _s();\n    // Check for pending jobs on component mount but don't auto-navigate\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const restorePendingJobs = async ()=>{\n            console.log(\"\\uD83D\\uDD04 CardWizardEffects: Starting checkPendingJobs...\");\n            await cardStudio.checkPendingJobs();\n            // Only auto-navigate if there's an active generation in progress\n            // Don't navigate for completed drafts - let user choose\n            if (cardStudio.isGenerating && cardStudio.generationProgress) {\n                if (cardStudio.isGeneratingFinalCard) {\n                    console.log(\"\\uD83D\\uDD04 Restoring to Step 6 due to ongoing final generation\");\n                    // Mark all previous steps as completed\n                    for(let i = 1; i <= 5; i++){\n                        if (!wizardState.completedSteps.includes(i)) wizardState.markStepCompleted(i);\n                    }\n                    wizardState.updateCurrentStep(6);\n                } else if (cardStudio.isDraftMode && cardStudio.isGenerating) {\n                    console.log(\"\\uD83D\\uDD04 Restoring to Step 5 due to ongoing draft generation\");\n                    // Mark previous steps as completed\n                    if (!wizardState.completedSteps.includes(1)) wizardState.markStepCompleted(1);\n                    if (!wizardState.completedSteps.includes(2)) wizardState.markStepCompleted(2);\n                    if (!wizardState.completedSteps.includes(3)) wizardState.markStepCompleted(3);\n                    if (!wizardState.completedSteps.includes(4)) wizardState.markStepCompleted(4);\n                    wizardState.updateCurrentStep(5);\n                }\n            } else {\n                // No active generation - reset wizard to step 1 if we're on a later step\n                // This handles the case where user left off on step 5 but isn't actively generating\n                if (wizardState.currentStep > 1 && !cardStudio.isGenerating) {\n                    console.log(\"\\uD83D\\uDD04 No active generation, resetting to Step 1\");\n                    wizardState.updateCurrentStep(1);\n                }\n            }\n        // If we have completed drafts but no active generation, stay on Step 1\n        // User can choose to resume via the UI\n        };\n        restorePendingJobs();\n    }, []);\n    // Only mark step 1 as completed if user has made selections, but don't auto-advance\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!wizardState.isInitialLoadComplete || !cardForm.isInitialLoadComplete) return;\n        // Only mark step as completed, don't navigate\n        if (wizardState.currentStep === 1 && !wizardState.completedSteps.includes(1)) {\n            const formData = cardForm.formData;\n            // Mark step 1 as completed if user has made selections\n            if (formData.selectedType && formData.selectedTone) {\n                console.log(\"âœ… Marking step 1 as completed based on saved data\");\n                wizardState.markStepCompleted(1);\n            }\n        }\n    }, [\n        wizardState.isInitialLoadComplete,\n        cardForm.isInitialLoadComplete\n    ]);\n    // Only navigate to Step 5 when NEW draft cards are being generated (not restored)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Only navigate if we're actively generating NEW drafts, not restoring old ones\n        if (cardStudio.draftCards.length > 0 && wizardState.currentStep < 5 && cardStudio.isGenerating && !isRestoringJobs) {\n            console.log(\"\\uD83D\\uDCCB New draft cards being generated, navigating to Step 5\");\n            // Mark previous steps as completed\n            for(let i = 1; i <= 4; i++){\n                if (!wizardState.completedSteps.includes(i)) {\n                    wizardState.markStepCompleted(i);\n                }\n            }\n            wizardState.updateCurrentStep(5);\n        }\n    }, [\n        cardStudio.draftCards.length,\n        cardStudio.isGenerating,\n        isRestoringJobs\n    ]);\n    // Auto-save drafts when user creates draft cards\n    // Track the current session ID to update the same session\n    const [currentDraftSessionId, setCurrentDraftSessionId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [lastSavedDraftCount, setLastSavedDraftCount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Only save if we have draft cards and not resuming or restoring\n        if (cardStudio.draftCards.length > 0) {\n            console.log(\"\\uD83D\\uDD0D Auto-save check:\", {\n                hasCards: cardStudio.draftCards.length > 0,\n                isInitialLoadComplete: cardForm.isInitialLoadComplete,\n                isResumingDraft,\n                isRestoringJobs,\n                shouldSave: cardForm.isInitialLoadComplete && !isResumingDraft && !isRestoringJobs\n            });\n        }\n        if (cardStudio.draftCards.length > 0 && cardForm.isInitialLoadComplete && !isResumingDraft && !isRestoringJobs) {\n            // Count non-null draft cards\n            const validDrafts = cardStudio.draftCards.filter((card)=>card !== null).length;\n            // Only save when:\n            // 1. All 5 drafts are complete (validDrafts === 5)\n            // 2. This is the first draft and we haven't saved yet (validDrafts === 1 && !currentDraftSessionId)\n            // 3. User selected a draft (selectedDraftIndex >= 0)\n            const shouldSave = validDrafts === 5 && lastSavedDraftCount < 5 || // All drafts complete\n            validDrafts === 1 && !currentDraftSessionId || // First draft\n            cardStudio.selectedDraftIndex >= 0 && validDrafts > lastSavedDraftCount // User selected\n            ;\n            if (shouldSave && validDrafts > 0) {\n                // Save or update the session with the same ID\n                const sessionId = cardHistory.saveDraftSession(cardForm.formData, cardStudio.draftCards, cardStudio.selectedDraftIndex, currentDraftSessionId || undefined // Use existing session ID if available\n                );\n                // Store the session ID for future updates\n                if (!currentDraftSessionId) {\n                    setCurrentDraftSessionId(sessionId);\n                }\n                // Update the last saved count\n                setLastSavedDraftCount(validDrafts);\n                console.log(\"\\uD83D\\uDCBE Draft session saved: \".concat(validDrafts, \"/5 drafts complete\"));\n            }\n        }\n    }, [\n        cardStudio.draftCards,\n        cardStudio.selectedDraftIndex,\n        cardForm.formData,\n        cardForm.isInitialLoadComplete,\n        isResumingDraft,\n        isRestoringJobs,\n        currentDraftSessionId,\n        lastSavedDraftCount\n    ]);\n    // Reset session ID when drafts are cleared\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const validDrafts = cardStudio.draftCards.filter((card)=>card !== null).length;\n        if (validDrafts === 0) {\n            setCurrentDraftSessionId(null);\n            setLastSavedDraftCount(0);\n        }\n    }, [\n        cardStudio.draftCards\n    ]);\n    // Auto-save completed cards and ensure we're on Step 6\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardStudio.generatedCard && cardStudio.isCardCompleted) {\n            cardHistory.addCompletedCard(cardStudio.generatedCard);\n            // Ensure we're on Step 6 to see the completed card\n            if (wizardState.currentStep !== 6) {\n                console.log(\"\\uD83D\\uDCCD Card completed but not on Step 6, navigating there now...\");\n                wizardState.updateCurrentStep(6);\n            }\n        }\n    }, [\n        cardStudio.generatedCard,\n        cardStudio.isCardCompleted,\n        wizardState.currentStep\n    ]);\n    // Sync form data with cardStudio when form data changes\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!cardForm.isInitialLoadComplete) return;\n        const { formData } = cardForm;\n        // Update cardStudio with form data\n        cardStudio.setSelectedType(formData.selectedType);\n        cardStudio.setCustomCardType(formData.customCardType);\n        cardStudio.setSelectedTone(formData.selectedTone);\n        cardStudio.setToField(formData.toField);\n        cardStudio.setFromField(formData.fromField);\n        cardStudio.setRelationshipField(formData.relationshipField);\n        cardStudio.setPrompt(formData.prompt);\n        cardStudio.setFinalCardMessage(formData.finalCardMessage);\n        cardStudio.setIsHandwrittenMessage(formData.isHandwrittenMessage);\n        cardStudio.setSelectedArtisticStyle(formData.selectedArtisticStyle);\n        cardStudio.setCustomStyleDescription(formData.customStyleDescription);\n        // Skip syncing reference images from form to cardStudio\n        // This should only flow from cardStudio -> form after uploads\n        // cardStudio.setReferenceImages(formData.referenceImages);\n        // cardStudio.setReferenceImageUrls(formData.referenceImageUrls);\n        cardStudio.setImageTransformation(formData.imageTransformation);\n        cardStudio.setUserEmail(formData.userEmail);\n        cardStudio.setSelectedImageModel(formData.selectedImageModel);\n        cardStudio.setSelectedDraftModel(formData.selectedDraftModel);\n        cardStudio.setSelectedPaperSize(formData.selectedPaperSize);\n        cardStudio.setNumberOfCards(formData.numberOfCards);\n        cardStudio.setIsFrontBackOnly(formData.isFrontBackOnly);\n    }, [\n        cardForm.formData,\n        cardForm.isInitialLoadComplete\n    ]);\n    // Auto-complete step 1 once user makes selections\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardForm.validateStep(1) && !wizardState.completedSteps.includes(1)) {\n            wizardState.markStepCompleted(1);\n        }\n    }, [\n        cardForm.formData.selectedType,\n        cardForm.formData.selectedTone,\n        cardForm.formData.customCardType,\n        wizardState\n    ]);\n    // Auto-complete step 4 once email is valid\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardForm.validateStep(4) && !wizardState.completedSteps.includes(4)) {\n            wizardState.markStepCompleted(4);\n        }\n    }, [\n        cardForm.formData.userEmail,\n        wizardState\n    ]);\n    // Auto-advance to Step 6 when final card generation starts\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardStudio.isGeneratingFinalCard && wizardState.currentStep < 6) {\n            console.log(\"\\uD83D\\uDE80 Auto-advancing to Step 6: Final Generation\");\n            if (!wizardState.completedSteps.includes(5)) {\n                wizardState.markStepCompleted(5);\n            }\n            wizardState.updateCurrentStep(6);\n        }\n    }, [\n        cardStudio.isGeneratingFinalCard,\n        wizardState\n    ]);\n    // Sync reference images from cardStudio to form when they change\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!cardForm.isInitialLoadComplete) return;\n        // Sync if cardStudio has images but form doesn't, or if photoReferences changed\n        const shouldSync = cardStudio.referenceImageUrls.length > 0 && cardForm.formData.referenceImageUrls.length !== cardStudio.referenceImageUrls.length || cardStudio.photoReferences && cardStudio.photoReferences !== cardForm.formData.photoReferences;\n        if (shouldSync) {\n            cardForm.updateFormData({\n                referenceImages: cardStudio.referenceImages,\n                referenceImageUrls: cardStudio.referenceImageUrls,\n                photoReferences: cardStudio.photoReferences\n            });\n        }\n    }, [\n        cardStudio.referenceImageUrls,\n        cardStudio.referenceImages,\n        cardStudio.photoReferences,\n        cardForm.isInitialLoadComplete\n    ]);\n    return null;\n}\n_s(CardWizardEffects, \"03JOOMzcta+/cU75gy+c1oeoKMs=\");\n_c = CardWizardEffects;\nvar _c;\n$RefreshReg$(_c, \"CardWizardEffects\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvd2l6YXJkL0NhcmRXaXphcmRFZmZlY3RzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRTRDO0FBY3JDLFNBQVNFLGtCQUFrQixLQVFUO1FBUlMsRUFDaENDLFVBQVUsRUFDVkMsUUFBUSxFQUNSQyxXQUFXLEVBQ1hDLFdBQVcsRUFDWEMsaUJBQWlCLEVBQ2pCQyxlQUFlLEVBQ2ZDLGVBQWUsRUFDUSxHQVJTOztJQVNoQyxvRUFBb0U7SUFDcEVULGdEQUFTQSxDQUFDO1FBQ1IsTUFBTVUscUJBQXFCO1lBQ3pCQyxRQUFRQyxHQUFHLENBQUM7WUFDWixNQUFNVCxXQUFXVSxnQkFBZ0I7WUFFakMsaUVBQWlFO1lBQ2pFLHdEQUF3RDtZQUN4RCxJQUFJVixXQUFXVyxZQUFZLElBQUlYLFdBQVdZLGtCQUFrQixFQUFFO2dCQUM1RCxJQUFJWixXQUFXYSxxQkFBcUIsRUFBRTtvQkFDcENMLFFBQVFDLEdBQUcsQ0FBQztvQkFDWix1Q0FBdUM7b0JBQ3ZDLElBQUssSUFBSUssSUFBSSxHQUFHQSxLQUFLLEdBQUdBLElBQUs7d0JBQzNCLElBQUksQ0FBQ1gsWUFBWVksY0FBYyxDQUFDQyxRQUFRLENBQUNGLElBQUlYLFlBQVljLGlCQUFpQixDQUFDSDtvQkFDN0U7b0JBQ0FYLFlBQVllLGlCQUFpQixDQUFDO2dCQUNoQyxPQUFPLElBQUlsQixXQUFXbUIsV0FBVyxJQUFJbkIsV0FBV1csWUFBWSxFQUFFO29CQUM1REgsUUFBUUMsR0FBRyxDQUFDO29CQUNaLG1DQUFtQztvQkFDbkMsSUFBSSxDQUFDTixZQUFZWSxjQUFjLENBQUNDLFFBQVEsQ0FBQyxJQUFJYixZQUFZYyxpQkFBaUIsQ0FBQztvQkFDM0UsSUFBSSxDQUFDZCxZQUFZWSxjQUFjLENBQUNDLFFBQVEsQ0FBQyxJQUFJYixZQUFZYyxpQkFBaUIsQ0FBQztvQkFDM0UsSUFBSSxDQUFDZCxZQUFZWSxjQUFjLENBQUNDLFFBQVEsQ0FBQyxJQUFJYixZQUFZ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QUFpRTtJQUNqRU4sZ0RBQVNBLENBQUM7UUFDUixJQUFJLENBQUNJLFNBQVNvQixxQkFBcUIsRUFBRTtRQUVyQyxnRkFBZ0Y7UUFDaEYsTUFBTXlELGFBQ0osV0FBWUMsa0JBQWtCLENBQUNyRCxNQUFNLEdBQUcsS0FDdkN6QixTQUFTcUIsUUFBUSxDQUFDeUQsa0JBQWtCLENBQUNyRCxNQUFNLEtBQUsxQixXQUFXK0Usa0JBQWtCLENBQUNyRCxNQUFNLElBQ3BGMUIsV0FBV2dGLGVBQWUsSUFBSWhGLFdBQVdnRixlQUFlLEtBQUsvRSxTQUFTcUIsUUFBUSxDQUFDMEQsZUFBZTtRQUdqRyxJQUFJRixZQUFZO1lBQ2Q3RSxTQUFTZ0YsY0FBYyxDQUFDO2dCQUN0QkMsaUJBQWlCbEYsV0FBV2tGLGVBQWU7Z0JBQzNDSCxvQkFBb0IvRSxXQUFXK0Usa0JBQWtCO2dCQUNqREMsaUJBQWlCaEYsV0FBV2dGLGVBQWU7WUFDN0M7UUFDRjtJQUNGLEdBQUc7UUFBQ2hGLFdBQVcrRSxrQkFBa0I7UUFBRS9FLFdBQVdrRixlQUFlO1FBQUVsRixXQUFXZ0YsZUFBZTtRQUFFL0UsU0FBU29CLHFCQUFxQjtLQUFDO0lBRTFILE9BQU87QUFDVDtHQTNPZ0J0QjtLQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL3dpemFyZC9DYXJkV2l6YXJkRWZmZWN0cy50c3g/ZGE0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQ2FyZEZvcm1EYXRhIH0gZnJvbSBcIkAvaG9va3MvdXNlQ2FyZEZvcm1cIjtcbmltcG9ydCB7IEdlbmVyYXRlZENhcmQgfSBmcm9tIFwiQC9ob29rcy9jYXJkU3R1ZGlvL2NvbnN0YW50c1wiO1xuXG5pbnRlcmZhY2UgQ2FyZFdpemFyZEVmZmVjdHNQcm9wcyB7XG4gIGNhcmRTdHVkaW86IGFueTtcbiAgY2FyZEZvcm06IGFueTtcbiAgY2FyZEhpc3Rvcnk6IGFueTtcbiAgd2l6YXJkU3RhdGU6IGFueTtcbiAgdXBkYXRlV2l6YXJkU3RhdGU6ICh1cGRhdGVzOiBhbnkpID0+IHZvaWQ7XG4gIGlzUmVzdW1pbmdEcmFmdDogYm9vbGVhbjtcbiAgaXNSZXN0b3JpbmdKb2JzOiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ2FyZFdpemFyZEVmZmVjdHMoe1xuICBjYXJkU3R1ZGlvLFxuICBjYXJkRm9ybSxcbiAgY2FyZEhpc3RvcnksXG4gIHdpemFyZFN0YXRlLFxuICB1cGRhdGVXaXphcmRTdGF0ZSxcbiAgaXNSZXN1bWluZ0RyYWZ0LFxuICBpc1Jlc3RvcmluZ0pvYnNcbn06IENhcmRXaXphcmRFZmZlY3RzUHJvcHMpIHtcbiAgLy8gQ2hlY2sgZm9yIHBlbmRpbmcgam9icyBvbiBjb21wb25lbnQgbW91bnQgYnV0IGRvbid0IGF1dG8tbmF2aWdhdGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCByZXN0b3JlUGVuZGluZ0pvYnMgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBDYXJkV2l6YXJkRWZmZWN0czogU3RhcnRpbmcgY2hlY2tQZW5kaW5nSm9icy4uLicpO1xuICAgICAgYXdhaXQgY2FyZFN0dWRpby5jaGVja1BlbmRpbmdKb2JzKCk7XG4gICAgICBcbiAgICAgIC8vIE9ubHkgYXV0by1uYXZpZ2F0ZSBpZiB0aGVyZSdzIGFuIGFjdGl2ZSBnZW5lcmF0aW9uIGluIHByb2dyZXNzXG4gICAgICAvLyBEb24ndCBuYXZpZ2F0ZSBmb3IgY29tcGxldGVkIGRyYWZ0cyAtIGxldCB1c2VyIGNob29zZVxuICAgICAgaWYgKGNhcmRTdHVkaW8uaXNHZW5lcmF0aW5nICYmIGNhcmRTdHVkaW8uZ2VuZXJhdGlvblByb2dyZXNzKSB7XG4gICAgICAgIGlmIChjYXJkU3R1ZGlvLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFJlc3RvcmluZyB0byBTdGVwIDYgZHVlIHRvIG9uZ29pbmcgZmluYWwgZ2VuZXJhdGlvbicpO1xuICAgICAgICAgIC8vIE1hcmsgYWxsIHByZXZpb3VzIHN0ZXBzIGFzIGNvbXBsZXRlZFxuICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDU7IGkrKykge1xuICAgICAgICAgICAgaWYgKCF3aXphcmRTdGF0ZS5jb21wbGV0ZWRTdGVwcy5pbmNsdWRlcyhpKSkgd2l6YXJkU3RhdGUubWFya1N0ZXBDb21wbGV0ZWQoaSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHdpemFyZFN0YXRlLnVwZGF0ZUN1cnJlbnRTdGVwKDYpO1xuICAgICAgICB9IGVsc2UgaWYgKGNhcmRTdHVkaW8uaXNEcmFmdE1vZGUgJiYgY2FyZFN0dWRpby5pc0dlbmVyYXRpbmcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBSZXN0b3JpbmcgdG8gU3RlcCA1IGR1ZSB0byBvbmdvaW5nIGRyYWZ0IGdlbmVyYXRpb24nKTtcbiAgICAgICAgICAvLyBNYXJrIHByZXZpb3VzIHN0ZXBzIGFzIGNvbXBsZXRlZFxuICAgICAgICAgIGlmICghd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoMSkpIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDEpO1xuICAgICAgICAgIGlmICghd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoMikpIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDIpO1xuICAgICAgICAgIGlmICghd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoMykpIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDMpO1xuICAgICAgICAgIGlmICghd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoNCkpIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDQpO1xuICAgICAgICAgIHdpemFyZFN0YXRlLnVwZGF0ZUN1cnJlbnRTdGVwKDUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBObyBhY3RpdmUgZ2VuZXJhdGlvbiAtIHJlc2V0IHdpemFyZCB0byBzdGVwIDEgaWYgd2UncmUgb24gYSBsYXRlciBzdGVwXG4gICAgICAgIC8vIFRoaXMgaGFuZGxlcyB0aGUgY2FzZSB3aGVyZSB1c2VyIGxlZnQgb2ZmIG9uIHN0ZXAgNSBidXQgaXNuJ3QgYWN0aXZlbHkgZ2VuZXJhdGluZ1xuICAgICAgICBpZiAod2l6YXJkU3RhdGUuY3VycmVudFN0ZXAgPiAxICYmICFjYXJkU3R1ZGlvLmlzR2VuZXJhdGluZykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIE5vIGFjdGl2ZSBnZW5lcmF0aW9uLCByZXNldHRpbmcgdG8gU3RlcCAxJyk7XG4gICAgICAgICAgd2l6YXJkU3RhdGUudXBkYXRlQ3VycmVudFN0ZXAoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIElmIHdlIGhhdmUgY29tcGxldGVkIGRyYWZ0cyBidXQgbm8gYWN0aXZlIGdlbmVyYXRpb24sIHN0YXkgb24gU3RlcCAxXG4gICAgICAvLyBVc2VyIGNhbiBjaG9vc2UgdG8gcmVzdW1lIHZpYSB0aGUgVUlcbiAgICB9O1xuICAgIFxuICAgIHJlc3RvcmVQZW5kaW5nSm9icygpO1xuICB9LCBbXSk7XG5cbiAgLy8gT25seSBtYXJrIHN0ZXAgMSBhcyBjb21wbGV0ZWQgaWYgdXNlciBoYXMgbWFkZSBzZWxlY3Rpb25zLCBidXQgZG9uJ3QgYXV0by1hZHZhbmNlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF3aXphcmRTdGF0ZS5pc0luaXRpYWxMb2FkQ29tcGxldGUgfHwgIWNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZSkgcmV0dXJuO1xuICAgIFxuICAgIC8vIE9ubHkgbWFyayBzdGVwIGFzIGNvbXBsZXRlZCwgZG9uJ3QgbmF2aWdhdGVcbiAgICBpZiAod2l6YXJkU3RhdGUuY3VycmVudFN0ZXAgPT09IDEgJiYgIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKDEpKSB7XG4gICAgICBjb25zdCBmb3JtRGF0YSA9IGNhcmRGb3JtLmZvcm1EYXRhO1xuICAgICAgXG4gICAgICAvLyBNYXJrIHN0ZXAgMSBhcyBjb21wbGV0ZWQgaWYgdXNlciBoYXMgbWFkZSBzZWxlY3Rpb25zXG4gICAgICBpZiAoZm9ybURhdGEuc2VsZWN0ZWRUeXBlICYmIGZvcm1EYXRhLnNlbGVjdGVkVG9uZSkge1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIE1hcmtpbmcgc3RlcCAxIGFzIGNvbXBsZXRlZCBiYXNlZCBvbiBzYXZlZCBkYXRhJyk7XG4gICAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDEpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW3dpemFyZFN0YXRlLmlzSW5pdGlhbExvYWRDb21wbGV0ZSwgY2FyZEZvcm0uaXNJbml0aWFsTG9hZENvbXBsZXRlXSk7XG5cbiAgLy8gT25seSBuYXZpZ2F0ZSB0byBTdGVwIDUgd2hlbiBORVcgZHJhZnQgY2FyZHMgYXJlIGJlaW5nIGdlbmVyYXRlZCAobm90IHJlc3RvcmVkKVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgbmF2aWdhdGUgaWYgd2UncmUgYWN0aXZlbHkgZ2VuZXJhdGluZyBORVcgZHJhZnRzLCBub3QgcmVzdG9yaW5nIG9sZCBvbmVzXG4gICAgaWYgKGNhcmRTdHVkaW8uZHJhZnRDYXJkcy5sZW5ndGggPiAwICYmIFxuICAgICAgICB3aXphcmRTdGF0ZS5jdXJyZW50U3RlcCA8IDUgJiYgXG4gICAgICAgIGNhcmRTdHVkaW8uaXNHZW5lcmF0aW5nICYmIFxuICAgICAgICAhaXNSZXN0b3JpbmdKb2JzKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+TiyBOZXcgZHJhZnQgY2FyZHMgYmVpbmcgZ2VuZXJhdGVkLCBuYXZpZ2F0aW5nIHRvIFN0ZXAgNScpO1xuICAgICAgLy8gTWFyayBwcmV2aW91cyBzdGVwcyBhcyBjb21wbGV0ZWRcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDQ7IGkrKykge1xuICAgICAgICBpZiAoIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKGkpKSB7XG4gICAgICAgICAgd2l6YXJkU3RhdGUubWFya1N0ZXBDb21wbGV0ZWQoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdpemFyZFN0YXRlLnVwZGF0ZUN1cnJlbnRTdGVwKDUpO1xuICAgIH1cbiAgfSwgW2NhcmRTdHVkaW8uZHJhZnRDYXJkcy5sZW5ndGgsIGNhcmRTdHVkaW8uaXNHZW5lcmF0aW5nLCBpc1Jlc3RvcmluZ0pvYnNdKTtcblxuICAvLyBBdXRvLXNhdmUgZHJhZnRzIHdoZW4gdXNlciBjcmVhdGVzIGRyYWZ0IGNhcmRzXG4gIC8vIFRyYWNrIHRoZSBjdXJyZW50IHNlc3Npb24gSUQgdG8gdXBkYXRlIHRoZSBzYW1lIHNlc3Npb25cbiAgY29uc3QgW2N1cnJlbnREcmFmdFNlc3Npb25JZCwgc2V0Q3VycmVudERyYWZ0U2Vzc2lvbklkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbbGFzdFNhdmVkRHJhZnRDb3VudCwgc2V0TGFzdFNhdmVkRHJhZnRDb3VudF0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuICBcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBPbmx5IHNhdmUgaWYgd2UgaGF2ZSBkcmFmdCBjYXJkcyBhbmQgbm90IHJlc3VtaW5nIG9yIHJlc3RvcmluZ1xuICAgIGlmIChjYXJkU3R1ZGlvLmRyYWZ0Q2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gQXV0by1zYXZlIGNoZWNrOicsIHtcbiAgICAgICAgaGFzQ2FyZHM6IGNhcmRTdHVkaW8uZHJhZnRDYXJkcy5sZW5ndGggPiAwLFxuICAgICAgICBpc0luaXRpYWxMb2FkQ29tcGxldGU6IGNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZSxcbiAgICAgICAgaXNSZXN1bWluZ0RyYWZ0LFxuICAgICAgICBpc1Jlc3RvcmluZ0pvYnMsXG4gICAgICAgIHNob3VsZFNhdmU6IGNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZSAmJiAhaXNSZXN1bWluZ0RyYWZ0ICYmICFpc1Jlc3RvcmluZ0pvYnNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY2FyZFN0dWRpby5kcmFmdENhcmRzLmxlbmd0aCA+IDAgJiYgY2FyZEZvcm0uaXNJbml0aWFsTG9hZENvbXBsZXRlICYmICFpc1Jlc3VtaW5nRHJhZnQgJiYgIWlzUmVzdG9yaW5nSm9icykge1xuICAgICAgLy8gQ291bnQgbm9uLW51bGwgZHJhZnQgY2FyZHNcbiAgICAgIGNvbnN0IHZhbGlkRHJhZnRzID0gY2FyZFN0dWRpby5kcmFmdENhcmRzLmZpbHRlcihjYXJkID0+IGNhcmQgIT09IG51bGwpLmxlbmd0aDtcbiAgICAgIFxuICAgICAgLy8gT25seSBzYXZlIHdoZW46XG4gICAgICAvLyAxLiBBbGwgNSBkcmFmdHMgYXJlIGNvbXBsZXRlICh2YWxpZERyYWZ0cyA9PT0gNSlcbiAgICAgIC8vIDIuIFRoaXMgaXMgdGhlIGZpcnN0IGRyYWZ0IGFuZCB3ZSBoYXZlbid0IHNhdmVkIHlldCAodmFsaWREcmFmdHMgPT09IDEgJiYgIWN1cnJlbnREcmFmdFNlc3Npb25JZClcbiAgICAgIC8vIDMuIFVzZXIgc2VsZWN0ZWQgYSBkcmFmdCAoc2VsZWN0ZWREcmFmdEluZGV4ID49IDApXG4gICAgICBjb25zdCBzaG91bGRTYXZlID0gKFxuICAgICAgICAodmFsaWREcmFmdHMgPT09IDUgJiYgbGFzdFNhdmVkRHJhZnRDb3VudCA8IDUpIHx8IC8vIEFsbCBkcmFmdHMgY29tcGxldGVcbiAgICAgICAgKHZhbGlkRHJhZnRzID09PSAxICYmICFjdXJyZW50RHJhZnRTZXNzaW9uSWQpIHx8IC8vIEZpcnN0IGRyYWZ0XG4gICAgICAgIChjYXJkU3R1ZGlvLnNlbGVjdGVkRHJhZnRJbmRleCA+PSAwICYmIHZhbGlkRHJhZnRzID4gbGFzdFNhdmVkRHJhZnRDb3VudCkgLy8gVXNlciBzZWxlY3RlZFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKHNob3VsZFNhdmUgJiYgdmFsaWREcmFmdHMgPiAwKSB7XG4gICAgICAgIC8vIFNhdmUgb3IgdXBkYXRlIHRoZSBzZXNzaW9uIHdpdGggdGhlIHNhbWUgSURcbiAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gY2FyZEhpc3Rvcnkuc2F2ZURyYWZ0U2Vzc2lvbihcbiAgICAgICAgICBjYXJkRm9ybS5mb3JtRGF0YSxcbiAgICAgICAgICBjYXJkU3R1ZGlvLmRyYWZ0Q2FyZHMsXG4gICAgICAgICAgY2FyZFN0dWRpby5zZWxlY3RlZERyYWZ0SW5kZXgsXG4gICAgICAgICAgY3VycmVudERyYWZ0U2Vzc2lvbklkIHx8IHVuZGVmaW5lZCAvLyBVc2UgZXhpc3Rpbmcgc2Vzc2lvbiBJRCBpZiBhdmFpbGFibGVcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN0b3JlIHRoZSBzZXNzaW9uIElEIGZvciBmdXR1cmUgdXBkYXRlc1xuICAgICAgICBpZiAoIWN1cnJlbnREcmFmdFNlc3Npb25JZCkge1xuICAgICAgICAgIHNldEN1cnJlbnREcmFmdFNlc3Npb25JZChzZXNzaW9uSWQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgdGhlIGxhc3Qgc2F2ZWQgY291bnRcbiAgICAgICAgc2V0TGFzdFNhdmVkRHJhZnRDb3VudCh2YWxpZERyYWZ0cyk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhg8J+SviBEcmFmdCBzZXNzaW9uIHNhdmVkOiAke3ZhbGlkRHJhZnRzfS81IGRyYWZ0cyBjb21wbGV0ZWApO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2NhcmRTdHVkaW8uZHJhZnRDYXJkcywgY2FyZFN0dWRpby5zZWxlY3RlZERyYWZ0SW5kZXgsIGNhcmRGb3JtLmZvcm1EYXRhLCBjYXJkRm9ybS5pc0luaXRpYWxMb2FkQ29tcGxldGUsIGlzUmVzdW1pbmdEcmFmdCwgaXNSZXN0b3JpbmdKb2JzLCBjdXJyZW50RHJhZnRTZXNzaW9uSWQsIGxhc3RTYXZlZERyYWZ0Q291bnRdKTtcbiAgXG4gIC8vIFJlc2V0IHNlc3Npb24gSUQgd2hlbiBkcmFmdHMgYXJlIGNsZWFyZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB2YWxpZERyYWZ0cyA9IGNhcmRTdHVkaW8uZHJhZnRDYXJkcy5maWx0ZXIoY2FyZCA9PiBjYXJkICE9PSBudWxsKS5sZW5ndGg7XG4gICAgaWYgKHZhbGlkRHJhZnRzID09PSAwKSB7XG4gICAgICBzZXRDdXJyZW50RHJhZnRTZXNzaW9uSWQobnVsbCk7XG4gICAgICBzZXRMYXN0U2F2ZWREcmFmdENvdW50KDApO1xuICAgIH1cbiAgfSwgW2NhcmRTdHVkaW8uZHJhZnRDYXJkc10pO1xuXG4gIC8vIEF1dG8tc2F2ZSBjb21wbGV0ZWQgY2FyZHMgYW5kIGVuc3VyZSB3ZSdyZSBvbiBTdGVwIDZcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2FyZFN0dWRpby5nZW5lcmF0ZWRDYXJkICYmIGNhcmRTdHVkaW8uaXNDYXJkQ29tcGxldGVkKSB7XG4gICAgICBjYXJkSGlzdG9yeS5hZGRDb21wbGV0ZWRDYXJkKGNhcmRTdHVkaW8uZ2VuZXJhdGVkQ2FyZCk7XG4gICAgICBcbiAgICAgIC8vIEVuc3VyZSB3ZSdyZSBvbiBTdGVwIDYgdG8gc2VlIHRoZSBjb21wbGV0ZWQgY2FyZFxuICAgICAgaWYgKHdpemFyZFN0YXRlLmN1cnJlbnRTdGVwICE9PSA2KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5ONIENhcmQgY29tcGxldGVkIGJ1dCBub3Qgb24gU3RlcCA2LCBuYXZpZ2F0aW5nIHRoZXJlIG5vdy4uLicpO1xuICAgICAgICB3aXphcmRTdGF0ZS51cGRhdGVDdXJyZW50U3RlcCg2KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjYXJkU3R1ZGlvLmdlbmVyYXRlZENhcmQsIGNhcmRTdHVkaW8uaXNDYXJkQ29tcGxldGVkLCB3aXphcmRTdGF0ZS5jdXJyZW50U3RlcF0pO1xuXG4gIC8vIFN5bmMgZm9ybSBkYXRhIHdpdGggY2FyZFN0dWRpbyB3aGVuIGZvcm0gZGF0YSBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjYXJkRm9ybS5pc0luaXRpYWxMb2FkQ29tcGxldGUpIHJldHVybjtcblxuICAgIGNvbnN0IHsgZm9ybURhdGEgfSA9IGNhcmRGb3JtO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjYXJkU3R1ZGlvIHdpdGggZm9ybSBkYXRhXG4gICAgY2FyZFN0dWRpby5zZXRTZWxlY3RlZFR5cGUoZm9ybURhdGEuc2VsZWN0ZWRUeXBlKTtcbiAgICBjYXJkU3R1ZGlvLnNldEN1c3RvbUNhcmRUeXBlKGZvcm1EYXRhLmN1c3RvbUNhcmRUeXBlKTtcbiAgICBjYXJkU3R1ZGlvLnNldFNlbGVjdGVkVG9uZShmb3JtRGF0YS5zZWxlY3RlZFRvbmUpO1xuICAgIGNhcmRTdHVkaW8uc2V0VG9GaWVsZChmb3JtRGF0YS50b0ZpZWxkKTtcbiAgICBjYXJkU3R1ZGlvLnNldEZyb21GaWVsZChmb3JtRGF0YS5mcm9tRmllbGQpO1xuICAgIGNhcmRTdHVkaW8uc2V0UmVsYXRpb25zaGlwRmllbGQoZm9ybURhdGEucmVsYXRpb25zaGlwRmllbGQpO1xuICAgIGNhcmRTdHVkaW8uc2V0UHJvbXB0KGZvcm1EYXRhLnByb21wdCk7XG4gICAgY2FyZFN0dWRpby5zZXRGaW5hbENhcmRNZXNzYWdlKGZvcm1EYXRhLmZpbmFsQ2FyZE1lc3NhZ2UpO1xuICAgIGNhcmRTdHVkaW8uc2V0SXNIYW5kd3JpdHRlbk1lc3NhZ2UoZm9ybURhdGEuaXNIYW5kd3JpdHRlbk1lc3NhZ2UpO1xuICAgIGNhcmRTdHVkaW8uc2V0U2VsZWN0ZWRBcnRpc3RpY1N0eWxlKGZvcm1EYXRhLnNlbGVjdGVkQXJ0aXN0aWNTdHlsZSk7XG4gICAgY2FyZFN0dWRpby5zZXRDdXN0b21TdHlsZURlc2NyaXB0aW9uKGZvcm1EYXRhLmN1c3RvbVN0eWxlRGVzY3JpcHRpb24pO1xuICAgIC8vIFNraXAgc3luY2luZyByZWZlcmVuY2UgaW1hZ2VzIGZyb20gZm9ybSB0byBjYXJkU3R1ZGlvXG4gICAgLy8gVGhpcyBzaG91bGQgb25seSBmbG93IGZyb20gY2FyZFN0dWRpbyAtPiBmb3JtIGFmdGVyIHVwbG9hZHNcbiAgICAvLyBjYXJkU3R1ZGlvLnNldFJlZmVyZW5jZUltYWdlcyhmb3JtRGF0YS5yZWZlcmVuY2VJbWFnZXMpO1xuICAgIC8vIGNhcmRTdHVkaW8uc2V0UmVmZXJlbmNlSW1hZ2VVcmxzKGZvcm1EYXRhLnJlZmVyZW5jZUltYWdlVXJscyk7XG4gICAgY2FyZFN0dWRpby5zZXRJbWFnZVRyYW5zZm9ybWF0aW9uKGZvcm1EYXRhLmltYWdlVHJhbnNmb3JtYXRpb24pO1xuICAgIGNhcmRTdHVkaW8uc2V0VXNlckVtYWlsKGZvcm1EYXRhLnVzZXJFbWFpbCk7XG4gICAgY2FyZFN0dWRpby5zZXRTZWxlY3RlZEltYWdlTW9kZWwoZm9ybURhdGEuc2VsZWN0ZWRJbWFnZU1vZGVsKTtcbiAgICBjYXJkU3R1ZGlvLnNldFNlbGVjdGVkRHJhZnRNb2RlbChmb3JtRGF0YS5zZWxlY3RlZERyYWZ0TW9kZWwpO1xuICAgIGNhcmRTdHVkaW8uc2V0U2VsZWN0ZWRQYXBlclNpemUoZm9ybURhdGEuc2VsZWN0ZWRQYXBlclNpemUpO1xuICAgIGNhcmRTdHVkaW8uc2V0TnVtYmVyT2ZDYXJkcyhmb3JtRGF0YS5udW1iZXJPZkNhcmRzKTtcbiAgICBjYXJkU3R1ZGlvLnNldElzRnJvbnRCYWNrT25seShmb3JtRGF0YS5pc0Zyb250QmFja09ubHkpO1xuICB9LCBbY2FyZEZvcm0uZm9ybURhdGEsIGNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZV0pO1xuXG4gIC8vIEF1dG8tY29tcGxldGUgc3RlcCAxIG9uY2UgdXNlciBtYWtlcyBzZWxlY3Rpb25zXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNhcmRGb3JtLnZhbGlkYXRlU3RlcCgxKSAmJiAhd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoMSkpIHtcbiAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDEpO1xuICAgIH1cbiAgfSwgW2NhcmRGb3JtLmZvcm1EYXRhLnNlbGVjdGVkVHlwZSwgY2FyZEZvcm0uZm9ybURhdGEuc2VsZWN0ZWRUb25lLCBjYXJkRm9ybS5mb3JtRGF0YS5jdXN0b21DYXJkVHlwZSwgd2l6YXJkU3RhdGVdKTtcblxuICAvLyBBdXRvLWNvbXBsZXRlIHN0ZXAgNCBvbmNlIGVtYWlsIGlzIHZhbGlkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNhcmRGb3JtLnZhbGlkYXRlU3RlcCg0KSAmJiAhd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoNCkpIHtcbiAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDQpO1xuICAgIH1cbiAgfSwgW2NhcmRGb3JtLmZvcm1EYXRhLnVzZXJFbWFpbCwgd2l6YXJkU3RhdGVdKTtcblxuICAvLyBBdXRvLWFkdmFuY2UgdG8gU3RlcCA2IHdoZW4gZmluYWwgY2FyZCBnZW5lcmF0aW9uIHN0YXJ0c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjYXJkU3R1ZGlvLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCAmJiB3aXphcmRTdGF0ZS5jdXJyZW50U3RlcCA8IDYpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5qAIEF1dG8tYWR2YW5jaW5nIHRvIFN0ZXAgNjogRmluYWwgR2VuZXJhdGlvbicpO1xuICAgICAgaWYgKCF3aXphcmRTdGF0ZS5jb21wbGV0ZWRTdGVwcy5pbmNsdWRlcyg1KSkge1xuICAgICAgICB3aXphcmRTdGF0ZS5tYXJrU3RlcENvbXBsZXRlZCg1KTtcbiAgICAgIH1cbiAgICAgIHdpemFyZFN0YXRlLnVwZGF0ZUN1cnJlbnRTdGVwKDYpO1xuICAgIH1cbiAgfSwgW2NhcmRTdHVkaW8uaXNHZW5lcmF0aW5nRmluYWxDYXJkLCB3aXphcmRTdGF0ZV0pO1xuXG4gIC8vIFN5bmMgcmVmZXJlbmNlIGltYWdlcyBmcm9tIGNhcmRTdHVkaW8gdG8gZm9ybSB3aGVuIHRoZXkgY2hhbmdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjYXJkRm9ybS5pc0luaXRpYWxMb2FkQ29tcGxldGUpIHJldHVybjtcbiAgICBcbiAgICAvLyBTeW5jIGlmIGNhcmRTdHVkaW8gaGFzIGltYWdlcyBidXQgZm9ybSBkb2Vzbid0LCBvciBpZiBwaG90b1JlZmVyZW5jZXMgY2hhbmdlZFxuICAgIGNvbnN0IHNob3VsZFN5bmMgPSAoXG4gICAgICAoY2FyZFN0dWRpby5yZWZlcmVuY2VJbWFnZVVybHMubGVuZ3RoID4gMCAmJiBcbiAgICAgICBjYXJkRm9ybS5mb3JtRGF0YS5yZWZlcmVuY2VJbWFnZVVybHMubGVuZ3RoICE9PSBjYXJkU3R1ZGlvLnJlZmVyZW5jZUltYWdlVXJscy5sZW5ndGgpIHx8XG4gICAgICAoY2FyZFN0dWRpby5waG90b1JlZmVyZW5jZXMgJiYgY2FyZFN0dWRpby5waG90b1JlZmVyZW5jZXMgIT09IGNhcmRGb3JtLmZvcm1EYXRhLnBob3RvUmVmZXJlbmNlcylcbiAgICApO1xuICAgIFxuICAgIGlmIChzaG91bGRTeW5jKSB7XG4gICAgICBjYXJkRm9ybS51cGRhdGVGb3JtRGF0YSh7XG4gICAgICAgIHJlZmVyZW5jZUltYWdlczogY2FyZFN0dWRpby5yZWZlcmVuY2VJbWFnZXMsXG4gICAgICAgIHJlZmVyZW5jZUltYWdlVXJsczogY2FyZFN0dWRpby5yZWZlcmVuY2VJbWFnZVVybHMsXG4gICAgICAgIHBob3RvUmVmZXJlbmNlczogY2FyZFN0dWRpby5waG90b1JlZmVyZW5jZXNcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2NhcmRTdHVkaW8ucmVmZXJlbmNlSW1hZ2VVcmxzLCBjYXJkU3R1ZGlvLnJlZmVyZW5jZUltYWdlcywgY2FyZFN0dWRpby5waG90b1JlZmVyZW5jZXMsIGNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZV0pO1xuXG4gIHJldHVybiBudWxsO1xufSJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsIkNhcmRXaXphcmRFZmZlY3RzIiwiY2FyZFN0dWRpbyIsImNhcmRGb3JtIiwiY2FyZEhpc3RvcnkiLCJ3aXphcmRTdGF0ZSIsInVwZGF0ZVdpemFyZFN0YXRlIiwiaXNSZXN1bWluZ0RyYWZ0IiwiaXNSZXN0b3JpbmdKb2JzIiwicmVzdG9yZVBlbmRpbmdKb2JzIiwiY29uc29sZSIsImxvZyIsImNoZWNrUGVuZGluZ0pvYnMiLCJpc0dlbmVyYXRpbmciLCJnZW5lcmF0aW9uUHJvZ3Jlc3MiLCJpc0dlbmVyYXRpbmdGaW5hbENhcmQiLCJpIiwiY29tcGxldGVkU3RlcHMiLCJpbmNsdWRlcyIsIm1hcmtTdGVwQ29tcGxldGVkIiwidXBkYXRlQ3VycmVudFN0ZXAiLCJpc0RyYWZ0TW9kZSIsImN1cnJlbnRTdGVwIiwiaXNJbml0aWFsTG9hZENvbXBsZXRlIiwiZm9ybURhdGEiLCJzZWxlY3RlZFR5cGUiLCJzZWxlY3RlZFRvbmUiLCJkcmFmdENhcmRzIiwibGVuZ3RoIiwiY3VycmVudERyYWZ0U2Vzc2lvbklkIiwic2V0Q3VycmVudERyYWZ0U2Vzc2lvbklkIiwibGFzdFNhdmVkRHJhZnRDb3VudCIsInNldExhc3RTYXZlZERyYWZ0Q291bnQiLCJoYXNDYXJkcyIsInNob3VsZFNhdmUiLCJ2YWxpZERyYWZ0cyIsImZpbHRlciIsImNhcmQiLCJzZWxlY3RlZERyYWZ0SW5kZXgiLCJzZXNzaW9uSWQiLCJzYXZlRHJhZnRTZXNzaW9uIiwidW5kZWZpbmVkIiwiZ2VuZXJhdGVkQ2FyZCIsImlzQ2FyZENvbXBsZXRlZCIsImFkZENvbXBsZXRlZENhcmQiLCJzZXRTZWxlY3RlZFR5cGUiLCJzZXRDdXN0b21DYXJkVHlwZSIsImN1c3RvbUNhcmRUeXBlIiwic2V0U2VsZWN0ZWRUb25lIiwic2V0VG9GaWVsZCIsInRvRmllbGQiLCJzZXRGcm9tRmllbGQiLCJmcm9tRmllbGQiLCJzZXRSZWxhdGlvbnNoaXBGaWVsZCIsInJlbGF0aW9uc2hpcEZpZWxkIiwic2V0UHJvbXB0IiwicHJvbXB0Iiwic2V0RmluYWxDYXJkTWVzc2FnZSIsImZpbmFsQ2FyZE1lc3NhZ2UiLCJzZXRJc0hhbmR3cml0dGVuTWVzc2FnZSIsImlzSGFuZHdyaXR0ZW5NZXNzYWdlIiwic2V0U2VsZWN0ZWRBcnRpc3RpY1N0eWxlIiwic2VsZWN0ZWRBcnRpc3RpY1N0eWxlIiwic2V0Q3VzdG9tU3R5bGVEZXNjcmlwdGlvbiIsImN1c3RvbVN0eWxlRGVzY3JpcHRpb24iLCJzZXRJbWFnZVRyYW5zZm9ybWF0aW9uIiwiaW1hZ2VUcmFuc2Zvcm1hdGlvbiIsInNldFVzZXJFbWFpbCIsInVzZXJFbWFpbCIsInNldFNlbGVjdGVkSW1hZ2VNb2RlbCIsInNlbGVjdGVkSW1hZ2VNb2RlbCIsInNldFNlbGVjdGVkRHJhZnRNb2RlbCIsInNlbGVjdGVkRHJhZnRNb2RlbCIsInNldFNlbGVjdGVkUGFwZXJTaXplIiwic2VsZWN0ZWRQYXBlclNpemUiLCJzZXROdW1iZXJPZkNhcmRzIiwibnVtYmVyT2ZDYXJkcyIsInNldElzRnJvbnRCYWNrT25seSIsImlzRnJvbnRCYWNrT25seSIsInZhbGlkYXRlU3RlcCIsInNob3VsZFN5bmMiLCJyZWZlcmVuY2VJbWFnZVVybHMiLCJwaG90b1JlZmVyZW5jZXMiLCJ1cGRhdGVGb3JtRGF0YSIsInJlZmVyZW5jZUltYWdlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/wizard/CardWizardEffects.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/wizard/CardWizardHelpers.tsx":
/*!*************************************************!*\
  !*** ./components/wizard/CardWizardHelpers.tsx ***!
  \*************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFileUploadWrapper: function() { return /* binding */ createFileUploadWrapper; },\n/* harmony export */   createMessageHelpWrapper: function() { return /* binding */ createMessageHelpWrapper; },\n/* harmony export */   createRedoWrapper: function() { return /* binding */ createRedoWrapper; },\n/* harmony export */   createUndoWrapper: function() { return /* binding */ createUndoWrapper; },\n/* harmony export */   extractCardTypeFromPrompt: function() { return /* binding */ extractCardTypeFromPrompt; },\n/* harmony export */   handleResumeDraft: function() { return /* binding */ handleResumeDraft; },\n/* harmony export */   handleTemplateSelect: function() { return /* binding */ handleTemplateSelect; }\n/* harmony export */ });\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sonner */ \"(app-pages-browser)/./node_modules/sonner/dist/index.mjs\");\n/* __next_internal_client_entry_do_not_use__ extractCardTypeFromPrompt,createFileUploadWrapper,createMessageHelpWrapper,createUndoWrapper,createRedoWrapper,handleTemplateSelect,handleResumeDraft auto */ \n// Extract card type from prompt (basic implementation)\nconst extractCardTypeFromPrompt = (prompt)=>{\n    if (!prompt) return null;\n    const lowerPrompt = prompt.toLowerCase();\n    if (lowerPrompt.includes(\"birthday\")) return \"birthday\";\n    if (lowerPrompt.includes(\"thank\") || lowerPrompt.includes(\"grateful\")) return \"thank-you\";\n    if (lowerPrompt.includes(\"anniversary\")) return \"anniversary\";\n    if (lowerPrompt.includes(\"congratulat\")) return \"congratulations\";\n    if (lowerPrompt.includes(\"holiday\") || lowerPrompt.includes(\"christmas\") || lowerPrompt.includes(\"new year\")) return \"holiday\";\n    if (lowerPrompt.includes(\"love\") || lowerPrompt.includes(\"romantic\")) return \"love\";\n    if (lowerPrompt.includes(\"wedding\")) return \"wedding\";\n    if (lowerPrompt.includes(\"graduat\")) return \"graduation\";\n    if (lowerPrompt.includes(\"baby\")) return \"new-baby\";\n    if (lowerPrompt.includes(\"sorry\") || lowerPrompt.includes(\"apolog\")) return \"apology\";\n    return null;\n};\n// Create a wrapper for handleFileUpload that updates both form and cardStudio\nconst createFileUploadWrapper = (cardStudio, cardForm, updateFormData)=>{\n    return async (file, type)=>{\n        // Store the current state before upload\n        const prevImages = cardForm.formData.referenceImages || [];\n        const prevUrls = cardForm.formData.referenceImageUrls || [];\n        // Use the handleFileUpload method from cardStudio (useFileHandling hook)\n        // This will properly trigger the photo analysis modal\n        await cardStudio.handleFileUpload(file, type);\n        // After successful upload, sync the form data with cardStudio state\n        // For reference images, we need to sync the state immediately\n        if (type === \"reference\") {\n            // Wait a moment to ensure cardStudio state is updated\n            // This needs to be longer to avoid race conditions with CardWizardEffects\n            await new Promise((resolve)=>setTimeout(resolve, 100));\n            // Force sync the updated state to form data\n            // Get the latest state from cardStudio\n            const currentImages = cardStudio.referenceImages;\n            const currentUrls = cardStudio.referenceImageUrls;\n            // Always update form data with the current state\n            updateFormData({\n                referenceImages: currentImages,\n                referenceImageUrls: currentUrls\n            });\n        }\n    };\n};\n// Create a wrapper for handleGetMessageHelp that updates both form and cardStudio\nconst createMessageHelpWrapper = (cardStudio, updateFormData)=>{\n    return async ()=>{\n        const generatedMessage = await cardStudio.handleGetMessageHelp();\n        // After message generation, update the form data with the new message\n        if (generatedMessage) {\n            updateFormData({\n                finalCardMessage: generatedMessage\n            });\n        }\n    };\n};\n// Create wrappers for undo/redo that update both form and cardStudio\nconst createUndoWrapper = (cardStudio, updateFormData)=>{\n    return ()=>{\n        cardStudio.undoMessage();\n        // Update form data with the new message from history\n        if (cardStudio.currentMessageIndex > 0) {\n            const newMessage = cardStudio.messageHistory[cardStudio.currentMessageIndex - 1];\n            updateFormData({\n                finalCardMessage: newMessage\n            });\n        }\n    };\n};\nconst createRedoWrapper = (cardStudio, updateFormData)=>{\n    return ()=>{\n        cardStudio.redoMessage();\n        // Update form data with the new message from history\n        if (cardStudio.currentMessageIndex < cardStudio.messageHistory.length - 1) {\n            const newMessage = cardStudio.messageHistory[cardStudio.currentMessageIndex + 1];\n            updateFormData({\n                finalCardMessage: newMessage\n            });\n        }\n    };\n};\n// Handle template selection\nconst handleTemplateSelect = (template, updateFormData, cardStudio)=>{\n    var _template_styleInfo;\n    // Update form data with template information\n    updateFormData({\n        prompt: template.prompt || \"\",\n        selectedType: extractCardTypeFromPrompt(template.prompt) || cardStudio.selectedType,\n        selectedArtisticStyle: ((_template_styleInfo = template.styleInfo) === null || _template_styleInfo === void 0 ? void 0 : _template_styleInfo.styleName) || cardStudio.selectedArtisticStyle\n    });\n    // Store template info in cardStudio for later use\n    cardStudio.setSelectedTemplate(template);\n};\n// Resume draft session\nconst handleResumeDraft = (sessionId, cardHistory, cardForm, cardStudio, wizardState, setIsResumingDraft)=>{\n    // Set flag to prevent auto-saving during resume\n    setIsResumingDraft(true);\n    const session = cardHistory.resumeDraftSession(sessionId);\n    if (session) {\n        // Update form data with saved session data\n        cardForm.updateFormData(session.formData);\n        // Update cardStudio with draft cards\n        cardStudio.setDraftCards(session.draftCards);\n        cardStudio.setSelectedDraftIndex(session.selectedDraftIndex);\n        cardStudio.setIsDraftMode(true);\n        // Navigate to appropriate step\n        if (session.draftCards.length > 0) {\n            // If drafts exist, go to draft selection step\n            wizardState.updateCurrentStep(5);\n        } else {\n            // Otherwise go to content creation step\n            wizardState.updateCurrentStep(2);\n        }\n        sonner__WEBPACK_IMPORTED_MODULE_0__.toast.success(\"Draft session resumed successfully!\");\n        // Reset flag after a short delay to allow state updates to complete\n        setTimeout(()=>{\n            setIsResumingDraft(false);\n        }, 100);\n    } else {\n        setIsResumingDraft(false);\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvd2l6YXJkL0NhcmRXaXphcmRIZWxwZXJzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OzsyTUFFK0I7QUFJL0IsdURBQXVEO0FBQ2hELE1BQU1DLDRCQUE0QixDQUFDQztJQUN4QyxJQUFJLENBQUNBLFFBQVEsT0FBTztJQUNwQixNQUFNQyxjQUFjRCxPQUFPRSxXQUFXO0lBQ3RDLElBQUlELFlBQVlFLFFBQVEsQ0FBQyxhQUFhLE9BQU87SUFDN0MsSUFBSUYsWUFBWUUsUUFBUSxDQUFDLFlBQVlGLFlBQVlFLFFBQVEsQ0FBQyxhQUFhLE9BQU87SUFDOUUsSUFBSUYsWUFBWUUsUUFBUSxDQUFDLGdCQUFnQixPQUFPO0lBQ2hELElBQUlGLFlBQVlFLFFBQVEsQ0FBQyxnQkFBZ0IsT0FBTztJQUNoRCxJQUFJRixZQUFZRSxRQUFRLENBQUMsY0FBY0YsWUFBWUUsUUFBUSxDQUFDLGdCQUFnQkYsWUFBWUUsUUFBUSxDQUFDLGFBQWEsT0FBTztJQUNySCxJQUFJRixZQUFZRSxRQUFRLENBQUMsV0FBV0YsWUFBWUUsUUFBUSxDQUFDLGFBQWEsT0FBTztJQUM3RSxJQUFJRixZQUFZRSxRQUFRLENBQUMsWUFBWSxPQUFPO0lBQzVDLElBQUlGLFlBQVlFLFFBQVEsQ0FBQyxZQUFZLE9BQU87SUFDNUMsSUFBSUYsWUFBWUUsUUFBUSxDQUFDLFNBQVMsT0FBTztJQUN6QyxJQUFJRixZQUFZRSxRQUFRLENBQUMsWUFBWUYsWUFBWUUsUUFBUSxDQUFDLFdBQVcsT0FBTztJQUM1RSxPQUFPO0FBQ1QsRUFBRTtBQUVGLDhFQUE4RTtBQUN2RSxNQUFNQywwQkFBMEIsQ0FDckNDLFlBQ0FDLFVBQ0FDO0lBRUEsT0FBTyxPQUFPQyxNQUFZQztRQUN4Qix3Q0FBd0M7UUFDeEMsTUFBTUMsYUFBYUosU0FBU0ssUUFBUSxDQUFDQyxlQUFlLElBQUksRUFBRTtRQUMxRCxNQUFNQyxXQUFXUCxTQUFTSyxRQUFRLENBQUNHLGtCQUFrQixJQUFJLEVBQUU7UUFFM0QseUVBQXlFO1FBQ3pFLHNEQUFzRDtRQUN0RCxNQUFNVCxXQUFXVSxnQkFBZ0IsQ0FBQ1AsTUFBTUM7UUFFeEMsb0VBQW9FO1FBQ3BFLDhEQUE4RDtRQUM5RCxJQUFJQSxTQUFTLGFBQWE7WUFDeEIsc0RBQXNEO1lBQ3RELDBFQUEwRTtZQUMxRSxNQUFNLElBQUlPLFFBQVFDLENBQUFBLFVBQVdDLFdBQVdELFNBQVM7WUFFakQsNENBQTRDO1lBQzVDLHVDQUF1QztZQUN2QyxNQUFNRSxnQkFBZ0JkLFdBQVdPLGVBQWU7WUFDaEQsTUFBTVEsY0FBY2YsV0FBV1Msa0JBQWtCO1lBR2pELGlEQUFpRDtZQUNqRFAsZUFBZTtnQkFDYkssaUJBQWlCTztnQkFDakJMLG9CQUFvQk07WUFDdEI7UUFDRjtJQUNGO0FBQ0YsRUFBRTtBQUVGLGtGQUFrRjtBQUMzRSxNQUFNQywyQkFBMkIsQ0FDdENoQixZQUNBRTtJQUVBLE9BQU87UUFDTCxNQUFNZSxtQkFBbUIsTUFBTWpCLFdBQVdrQixvQkFBb0I7UUFFOUQsc0VBQXNFO1FBQ3RFLElBQUlELGtCQUFrQjtZQUNwQmYsZUFBZTtnQkFDYmlCLGtCQUFrQkY7WUFDcEI7UUFDRjtJQUNGO0FBQ0YsRUFBRTtBQUVGLHFFQUFxRTtBQUM5RCxNQUFNRyxvQkFBb0IsQ0FDL0JwQixZQUNBRTtJQUVBLE9BQU87UUFDTEYsV0FBV3FCLFdBQVc7UUFDdEIscURBQXFEO1FBQ3JELElBQUlyQixXQUFXc0IsbUJBQW1CLEdBQUcsR0FBRztZQUN0QyxNQUFNQyxhQUFhdkIsV0FBV3dCLGNBQWMsQ0FBQ3hCLFdBQVdzQixtQkFBbUIsR0FBRyxFQUFFO1lBQ2hGcEIsZUFBZTtnQkFDYmlCLGtCQUFrQkk7WUFDcEI7UUFDRjtJQUNGO0FBQ0YsRUFBRTtBQUVLLE1BQU1FLG9CQUFvQixDQUMvQnpCLFlBQ0FFO0lBRUEsT0FBTztRQUNMRixXQUFXMEIsV0FBVztRQUN0QixxREFBcUQ7UUFDckQsSUFBSTFCLFdBQVdzQixtQkFBbUIsR0FBR3RCLFdBQVd3QixjQUFjLENBQUNHLE1BQU0sR0FBRyxHQUFHO1lBQ3pFLE1BQU1KLGFBQWF2QixXQUFXd0IsY0FBYyxDQUFDeEIsV0FBV3NCLG1CQUFtQixHQUFHLEVBQUU7WUFDaEZwQixlQUFlO2dCQUNiaUIsa0JBQWtCSTtZQUNwQjtRQUNGO0lBQ0Y7QUFDRixFQUFFO0FBRUYsNEJBQTRCO0FBQ3JCLE1BQU1LLHVCQUF1QixDQUNsQ0MsVUFDQTNCLGdCQUNBRjtRQU15QjZCO0lBSnpCLDZDQUE2QztJQUM3QzNCLGVBQWU7UUFDYlAsUUFBUWtDLFNBQVNsQyxNQUFNLElBQUk7UUFDM0JtQyxjQUFjcEMsMEJBQTBCbUMsU0FBU2xDLE1BQU0sS0FBS0ssV0FBVzhCLFlBQVk7UUFDbkZDLHVCQUF1QkYsRUFBQUEsc0JBQUFBLFNBQVNHLFNBQVMsY0FBbEJILDBDQUFBQSxvQkFBb0JJLFNBQVMsS0FBSWpDLFdBQVcrQixxQkFBcUI7SUFDMUY7SUFFQSxrREFBa0Q7SUFDbEQvQixXQUFXa0MsbUJBQW1CLENBQUNMO0FBQ2pDLEVBQUU7QUFFRix1QkFBdUI7QUFDaEIsTUFBTU0sb0JBQW9CLENBQy9CQyxXQUNBQyxhQUNBcEMsVUFDQUQsWUFDQXNDLGFBQ0FDO0lBRUEsZ0RBQWdEO0lBQ2hEQSxtQkFBbUI7SUFFbkIsTUFBTUMsVUFBVUgsWUFBWUksa0JBQWtCLENBQUNMO0lBQy9DLElBQUlJLFNBQVM7UUFDWCwyQ0FBMkM7UUFDM0N2QyxTQUFTQyxjQUFjLENBQUNzQyxRQUFRbEMsUUFBUTtRQUV4QyxxQ0FBcUM7UUFDckNOLFdBQVcwQyxhQUFhLENBQUNGLFFBQVFHLFVBQVU7UUFDM0MzQyxXQUFXNEMscUJBQXFCLENBQUNKLFFBQVFLLGtCQUFrQjtRQUMzRDdDLFdBQVc4QyxjQUFjLENBQUM7UUFFMUIsK0JBQStCO1FBQy9CLElBQUlOLFFBQVFHLFVBQVUsQ0FBQ2hCLE1BQU0sR0FBRyxHQUFHO1lBQ2pDLDhDQUE4QztZQUM5Q1csWUFBWVMsaUJBQWlCLENBQUM7UUFDaEMsT0FBTztZQUNMLHdDQUF3QztZQUN4Q1QsWUFBWVMsaUJBQWlCLENBQUM7UUFDaEM7UUFFQXRELHlDQUFLQSxDQUFDdUQsT0FBTyxDQUFDO1FBRWQsb0VBQW9FO1FBQ3BFbkMsV0FBVztZQUNUMEIsbUJBQW1CO1FBQ3JCLEdBQUc7SUFDTCxPQUFPO1FBQ0xBLG1CQUFtQjtJQUNyQjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy93aXphcmQvQ2FyZFdpemFyZEhlbHBlcnMudHN4P2EzNjciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCB7IHRvYXN0IH0gZnJvbSBcInNvbm5lclwiO1xuaW1wb3J0IHsgQ2FyZEZvcm1EYXRhIH0gZnJvbSBcIkAvaG9va3MvdXNlQ2FyZEZvcm1cIjtcbmltcG9ydCB7IEdlbmVyYXRlZENhcmQgfSBmcm9tIFwiQC9ob29rcy9jYXJkU3R1ZGlvL2NvbnN0YW50c1wiO1xuXG4vLyBFeHRyYWN0IGNhcmQgdHlwZSBmcm9tIHByb21wdCAoYmFzaWMgaW1wbGVtZW50YXRpb24pXG5leHBvcnQgY29uc3QgZXh0cmFjdENhcmRUeXBlRnJvbVByb21wdCA9IChwcm9tcHQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwgPT4ge1xuICBpZiAoIXByb21wdCkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGxvd2VyUHJvbXB0ID0gcHJvbXB0LnRvTG93ZXJDYXNlKCk7XG4gIGlmIChsb3dlclByb21wdC5pbmNsdWRlcygnYmlydGhkYXknKSkgcmV0dXJuICdiaXJ0aGRheSc7XG4gIGlmIChsb3dlclByb21wdC5pbmNsdWRlcygndGhhbmsnKSB8fCBsb3dlclByb21wdC5pbmNsdWRlcygnZ3JhdGVmdWwnKSkgcmV0dXJuICd0aGFuay15b3UnO1xuICBpZiAobG93ZXJQcm9tcHQuaW5jbHVkZXMoJ2Fubml2ZXJzYXJ5JykpIHJldHVybiAnYW5uaXZlcnNhcnknO1xuICBpZiAobG93ZXJQcm9tcHQuaW5jbHVkZXMoJ2NvbmdyYXR1bGF0JykpIHJldHVybiAnY29uZ3JhdHVsYXRpb25zJztcbiAgaWYgKGxvd2VyUHJvbXB0LmluY2x1ZGVzKCdob2xpZGF5JykgfHwgbG93ZXJQcm9tcHQuaW5jbHVkZXMoJ2NocmlzdG1hcycpIHx8IGxvd2VyUHJvbXB0LmluY2x1ZGVzKCduZXcgeWVhcicpKSByZXR1cm4gJ2hvbGlkYXknO1xuICBpZiAobG93ZXJQcm9tcHQuaW5jbHVkZXMoJ2xvdmUnKSB8fCBsb3dlclByb21wdC5pbmNsdWRlcygncm9tYW50aWMnKSkgcmV0dXJuICdsb3ZlJztcbiAgaWYgKGxvd2VyUHJvbXB0LmluY2x1ZGVzKCd3ZWRkaW5nJykpIHJldHVybiAnd2VkZGluZyc7XG4gIGlmIChsb3dlclByb21wdC5pbmNsdWRlcygnZ3JhZHVhdCcpKSByZXR1cm4gJ2dyYWR1YXRpb24nO1xuICBpZiAobG93ZXJQcm9tcHQuaW5jbHVkZXMoJ2JhYnknKSkgcmV0dXJuICduZXctYmFieSc7XG4gIGlmIChsb3dlclByb21wdC5pbmNsdWRlcygnc29ycnknKSB8fCBsb3dlclByb21wdC5pbmNsdWRlcygnYXBvbG9nJykpIHJldHVybiAnYXBvbG9neSc7XG4gIHJldHVybiBudWxsO1xufTtcblxuLy8gQ3JlYXRlIGEgd3JhcHBlciBmb3IgaGFuZGxlRmlsZVVwbG9hZCB0aGF0IHVwZGF0ZXMgYm90aCBmb3JtIGFuZCBjYXJkU3R1ZGlvXG5leHBvcnQgY29uc3QgY3JlYXRlRmlsZVVwbG9hZFdyYXBwZXIgPSAoXG4gIGNhcmRTdHVkaW86IGFueSxcbiAgY2FyZEZvcm06IGFueSxcbiAgdXBkYXRlRm9ybURhdGE6ICh1cGRhdGVzOiBhbnkpID0+IHZvaWRcbikgPT4ge1xuICByZXR1cm4gYXN5bmMgKGZpbGU6IEZpbGUsIHR5cGU6ICdoYW5kd3JpdGluZycgfCAncmVmZXJlbmNlJykgPT4ge1xuICAgIC8vIFN0b3JlIHRoZSBjdXJyZW50IHN0YXRlIGJlZm9yZSB1cGxvYWRcbiAgICBjb25zdCBwcmV2SW1hZ2VzID0gY2FyZEZvcm0uZm9ybURhdGEucmVmZXJlbmNlSW1hZ2VzIHx8IFtdO1xuICAgIGNvbnN0IHByZXZVcmxzID0gY2FyZEZvcm0uZm9ybURhdGEucmVmZXJlbmNlSW1hZ2VVcmxzIHx8IFtdO1xuICAgIFxuICAgIC8vIFVzZSB0aGUgaGFuZGxlRmlsZVVwbG9hZCBtZXRob2QgZnJvbSBjYXJkU3R1ZGlvICh1c2VGaWxlSGFuZGxpbmcgaG9vaylcbiAgICAvLyBUaGlzIHdpbGwgcHJvcGVybHkgdHJpZ2dlciB0aGUgcGhvdG8gYW5hbHlzaXMgbW9kYWxcbiAgICBhd2FpdCBjYXJkU3R1ZGlvLmhhbmRsZUZpbGVVcGxvYWQoZmlsZSwgdHlwZSk7XG4gICAgXG4gICAgLy8gQWZ0ZXIgc3VjY2Vzc2Z1bCB1cGxvYWQsIHN5bmMgdGhlIGZvcm0gZGF0YSB3aXRoIGNhcmRTdHVkaW8gc3RhdGVcbiAgICAvLyBGb3IgcmVmZXJlbmNlIGltYWdlcywgd2UgbmVlZCB0byBzeW5jIHRoZSBzdGF0ZSBpbW1lZGlhdGVseVxuICAgIGlmICh0eXBlID09PSAncmVmZXJlbmNlJykge1xuICAgICAgLy8gV2FpdCBhIG1vbWVudCB0byBlbnN1cmUgY2FyZFN0dWRpbyBzdGF0ZSBpcyB1cGRhdGVkXG4gICAgICAvLyBUaGlzIG5lZWRzIHRvIGJlIGxvbmdlciB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnMgd2l0aCBDYXJkV2l6YXJkRWZmZWN0c1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xuICAgICAgXG4gICAgICAvLyBGb3JjZSBzeW5jIHRoZSB1cGRhdGVkIHN0YXRlIHRvIGZvcm0gZGF0YVxuICAgICAgLy8gR2V0IHRoZSBsYXRlc3Qgc3RhdGUgZnJvbSBjYXJkU3R1ZGlvXG4gICAgICBjb25zdCBjdXJyZW50SW1hZ2VzID0gY2FyZFN0dWRpby5yZWZlcmVuY2VJbWFnZXM7XG4gICAgICBjb25zdCBjdXJyZW50VXJscyA9IGNhcmRTdHVkaW8ucmVmZXJlbmNlSW1hZ2VVcmxzO1xuICAgICAgXG4gICAgICBcbiAgICAgIC8vIEFsd2F5cyB1cGRhdGUgZm9ybSBkYXRhIHdpdGggdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgIHVwZGF0ZUZvcm1EYXRhKHtcbiAgICAgICAgcmVmZXJlbmNlSW1hZ2VzOiBjdXJyZW50SW1hZ2VzLFxuICAgICAgICByZWZlcmVuY2VJbWFnZVVybHM6IGN1cnJlbnRVcmxzXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59O1xuXG4vLyBDcmVhdGUgYSB3cmFwcGVyIGZvciBoYW5kbGVHZXRNZXNzYWdlSGVscCB0aGF0IHVwZGF0ZXMgYm90aCBmb3JtIGFuZCBjYXJkU3R1ZGlvXG5leHBvcnQgY29uc3QgY3JlYXRlTWVzc2FnZUhlbHBXcmFwcGVyID0gKFxuICBjYXJkU3R1ZGlvOiBhbnksXG4gIHVwZGF0ZUZvcm1EYXRhOiAodXBkYXRlczogYW55KSA9PiB2b2lkXG4pID0+IHtcbiAgcmV0dXJuIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBnZW5lcmF0ZWRNZXNzYWdlID0gYXdhaXQgY2FyZFN0dWRpby5oYW5kbGVHZXRNZXNzYWdlSGVscCgpO1xuICAgIFxuICAgIC8vIEFmdGVyIG1lc3NhZ2UgZ2VuZXJhdGlvbiwgdXBkYXRlIHRoZSBmb3JtIGRhdGEgd2l0aCB0aGUgbmV3IG1lc3NhZ2VcbiAgICBpZiAoZ2VuZXJhdGVkTWVzc2FnZSkge1xuICAgICAgdXBkYXRlRm9ybURhdGEoe1xuICAgICAgICBmaW5hbENhcmRNZXNzYWdlOiBnZW5lcmF0ZWRNZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59O1xuXG4vLyBDcmVhdGUgd3JhcHBlcnMgZm9yIHVuZG8vcmVkbyB0aGF0IHVwZGF0ZSBib3RoIGZvcm0gYW5kIGNhcmRTdHVkaW9cbmV4cG9ydCBjb25zdCBjcmVhdGVVbmRvV3JhcHBlciA9IChcbiAgY2FyZFN0dWRpbzogYW55LFxuICB1cGRhdGVGb3JtRGF0YTogKHVwZGF0ZXM6IGFueSkgPT4gdm9pZFxuKSA9PiB7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgY2FyZFN0dWRpby51bmRvTWVzc2FnZSgpO1xuICAgIC8vIFVwZGF0ZSBmb3JtIGRhdGEgd2l0aCB0aGUgbmV3IG1lc3NhZ2UgZnJvbSBoaXN0b3J5XG4gICAgaWYgKGNhcmRTdHVkaW8uY3VycmVudE1lc3NhZ2VJbmRleCA+IDApIHtcbiAgICAgIGNvbnN0IG5ld01lc3NhZ2UgPSBjYXJkU3R1ZGlvLm1lc3NhZ2VIaXN0b3J5W2NhcmRTdHVkaW8uY3VycmVudE1lc3NhZ2VJbmRleCAtIDFdO1xuICAgICAgdXBkYXRlRm9ybURhdGEoe1xuICAgICAgICBmaW5hbENhcmRNZXNzYWdlOiBuZXdNZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlUmVkb1dyYXBwZXIgPSAoXG4gIGNhcmRTdHVkaW86IGFueSxcbiAgdXBkYXRlRm9ybURhdGE6ICh1cGRhdGVzOiBhbnkpID0+IHZvaWRcbikgPT4ge1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGNhcmRTdHVkaW8ucmVkb01lc3NhZ2UoKTtcbiAgICAvLyBVcGRhdGUgZm9ybSBkYXRhIHdpdGggdGhlIG5ldyBtZXNzYWdlIGZyb20gaGlzdG9yeVxuICAgIGlmIChjYXJkU3R1ZGlvLmN1cnJlbnRNZXNzYWdlSW5kZXggPCBjYXJkU3R1ZGlvLm1lc3NhZ2VIaXN0b3J5Lmxlbmd0aCAtIDEpIHtcbiAgICAgIGNvbnN0IG5ld01lc3NhZ2UgPSBjYXJkU3R1ZGlvLm1lc3NhZ2VIaXN0b3J5W2NhcmRTdHVkaW8uY3VycmVudE1lc3NhZ2VJbmRleCArIDFdO1xuICAgICAgdXBkYXRlRm9ybURhdGEoe1xuICAgICAgICBmaW5hbENhcmRNZXNzYWdlOiBuZXdNZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59O1xuXG4vLyBIYW5kbGUgdGVtcGxhdGUgc2VsZWN0aW9uXG5leHBvcnQgY29uc3QgaGFuZGxlVGVtcGxhdGVTZWxlY3QgPSAoXG4gIHRlbXBsYXRlOiBhbnksXG4gIHVwZGF0ZUZvcm1EYXRhOiAodXBkYXRlczogYW55KSA9PiB2b2lkLFxuICBjYXJkU3R1ZGlvOiBhbnlcbikgPT4ge1xuICAvLyBVcGRhdGUgZm9ybSBkYXRhIHdpdGggdGVtcGxhdGUgaW5mb3JtYXRpb25cbiAgdXBkYXRlRm9ybURhdGEoe1xuICAgIHByb21wdDogdGVtcGxhdGUucHJvbXB0IHx8ICcnLFxuICAgIHNlbGVjdGVkVHlwZTogZXh0cmFjdENhcmRUeXBlRnJvbVByb21wdCh0ZW1wbGF0ZS5wcm9tcHQpIHx8IGNhcmRTdHVkaW8uc2VsZWN0ZWRUeXBlLFxuICAgIHNlbGVjdGVkQXJ0aXN0aWNTdHlsZTogdGVtcGxhdGUuc3R5bGVJbmZvPy5zdHlsZU5hbWUgfHwgY2FyZFN0dWRpby5zZWxlY3RlZEFydGlzdGljU3R5bGVcbiAgfSk7XG4gIFxuICAvLyBTdG9yZSB0ZW1wbGF0ZSBpbmZvIGluIGNhcmRTdHVkaW8gZm9yIGxhdGVyIHVzZVxuICBjYXJkU3R1ZGlvLnNldFNlbGVjdGVkVGVtcGxhdGUodGVtcGxhdGUpO1xufTtcblxuLy8gUmVzdW1lIGRyYWZ0IHNlc3Npb25cbmV4cG9ydCBjb25zdCBoYW5kbGVSZXN1bWVEcmFmdCA9IChcbiAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gIGNhcmRIaXN0b3J5OiBhbnksXG4gIGNhcmRGb3JtOiBhbnksXG4gIGNhcmRTdHVkaW86IGFueSxcbiAgd2l6YXJkU3RhdGU6IGFueSxcbiAgc2V0SXNSZXN1bWluZ0RyYWZ0OiAodmFsdWU6IGJvb2xlYW4pID0+IHZvaWRcbikgPT4ge1xuICAvLyBTZXQgZmxhZyB0byBwcmV2ZW50IGF1dG8tc2F2aW5nIGR1cmluZyByZXN1bWVcbiAgc2V0SXNSZXN1bWluZ0RyYWZ0KHRydWUpO1xuICBcbiAgY29uc3Qgc2Vzc2lvbiA9IGNhcmRIaXN0b3J5LnJlc3VtZURyYWZ0U2Vzc2lvbihzZXNzaW9uSWQpO1xuICBpZiAoc2Vzc2lvbikge1xuICAgIC8vIFVwZGF0ZSBmb3JtIGRhdGEgd2l0aCBzYXZlZCBzZXNzaW9uIGRhdGFcbiAgICBjYXJkRm9ybS51cGRhdGVGb3JtRGF0YShzZXNzaW9uLmZvcm1EYXRhKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgY2FyZFN0dWRpbyB3aXRoIGRyYWZ0IGNhcmRzXG4gICAgY2FyZFN0dWRpby5zZXREcmFmdENhcmRzKHNlc3Npb24uZHJhZnRDYXJkcyk7XG4gICAgY2FyZFN0dWRpby5zZXRTZWxlY3RlZERyYWZ0SW5kZXgoc2Vzc2lvbi5zZWxlY3RlZERyYWZ0SW5kZXgpO1xuICAgIGNhcmRTdHVkaW8uc2V0SXNEcmFmdE1vZGUodHJ1ZSk7XG4gICAgXG4gICAgLy8gTmF2aWdhdGUgdG8gYXBwcm9wcmlhdGUgc3RlcFxuICAgIGlmIChzZXNzaW9uLmRyYWZ0Q2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gSWYgZHJhZnRzIGV4aXN0LCBnbyB0byBkcmFmdCBzZWxlY3Rpb24gc3RlcFxuICAgICAgd2l6YXJkU3RhdGUudXBkYXRlQ3VycmVudFN0ZXAoNSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE90aGVyd2lzZSBnbyB0byBjb250ZW50IGNyZWF0aW9uIHN0ZXBcbiAgICAgIHdpemFyZFN0YXRlLnVwZGF0ZUN1cnJlbnRTdGVwKDIpO1xuICAgIH1cbiAgICBcbiAgICB0b2FzdC5zdWNjZXNzKCdEcmFmdCBzZXNzaW9uIHJlc3VtZWQgc3VjY2Vzc2Z1bGx5IScpO1xuICAgIFxuICAgIC8vIFJlc2V0IGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheSB0byBhbGxvdyBzdGF0ZSB1cGRhdGVzIHRvIGNvbXBsZXRlXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXRJc1Jlc3VtaW5nRHJhZnQoZmFsc2UpO1xuICAgIH0sIDEwMCk7XG4gIH0gZWxzZSB7XG4gICAgc2V0SXNSZXN1bWluZ0RyYWZ0KGZhbHNlKTtcbiAgfVxufTsiXSwibmFtZXMiOlsidG9hc3QiLCJleHRyYWN0Q2FyZFR5cGVGcm9tUHJvbXB0IiwicHJvbXB0IiwibG93ZXJQcm9tcHQiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiY3JlYXRlRmlsZVVwbG9hZFdyYXBwZXIiLCJjYXJkU3R1ZGlvIiwiY2FyZEZvcm0iLCJ1cGRhdGVGb3JtRGF0YSIsImZpbGUiLCJ0eXBlIiwicHJldkltYWdlcyIsImZvcm1EYXRhIiwicmVmZXJlbmNlSW1hZ2VzIiwicHJldlVybHMiLCJyZWZlcmVuY2VJbWFnZVVybHMiLCJoYW5kbGVGaWxlVXBsb2FkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY3VycmVudEltYWdlcyIsImN1cnJlbnRVcmxzIiwiY3JlYXRlTWVzc2FnZUhlbHBXcmFwcGVyIiwiZ2VuZXJhdGVkTWVzc2FnZSIsImhhbmRsZUdldE1lc3NhZ2VIZWxwIiwiZmluYWxDYXJkTWVzc2FnZSIsImNyZWF0ZVVuZG9XcmFwcGVyIiwidW5kb01lc3NhZ2UiLCJjdXJyZW50TWVzc2FnZUluZGV4IiwibmV3TWVzc2FnZSIsIm1lc3NhZ2VIaXN0b3J5IiwiY3JlYXRlUmVkb1dyYXBwZXIiLCJyZWRvTWVzc2FnZSIsImxlbmd0aCIsImhhbmRsZVRlbXBsYXRlU2VsZWN0IiwidGVtcGxhdGUiLCJzZWxlY3RlZFR5cGUiLCJzZWxlY3RlZEFydGlzdGljU3R5bGUiLCJzdHlsZUluZm8iLCJzdHlsZU5hbWUiLCJzZXRTZWxlY3RlZFRlbXBsYXRlIiwiaGFuZGxlUmVzdW1lRHJhZnQiLCJzZXNzaW9uSWQiLCJjYXJkSGlzdG9yeSIsIndpemFyZFN0YXRlIiwic2V0SXNSZXN1bWluZ0RyYWZ0Iiwic2Vzc2lvbiIsInJlc3VtZURyYWZ0U2Vzc2lvbiIsInNldERyYWZ0Q2FyZHMiLCJkcmFmdENhcmRzIiwic2V0U2VsZWN0ZWREcmFmdEluZGV4Iiwic2VsZWN0ZWREcmFmdEluZGV4Iiwic2V0SXNEcmFmdE1vZGUiLCJ1cGRhdGVDdXJyZW50U3RlcCIsInN1Y2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/wizard/CardWizardHelpers.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/wizard/CardWizardSteps.tsx":
/*!***********************************************!*\
  !*** ./components/wizard/CardWizardSteps.tsx ***!
  \***********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CardWizardSteps: function() { return /* binding */ CardWizardSteps; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _steps_Step1CardBasics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./steps/Step1CardBasics */ \"(app-pages-browser)/./components/wizard/steps/Step1CardBasics.tsx\");\n/* harmony import */ var _steps_Step2ContentCreation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./steps/Step2ContentCreation */ \"(app-pages-browser)/./components/wizard/steps/Step2ContentCreation.tsx\");\n/* harmony import */ var _steps_Step3Personalization__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./steps/Step3Personalization */ \"(app-pages-browser)/./components/wizard/steps/Step3Personalization.tsx\");\n/* harmony import */ var _steps_Step4Details__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./steps/Step4Details */ \"(app-pages-browser)/./components/wizard/steps/Step4Details.tsx\");\n/* harmony import */ var _steps_Step5Review__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./steps/Step5Review */ \"(app-pages-browser)/./components/wizard/steps/Step5Review.tsx\");\n/* harmony import */ var _steps_Step6FinalGeneration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./steps/Step6FinalGeneration */ \"(app-pages-browser)/./components/wizard/steps/Step6FinalGeneration.tsx\");\n/* __next_internal_client_entry_do_not_use__ CardWizardSteps auto */ \n\n\n\n\n\n\n\nfunction CardWizardSteps(param) {\n    let { currentStep, formData, updateFormData, cardStudio, wizardState, handleFileUploadWrapper, handleGetMessageHelpWrapper, undoMessageWrapper, redoMessageWrapper, handleTemplateSelect, cardHistory, handleResumeDraft } = param;\n    switch(currentStep){\n        case 1:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_steps_Step1CardBasics__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                formData: formData,\n                updateFormData: updateFormData,\n                onStepComplete: ()=>{\n                    if (!wizardState.completedSteps.includes(1)) {\n                        wizardState.markStepCompleted(1);\n                    }\n                },\n                onTemplateSelect: handleTemplateSelect,\n                // Photo upload props (moved from Step3)\n                handleFileUpload: handleFileUploadWrapper,\n                handleRemoveReferenceImage: (index)=>{\n                    // Update both cardStudio and form data\n                    const newImages = formData.referenceImages.filter((_, i)=>i !== index);\n                    const newUrls = formData.referenceImageUrls.filter((_, i)=>i !== index);\n                    // Update cardStudio state\n                    cardStudio.setReferenceImages(newImages);\n                    cardStudio.setReferenceImageUrls(newUrls);\n                    cardStudio.handleRemoveReferenceImage(index);\n                    // Update form data\n                    updateFormData({\n                        referenceImages: newImages,\n                        referenceImageUrls: newUrls\n                    });\n                },\n                isUploading: cardStudio.isUploading,\n                // Simplified photo references\n                photoReferences: cardStudio.photoReferences,\n                updatePhotoDescription: cardStudio.updatePhotoDescription,\n                // Pass cardStudio's URLs directly for immediate access\n                referenceImageUrlsFromStudio: cardStudio.referenceImageUrls,\n                // Card history props\n                cardHistory: cardHistory,\n                onResumeDraft: handleResumeDraft\n            }, void 0, false, {\n                fileName: \"/var/www/flask_app/ast_chat/components/wizard/CardWizardSteps.tsx\",\n                lineNumber: 44,\n                columnNumber: 9\n            }, this);\n        case 2:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_steps_Step2ContentCreation__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                formData: formData,\n                updateFormData: updateFormData,\n                onStepComplete: ()=>{\n                    if (!wizardState.completedSteps.includes(2)) {\n                        wizardState.markStepCompleted(2);\n                    }\n                },\n                handleGetMessageHelp: handleGetMessageHelpWrapper,\n                isGeneratingMessage: cardStudio.isGeneratingMessage,\n                messageHistory: cardStudio.messageHistory,\n                currentMessageIndex: cardStudio.currentMessageIndex,\n                undoMessage: undoMessageWrapper,\n                redoMessage: redoMessageWrapper,\n                photoReferences: cardStudio.photoReferences\n            }, void 0, false, {\n                fileName: \"/var/www/flask_app/ast_chat/components/wizard/CardWizardSteps.tsx\",\n                lineNumber: 85,\n                columnNumber: 9\n            }, this);\n        case 3:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_steps_Step3Personalization__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                formData: formData,\n                updateFormData: updateFormData,\n                onStepComplete: ()=>{\n                    if (!wizardState.completedSteps.includes(3)) {\n                        wizardState.markStepCompleted(3);\n                    }\n                }\n            }, void 0, false, {\n                fileName: \"/var/www/flask_app/ast_chat/components/wizard/CardWizardSteps.tsx\",\n                lineNumber: 105,\n                columnNumber: 9\n            }, this);\n        case 4:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_steps_Step4Details__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                formData: formData,\n                updateFormData: updateFormData,\n                onStepComplete: ()=>{\n                    if (!wizardState.completedSteps.includes(4)) {\n                        wizardState.markStepCompleted(4);\n                    }\n                }\n            }, void 0, false, {\n                fileName: \"/var/www/flask_app/ast_chat/components/wizard/CardWizardSteps.tsx\",\n                lineNumber: 118,\n                columnNumber: 9\n            }, this);\n        case 5:\n            // Log only significant state changes\n            if (true) {\n                const stateKey = \"\".concat(cardStudio.isGenerating, \"-\").concat(cardStudio.isDraftMode, \"-\").concat(cardStudio.draftCards.length);\n                if (window.lastStep5State !== stateKey) {\n                    console.log(\"\\uD83D\\uDCCD Step 5 state changed:\", {\n                        isGenerating: cardStudio.isGenerating,\n                        isDraftMode: cardStudio.isDraftMode,\n                        draftCards: cardStudio.draftCards.length,\n                        progressPercentage: cardStudio.progressPercentage\n                    });\n                    window.lastStep5State = stateKey;\n                }\n            }\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_steps_Step5Review__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                formData: formData,\n                updateFormData: updateFormData,\n                onStepComplete: ()=>{\n                    if (!wizardState.completedSteps.includes(5)) {\n                        wizardState.markStepCompleted(5);\n                    }\n                },\n                isGenerating: cardStudio.isGenerating,\n                isGeneratingFinalCard: cardStudio.isGeneratingFinalCard,\n                isGeneratingMessage: cardStudio.isGeneratingMessage,\n                generationProgress: cardStudio.generationProgress,\n                progressPercentage: cardStudio.progressPercentage,\n                currentElapsedTime: cardStudio.currentElapsedTime,\n                isDraftMode: cardStudio.isDraftMode,\n                draftCards: cardStudio.draftCards,\n                selectedDraftIndex: cardStudio.selectedDraftIndex,\n                formatGenerationTime: cardStudio.formatGenerationTime,\n                onGenerateDraftCards: cardStudio.handleGenerateDraftCards,\n                onSelectDraft: (index)=>{\n                    cardStudio.setSelectedDraftIndex(index);\n                    // Auto-advance to final generation step when draft is selected\n                    if (!wizardState.completedSteps.includes(5)) {\n                        wizardState.markStepCompleted(5);\n                    }\n                    wizardState.updateCurrentStep(6);\n                }\n            }, void 0, false, {\n                fileName: \"/var/www/flask_app/ast_chat/components/wizard/CardWizardSteps.tsx\",\n                lineNumber: 144,\n                columnNumber: 9\n            }, this);\n        case 6:\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_steps_Step6FinalGeneration__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                formData: formData,\n                isGeneratingFinalCard: cardStudio.isGeneratingFinalCard,\n                generationProgress: cardStudio.generationProgress,\n                progressPercentage: cardStudio.progressPercentage,\n                currentElapsedTime: cardStudio.currentElapsedTime,\n                selectedDraftIndex: cardStudio.selectedDraftIndex,\n                draftCards: cardStudio.draftCards,\n                generatedCard: cardStudio.generatedCard,\n                isCardCompleted: cardStudio.isCardCompleted,\n                onGenerateFinalCard: cardStudio.handleGenerateFinalFromDraft,\n                formatGenerationTime: cardStudio.formatGenerationTime\n            }, void 0, false, {\n                fileName: \"/var/www/flask_app/ast_chat/components/wizard/CardWizardSteps.tsx\",\n                lineNumber: 176,\n                columnNumber: 9\n            }, this);\n        default:\n            return null;\n    }\n}\n_c = CardWizardSteps;\nvar _c;\n$RefreshReg$(_c, \"CardWizardSteps\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvd2l6YXJkL0NhcmRXaXphcmRTdGVwcy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFFMEI7QUFDNEI7QUFDVTtBQUNBO0FBQ2hCO0FBQ0Y7QUFDa0I7QUFrQnpELFNBQVNPLGdCQUFnQixLQWFUO1FBYlMsRUFDOUJDLFdBQVcsRUFDWEMsUUFBUSxFQUNSQyxjQUFjLEVBQ2RDLFVBQVUsRUFDVkMsV0FBVyxFQUNYQyx1QkFBdUIsRUFDdkJDLDJCQUEyQixFQUMzQkMsa0JBQWtCLEVBQ2xCQyxrQkFBa0IsRUFDbEJDLG9CQUFvQixFQUNwQkMsV0FBVyxFQUNYQyxpQkFBaUIsRUFDSSxHQWJTO0lBYzlCLE9BQVFYO1FBQ04sS0FBSztZQUNILHFCQUNFLDhEQUFDUCw4REFBZUE7Z0JBQ2RRLFVBQVVBO2dCQUNWQyxnQkFBZ0JBO2dCQUNoQlUsZ0JBQWdCO29CQUNkLElBQUksQ0FBQ1IsWUFBWVMsY0FBYyxDQUFDQyxRQUFRLENBQUMsSUFBSTt3QkFDM0NWLFlBQVlXLGlCQUFpQixDQUFDO29CQUNoQztnQkFDRjtnQkFDQUMsa0JBQWtCUDtnQkFDbEIsd0NBQXdDO2dCQUN4Q1Esa0JBQWtCWjtnQkFDbEJhLDRCQUE0QixDQUFDQztvQkFDM0IsdUNBQXVDO29CQUN2QyxNQUFNQyxZQUFZbkIsU0FBU29CLGVBQWUsQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLEdBQUdDLElBQU1BLE1BQU1MO29CQUNsRSxNQUFNTSxVQUFVeEIsU0FBU3lCLGtCQUFrQixDQUFDSixNQUFNLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUEsTUFBTUw7b0JBRW5FLDBCQUEwQjtvQkFDMUJoQixXQUFXd0Isa0JBQWtCLENBQUNQO29CQUM5QmpCLFdBQVd5QixxQkFBcUIsQ0FBQ0g7b0JBQ2pDdEIsV0FBV2UsMEJBQTBCLENBQUNDO29CQUV0QyxtQkFBbUI7b0JBQ25CakIsZUFBZTt3QkFDYm1CLGlCQUFpQkQ7d0JBQ2pCTSxvQkFBb0JE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dkM7b0JBQ2RoQixXQUFXd0QscUJBQXFCLENBQUN4QztvQkFDakMsK0RBQStEO29CQUMvRCxJQUFJLENBQUNmLFlBQVlTLGNBQWMsQ0FBQ0MsUUFBUSxDQUFDLElBQUk7d0JBQzNDVixZQUFZVyxpQkFBaUIsQ0FBQztvQkFDaEM7b0JBQ0FYLFlBQVl3RCxpQkFBaUIsQ0FBQztnQkFDaEM7Ozs7OztRQUlOLEtBQUs7WUFDSCxxQkFDRSw4REFBQzlELG1FQUFvQkE7Z0JBQ25CRyxVQUFVQTtnQkFDVmtELHVCQUF1QmhELFdBQVdnRCxxQkFBcUI7Z0JBQ3ZEQyxvQkFBb0JqRCxXQUFXaUQsa0JBQWtCO2dCQUNqREYsb0JBQW9CL0MsV0FBVytDLGtCQUFrQjtnQkFDakRHLG9CQUFvQmxELFdBQVdrRCxrQkFBa0I7Z0JBQ2pEQyxvQkFBb0JuRCxXQUFXbUQsa0JBQWtCO2dCQUNqRFYsWUFBWXpDLFdBQVd5QyxVQUFVO2dCQUNqQ2lCLGVBQWUxRCxXQUFXMEQsYUFBYTtnQkFDdkNDLGlCQUFpQjNELFdBQVcyRCxlQUFlO2dCQUMzQ0MscUJBQXFCNUQsV0FBVzZELDRCQUE0QjtnQkFDNURULHNCQUFzQnBELFdBQVdvRCxvQkFBb0I7Ozs7OztRQUkzRDtZQUNFLE9BQU87SUFDWDtBQUNGO0tBdktnQnhEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvd2l6YXJkL0NhcmRXaXphcmRTdGVwcy50c3g/ZDE3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFN0ZXAxQ2FyZEJhc2ljcyBmcm9tIFwiLi9zdGVwcy9TdGVwMUNhcmRCYXNpY3NcIjtcbmltcG9ydCBTdGVwMkNvbnRlbnRDcmVhdGlvbiBmcm9tIFwiLi9zdGVwcy9TdGVwMkNvbnRlbnRDcmVhdGlvblwiO1xuaW1wb3J0IFN0ZXAzUGVyc29uYWxpemF0aW9uIGZyb20gXCIuL3N0ZXBzL1N0ZXAzUGVyc29uYWxpemF0aW9uXCI7XG5pbXBvcnQgU3RlcDREZXRhaWxzIGZyb20gXCIuL3N0ZXBzL1N0ZXA0RGV0YWlsc1wiO1xuaW1wb3J0IFN0ZXA1UmV2aWV3IGZyb20gXCIuL3N0ZXBzL1N0ZXA1UmV2aWV3XCI7XG5pbXBvcnQgU3RlcDZGaW5hbEdlbmVyYXRpb24gZnJvbSBcIi4vc3RlcHMvU3RlcDZGaW5hbEdlbmVyYXRpb25cIjtcbmltcG9ydCB7IENhcmRGb3JtRGF0YSB9IGZyb20gXCJAL2hvb2tzL3VzZUNhcmRGb3JtXCI7XG5cbmludGVyZmFjZSBDYXJkV2l6YXJkU3RlcHNQcm9wcyB7XG4gIGN1cnJlbnRTdGVwOiBudW1iZXI7XG4gIGZvcm1EYXRhOiBDYXJkRm9ybURhdGE7XG4gIHVwZGF0ZUZvcm1EYXRhOiAodXBkYXRlczogYW55KSA9PiB2b2lkO1xuICBjYXJkU3R1ZGlvOiBhbnk7XG4gIHdpemFyZFN0YXRlOiBhbnk7XG4gIGhhbmRsZUZpbGVVcGxvYWRXcmFwcGVyOiAoZmlsZTogRmlsZSwgdHlwZTogJ2hhbmR3cml0aW5nJyB8ICdyZWZlcmVuY2UnKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBoYW5kbGVHZXRNZXNzYWdlSGVscFdyYXBwZXI6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIHVuZG9NZXNzYWdlV3JhcHBlcjogKCkgPT4gdm9pZDtcbiAgcmVkb01lc3NhZ2VXcmFwcGVyOiAoKSA9PiB2b2lkO1xuICBoYW5kbGVUZW1wbGF0ZVNlbGVjdDogKHRlbXBsYXRlOiBhbnkpID0+IHZvaWQ7XG4gIGNhcmRIaXN0b3J5PzogYW55O1xuICBoYW5kbGVSZXN1bWVEcmFmdD86IChzZXNzaW9uSWQ6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIENhcmRXaXphcmRTdGVwcyh7XG4gIGN1cnJlbnRTdGVwLFxuICBmb3JtRGF0YSxcbiAgdXBkYXRlRm9ybURhdGEsXG4gIGNhcmRTdHVkaW8sXG4gIHdpemFyZFN0YXRlLFxuICBoYW5kbGVGaWxlVXBsb2FkV3JhcHBlcixcbiAgaGFuZGxlR2V0TWVzc2FnZUhlbHBXcmFwcGVyLFxuICB1bmRvTWVzc2FnZVdyYXBwZXIsXG4gIHJlZG9NZXNzYWdlV3JhcHBlcixcbiAgaGFuZGxlVGVtcGxhdGVTZWxlY3QsXG4gIGNhcmRIaXN0b3J5LFxuICBoYW5kbGVSZXN1bWVEcmFmdFxufTogQ2FyZFdpemFyZFN0ZXBzUHJvcHMpIHtcbiAgc3dpdGNoIChjdXJyZW50U3RlcCkge1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxTdGVwMUNhcmRCYXNpY3NcbiAgICAgICAgICBmb3JtRGF0YT17Zm9ybURhdGF9XG4gICAgICAgICAgdXBkYXRlRm9ybURhdGE9e3VwZGF0ZUZvcm1EYXRhfVxuICAgICAgICAgIG9uU3RlcENvbXBsZXRlPXsoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKDEpKSB7XG4gICAgICAgICAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgICAgb25UZW1wbGF0ZVNlbGVjdD17aGFuZGxlVGVtcGxhdGVTZWxlY3R9XG4gICAgICAgICAgLy8gUGhvdG8gdXBsb2FkIHByb3BzIChtb3ZlZCBmcm9tIFN0ZXAzKVxuICAgICAgICAgIGhhbmRsZUZpbGVVcGxvYWQ9e2hhbmRsZUZpbGVVcGxvYWRXcmFwcGVyfVxuICAgICAgICAgIGhhbmRsZVJlbW92ZVJlZmVyZW5jZUltYWdlPXsoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgLy8gVXBkYXRlIGJvdGggY2FyZFN0dWRpbyBhbmQgZm9ybSBkYXRhXG4gICAgICAgICAgICBjb25zdCBuZXdJbWFnZXMgPSBmb3JtRGF0YS5yZWZlcmVuY2VJbWFnZXMuZmlsdGVyKChfLCBpKSA9PiBpICE9PSBpbmRleCk7XG4gICAgICAgICAgICBjb25zdCBuZXdVcmxzID0gZm9ybURhdGEucmVmZXJlbmNlSW1hZ2VVcmxzLmZpbHRlcigoXywgaSkgPT4gaSAhPT0gaW5kZXgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2FyZFN0dWRpbyBzdGF0ZVxuICAgICAgICAgICAgY2FyZFN0dWRpby5zZXRSZWZlcmVuY2VJbWFnZXMobmV3SW1hZ2VzKTtcbiAgICAgICAgICAgIGNhcmRTdHVkaW8uc2V0UmVmZXJlbmNlSW1hZ2VVcmxzKG5ld1VybHMpO1xuICAgICAgICAgICAgY2FyZFN0dWRpby5oYW5kbGVSZW1vdmVSZWZlcmVuY2VJbWFnZShpbmRleCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBmb3JtIGRhdGFcbiAgICAgICAgICAgIHVwZGF0ZUZvcm1EYXRhKHtcbiAgICAgICAgICAgICAgcmVmZXJlbmNlSW1hZ2VzOiBuZXdJbWFnZXMsXG4gICAgICAgICAgICAgIHJlZmVyZW5jZUltYWdlVXJsczogbmV3VXJsc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBpc1VwbG9hZGluZz17Y2FyZFN0dWRpby5pc1VwbG9hZGluZ31cbiAgICAgICAgICAvLyBTaW1wbGlmaWVkIHBob3RvIHJlZmVyZW5jZXNcbiAgICAgICAgICBwaG90b1JlZmVyZW5jZXM9e2NhcmRTdHVkaW8ucGhvdG9SZWZlcmVuY2VzfVxuICAgICAgICAgIHVwZGF0ZVBob3RvRGVzY3JpcHRpb249e2NhcmRTdHVkaW8udXBkYXRlUGhvdG9EZXNjcmlwdGlvbn1cbiAgICAgICAgICAvLyBQYXNzIGNhcmRTdHVkaW8ncyBVUkxzIGRpcmVjdGx5IGZvciBpbW1lZGlhdGUgYWNjZXNzXG4gICAgICAgICAgcmVmZXJlbmNlSW1hZ2VVcmxzRnJvbVN0dWRpbz17Y2FyZFN0dWRpby5yZWZlcmVuY2VJbWFnZVVybHN9XG4gICAgICAgICAgLy8gQ2FyZCBoaXN0b3J5IHByb3BzXG4gICAgICAgICAgY2FyZEhpc3Rvcnk9e2NhcmRIaXN0b3J5fVxuICAgICAgICAgIG9uUmVzdW1lRHJhZnQ9e2hhbmRsZVJlc3VtZURyYWZ0fVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICBcbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8U3RlcDJDb250ZW50Q3JlYXRpb25cbiAgICAgICAgICBmb3JtRGF0YT17Zm9ybURhdGF9XG4gICAgICAgICAgdXBkYXRlRm9ybURhdGE9e3VwZGF0ZUZvcm1EYXRhfVxuICAgICAgICAgIG9uU3RlcENvbXBsZXRlPXsoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKDIpKSB7XG4gICAgICAgICAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgICAgaGFuZGxlR2V0TWVzc2FnZUhlbHA9e2hhbmRsZUdldE1lc3NhZ2VIZWxwV3JhcHBlcn1cbiAgICAgICAgICBpc0dlbmVyYXRpbmdNZXNzYWdlPXtjYXJkU3R1ZGlvLmlzR2VuZXJhdGluZ01lc3NhZ2V9XG4gICAgICAgICAgbWVzc2FnZUhpc3Rvcnk9e2NhcmRTdHVkaW8ubWVzc2FnZUhpc3Rvcnl9XG4gICAgICAgICAgY3VycmVudE1lc3NhZ2VJbmRleD17Y2FyZFN0dWRpby5jdXJyZW50TWVzc2FnZUluZGV4fVxuICAgICAgICAgIHVuZG9NZXNzYWdlPXt1bmRvTWVzc2FnZVdyYXBwZXJ9XG4gICAgICAgICAgcmVkb01lc3NhZ2U9e3JlZG9NZXNzYWdlV3JhcHBlcn1cbiAgICAgICAgICBwaG90b1JlZmVyZW5jZXM9e2NhcmRTdHVkaW8ucGhvdG9SZWZlcmVuY2VzfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICBcbiAgICBjYXNlIDM6XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8U3RlcDNQZXJzb25hbGl6YXRpb25cbiAgICAgICAgICBmb3JtRGF0YT17Zm9ybURhdGF9XG4gICAgICAgICAgdXBkYXRlRm9ybURhdGE9e3VwZGF0ZUZvcm1EYXRhfVxuICAgICAgICAgIG9uU3RlcENvbXBsZXRlPXsoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKDMpKSB7XG4gICAgICAgICAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIFxuICAgIGNhc2UgNDpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxTdGVwNERldGFpbHNcbiAgICAgICAgICBmb3JtRGF0YT17Zm9ybURhdGF9XG4gICAgICAgICAgdXBkYXRlRm9ybURhdGE9e3VwZGF0ZUZvcm1EYXRhfVxuICAgICAgICAgIG9uU3RlcENvbXBsZXRlPXsoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKDQpKSB7XG4gICAgICAgICAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIFxuICAgIGNhc2UgNTpcbiAgICAgIC8vIExvZyBvbmx5IHNpZ25pZmljYW50IHN0YXRlIGNoYW5nZXNcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICBjb25zdCBzdGF0ZUtleSA9IGAke2NhcmRTdHVkaW8uaXNHZW5lcmF0aW5nfS0ke2NhcmRTdHVkaW8uaXNEcmFmdE1vZGV9LSR7Y2FyZFN0dWRpby5kcmFmdENhcmRzLmxlbmd0aH1gO1xuICAgICAgICBpZiAoKHdpbmRvdyBhcyBhbnkpLmxhc3RTdGVwNVN0YXRlICE9PSBzdGF0ZUtleSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5ONIFN0ZXAgNSBzdGF0ZSBjaGFuZ2VkOicsIHtcbiAgICAgICAgICAgIGlzR2VuZXJhdGluZzogY2FyZFN0dWRpby5pc0dlbmVyYXRpbmcsXG4gICAgICAgICAgICBpc0RyYWZ0TW9kZTogY2FyZFN0dWRpby5pc0RyYWZ0TW9kZSxcbiAgICAgICAgICAgIGRyYWZ0Q2FyZHM6IGNhcmRTdHVkaW8uZHJhZnRDYXJkcy5sZW5ndGgsXG4gICAgICAgICAgICBwcm9ncmVzc1BlcmNlbnRhZ2U6IGNhcmRTdHVkaW8ucHJvZ3Jlc3NQZXJjZW50YWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgKHdpbmRvdyBhcyBhbnkpLmxhc3RTdGVwNVN0YXRlID0gc3RhdGVLZXk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxTdGVwNVJldmlld1xuICAgICAgICAgIGZvcm1EYXRhPXtmb3JtRGF0YX1cbiAgICAgICAgICB1cGRhdGVGb3JtRGF0YT17dXBkYXRlRm9ybURhdGF9XG4gICAgICAgICAgb25TdGVwQ29tcGxldGU9eygpID0+IHtcbiAgICAgICAgICAgIGlmICghd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoNSkpIHtcbiAgICAgICAgICAgICAgd2l6YXJkU3RhdGUubWFya1N0ZXBDb21wbGV0ZWQoNSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX1cbiAgICAgICAgICBpc0dlbmVyYXRpbmc9e2NhcmRTdHVkaW8uaXNHZW5lcmF0aW5nfVxuICAgICAgICAgIGlzR2VuZXJhdGluZ0ZpbmFsQ2FyZD17Y2FyZFN0dWRpby5pc0dlbmVyYXRpbmdGaW5hbENhcmR9XG4gICAgICAgICAgaXNHZW5lcmF0aW5nTWVzc2FnZT17Y2FyZFN0dWRpby5pc0dlbmVyYXRpbmdNZXNzYWdlfVxuICAgICAgICAgIGdlbmVyYXRpb25Qcm9ncmVzcz17Y2FyZFN0dWRpby5nZW5lcmF0aW9uUHJvZ3Jlc3N9XG4gICAgICAgICAgcHJvZ3Jlc3NQZXJjZW50YWdlPXtjYXJkU3R1ZGlvLnByb2dyZXNzUGVyY2VudGFnZX1cbiAgICAgICAgICBjdXJyZW50RWxhcHNlZFRpbWU9e2NhcmRTdHVkaW8uY3VycmVudEVsYXBzZWRUaW1lfVxuICAgICAgICAgIGlzRHJhZnRNb2RlPXtjYXJkU3R1ZGlvLmlzRHJhZnRNb2RlfVxuICAgICAgICAgIGRyYWZ0Q2FyZHM9e2NhcmRTdHVkaW8uZHJhZnRDYXJkc31cbiAgICAgICAgICBzZWxlY3RlZERyYWZ0SW5kZXg9e2NhcmRTdHVkaW8uc2VsZWN0ZWREcmFmdEluZGV4fVxuICAgICAgICAgIGZvcm1hdEdlbmVyYXRpb25UaW1lPXtjYXJkU3R1ZGlvLmZvcm1hdEdlbmVyYXRpb25UaW1lfVxuICAgICAgICAgIG9uR2VuZXJhdGVEcmFmdENhcmRzPXtjYXJkU3R1ZGlvLmhhbmRsZUdlbmVyYXRlRHJhZnRDYXJkc31cbiAgICAgICAgICBvblNlbGVjdERyYWZ0PXsoaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNhcmRTdHVkaW8uc2V0U2VsZWN0ZWREcmFmdEluZGV4KGluZGV4KTtcbiAgICAgICAgICAgIC8vIEF1dG8tYWR2YW5jZSB0byBmaW5hbCBnZW5lcmF0aW9uIHN0ZXAgd2hlbiBkcmFmdCBpcyBzZWxlY3RlZFxuICAgICAgICAgICAgaWYgKCF3aXphcmRTdGF0ZS5jb21wbGV0ZWRTdGVwcy5pbmNsdWRlcyg1KSkge1xuICAgICAgICAgICAgICB3aXphcmRTdGF0ZS5tYXJrU3RlcENvbXBsZXRlZCg1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdpemFyZFN0YXRlLnVwZGF0ZUN1cnJlbnRTdGVwKDYpO1xuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIFxuICAgIGNhc2UgNjpcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxTdGVwNkZpbmFsR2VuZXJhdGlvblxuICAgICAgICAgIGZvcm1EYXRhPXtmb3JtRGF0YX1cbiAgICAgICAgICBpc0dlbmVyYXRpbmdGaW5hbENhcmQ9e2NhcmRTdHVkaW8uaXNHZW5lcmF0aW5nRmluYWxDYXJkfVxuICAgICAgICAgIGdlbmVyYXRpb25Qcm9ncmVzcz17Y2FyZFN0dWRpby5nZW5lcmF0aW9uUHJvZ3Jlc3N9XG4gICAgICAgICAgcHJvZ3Jlc3NQZXJjZW50YWdlPXtjYXJkU3R1ZGlvLnByb2dyZXNzUGVyY2VudGFnZX1cbiAgICAgICAgICBjdXJyZW50RWxhcHNlZFRpbWU9e2NhcmRTdHVkaW8uY3VycmVudEVsYXBzZWRUaW1lfVxuICAgICAgICAgIHNlbGVjdGVkRHJhZnRJbmRleD17Y2FyZFN0dWRpby5zZWxlY3RlZERyYWZ0SW5kZXh9XG4gICAgICAgICAgZHJhZnRDYXJkcz17Y2FyZFN0dWRpby5kcmFmdENhcmRzfVxuICAgICAgICAgIGdlbmVyYXRlZENhcmQ9e2NhcmRTdHVkaW8uZ2VuZXJhdGVkQ2FyZH1cbiAgICAgICAgICBpc0NhcmRDb21wbGV0ZWQ9e2NhcmRTdHVkaW8uaXNDYXJkQ29tcGxldGVkfVxuICAgICAgICAgIG9uR2VuZXJhdGVGaW5hbENhcmQ9e2NhcmRTdHVkaW8uaGFuZGxlR2VuZXJhdGVGaW5hbEZyb21EcmFmdH1cbiAgICAgICAgICBmb3JtYXRHZW5lcmF0aW9uVGltZT17Y2FyZFN0dWRpby5mb3JtYXRHZW5lcmF0aW9uVGltZX1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59Il0sIm5hbWVzIjpbIlJlYWN0IiwiU3RlcDFDYXJkQmFzaWNzIiwiU3RlcDJDb250ZW50Q3JlYXRpb24iLCJTdGVwM1BlcnNvbmFsaXphdGlvbiIsIlN0ZXA0RGV0YWlscyIsIlN0ZXA1UmV2aWV3IiwiU3RlcDZGaW5hbEdlbmVyYXRpb24iLCJDYXJkV2l6YXJkU3RlcHMiLCJjdXJyZW50U3RlcCIsImZvcm1EYXRhIiwidXBkYXRlRm9ybURhdGEiLCJjYXJkU3R1ZGlvIiwid2l6YXJkU3RhdGUiLCJoYW5kbGVGaWxlVXBsb2FkV3JhcHBlciIsImhhbmRsZUdldE1lc3NhZ2VIZWxwV3JhcHBlciIsInVuZG9NZXNzYWdlV3JhcHBlciIsInJlZG9NZXNzYWdlV3JhcHBlciIsImhhbmRsZVRlbXBsYXRlU2VsZWN0IiwiY2FyZEhpc3RvcnkiLCJoYW5kbGVSZXN1bWVEcmFmdCIsIm9uU3RlcENvbXBsZXRlIiwiY29tcGxldGVkU3RlcHMiLCJpbmNsdWRlcyIsIm1hcmtTdGVwQ29tcGxldGVkIiwib25UZW1wbGF0ZVNlbGVjdCIsImhhbmRsZUZpbGVVcGxvYWQiLCJoYW5kbGVSZW1vdmVSZWZlcmVuY2VJbWFnZSIsImluZGV4IiwibmV3SW1hZ2VzIiwicmVmZXJlbmNlSW1hZ2VzIiwiZmlsdGVyIiwiXyIsImkiLCJuZXdVcmxzIiwicmVmZXJlbmNlSW1hZ2VVcmxzIiwic2V0UmVmZXJlbmNlSW1hZ2VzIiwic2V0UmVmZXJlbmNlSW1hZ2VVcmxzIiwiaXNVcGxvYWRpbmciLCJwaG90b1JlZmVyZW5jZXMiLCJ1cGRhdGVQaG90b0Rlc2NyaXB0aW9uIiwicmVmZXJlbmNlSW1hZ2VVcmxzRnJvbVN0dWRpbyIsIm9uUmVzdW1lRHJhZnQiLCJoYW5kbGVHZXRNZXNzYWdlSGVscCIsImlzR2VuZXJhdGluZ01lc3NhZ2UiLCJtZXNzYWdlSGlzdG9yeSIsImN1cnJlbnRNZXNzYWdlSW5kZXgiLCJ1bmRvTWVzc2FnZSIsInJlZG9NZXNzYWdlIiwicHJvY2VzcyIsInN0YXRlS2V5IiwiaXNHZW5lcmF0aW5nIiwiaXNEcmFmdE1vZGUiLCJkcmFmdENhcmRzIiwibGVuZ3RoIiwid2luZG93IiwibGFzdFN0ZXA1U3RhdGUiLCJjb25zb2xlIiwibG9nIiwicHJvZ3Jlc3NQZXJjZW50YWdlIiwiaXNHZW5lcmF0aW5nRmluYWxDYXJkIiwiZ2VuZXJhdGlvblByb2dyZXNzIiwiY3VycmVudEVsYXBzZWRUaW1lIiwic2VsZWN0ZWREcmFmdEluZGV4IiwiZm9ybWF0R2VuZXJhdGlvblRpbWUiLCJvbkdlbmVyYXRlRHJhZnRDYXJkcyIsImhhbmRsZUdlbmVyYXRlRHJhZnRDYXJkcyIsIm9uU2VsZWN0RHJhZnQiLCJzZXRTZWxlY3RlZERyYWZ0SW5kZXgiLCJ1cGRhdGVDdXJyZW50U3RlcCIsImdlbmVyYXRlZENhcmQiLCJpc0NhcmRDb21wbGV0ZWQiLCJvbkdlbmVyYXRlRmluYWxDYXJkIiwiaGFuZGxlR2VuZXJhdGVGaW5hbEZyb21EcmFmdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/wizard/CardWizardSteps.tsx\n"));

/***/ })

});