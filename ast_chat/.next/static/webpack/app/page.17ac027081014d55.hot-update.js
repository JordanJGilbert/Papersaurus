"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/wizard/CardWizardEffects.tsx":
/*!*************************************************!*\
  !*** ./components/wizard/CardWizardEffects.tsx ***!
  \*************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CardWizardEffects: function() { return /* binding */ CardWizardEffects; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ CardWizardEffects auto */ var _s = $RefreshSig$();\n\nfunction CardWizardEffects(param) {\n    let { cardStudio, cardForm, cardHistory, wizardState, updateWizardState, isResumingDraft, isRestoringJobs } = param;\n    _s();\n    // Track the current session ID to update the same session\n    const [currentDraftSessionId, setCurrentDraftSessionId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [lastSavedDraftCount, setLastSavedDraftCount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    // Check for pending jobs on component mount but don't auto-navigate\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const restorePendingJobs = async ()=>{\n            console.log(\"\\uD83D\\uDD04 CardWizardEffects: Starting checkPendingJobs...\");\n            // First check for saved draft session\n            let currentSession = null;\n            try {\n                currentSession = JSON.parse(localStorage.getItem(\"vibe-current-draft-session\") || \"null\");\n            } catch (e) {\n                currentSession = null;\n            }\n            if (currentSession && currentSession.draftCards && currentSession.draftCards.length > 0) {\n                console.log(\"\\uD83D\\uDD04 Found saved draft session with\", currentSession.draftCards.length, \"drafts\");\n                // Restore draft cards\n                cardStudio.setDraftCards(currentSession.draftCards);\n                cardStudio.setIsDraftMode(true);\n                // Restore form data if needed\n                if (currentSession.formData) {\n                    cardForm.updateFormData(currentSession.formData);\n                }\n                // Navigate to Step 5 to show the drafts\n                console.log(\"\\uD83D\\uDD04 Restoring to Step 5 with saved drafts\");\n                for(let i = 1; i <= 4; i++){\n                    if (!wizardState.completedSteps.includes(i)) wizardState.markStepCompleted(i);\n                }\n                wizardState.updateCurrentStep(5);\n                // Set the current session ID for updates\n                setCurrentDraftSessionId(currentSession.id);\n                setLastSavedDraftCount(currentSession.draftCards.length);\n                return; // Skip pending jobs check if we restored a draft session\n            }\n            await cardStudio.checkPendingJobs();\n            // Only auto-navigate if there's an active generation in progress\n            // Don't navigate for completed drafts - let user choose\n            if (cardStudio.isGenerating && cardStudio.generationProgress) {\n                if (cardStudio.isGeneratingFinalCard) {\n                    console.log(\"\\uD83D\\uDD04 Restoring to Step 6 due to ongoing final generation\");\n                    // Mark all previous steps as completed\n                    for(let i = 1; i <= 5; i++){\n                        if (!wizardState.completedSteps.includes(i)) wizardState.markStepCompleted(i);\n                    }\n                    wizardState.updateCurrentStep(6);\n                } else if (cardStudio.isDraftMode && cardStudio.isGenerating) {\n                    console.log(\"\\uD83D\\uDD04 Restoring to Step 5 due to ongoing draft generation\");\n                    // Mark previous steps as completed\n                    if (!wizardState.completedSteps.includes(1)) wizardState.markStepCompleted(1);\n                    if (!wizardState.completedSteps.includes(2)) wizardState.markStepCompleted(2);\n                    if (!wizardState.completedSteps.includes(3)) wizardState.markStepCompleted(3);\n                    if (!wizardState.completedSteps.includes(4)) wizardState.markStepCompleted(4);\n                    wizardState.updateCurrentStep(5);\n                }\n            } else {\n                // No active generation - reset wizard to step 1 if we're on a later step\n                // This handles the case where user left off on step 5 but isn't actively generating\n                if (wizardState.currentStep > 1 && !cardStudio.isGenerating) {\n                    console.log(\"\\uD83D\\uDD04 No active generation, resetting to Step 1\");\n                    wizardState.updateCurrentStep(1);\n                }\n            }\n        // If we have completed drafts but no active generation, stay on Step 1\n        // User can choose to resume via the UI\n        };\n        restorePendingJobs();\n    }, []);\n    // Only mark step 1 as completed if user has made selections, but don't auto-advance\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!wizardState.isInitialLoadComplete || !cardForm.isInitialLoadComplete) return;\n        // Only mark step as completed, don't navigate\n        if (wizardState.currentStep === 1 && !wizardState.completedSteps.includes(1)) {\n            const formData = cardForm.formData;\n            // Mark step 1 as completed if user has made selections\n            if (formData.selectedType && formData.selectedTone) {\n                console.log(\"âœ… Marking step 1 as completed based on saved data\");\n                wizardState.markStepCompleted(1);\n            }\n        }\n    }, [\n        wizardState.isInitialLoadComplete,\n        cardForm.isInitialLoadComplete\n    ]);\n    // Only navigate to Step 5 when NEW draft cards are being generated (not restored)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Only navigate if we're actively generating NEW drafts, not restoring old ones\n        if (cardStudio.draftCards.length > 0 && wizardState.currentStep < 5 && cardStudio.isGenerating && !isRestoringJobs) {\n            console.log(\"\\uD83D\\uDCCB New draft cards being generated, navigating to Step 5\");\n            // Mark previous steps as completed\n            for(let i = 1; i <= 4; i++){\n                if (!wizardState.completedSteps.includes(i)) {\n                    wizardState.markStepCompleted(i);\n                }\n            }\n            wizardState.updateCurrentStep(5);\n        }\n    }, [\n        cardStudio.draftCards.length,\n        cardStudio.isGenerating,\n        isRestoringJobs\n    ]);\n    // Auto-save drafts when user creates draft cards\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Only save if we have draft cards and not resuming or restoring\n        if (cardStudio.draftCards.length > 0) {\n            console.log(\"\\uD83D\\uDD0D Auto-save check:\", {\n                hasCards: cardStudio.draftCards.length > 0,\n                isInitialLoadComplete: cardForm.isInitialLoadComplete,\n                isResumingDraft,\n                isRestoringJobs,\n                shouldSave: cardForm.isInitialLoadComplete && !isResumingDraft && !isRestoringJobs\n            });\n        }\n        if (cardStudio.draftCards.length > 0 && cardForm.isInitialLoadComplete && !isResumingDraft && !isRestoringJobs) {\n            // Count non-null draft cards\n            const validDrafts = cardStudio.draftCards.filter((card)=>card !== null).length;\n            // Only save when:\n            // 1. All 5 drafts are complete (validDrafts === 5)\n            // 2. This is the first draft and we haven't saved yet (validDrafts === 1 && !currentDraftSessionId)\n            // 3. User selected a draft (selectedDraftIndex >= 0)\n            const shouldSave = validDrafts === 5 && lastSavedDraftCount < 5 || // All drafts complete\n            validDrafts === 1 && !currentDraftSessionId || // First draft\n            cardStudio.selectedDraftIndex >= 0 && validDrafts > lastSavedDraftCount // User selected\n            ;\n            if (shouldSave && validDrafts > 0) {\n                // Save or update the session with the same ID\n                const sessionId = cardHistory.saveDraftSession(cardForm.formData, cardStudio.draftCards, cardStudio.selectedDraftIndex, currentDraftSessionId || undefined // Use existing session ID if available\n                );\n                // Store the session ID for future updates\n                if (!currentDraftSessionId) {\n                    setCurrentDraftSessionId(sessionId);\n                }\n                // Update the last saved count\n                setLastSavedDraftCount(validDrafts);\n                console.log(\"\\uD83D\\uDCBE Draft session saved: \".concat(validDrafts, \"/5 drafts complete\"));\n            }\n        }\n    }, [\n        cardStudio.draftCards,\n        cardStudio.selectedDraftIndex,\n        cardForm.formData,\n        cardForm.isInitialLoadComplete,\n        isResumingDraft,\n        isRestoringJobs,\n        currentDraftSessionId,\n        lastSavedDraftCount\n    ]);\n    // Reset session ID when drafts are cleared\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const validDrafts = cardStudio.draftCards.filter((card)=>card !== null).length;\n        if (validDrafts === 0) {\n            setCurrentDraftSessionId(null);\n            setLastSavedDraftCount(0);\n        }\n    }, [\n        cardStudio.draftCards\n    ]);\n    // Auto-save completed cards and ensure we're on Step 6\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardStudio.generatedCard && cardStudio.isCardCompleted) {\n            cardHistory.addCompletedCard(cardStudio.generatedCard);\n            // Ensure we're on Step 6 to see the completed card\n            if (wizardState.currentStep !== 6) {\n                console.log(\"\\uD83D\\uDCCD Card completed but not on Step 6, navigating there now...\");\n                wizardState.updateCurrentStep(6);\n            }\n        }\n    }, [\n        cardStudio.generatedCard,\n        cardStudio.isCardCompleted,\n        wizardState.currentStep\n    ]);\n    // Sync form data with cardStudio when form data changes\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!cardForm.isInitialLoadComplete) return;\n        const { formData } = cardForm;\n        // Update cardStudio with form data\n        cardStudio.setSelectedType(formData.selectedType);\n        cardStudio.setCustomCardType(formData.customCardType);\n        cardStudio.setSelectedTone(formData.selectedTone);\n        cardStudio.setToField(formData.toField);\n        cardStudio.setFromField(formData.fromField);\n        cardStudio.setRelationshipField(formData.relationshipField);\n        cardStudio.setPrompt(formData.prompt);\n        cardStudio.setFinalCardMessage(formData.finalCardMessage);\n        cardStudio.setIsHandwrittenMessage(formData.isHandwrittenMessage);\n        cardStudio.setSelectedArtisticStyle(formData.selectedArtisticStyle);\n        cardStudio.setCustomStyleDescription(formData.customStyleDescription);\n        // Skip syncing reference images from form to cardStudio\n        // This should only flow from cardStudio -> form after uploads\n        // cardStudio.setReferenceImages(formData.referenceImages);\n        // cardStudio.setReferenceImageUrls(formData.referenceImageUrls);\n        cardStudio.setUserEmail(formData.userEmail);\n        cardStudio.setSelectedImageModel(formData.selectedImageModel);\n        cardStudio.setSelectedDraftModel(formData.selectedDraftModel);\n        cardStudio.setSelectedPaperSize(formData.selectedPaperSize);\n        cardStudio.setNumberOfCards(formData.numberOfCards);\n        cardStudio.setIsFrontBackOnly(formData.isFrontBackOnly);\n    }, [\n        cardForm.formData,\n        cardForm.isInitialLoadComplete\n    ]);\n    // Auto-complete step 1 once user makes selections\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardForm.validateStep(1) && !wizardState.completedSteps.includes(1)) {\n            wizardState.markStepCompleted(1);\n        }\n    }, [\n        cardForm.formData.selectedType,\n        cardForm.formData.selectedTone,\n        cardForm.formData.customCardType,\n        wizardState\n    ]);\n    // Auto-complete step 4 once email is valid\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardForm.validateStep(4) && !wizardState.completedSteps.includes(4)) {\n            wizardState.markStepCompleted(4);\n        }\n    }, [\n        cardForm.formData.userEmail,\n        wizardState\n    ]);\n    // Auto-advance to Step 6 when final card generation starts\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardStudio.isGeneratingFinalCard && wizardState.currentStep < 6) {\n            console.log(\"\\uD83D\\uDE80 Auto-advancing to Step 6: Final Generation\");\n            if (!wizardState.completedSteps.includes(5)) {\n                wizardState.markStepCompleted(5);\n            }\n            wizardState.updateCurrentStep(6);\n        }\n    }, [\n        cardStudio.isGeneratingFinalCard,\n        wizardState\n    ]);\n    // Sync reference images from cardStudio to form when they change\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!cardForm.isInitialLoadComplete) return;\n        // Sync if cardStudio has images but form doesn't, or if photoReferences changed\n        const shouldSync = cardStudio.referenceImageUrls.length > 0 && cardForm.formData.referenceImageUrls.length !== cardStudio.referenceImageUrls.length || cardStudio.photoReferences && cardStudio.photoReferences !== cardForm.formData.photoReferences;\n        if (shouldSync) {\n            cardForm.updateFormData({\n                referenceImages: cardStudio.referenceImages,\n                referenceImageUrls: cardStudio.referenceImageUrls,\n                photoReferences: cardStudio.photoReferences\n            });\n        }\n    }, [\n        cardStudio.referenceImageUrls,\n        cardStudio.referenceImages,\n        cardStudio.photoReferences,\n        cardForm.isInitialLoadComplete\n    ]);\n    return null;\n}\n_s(CardWizardEffects, \"8icF1iS0y70QOL81ZXfYgpSjIkA=\");\n_c = CardWizardEffects;\nvar _c;\n$RefreshReg$(_c, \"CardWizardEffects\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvd2l6YXJkL0NhcmRXaXphcmRFZmZlY3RzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRTRDO0FBZXJDLFNBQVNFLGtCQUFrQixLQVFUO1FBUlMsRUFDaENDLFVBQVUsRUFDVkMsUUFBUSxFQUNSQyxXQUFXLEVBQ1hDLFdBQVcsRUFDWEMsaUJBQWlCLEVBQ2pCQyxlQUFlLEVBQ2ZDLGVBQWUsRUFDUSxHQVJTOztJQVNoQywwREFBMEQ7SUFDMUQsTUFBTSxDQUFDQyx1QkFBdUJDLHlCQUF5QixHQUFHViwrQ0FBUUEsQ0FBZ0I7SUFDbEYsTUFBTSxDQUFDVyxxQkFBcUJDLHVCQUF1QixHQUFHWiwrQ0FBUUEsQ0FBUztJQUN2RSxvRUFBb0U7SUFDcEVELGdEQUFTQSxDQUFDO1FBQ1IsTUFBTWMscUJBQXFCO1lBQ3pCQyxRQUFRQyxHQUFHLENBQUM7WUFFWixzQ0FBc0M7WUFDdEMsSUFBSUMsaUJBQWlCO1lBQ3JCLElBQUk7Z0JBQ0ZBLGlCQUFpQkMsS0FBS0MsS0FBSyxDQUFDQyxhQUFhQyxPQUFPLENBQUMsaUNBQWlDO1lBQ3BGLEVBQUUsVUFBTTtnQkFDTkosaUJBQWlCO1lBQ25CO1lBQ0EsSUFBSUEsa0JBQWtCQSxlQUFlSyxVQUFVLElBQUlMLGVBQWVLLFVBQVUsQ0FBQ0MsTUFBTSxHQUFHLEdBQUc7Z0JBQ3ZGUixRQUFRQyxHQUFHLENBQUMsK0NBQXFDQyxlQUFlSyxVQUFVLENBQUNDLE1BQU0sRUFBRTtnQkFFbkYsc0JBQXNCO2dCQUN0QnBCLFdBQVdxQixhQUFhLENBQUNQLGVBQWVLLFVBQVU7Z0JBQ2xEbkIsV0FBV3NCLGNBQWMsQ0FBQztnQkFFMUIsOEJBQThCO2dCQUM5QixJQUFJUixlQUFlUyxRQUFRLEVBQUU7b0JBQzNCdEIsU0FBU3VCLGNBQWMsQ0FBQ1YsZUFBZVMsUUFBUTtnQkFDakQ7Z0JBRUEsd0NBQXdDO2dCQUN4Q1gsUUFBUUMsR0FBRyxDQUFDO2dCQUNaLElBQUssSUFBSVksSUFB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QVEsQ0FBQytELGtCQUFrQixDQUFDbEUsTUFBTSxLQUFLcEIsV0FBV3NGLGtCQUFrQixDQUFDbEUsTUFBTSxJQUNwRnBCLFdBQVd1RixlQUFlLElBQUl2RixXQUFXdUYsZUFBZSxLQUFLdEYsU0FBU3NCLFFBQVEsQ0FBQ2dFLGVBQWU7UUFHakcsSUFBSUYsWUFBWTtZQUNkcEYsU0FBU3VCLGNBQWMsQ0FBQztnQkFDdEJnRSxpQkFBaUJ4RixXQUFXd0YsZUFBZTtnQkFDM0NGLG9CQUFvQnRGLFdBQVdzRixrQkFBa0I7Z0JBQ2pEQyxpQkFBaUJ2RixXQUFXdUYsZUFBZTtZQUM3QztRQUNGO0lBQ0YsR0FBRztRQUFDdkYsV0FBV3NGLGtCQUFrQjtRQUFFdEYsV0FBV3dGLGVBQWU7UUFBRXhGLFdBQVd1RixlQUFlO1FBQUV0RixTQUFTb0MscUJBQXFCO0tBQUM7SUFFMUgsT0FBTztBQUNUO0dBMVFnQnRDO0tBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvd2l6YXJkL0NhcmRXaXphcmRFZmZlY3RzLnRzeD9kYTQ2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBDYXJkRm9ybURhdGEgfSBmcm9tIFwiQC9ob29rcy91c2VDYXJkRm9ybVwiO1xuaW1wb3J0IHsgR2VuZXJhdGVkQ2FyZCB9IGZyb20gXCJAL2hvb2tzL2NhcmRTdHVkaW8vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBzdG9yYWdlIH0gZnJvbSBcIkAvbGliL3N0b3JhZ2VNYW5hZ2VyXCI7XG5cbmludGVyZmFjZSBDYXJkV2l6YXJkRWZmZWN0c1Byb3BzIHtcbiAgY2FyZFN0dWRpbzogYW55O1xuICBjYXJkRm9ybTogYW55O1xuICBjYXJkSGlzdG9yeTogYW55O1xuICB3aXphcmRTdGF0ZTogYW55O1xuICB1cGRhdGVXaXphcmRTdGF0ZTogKHVwZGF0ZXM6IGFueSkgPT4gdm9pZDtcbiAgaXNSZXN1bWluZ0RyYWZ0OiBib29sZWFuO1xuICBpc1Jlc3RvcmluZ0pvYnM6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDYXJkV2l6YXJkRWZmZWN0cyh7XG4gIGNhcmRTdHVkaW8sXG4gIGNhcmRGb3JtLFxuICBjYXJkSGlzdG9yeSxcbiAgd2l6YXJkU3RhdGUsXG4gIHVwZGF0ZVdpemFyZFN0YXRlLFxuICBpc1Jlc3VtaW5nRHJhZnQsXG4gIGlzUmVzdG9yaW5nSm9ic1xufTogQ2FyZFdpemFyZEVmZmVjdHNQcm9wcykge1xuICAvLyBUcmFjayB0aGUgY3VycmVudCBzZXNzaW9uIElEIHRvIHVwZGF0ZSB0aGUgc2FtZSBzZXNzaW9uXG4gIGNvbnN0IFtjdXJyZW50RHJhZnRTZXNzaW9uSWQsIHNldEN1cnJlbnREcmFmdFNlc3Npb25JZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2xhc3RTYXZlZERyYWZ0Q291bnQsIHNldExhc3RTYXZlZERyYWZ0Q291bnRdID0gdXNlU3RhdGU8bnVtYmVyPigwKTtcbiAgLy8gQ2hlY2sgZm9yIHBlbmRpbmcgam9icyBvbiBjb21wb25lbnQgbW91bnQgYnV0IGRvbid0IGF1dG8tbmF2aWdhdGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCByZXN0b3JlUGVuZGluZ0pvYnMgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBDYXJkV2l6YXJkRWZmZWN0czogU3RhcnRpbmcgY2hlY2tQZW5kaW5nSm9icy4uLicpO1xuICAgICAgXG4gICAgICAvLyBGaXJzdCBjaGVjayBmb3Igc2F2ZWQgZHJhZnQgc2Vzc2lvblxuICAgICAgbGV0IGN1cnJlbnRTZXNzaW9uID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGN1cnJlbnRTZXNzaW9uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndmliZS1jdXJyZW50LWRyYWZ0LXNlc3Npb24nKSB8fCAnbnVsbCcpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIGN1cnJlbnRTZXNzaW9uID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50U2Vzc2lvbiAmJiBjdXJyZW50U2Vzc2lvbi5kcmFmdENhcmRzICYmIGN1cnJlbnRTZXNzaW9uLmRyYWZ0Q2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBGb3VuZCBzYXZlZCBkcmFmdCBzZXNzaW9uIHdpdGgnLCBjdXJyZW50U2Vzc2lvbi5kcmFmdENhcmRzLmxlbmd0aCwgJ2RyYWZ0cycpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVzdG9yZSBkcmFmdCBjYXJkc1xuICAgICAgICBjYXJkU3R1ZGlvLnNldERyYWZ0Q2FyZHMoY3VycmVudFNlc3Npb24uZHJhZnRDYXJkcyk7XG4gICAgICAgIGNhcmRTdHVkaW8uc2V0SXNEcmFmdE1vZGUodHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZXN0b3JlIGZvcm0gZGF0YSBpZiBuZWVkZWRcbiAgICAgICAgaWYgKGN1cnJlbnRTZXNzaW9uLmZvcm1EYXRhKSB7XG4gICAgICAgICAgY2FyZEZvcm0udXBkYXRlRm9ybURhdGEoY3VycmVudFNlc3Npb24uZm9ybURhdGEpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBOYXZpZ2F0ZSB0byBTdGVwIDUgdG8gc2hvdyB0aGUgZHJhZnRzXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFJlc3RvcmluZyB0byBTdGVwIDUgd2l0aCBzYXZlZCBkcmFmdHMnKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gNDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCF3aXphcmRTdGF0ZS5jb21wbGV0ZWRTdGVwcy5pbmNsdWRlcyhpKSkgd2l6YXJkU3RhdGUubWFya1N0ZXBDb21wbGV0ZWQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgd2l6YXJkU3RhdGUudXBkYXRlQ3VycmVudFN0ZXAoNSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdGhlIGN1cnJlbnQgc2Vzc2lvbiBJRCBmb3IgdXBkYXRlc1xuICAgICAgICBzZXRDdXJyZW50RHJhZnRTZXNzaW9uSWQoY3VycmVudFNlc3Npb24uaWQpO1xuICAgICAgICBzZXRMYXN0U2F2ZWREcmFmdENvdW50KGN1cnJlbnRTZXNzaW9uLmRyYWZ0Q2FyZHMubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuOyAvLyBTa2lwIHBlbmRpbmcgam9icyBjaGVjayBpZiB3ZSByZXN0b3JlZCBhIGRyYWZ0IHNlc3Npb25cbiAgICAgIH1cbiAgICAgIFxuICAgICAgYXdhaXQgY2FyZFN0dWRpby5jaGVja1BlbmRpbmdKb2JzKCk7XG4gICAgICBcbiAgICAgIC8vIE9ubHkgYXV0by1uYXZpZ2F0ZSBpZiB0aGVyZSdzIGFuIGFjdGl2ZSBnZW5lcmF0aW9uIGluIHByb2dyZXNzXG4gICAgICAvLyBEb24ndCBuYXZpZ2F0ZSBmb3IgY29tcGxldGVkIGRyYWZ0cyAtIGxldCB1c2VyIGNob29zZVxuICAgICAgaWYgKGNhcmRTdHVkaW8uaXNHZW5lcmF0aW5nICYmIGNhcmRTdHVkaW8uZ2VuZXJhdGlvblByb2dyZXNzKSB7XG4gICAgICAgIGlmIChjYXJkU3R1ZGlvLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFJlc3RvcmluZyB0byBTdGVwIDYgZHVlIHRvIG9uZ29pbmcgZmluYWwgZ2VuZXJhdGlvbicpO1xuICAgICAgICAgIC8vIE1hcmsgYWxsIHByZXZpb3VzIHN0ZXBzIGFzIGNvbXBsZXRlZFxuICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDU7IGkrKykge1xuICAgICAgICAgICAgaWYgKCF3aXphcmRTdGF0ZS5jb21wbGV0ZWRTdGVwcy5pbmNsdWRlcyhpKSkgd2l6YXJkU3RhdGUubWFya1N0ZXBDb21wbGV0ZWQoaSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHdpemFyZFN0YXRlLnVwZGF0ZUN1cnJlbnRTdGVwKDYpO1xuICAgICAgICB9IGVsc2UgaWYgKGNhcmRTdHVkaW8uaXNEcmFmdE1vZGUgJiYgY2FyZFN0dWRpby5pc0dlbmVyYXRpbmcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBSZXN0b3JpbmcgdG8gU3RlcCA1IGR1ZSB0byBvbmdvaW5nIGRyYWZ0IGdlbmVyYXRpb24nKTtcbiAgICAgICAgICAvLyBNYXJrIHByZXZpb3VzIHN0ZXBzIGFzIGNvbXBsZXRlZFxuICAgICAgICAgIGlmICghd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoMSkpIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDEpO1xuICAgICAgICAgIGlmICghd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoMikpIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDIpO1xuICAgICAgICAgIGlmICghd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoMykpIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDMpO1xuICAgICAgICAgIGlmICghd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoNCkpIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDQpO1xuICAgICAgICAgIHdpemFyZFN0YXRlLnVwZGF0ZUN1cnJlbnRTdGVwKDUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBObyBhY3RpdmUgZ2VuZXJhdGlvbiAtIHJlc2V0IHdpemFyZCB0byBzdGVwIDEgaWYgd2UncmUgb24gYSBsYXRlciBzdGVwXG4gICAgICAgIC8vIFRoaXMgaGFuZGxlcyB0aGUgY2FzZSB3aGVyZSB1c2VyIGxlZnQgb2ZmIG9uIHN0ZXAgNSBidXQgaXNuJ3QgYWN0aXZlbHkgZ2VuZXJhdGluZ1xuICAgICAgICBpZiAod2l6YXJkU3RhdGUuY3VycmVudFN0ZXAgPiAxICYmICFjYXJkU3R1ZGlvLmlzR2VuZXJhdGluZykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIE5vIGFjdGl2ZSBnZW5lcmF0aW9uLCByZXNldHRpbmcgdG8gU3RlcCAxJyk7XG4gICAgICAgICAgd2l6YXJkU3RhdGUudXBkYXRlQ3VycmVudFN0ZXAoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIElmIHdlIGhhdmUgY29tcGxldGVkIGRyYWZ0cyBidXQgbm8gYWN0aXZlIGdlbmVyYXRpb24sIHN0YXkgb24gU3RlcCAxXG4gICAgICAvLyBVc2VyIGNhbiBjaG9vc2UgdG8gcmVzdW1lIHZpYSB0aGUgVUlcbiAgICB9O1xuICAgIFxuICAgIHJlc3RvcmVQZW5kaW5nSm9icygpO1xuICB9LCBbXSk7XG5cbiAgLy8gT25seSBtYXJrIHN0ZXAgMSBhcyBjb21wbGV0ZWQgaWYgdXNlciBoYXMgbWFkZSBzZWxlY3Rpb25zLCBidXQgZG9uJ3QgYXV0by1hZHZhbmNlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF3aXphcmRTdGF0ZS5pc0luaXRpYWxMb2FkQ29tcGxldGUgfHwgIWNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZSkgcmV0dXJuO1xuICAgIFxuICAgIC8vIE9ubHkgbWFyayBzdGVwIGFzIGNvbXBsZXRlZCwgZG9uJ3QgbmF2aWdhdGVcbiAgICBpZiAod2l6YXJkU3RhdGUuY3VycmVudFN0ZXAgPT09IDEgJiYgIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKDEpKSB7XG4gICAgICBjb25zdCBmb3JtRGF0YSA9IGNhcmRGb3JtLmZvcm1EYXRhO1xuICAgICAgXG4gICAgICAvLyBNYXJrIHN0ZXAgMSBhcyBjb21wbGV0ZWQgaWYgdXNlciBoYXMgbWFkZSBzZWxlY3Rpb25zXG4gICAgICBpZiAoZm9ybURhdGEuc2VsZWN0ZWRUeXBlICYmIGZvcm1EYXRhLnNlbGVjdGVkVG9uZSkge1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIE1hcmtpbmcgc3RlcCAxIGFzIGNvbXBsZXRlZCBiYXNlZCBvbiBzYXZlZCBkYXRhJyk7XG4gICAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDEpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW3dpemFyZFN0YXRlLmlzSW5pdGlhbExvYWRDb21wbGV0ZSwgY2FyZEZvcm0uaXNJbml0aWFsTG9hZENvbXBsZXRlXSk7XG5cbiAgLy8gT25seSBuYXZpZ2F0ZSB0byBTdGVwIDUgd2hlbiBORVcgZHJhZnQgY2FyZHMgYXJlIGJlaW5nIGdlbmVyYXRlZCAobm90IHJlc3RvcmVkKVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgbmF2aWdhdGUgaWYgd2UncmUgYWN0aXZlbHkgZ2VuZXJhdGluZyBORVcgZHJhZnRzLCBub3QgcmVzdG9yaW5nIG9sZCBvbmVzXG4gICAgaWYgKGNhcmRTdHVkaW8uZHJhZnRDYXJkcy5sZW5ndGggPiAwICYmIFxuICAgICAgICB3aXphcmRTdGF0ZS5jdXJyZW50U3RlcCA8IDUgJiYgXG4gICAgICAgIGNhcmRTdHVkaW8uaXNHZW5lcmF0aW5nICYmIFxuICAgICAgICAhaXNSZXN0b3JpbmdKb2JzKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+TiyBOZXcgZHJhZnQgY2FyZHMgYmVpbmcgZ2VuZXJhdGVkLCBuYXZpZ2F0aW5nIHRvIFN0ZXAgNScpO1xuICAgICAgLy8gTWFyayBwcmV2aW91cyBzdGVwcyBhcyBjb21wbGV0ZWRcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDQ7IGkrKykge1xuICAgICAgICBpZiAoIXdpemFyZFN0YXRlLmNvbXBsZXRlZFN0ZXBzLmluY2x1ZGVzKGkpKSB7XG4gICAgICAgICAgd2l6YXJkU3RhdGUubWFya1N0ZXBDb21wbGV0ZWQoaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdpemFyZFN0YXRlLnVwZGF0ZUN1cnJlbnRTdGVwKDUpO1xuICAgIH1cbiAgfSwgW2NhcmRTdHVkaW8uZHJhZnRDYXJkcy5sZW5ndGgsIGNhcmRTdHVkaW8uaXNHZW5lcmF0aW5nLCBpc1Jlc3RvcmluZ0pvYnNdKTtcblxuICAvLyBBdXRvLXNhdmUgZHJhZnRzIHdoZW4gdXNlciBjcmVhdGVzIGRyYWZ0IGNhcmRzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gT25seSBzYXZlIGlmIHdlIGhhdmUgZHJhZnQgY2FyZHMgYW5kIG5vdCByZXN1bWluZyBvciByZXN0b3JpbmdcbiAgICBpZiAoY2FyZFN0dWRpby5kcmFmdENhcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEF1dG8tc2F2ZSBjaGVjazonLCB7XG4gICAgICAgIGhhc0NhcmRzOiBjYXJkU3R1ZGlvLmRyYWZ0Q2FyZHMubGVuZ3RoID4gMCxcbiAgICAgICAgaXNJbml0aWFsTG9hZENvbXBsZXRlOiBjYXJkRm9ybS5pc0luaXRpYWxMb2FkQ29tcGxldGUsXG4gICAgICAgIGlzUmVzdW1pbmdEcmFmdCxcbiAgICAgICAgaXNSZXN0b3JpbmdKb2JzLFxuICAgICAgICBzaG91bGRTYXZlOiBjYXJkRm9ybS5pc0luaXRpYWxMb2FkQ29tcGxldGUgJiYgIWlzUmVzdW1pbmdEcmFmdCAmJiAhaXNSZXN0b3JpbmdKb2JzXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGNhcmRTdHVkaW8uZHJhZnRDYXJkcy5sZW5ndGggPiAwICYmIGNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZSAmJiAhaXNSZXN1bWluZ0RyYWZ0ICYmICFpc1Jlc3RvcmluZ0pvYnMpIHtcbiAgICAgIC8vIENvdW50IG5vbi1udWxsIGRyYWZ0IGNhcmRzXG4gICAgICBjb25zdCB2YWxpZERyYWZ0cyA9IGNhcmRTdHVkaW8uZHJhZnRDYXJkcy5maWx0ZXIoY2FyZCA9PiBjYXJkICE9PSBudWxsKS5sZW5ndGg7XG4gICAgICBcbiAgICAgIC8vIE9ubHkgc2F2ZSB3aGVuOlxuICAgICAgLy8gMS4gQWxsIDUgZHJhZnRzIGFyZSBjb21wbGV0ZSAodmFsaWREcmFmdHMgPT09IDUpXG4gICAgICAvLyAyLiBUaGlzIGlzIHRoZSBmaXJzdCBkcmFmdCBhbmQgd2UgaGF2ZW4ndCBzYXZlZCB5ZXQgKHZhbGlkRHJhZnRzID09PSAxICYmICFjdXJyZW50RHJhZnRTZXNzaW9uSWQpXG4gICAgICAvLyAzLiBVc2VyIHNlbGVjdGVkIGEgZHJhZnQgKHNlbGVjdGVkRHJhZnRJbmRleCA+PSAwKVxuICAgICAgY29uc3Qgc2hvdWxkU2F2ZSA9IChcbiAgICAgICAgKHZhbGlkRHJhZnRzID09PSA1ICYmIGxhc3RTYXZlZERyYWZ0Q291bnQgPCA1KSB8fCAvLyBBbGwgZHJhZnRzIGNvbXBsZXRlXG4gICAgICAgICh2YWxpZERyYWZ0cyA9PT0gMSAmJiAhY3VycmVudERyYWZ0U2Vzc2lvbklkKSB8fCAvLyBGaXJzdCBkcmFmdFxuICAgICAgICAoY2FyZFN0dWRpby5zZWxlY3RlZERyYWZ0SW5kZXggPj0gMCAmJiB2YWxpZERyYWZ0cyA+IGxhc3RTYXZlZERyYWZ0Q291bnQpIC8vIFVzZXIgc2VsZWN0ZWRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmIChzaG91bGRTYXZlICYmIHZhbGlkRHJhZnRzID4gMCkge1xuICAgICAgICAvLyBTYXZlIG9yIHVwZGF0ZSB0aGUgc2Vzc2lvbiB3aXRoIHRoZSBzYW1lIElEXG4gICAgICAgIGNvbnN0IHNlc3Npb25JZCA9IGNhcmRIaXN0b3J5LnNhdmVEcmFmdFNlc3Npb24oXG4gICAgICAgICAgY2FyZEZvcm0uZm9ybURhdGEsXG4gICAgICAgICAgY2FyZFN0dWRpby5kcmFmdENhcmRzLFxuICAgICAgICAgIGNhcmRTdHVkaW8uc2VsZWN0ZWREcmFmdEluZGV4LFxuICAgICAgICAgIGN1cnJlbnREcmFmdFNlc3Npb25JZCB8fCB1bmRlZmluZWQgLy8gVXNlIGV4aXN0aW5nIHNlc3Npb24gSUQgaWYgYXZhaWxhYmxlXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBTdG9yZSB0aGUgc2Vzc2lvbiBJRCBmb3IgZnV0dXJlIHVwZGF0ZXNcbiAgICAgICAgaWYgKCFjdXJyZW50RHJhZnRTZXNzaW9uSWQpIHtcbiAgICAgICAgICBzZXRDdXJyZW50RHJhZnRTZXNzaW9uSWQoc2Vzc2lvbklkKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBsYXN0IHNhdmVkIGNvdW50XG4gICAgICAgIHNldExhc3RTYXZlZERyYWZ0Q291bnQodmFsaWREcmFmdHMpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYPCfkr4gRHJhZnQgc2Vzc2lvbiBzYXZlZDogJHt2YWxpZERyYWZ0c30vNSBkcmFmdHMgY29tcGxldGVgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtjYXJkU3R1ZGlvLmRyYWZ0Q2FyZHMsIGNhcmRTdHVkaW8uc2VsZWN0ZWREcmFmdEluZGV4LCBjYXJkRm9ybS5mb3JtRGF0YSwgY2FyZEZvcm0uaXNJbml0aWFsTG9hZENvbXBsZXRlLCBpc1Jlc3VtaW5nRHJhZnQsIGlzUmVzdG9yaW5nSm9icywgY3VycmVudERyYWZ0U2Vzc2lvbklkLCBsYXN0U2F2ZWREcmFmdENvdW50XSk7XG4gIFxuICAvLyBSZXNldCBzZXNzaW9uIElEIHdoZW4gZHJhZnRzIGFyZSBjbGVhcmVkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdmFsaWREcmFmdHMgPSBjYXJkU3R1ZGlvLmRyYWZ0Q2FyZHMuZmlsdGVyKGNhcmQgPT4gY2FyZCAhPT0gbnVsbCkubGVuZ3RoO1xuICAgIGlmICh2YWxpZERyYWZ0cyA9PT0gMCkge1xuICAgICAgc2V0Q3VycmVudERyYWZ0U2Vzc2lvbklkKG51bGwpO1xuICAgICAgc2V0TGFzdFNhdmVkRHJhZnRDb3VudCgwKTtcbiAgICB9XG4gIH0sIFtjYXJkU3R1ZGlvLmRyYWZ0Q2FyZHNdKTtcblxuICAvLyBBdXRvLXNhdmUgY29tcGxldGVkIGNhcmRzIGFuZCBlbnN1cmUgd2UncmUgb24gU3RlcCA2XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNhcmRTdHVkaW8uZ2VuZXJhdGVkQ2FyZCAmJiBjYXJkU3R1ZGlvLmlzQ2FyZENvbXBsZXRlZCkge1xuICAgICAgY2FyZEhpc3RvcnkuYWRkQ29tcGxldGVkQ2FyZChjYXJkU3R1ZGlvLmdlbmVyYXRlZENhcmQpO1xuICAgICAgXG4gICAgICAvLyBFbnN1cmUgd2UncmUgb24gU3RlcCA2IHRvIHNlZSB0aGUgY29tcGxldGVkIGNhcmRcbiAgICAgIGlmICh3aXphcmRTdGF0ZS5jdXJyZW50U3RlcCAhPT0gNikge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TjSBDYXJkIGNvbXBsZXRlZCBidXQgbm90IG9uIFN0ZXAgNiwgbmF2aWdhdGluZyB0aGVyZSBub3cuLi4nKTtcbiAgICAgICAgd2l6YXJkU3RhdGUudXBkYXRlQ3VycmVudFN0ZXAoNik7XG4gICAgICB9XG4gICAgfVxuICB9LCBbY2FyZFN0dWRpby5nZW5lcmF0ZWRDYXJkLCBjYXJkU3R1ZGlvLmlzQ2FyZENvbXBsZXRlZCwgd2l6YXJkU3RhdGUuY3VycmVudFN0ZXBdKTtcblxuICAvLyBTeW5jIGZvcm0gZGF0YSB3aXRoIGNhcmRTdHVkaW8gd2hlbiBmb3JtIGRhdGEgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghY2FyZEZvcm0uaXNJbml0aWFsTG9hZENvbXBsZXRlKSByZXR1cm47XG5cbiAgICBjb25zdCB7IGZvcm1EYXRhIH0gPSBjYXJkRm9ybTtcbiAgICBcbiAgICAvLyBVcGRhdGUgY2FyZFN0dWRpbyB3aXRoIGZvcm0gZGF0YVxuICAgIGNhcmRTdHVkaW8uc2V0U2VsZWN0ZWRUeXBlKGZvcm1EYXRhLnNlbGVjdGVkVHlwZSk7XG4gICAgY2FyZFN0dWRpby5zZXRDdXN0b21DYXJkVHlwZShmb3JtRGF0YS5jdXN0b21DYXJkVHlwZSk7XG4gICAgY2FyZFN0dWRpby5zZXRTZWxlY3RlZFRvbmUoZm9ybURhdGEuc2VsZWN0ZWRUb25lKTtcbiAgICBjYXJkU3R1ZGlvLnNldFRvRmllbGQoZm9ybURhdGEudG9GaWVsZCk7XG4gICAgY2FyZFN0dWRpby5zZXRGcm9tRmllbGQoZm9ybURhdGEuZnJvbUZpZWxkKTtcbiAgICBjYXJkU3R1ZGlvLnNldFJlbGF0aW9uc2hpcEZpZWxkKGZvcm1EYXRhLnJlbGF0aW9uc2hpcEZpZWxkKTtcbiAgICBjYXJkU3R1ZGlvLnNldFByb21wdChmb3JtRGF0YS5wcm9tcHQpO1xuICAgIGNhcmRTdHVkaW8uc2V0RmluYWxDYXJkTWVzc2FnZShmb3JtRGF0YS5maW5hbENhcmRNZXNzYWdlKTtcbiAgICBjYXJkU3R1ZGlvLnNldElzSGFuZHdyaXR0ZW5NZXNzYWdlKGZvcm1EYXRhLmlzSGFuZHdyaXR0ZW5NZXNzYWdlKTtcbiAgICBjYXJkU3R1ZGlvLnNldFNlbGVjdGVkQXJ0aXN0aWNTdHlsZShmb3JtRGF0YS5zZWxlY3RlZEFydGlzdGljU3R5bGUpO1xuICAgIGNhcmRTdHVkaW8uc2V0Q3VzdG9tU3R5bGVEZXNjcmlwdGlvbihmb3JtRGF0YS5jdXN0b21TdHlsZURlc2NyaXB0aW9uKTtcbiAgICAvLyBTa2lwIHN5bmNpbmcgcmVmZXJlbmNlIGltYWdlcyBmcm9tIGZvcm0gdG8gY2FyZFN0dWRpb1xuICAgIC8vIFRoaXMgc2hvdWxkIG9ubHkgZmxvdyBmcm9tIGNhcmRTdHVkaW8gLT4gZm9ybSBhZnRlciB1cGxvYWRzXG4gICAgLy8gY2FyZFN0dWRpby5zZXRSZWZlcmVuY2VJbWFnZXMoZm9ybURhdGEucmVmZXJlbmNlSW1hZ2VzKTtcbiAgICAvLyBjYXJkU3R1ZGlvLnNldFJlZmVyZW5jZUltYWdlVXJscyhmb3JtRGF0YS5yZWZlcmVuY2VJbWFnZVVybHMpO1xuICAgIGNhcmRTdHVkaW8uc2V0VXNlckVtYWlsKGZvcm1EYXRhLnVzZXJFbWFpbCk7XG4gICAgY2FyZFN0dWRpby5zZXRTZWxlY3RlZEltYWdlTW9kZWwoZm9ybURhdGEuc2VsZWN0ZWRJbWFnZU1vZGVsKTtcbiAgICBjYXJkU3R1ZGlvLnNldFNlbGVjdGVkRHJhZnRNb2RlbChmb3JtRGF0YS5zZWxlY3RlZERyYWZ0TW9kZWwpO1xuICAgIGNhcmRTdHVkaW8uc2V0U2VsZWN0ZWRQYXBlclNpemUoZm9ybURhdGEuc2VsZWN0ZWRQYXBlclNpemUpO1xuICAgIGNhcmRTdHVkaW8uc2V0TnVtYmVyT2ZDYXJkcyhmb3JtRGF0YS5udW1iZXJPZkNhcmRzKTtcbiAgICBjYXJkU3R1ZGlvLnNldElzRnJvbnRCYWNrT25seShmb3JtRGF0YS5pc0Zyb250QmFja09ubHkpO1xuICB9LCBbY2FyZEZvcm0uZm9ybURhdGEsIGNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZV0pO1xuXG4gIC8vIEF1dG8tY29tcGxldGUgc3RlcCAxIG9uY2UgdXNlciBtYWtlcyBzZWxlY3Rpb25zXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNhcmRGb3JtLnZhbGlkYXRlU3RlcCgxKSAmJiAhd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoMSkpIHtcbiAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDEpO1xuICAgIH1cbiAgfSwgW2NhcmRGb3JtLmZvcm1EYXRhLnNlbGVjdGVkVHlwZSwgY2FyZEZvcm0uZm9ybURhdGEuc2VsZWN0ZWRUb25lLCBjYXJkRm9ybS5mb3JtRGF0YS5jdXN0b21DYXJkVHlwZSwgd2l6YXJkU3RhdGVdKTtcblxuICAvLyBBdXRvLWNvbXBsZXRlIHN0ZXAgNCBvbmNlIGVtYWlsIGlzIHZhbGlkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNhcmRGb3JtLnZhbGlkYXRlU3RlcCg0KSAmJiAhd2l6YXJkU3RhdGUuY29tcGxldGVkU3RlcHMuaW5jbHVkZXMoNCkpIHtcbiAgICAgIHdpemFyZFN0YXRlLm1hcmtTdGVwQ29tcGxldGVkKDQpO1xuICAgIH1cbiAgfSwgW2NhcmRGb3JtLmZvcm1EYXRhLnVzZXJFbWFpbCwgd2l6YXJkU3RhdGVdKTtcblxuICAvLyBBdXRvLWFkdmFuY2UgdG8gU3RlcCA2IHdoZW4gZmluYWwgY2FyZCBnZW5lcmF0aW9uIHN0YXJ0c1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjYXJkU3R1ZGlvLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCAmJiB3aXphcmRTdGF0ZS5jdXJyZW50U3RlcCA8IDYpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5qAIEF1dG8tYWR2YW5jaW5nIHRvIFN0ZXAgNjogRmluYWwgR2VuZXJhdGlvbicpO1xuICAgICAgaWYgKCF3aXphcmRTdGF0ZS5jb21wbGV0ZWRTdGVwcy5pbmNsdWRlcyg1KSkge1xuICAgICAgICB3aXphcmRTdGF0ZS5tYXJrU3RlcENvbXBsZXRlZCg1KTtcbiAgICAgIH1cbiAgICAgIHdpemFyZFN0YXRlLnVwZGF0ZUN1cnJlbnRTdGVwKDYpO1xuICAgIH1cbiAgfSwgW2NhcmRTdHVkaW8uaXNHZW5lcmF0aW5nRmluYWxDYXJkLCB3aXphcmRTdGF0ZV0pO1xuXG4gIC8vIFN5bmMgcmVmZXJlbmNlIGltYWdlcyBmcm9tIGNhcmRTdHVkaW8gdG8gZm9ybSB3aGVuIHRoZXkgY2hhbmdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjYXJkRm9ybS5pc0luaXRpYWxMb2FkQ29tcGxldGUpIHJldHVybjtcbiAgICBcbiAgICAvLyBTeW5jIGlmIGNhcmRTdHVkaW8gaGFzIGltYWdlcyBidXQgZm9ybSBkb2Vzbid0LCBvciBpZiBwaG90b1JlZmVyZW5jZXMgY2hhbmdlZFxuICAgIGNvbnN0IHNob3VsZFN5bmMgPSAoXG4gICAgICAoY2FyZFN0dWRpby5yZWZlcmVuY2VJbWFnZVVybHMubGVuZ3RoID4gMCAmJiBcbiAgICAgICBjYXJkRm9ybS5mb3JtRGF0YS5yZWZlcmVuY2VJbWFnZVVybHMubGVuZ3RoICE9PSBjYXJkU3R1ZGlvLnJlZmVyZW5jZUltYWdlVXJscy5sZW5ndGgpIHx8XG4gICAgICAoY2FyZFN0dWRpby5waG90b1JlZmVyZW5jZXMgJiYgY2FyZFN0dWRpby5waG90b1JlZmVyZW5jZXMgIT09IGNhcmRGb3JtLmZvcm1EYXRhLnBob3RvUmVmZXJlbmNlcylcbiAgICApO1xuICAgIFxuICAgIGlmIChzaG91bGRTeW5jKSB7XG4gICAgICBjYXJkRm9ybS51cGRhdGVGb3JtRGF0YSh7XG4gICAgICAgIHJlZmVyZW5jZUltYWdlczogY2FyZFN0dWRpby5yZWZlcmVuY2VJbWFnZXMsXG4gICAgICAgIHJlZmVyZW5jZUltYWdlVXJsczogY2FyZFN0dWRpby5yZWZlcmVuY2VJbWFnZVVybHMsXG4gICAgICAgIHBob3RvUmVmZXJlbmNlczogY2FyZFN0dWRpby5waG90b1JlZmVyZW5jZXNcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2NhcmRTdHVkaW8ucmVmZXJlbmNlSW1hZ2VVcmxzLCBjYXJkU3R1ZGlvLnJlZmVyZW5jZUltYWdlcywgY2FyZFN0dWRpby5waG90b1JlZmVyZW5jZXMsIGNhcmRGb3JtLmlzSW5pdGlhbExvYWRDb21wbGV0ZV0pO1xuXG4gIHJldHVybiBudWxsO1xufSJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsIkNhcmRXaXphcmRFZmZlY3RzIiwiY2FyZFN0dWRpbyIsImNhcmRGb3JtIiwiY2FyZEhpc3RvcnkiLCJ3aXphcmRTdGF0ZSIsInVwZGF0ZVdpemFyZFN0YXRlIiwiaXNSZXN1bWluZ0RyYWZ0IiwiaXNSZXN0b3JpbmdKb2JzIiwiY3VycmVudERyYWZ0U2Vzc2lvbklkIiwic2V0Q3VycmVudERyYWZ0U2Vzc2lvbklkIiwibGFzdFNhdmVkRHJhZnRDb3VudCIsInNldExhc3RTYXZlZERyYWZ0Q291bnQiLCJyZXN0b3JlUGVuZGluZ0pvYnMiLCJjb25zb2xlIiwibG9nIiwiY3VycmVudFNlc3Npb24iLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZHJhZnRDYXJkcyIsImxlbmd0aCIsInNldERyYWZ0Q2FyZHMiLCJzZXRJc0RyYWZ0TW9kZSIsImZvcm1EYXRhIiwidXBkYXRlRm9ybURhdGEiLCJpIiwiY29tcGxldGVkU3RlcHMiLCJpbmNsdWRlcyIsIm1hcmtTdGVwQ29tcGxldGVkIiwidXBkYXRlQ3VycmVudFN0ZXAiLCJpZCIsImNoZWNrUGVuZGluZ0pvYnMiLCJpc0dlbmVyYXRpbmciLCJnZW5lcmF0aW9uUHJvZ3Jlc3MiLCJpc0dlbmVyYXRpbmdGaW5hbENhcmQiLCJpc0RyYWZ0TW9kZSIsImN1cnJlbnRTdGVwIiwiaXNJbml0aWFsTG9hZENvbXBsZXRlIiwic2VsZWN0ZWRUeXBlIiwic2VsZWN0ZWRUb25lIiwiaGFzQ2FyZHMiLCJzaG91bGRTYXZlIiwidmFsaWREcmFmdHMiLCJmaWx0ZXIiLCJjYXJkIiwic2VsZWN0ZWREcmFmdEluZGV4Iiwic2Vzc2lvbklkIiwic2F2ZURyYWZ0U2Vzc2lvbiIsInVuZGVmaW5lZCIsImdlbmVyYXRlZENhcmQiLCJpc0NhcmRDb21wbGV0ZWQiLCJhZGRDb21wbGV0ZWRDYXJkIiwic2V0U2VsZWN0ZWRUeXBlIiwic2V0Q3VzdG9tQ2FyZFR5cGUiLCJjdXN0b21DYXJkVHlwZSIsInNldFNlbGVjdGVkVG9uZSIsInNldFRvRmllbGQiLCJ0b0ZpZWxkIiwic2V0RnJvbUZpZWxkIiwiZnJvbUZpZWxkIiwic2V0UmVsYXRpb25zaGlwRmllbGQiLCJyZWxhdGlvbnNoaXBGaWVsZCIsInNldFByb21wdCIsInByb21wdCIsInNldEZpbmFsQ2FyZE1lc3NhZ2UiLCJmaW5hbENhcmRNZXNzYWdlIiwic2V0SXNIYW5kd3JpdHRlbk1lc3NhZ2UiLCJpc0hhbmR3cml0dGVuTWVzc2FnZSIsInNldFNlbGVjdGVkQXJ0aXN0aWNTdHlsZSIsInNlbGVjdGVkQXJ0aXN0aWNTdHlsZSIsInNldEN1c3RvbVN0eWxlRGVzY3JpcHRpb24iLCJjdXN0b21TdHlsZURlc2NyaXB0aW9uIiwic2V0VXNlckVtYWlsIiwidXNlckVtYWlsIiwic2V0U2VsZWN0ZWRJbWFnZU1vZGVsIiwic2VsZWN0ZWRJbWFnZU1vZGVsIiwic2V0U2VsZWN0ZWREcmFmdE1vZGVsIiwic2VsZWN0ZWREcmFmdE1vZGVsIiwic2V0U2VsZWN0ZWRQYXBlclNpemUiLCJzZWxlY3RlZFBhcGVyU2l6ZSIsInNldE51bWJlck9mQ2FyZHMiLCJudW1iZXJPZkNhcmRzIiwic2V0SXNGcm9udEJhY2tPbmx5IiwiaXNGcm9udEJhY2tPbmx5IiwidmFsaWRhdGVTdGVwIiwic2hvdWxkU3luYyIsInJlZmVyZW5jZUltYWdlVXJscyIsInBob3RvUmVmZXJlbmNlcyIsInJlZmVyZW5jZUltYWdlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/wizard/CardWizardEffects.tsx\n"));

/***/ })

});