"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ChatPage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_mode_toggle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/mode-toggle */ \"(app-pages-browser)/./components/mode-toggle.tsx\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./components/ui/button.tsx\");\n/* harmony import */ var _components_ui_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/ui/input */ \"(app-pages-browser)/./components/ui/input.tsx\");\n/* harmony import */ var _components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ui/scroll-area */ \"(app-pages-browser)/./components/ui/scroll-area.tsx\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUp,ChevronDown,Loader2,MapPin,Menu,Paperclip!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/menu.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUp,ChevronDown,Loader2,MapPin,Menu,Paperclip!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/chevron-down.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUp,ChevronDown,Loader2,MapPin,Menu,Paperclip!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUp,ChevronDown,Loader2,MapPin,Menu,Paperclip!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/paperclip.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUp,ChevronDown,Loader2,MapPin,Menu,Paperclip!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/map-pin.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowUp,ChevronDown,Loader2,MapPin,Menu,Paperclip!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/arrow-up.js\");\n/* harmony import */ var marked__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! marked */ \"(app-pages-browser)/./node_modules/marked/lib/marked.esm.js\");\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! dompurify */ \"(app-pages-browser)/./node_modules/dompurify/dist/purify.es.mjs\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var _components_ToolCallDisplay__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/ToolCallDisplay */ \"(app-pages-browser)/./components/ToolCallDisplay.tsx\");\n/* harmony import */ var _components_URLPreview__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/URLPreview */ \"(app-pages-browser)/./components/URLPreview.tsx\");\n/* harmony import */ var _components_MapDisplay__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/components/MapDisplay */ \"(app-pages-browser)/./components/MapDisplay.tsx\");\n/* harmony import */ var _components_DirectionsSteps__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/DirectionsSteps */ \"(app-pages-browser)/./components/DirectionsSteps.tsx\");\n/* harmony import */ var _components_ImageDisplay__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/components/ImageDisplay */ \"(app-pages-browser)/./components/ImageDisplay.tsx\");\n/* harmony import */ var next_themes__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next-themes */ \"(app-pages-browser)/./node_modules/next-themes/dist/index.mjs\");\n/* harmony import */ var _hooks_useContentPreviews__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/hooks/useContentPreviews */ \"(app-pages-browser)/./hooks/useContentPreviews.ts\");\n/* harmony import */ var _components_ContentPreview__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/components/ContentPreview */ \"(app-pages-browser)/./components/ContentPreview.tsx\");\n/* harmony import */ var _utils_previewExtractors__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/utils/previewExtractors */ \"(app-pages-browser)/./utils/previewExtractors.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Ensure marked runs synchronously for this page too, if not already global\nmarked__WEBPACK_IMPORTED_MODULE_6__.marked.setOptions({\n    async: false\n});\n// Configuration for the backend API endpoint\nconst BACKEND_API_BASE_URL = \"https://jordanjohngilbert.link\" || 0; // Default to localhost:5001\nfunction ChatPage() {\n    _s();\n    const [userInput, setUserInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [selectedFiles, setSelectedFiles] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]); // <-- New state for selected files\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null); // <-- Ref for file input\n    const [fileProcessingStatus, setFileProcessingStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null); // <-- Status for file processing\n    const [showInitialView, setShowInitialView] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const scrollAreaRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null); // Ref for the ScrollArea's viewport element\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"Ready\");\n    const [apiSender] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"+17145986105\");\n    const [currentUserLocation, setCurrentUserLocation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [sendLocation, setSendLocation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false); // New state for toggle\n    const [directionsData, setDirectionsData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [googleMapsApiKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"AIzaSyC0_w7ucVDKZ7pD3JinvokDwxl9OohMkwQ\" || 0);\n    const [mapDisplayKey, setMapDisplayKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0); // Key for forcing MapDisplay re-render\n    const [showTraffic, setShowTraffic] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false); // State for traffic layer\n    const [isMapSectionVisible, setIsMapSectionVisible] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false); // <-- State for map section visibility\n    const { theme: appTheme } = (0,next_themes__WEBPACK_IMPORTED_MODULE_13__.useTheme)(); // Get current application theme\n    // NEW: Add content previews hook\n    const { upsertPreview, updatePreview, getPreviewsForMessage, removePreview } = (0,_hooks_useContentPreviews__WEBPACK_IMPORTED_MODULE_14__.useContentPreviews)();\n    // Define available models as an array of objects for the dropdown\n    const modelOptions = [\n        {\n            value: \"gemini-2.5-flash-preview-05-20\",\n            label: \"Gemini 2.5 Flash\"\n        },\n        {\n            value: \"gemini-2.5-pro-preview-05-06\",\n            label: \"Gemini 2.5 Pro\"\n        }\n    ];\n    const [selectedModel, setSelectedModel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(modelOptions[1].value); // Default to the second model (Pro)\n    // NEW: Helper function to process tool calls for preview extraction\n    const processToolCallForPreview = (toolCall, messageId)=>{\n        if ((0,_utils_previewExtractors__WEBPACK_IMPORTED_MODULE_16__.shouldExtractPreview)(toolCall)) {\n            const extractedPreview = (0,_utils_previewExtractors__WEBPACK_IMPORTED_MODULE_16__.extractPreviewFromToolCall)(toolCall);\n            if (extractedPreview && extractedPreview.shouldShow) {\n                console.log(\"[PAGE.TSX] Extracted preview for tool \".concat(toolCall.name, \":\"), extractedPreview);\n                upsertPreview(extractedPreview.id, extractedPreview.type, extractedPreview.data, messageId, {\n                    name: toolCall.name,\n                    call_id: toolCall.call_id,\n                    status: toolCall.status\n                });\n            }\n        }\n    };\n    // Function to detect and convert HEIC files to JPEG\n    const convertHeicToJpeg = async (file)=>{\n        const isHeic = file.name.toLowerCase().endsWith(\".heic\") || file.name.toLowerCase().endsWith(\".heif\") || file.type === \"image/heic\" || file.type === \"image/heif\";\n        if (!isHeic) {\n            return file; // Return original file if not HEIC\n        }\n        try {\n            console.log('\\uD83D\\uDD04 Converting HEIC file \"'.concat(file.name, '\" to JPEG...'));\n            // Dynamic import to avoid SSR issues\n            const { default: heic2any } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_heic2any_dist_heic2any_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! heic2any */ \"(app-pages-browser)/./node_modules/heic2any/dist/heic2any.js\", 23));\n            // Try heic2any conversion\n            const convertedBlob = await heic2any({\n                blob: file,\n                toType: \"image/jpeg\",\n                quality: 0.85\n            });\n            // Create new filename with .jpg extension\n            const originalName = file.name.replace(/\\.(heic|heif)$/i, \"\");\n            const newFileName = \"\".concat(originalName, \".jpg\");\n            // Create new File object with converted blob\n            const convertedFile = new File([\n                convertedBlob\n            ], newFileName, {\n                type: \"image/jpeg\",\n                lastModified: file.lastModified\n            });\n            console.log('✅ Successfully converted \"'.concat(file.name, '\" to \"').concat(newFileName, '\" (').concat(Math.round(convertedFile.size / 1024), \"KB)\"));\n            return convertedFile;\n        } catch (error) {\n            console.warn('⚠️ Frontend HEIC conversion failed for \"'.concat(file.name, '\":'), error);\n            // Try Canvas API fallback\n            try {\n                console.log('\\uD83D\\uDD04 Attempting Canvas API fallback for \"'.concat(file.name, '\"...'));\n                const imageBitmap = await createImageBitmap(file);\n                const canvas = document.createElement(\"canvas\");\n                const ctx = canvas.getContext(\"2d\");\n                if (!ctx) {\n                    throw new Error(\"Could not get canvas context\");\n                }\n                canvas.width = imageBitmap.width;\n                canvas.height = imageBitmap.height;\n                ctx.drawImage(imageBitmap, 0, 0);\n                const canvasBlob = await new Promise((resolve, reject)=>{\n                    canvas.toBlob((blob)=>{\n                        if (blob) {\n                            resolve(blob);\n                        } else {\n                            reject(new Error(\"Canvas toBlob failed\"));\n                        }\n                    }, \"image/jpeg\", 0.85);\n                });\n                const originalName = file.name.replace(/\\.(heic|heif)$/i, \"\");\n                const newFileName = \"\".concat(originalName, \".jpg\");\n                const convertedFile = new File([\n                    canvasBlob\n                ], newFileName, {\n                    type: \"image/jpeg\",\n                    lastModified: file.lastModified\n                });\n                console.log('✅ Canvas API fallback succeeded for \"'.concat(file.name, '\" → \"').concat(newFileName, '\"'));\n                return convertedFile;\n            } catch (canvasError) {\n                console.warn('⚠️ Canvas API fallback also failed for \"'.concat(file.name, '\":'), canvasError);\n                // Final fallback: Upload HEIC file and let backend handle conversion\n                console.log('\\uD83D\\uDD04 Will upload \"'.concat(file.name, '\" for server-side conversion...'));\n                // Mark this file for server-side conversion by adding a special property\n                const fileWithConversionFlag = new File([\n                    file\n                ], file.name, {\n                    type: file.type || \"image/heic\",\n                    lastModified: file.lastModified\n                });\n                // Add a custom property to indicate this needs server-side conversion\n                fileWithConversionFlag.needsServerConversion = true;\n                return fileWithConversionFlag;\n            }\n        }\n    };\n    const examplePrompts = [\n        {\n            title: \"What are the advantages\",\n            detail: \"of using Next.js?\"\n        },\n        {\n            title: \"Write code to\",\n            detail: \"demonstrate dijkstra\\\\'s algorithm\"\n        },\n        {\n            title: \"Help me write an essay\",\n            detail: \"about silicon valley\"\n        },\n        {\n            title: \"What is the weather\",\n            detail: \"in San Francisco?\"\n        }\n    ];\n    // Helper to ensure markdown block elements are properly spaced\n    const normalizeFragment = (fragment, _prevContent)=>{\n        // TEMPORARILY A PASS-THROUGH\n        return fragment;\n    };\n    // NEW: Function to convert standalone image/video URLs to HTML elements\n    const convertMediaUrls = (text)=>{\n        // Common image extensions\n        const imageExtensions = /\\.(jpg|jpeg|png|gif|webp|svg|bmp|ico|tiff)(\\?[^)\\s\"']*)?$/i;\n        // Common video extensions  \n        const videoExtensions = /\\.(mp4|webm|ogg|mov|avi|wmv|flv|m4v)(\\?[^)\\s\"']*)?$/i;\n        // More comprehensive URL pattern that handles URLs in various contexts\n        // This pattern looks for http/https URLs that are not already in markdown image/link format\n        const urlPattern = RegExp(\"(?<!!\\\\[)(?<!\\\\]\\\\()(?<!\\\\[.*?\\\\]\\\\()https?:\\\\/\\\\/[^\\\\s<>\\\"'\\\\]\\\\)]+\", \"g\");\n        let processedText = text.replace(urlPattern, (url)=>{\n            // Remove trailing punctuation that might not be part of the URL\n            const cleanUrl = url.replace(/[.,;:!?)\"']+$/, \"\");\n            if (imageExtensions.test(cleanUrl)) {\n                return \"![Image](\".concat(cleanUrl, \")\");\n            } else if (videoExtensions.test(cleanUrl)) {\n                var _cleanUrl_split_pop;\n                return '<video controls style=\"max-width: 100%; height: auto; max-height: 400px; border-radius: 0.375rem; margin: 0.5em auto; display: block;\">\\n          <source src=\"'.concat(cleanUrl, '\" type=\"video/').concat(((_cleanUrl_split_pop = cleanUrl.split(\".\").pop()) === null || _cleanUrl_split_pop === void 0 ? void 0 : _cleanUrl_split_pop.split(\"?\")[0]) || \"mp4\", '\">\\n          Your browser does not support the video tag.\\n          <a href=\"').concat(cleanUrl, '\" target=\"_blank\" rel=\"noopener noreferrer\">View video</a>\\n        </video>');\n            }\n            return url; // Return original URL if not media\n        });\n        // Additional aggressive pattern to catch any URLs that might be in quotes or other contexts\n        const aggressiveUrlPattern = /https?:\\/\\/[^\\s<>\"'\\]\\)\\}]+\\.(jpg|jpeg|png|gif|webp|svg|bmp|ico|tiff|mp4|webm|ogg|mov|avi|wmv|flv|m4v)(\\?[^\\s<>\"'\\]\\)\\}]*)?/gi;\n        processedText = processedText.replace(aggressiveUrlPattern, (url)=>{\n            // Check if this URL is already converted to markdown\n            if (processedText.includes(\"![Image](\".concat(url, \")\"))) {\n                return url;\n            }\n            const cleanUrl = url.replace(/[.,;:!?)\"'\\}]+$/, \"\");\n            return \"![Image](\".concat(cleanUrl, \")\");\n        });\n        return processedText;\n    };\n    const renderSanitizedMarkdown = (text)=>{\n        // First convert standalone media URLs to proper markdown/HTML\n        const textWithMedia = convertMediaUrls(text);\n        // This function assumes it's running in a browser environment\n        // due to the \"use client\" directive on the component and use of DOMPurify.\n        // marked.parse is configured to run synchronously.\n        const dirtyHtml = marked__WEBPACK_IMPORTED_MODULE_6__.marked.parse(textWithMedia, {\n            gfm: true,\n            breaks: true\n        });\n        return dompurify__WEBPACK_IMPORTED_MODULE_7__[\"default\"].sanitize(dirtyHtml);\n    };\n    const parseTextWithURLs = (text)=>{\n        const urlRegex = /https?:\\/\\/[^\\s<>\"'\\]\\)\\}]+/g;\n        const parts = [];\n        let lastIndex = 0;\n        let match;\n        while((match = urlRegex.exec(text)) !== null){\n            // Add text before the URL\n            if (match.index > lastIndex) {\n                const beforeText = text.substring(lastIndex, match.index);\n                if (beforeText.trim()) {\n                    parts.push({\n                        type: \"text\",\n                        content: beforeText\n                    });\n                }\n            }\n            // Add the URL (clean up trailing punctuation)\n            const url = match[0].replace(/[.,;:!?)\"'\\}]+$/, \"\");\n            // Skip if it's already an image/video (handled by markdown)\n            const isMedia = /\\.(jpg|jpeg|png|gif|webp|svg|bmp|ico|tiff|mp4|webm|ogg|mov|avi|wmv|flv|m4v)(\\?[^)\\s\"']*)?$/i.test(url);\n            if (!isMedia) {\n                parts.push({\n                    type: \"url\",\n                    content: url\n                });\n            } else {\n                // Keep as text for markdown processing\n                parts.push({\n                    type: \"text\",\n                    content: match[0]\n                });\n            }\n            lastIndex = urlRegex.lastIndex;\n        }\n        // Add remaining text\n        if (lastIndex < text.length) {\n            const remainingText = text.substring(lastIndex);\n            if (remainingText.trim()) {\n                parts.push({\n                    type: \"text\",\n                    content: remainingText\n                });\n            }\n        }\n        // If no URLs found, return the whole text as one part\n        if (parts.length === 0) {\n            parts.push({\n                type: \"text\",\n                content: text\n            });\n        }\n        return parts;\n    };\n    const getCurrentLocation = ()=>{\n        console.log(\"[PAGE.TSX] getCurrentLocation called\");\n        return new Promise((resolve, reject)=>{\n            if (!navigator.geolocation) {\n                console.error(\"[PAGE.TSX] Geolocation not supported\");\n                reject(\"Geolocation is not supported by your browser.\");\n                return;\n            }\n            const timeoutId = setTimeout(()=>{\n                console.error(\"[PAGE.TSX] Geolocation timeout\");\n                reject(\"Failed to get location: Timeout.\");\n            }, 10000); // 10 second timeout\n            navigator.geolocation.getCurrentPosition((position)=>{\n                clearTimeout(timeoutId);\n                const coords = \"\".concat(position.coords.latitude, \",\").concat(position.coords.longitude);\n                console.log(\"[PAGE.TSX] Geolocation success:\", coords);\n                setCurrentUserLocation(coords); // Update state here as well\n                resolve(coords);\n            }, (error)=>{\n                clearTimeout(timeoutId);\n                console.error(\"[PAGE.TSX] Geolocation error:\", error);\n                let message = \"Unable to retrieve your location. Please ensure location services are enabled.\";\n                switch(error.code){\n                    case error.PERMISSION_DENIED:\n                        message = \"Location permission denied. Please enable it in your browser settings.\";\n                        break;\n                    case error.POSITION_UNAVAILABLE:\n                        message = \"Location information is unavailable.\";\n                        break;\n                    case error.TIMEOUT:\n                        message = \"Request to get user location timed out.\"; // This case might be preempted by our own setTimeout\n                        break;\n                }\n                reject(message);\n            }, {\n                enableHighAccuracy: true,\n                timeout: 8000,\n                maximumAge: 0\n            } // Added options\n            );\n        });\n    };\n    const handleFileSelect = async (event)=>{\n        if (event.target.files) {\n            const files = Array.from(event.target.files);\n            // Check if any files are HEIC\n            const heicFiles = files.filter((file)=>file.name.toLowerCase().endsWith(\".heic\") || file.name.toLowerCase().endsWith(\".heif\") || file.type === \"image/heic\" || file.type === \"image/heif\");\n            if (heicFiles.length > 0) {\n                setFileProcessingStatus(\"Converting \".concat(heicFiles.length, \" HEIC file\").concat(heicFiles.length > 1 ? \"s\" : \"\", \" to JPEG...\"));\n            }\n            try {\n                // Convert any HEIC files to JPEG\n                const convertedFiles = await Promise.all(files.map((file)=>convertHeicToJpeg(file)));\n                // Check if any files need server-side conversion\n                const serverConversionFiles = convertedFiles.filter((file)=>file.needsServerConversion);\n                if (serverConversionFiles.length > 0) {\n                    setFileProcessingStatus(\"\\uD83D\\uDCE4 Sending \".concat(serverConversionFiles.length, \" HEIC file\").concat(serverConversionFiles.length > 1 ? \"s\" : \"\", \" for server-side conversion...\"));\n                } else {\n                    setFileProcessingStatus(null); // Clear status when done\n                }\n                setSelectedFiles((prevFiles)=>[\n                        ...prevFiles,\n                        ...convertedFiles\n                    ]);\n            } catch (error) {\n                console.error(\"Error processing selected files:\", error);\n                // Show user-friendly error message\n                if (error instanceof Error && error.message.includes(\"Unable to convert HEIC\")) {\n                    setFileProcessingStatus(\"❌ HEIC conversion failed. Please try a different image format.\");\n                    setTimeout(()=>setFileProcessingStatus(null), 5000);\n                } else {\n                    // Fall back to adding original files if conversion fails\n                    setSelectedFiles((prevFiles)=>[\n                            ...prevFiles,\n                            ...files\n                        ]);\n                    setFileProcessingStatus(null); // Clear status on error\n                }\n            }\n            event.target.value = \"\"; // Reset file input to allow selecting the same file again\n        }\n    };\n    const removeSelectedFile = (fileNameToRemove)=>{\n        setSelectedFiles((prevFiles)=>prevFiles.filter((file)=>file.name !== fileNameToRemove));\n    };\n    const fileToBase64 = (file)=>{\n        return new Promise((resolve, reject)=>{\n            const reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onload = ()=>{\n                const result = reader.result;\n                resolve(result.split(\",\")[1]); // Get data part after comma\n            };\n            reader.onerror = (error)=>reject(error);\n        });\n    };\n    // NEW: Upload files immediately and get URLs\n    const uploadFiles = async (files)=>{\n        const uploadPromises = files.map(async (file)=>{\n            const formData = new FormData();\n            formData.append(\"file\", file);\n            // Check if this file needs server-side HEIC conversion\n            const needsServerConversion = file.needsServerConversion;\n            if (needsServerConversion) {\n                formData.append(\"convert_heic\", \"true\");\n                console.log('\\uD83D\\uDCE4 Uploading \"'.concat(file.name, '\" for server-side HEIC conversion...'));\n            }\n            try {\n                const response = await fetch(\"\".concat(BACKEND_API_BASE_URL, \"/upload\"), {\n                    method: \"POST\",\n                    body: formData\n                });\n                if (!response.ok) {\n                    throw new Error(\"Upload failed: \".concat(response.status));\n                }\n                const result = await response.json();\n                // Log server-side HEIC conversion if it occurred\n                if (result.converted_from_heic) {\n                    console.log('✅ Server converted HEIC file \"'.concat(result.original_filename, '\" to JPEG: \"').concat(result.filename, '\"'));\n                }\n                return result.url; // Backend should return { url: \"...\" }\n            } catch (error) {\n                console.error(\"Failed to upload \".concat(file.name, \":\"), error);\n                throw error;\n            }\n        });\n        return Promise.all(uploadPromises);\n    };\n    const handleSend = async (e)=>{\n        if (e && typeof e.preventDefault === \"function\") {\n            e.preventDefault();\n        }\n        let currentMessageText = userInput.trim(); // Use a mutable variable for message text\n        if (!currentMessageText && selectedFiles.length === 0) return; // Return if no text and no files\n        // --- NEW: Upload files immediately and get URLs ---\n        let attachmentUrls = [];\n        if (selectedFiles.length > 0) {\n            try {\n                setStatus(\"Uploading files...\");\n                attachmentUrls = await uploadFiles(selectedFiles);\n                console.log(\"Files uploaded successfully:\", attachmentUrls);\n            } catch (error) {\n                console.error(\"File upload failed:\", error);\n                setStatus(\"Ready\");\n                // Show error to user\n                const errorMessageId = (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();\n                setMessages((prev)=>[\n                        ...prev,\n                        {\n                            id: errorMessageId,\n                            sender: \"bot\",\n                            parts: [\n                                {\n                                    type: \"text\",\n                                    id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                    content: '<strong style=\"color: red;\">Upload Error:</strong> Failed to upload files. Please try again.'\n                                }\n                            ],\n                            timestamp: Date.now(),\n                            thinking: false,\n                            is_error_message: true\n                        }\n                    ]);\n                return;\n            }\n        }\n        // --- Location Appending Logic ---\n        let resolvedOriginForQuery = undefined;\n        if (sendLocation) {\n            if (currentUserLocation) {\n                resolvedOriginForQuery = currentUserLocation;\n            } else {\n                try {\n                    console.log(\"Attempting to get current location because toggle is on...\");\n                    const location = await getCurrentLocation();\n                    resolvedOriginForQuery = location;\n                    console.log(\"Current location obtained for query:\", location);\n                } catch (locationError) {\n                    console.error(\"Error getting location for query:\", locationError);\n                    // Display error to user immediately, similar to before, but tied to bot's thinking message\n                    const tempBotMessageId = (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(); // Create a temporary ID for this error message\n                    setMessages((prev)=>[\n                            ...prev,\n                            {\n                                id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                sender: \"user\",\n                                parts: currentMessageText ? [\n                                    {\n                                        type: \"text\",\n                                        id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                        content: currentMessageText\n                                    }\n                                ] : [],\n                                timestamp: Date.now()\n                            },\n                            {\n                                id: tempBotMessageId,\n                                sender: \"bot\",\n                                parts: [\n                                    {\n                                        type: \"text\",\n                                        id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                        content: '<strong style=\"color: red;\">Location Error:</strong> '.concat(locationError)\n                                    }\n                                ],\n                                timestamp: Date.now(),\n                                thinking: false,\n                                is_error_message: true\n                            }\n                        ]);\n                    if (showInitialView) setShowInitialView(false);\n                    setUserInput(\"\"); // Clear input\n                    setSelectedFiles([]); // Clear files\n                    setStatus(\"Ready\");\n                    return;\n                }\n            }\n            if (resolvedOriginForQuery) {\n                // Append to the message text that will be sent\n                currentMessageText = \"\".concat(currentMessageText, \" (My current location is: \").concat(resolvedOriginForQuery, \")\");\n            }\n        }\n        // --- End Location Appending Logic ---\n        // --- NEW: Include attachment URLs directly in the message ---\n        if (attachmentUrls.length > 0) {\n            const attachmentList = attachmentUrls.map((url, index)=>{\n                var _selectedFiles_index;\n                const fileName = ((_selectedFiles_index = selectedFiles[index]) === null || _selectedFiles_index === void 0 ? void 0 : _selectedFiles_index.name) || \"Attachment \".concat(index + 1);\n                return \"- \".concat(fileName, \": \").concat(url);\n            }).join(\"\\n\");\n            currentMessageText += \"\\n\\nAttached files:\\n\".concat(attachmentList);\n        }\n        const userMessageId = (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();\n        const userMessageParts = [];\n        if (currentMessageText) {\n            userMessageParts.push({\n                type: \"text\",\n                id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                content: currentMessageText\n            });\n        }\n        const userMessage = {\n            id: userMessageId,\n            sender: \"user\",\n            parts: userMessageParts,\n            timestamp: Date.now()\n        };\n        setMessages((prevMessages)=>[\n                ...prevMessages,\n                userMessage\n            ]);\n        setUserInput(\"\");\n        if (showInitialView) setShowInitialView(false);\n        const botMessageId = (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();\n        setMessages((prevMessages)=>[\n                ...prevMessages,\n                {\n                    id: botMessageId,\n                    sender: \"bot\",\n                    parts: [\n                        {\n                            type: \"thought_summary\",\n                            id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                            content: \"\"\n                        }\n                    ],\n                    timestamp: Date.now(),\n                    thinking: true\n                }\n            ]);\n        try {\n            // --- NEW: Simplified payload with URLs instead of base64 ---\n            const payload = {\n                sender: apiSender,\n                query: currentMessageText,\n                timestamp: Date.now(),\n                stream: true,\n                model: selectedModel,\n                attachment_urls: attachmentUrls.length > 0 ? attachmentUrls : undefined\n            };\n            // Clear selected files now that they're uploaded and in the message\n            setSelectedFiles([]);\n            setStatus(\"Processing...\");\n            const response = await fetch(\"\".concat(BACKEND_API_BASE_URL, \"/query\"), {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(payload)\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                let errorDetail = \"HTTP error! status: \".concat(response.status);\n                try {\n                    const errorJson = JSON.parse(errorText);\n                    errorDetail = errorJson.error || errorJson.detail || errorDetail;\n                } catch (parseError) {\n                    if (errorText) errorDetail += \" - \".concat(errorText);\n                }\n                throw new Error(errorDetail);\n            }\n            if (!response.body) throw new Error(\"Response body is null\");\n            const reader = response.body.getReader();\n            const decoder = new TextDecoder();\n            let buffer = \"\"; // Buffer for accumulating stream data\n            while(true){\n                const { done, value } = await reader.read();\n                if (done) {\n                    if (buffer.trim() !== \"\") {\n                        try {\n                            const parsedChunk = JSON.parse(buffer);\n                            console.log(\"[PAGE.TSX] Final Buffer Chunk:\", JSON.stringify(parsedChunk));\n                            if (parsedChunk.type === \"text_chunk\" && parsedChunk.content) {\n                                setMessages((prev)=>prev.map((msg)=>{\n                                        if (msg.id === botMessageId) {\n                                            let currentContent = parsedChunk.content;\n                                            let newParts = [\n                                                ...msg.parts\n                                            ];\n                                            const lastPart = newParts.length > 0 ? newParts[newParts.length - 1] : null;\n                                            if (lastPart && lastPart.type === \"text\") {\n                                                currentContent = normalizeFragment(currentContent, lastPart.content);\n                                                lastPart.content += currentContent;\n                                            } else {\n                                                currentContent = normalizeFragment(currentContent, \"\");\n                                                newParts.push({\n                                                    type: \"text\",\n                                                    id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                    content: currentContent\n                                                });\n                                            }\n                                            return {\n                                                ...msg,\n                                                parts: newParts,\n                                                thinking: true\n                                            };\n                                        }\n                                        return msg;\n                                    }));\n                            } else if (parsedChunk.type === \"thought_summary\" && parsedChunk.content) {\n                                setMessages((prev)=>prev.map((msg)=>{\n                                        if (msg.id === botMessageId) {\n                                            const newParts = msg.parts.map((part)=>{\n                                                if (part.type === \"thought_summary\") {\n                                                    const contentFromChunk = normalizeFragment(parsedChunk.content, part.content);\n                                                    return {\n                                                        ...part,\n                                                        content: part.content + contentFromChunk\n                                                    };\n                                                }\n                                                return part;\n                                            });\n                                            return {\n                                                ...msg,\n                                                parts: newParts,\n                                                thinking: true\n                                            };\n                                        }\n                                        return msg;\n                                    }));\n                            } else if (parsedChunk.type === \"tool_call_pending\" && parsedChunk.name && parsedChunk.arguments) {\n                                const call_id_from_chunk = parsedChunk.call_id || \"tool-\".concat((0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])());\n                                setMessages((prev)=>prev.map((msg)=>{\n                                        if (msg.id === botMessageId) {\n                                            const existingToolCallPart = msg.parts.find((part)=>part.type === \"tool_call\" && part.toolCall.call_id === call_id_from_chunk);\n                                            if (existingToolCallPart) {\n                                                console.log(\"[PAGE.TSX] (final buffer) Tool call with ID \".concat(call_id_from_chunk, \" already exists. Ignoring duplicate pending.\"));\n                                                return msg;\n                                            }\n                                            const newToolCallData = {\n                                                call_id: call_id_from_chunk,\n                                                name: parsedChunk.name,\n                                                arguments: typeof parsedChunk.arguments === \"string\" ? parsedChunk.arguments : JSON.stringify(parsedChunk.arguments),\n                                                status: \"Pending...\"\n                                            };\n                                            console.log(\"[PAGE.TSX] (final buffer) Tool Call Pending (New):\", JSON.parse(JSON.stringify(newToolCallData)));\n                                            const newParts = [\n                                                ...msg.parts\n                                            ];\n                                            newParts.push({\n                                                type: \"tool_call\",\n                                                id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                toolCall: newToolCallData\n                                            });\n                                            newParts.push({\n                                                type: \"text\",\n                                                id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                content: \"\"\n                                            });\n                                            return {\n                                                ...msg,\n                                                parts: newParts,\n                                                thinking: true\n                                            };\n                                        }\n                                        return msg;\n                                    }));\n                            } else if (parsedChunk.type === \"tool_result\" && parsedChunk.call_id && typeof parsedChunk.result !== \"undefined\") {\n                                setMessages((prev)=>prev.map((msg)=>{\n                                        if (msg.id === botMessageId) {\n                                            if (parsedChunk.name === \"get_directions\") {\n                                                console.log(\"[PAGE.TSX] (Final Buffer) RAW get_directions tool_result CHUNK:\", JSON.stringify(parsedChunk));\n                                            }\n                                            let matchedToolCallInParts = false;\n                                            const newParts = msg.parts.map((part)=>{\n                                                if (part.type === \"tool_call\" && part.toolCall.call_id === parsedChunk.call_id) {\n                                                    matchedToolCallInParts = true;\n                                                    const tc = part.toolCall;\n                                                    let finalResult = typeof parsedChunk.result === \"string\" ? parsedChunk.result : JSON.stringify(parsedChunk.result);\n                                                    const isPartial = typeof parsedChunk.is_partial === \"boolean\" ? parsedChunk.is_partial : false;\n                                                    const isError = typeof parsedChunk.is_error === \"boolean\" ? parsedChunk.is_error : false;\n                                                    const newStatus = isPartial ? \"Streaming...\" : isError ? \"Error\" : \"Completed\";\n                                                    const updatedToolCall = {\n                                                        ...tc,\n                                                        result: isPartial && tc.result && tc.status === \"Streaming...\" ? tc.result + \"\\n---\\n\" + finalResult : finalResult,\n                                                        status: newStatus,\n                                                        is_error: isError,\n                                                        is_partial: isPartial\n                                                    };\n                                                    let toolResponse = null;\n                                                    if (tc.name === \"get_directions\" && parsedChunk.result) {\n                                                        // Handle both old wrapped format and new direct format\n                                                        if (typeof parsedChunk.result === \"object\") {\n                                                            const responseKey = \"\".concat(tc.name, \"_response\");\n                                                            if (parsedChunk.result[responseKey]) {\n                                                                // Old wrapped format\n                                                                toolResponse = parsedChunk.result[responseKey];\n                                                                console.log(\"[PAGE.TSX] (Stream Loop) Using wrapped format for directions, toolResponse:\", JSON.stringify(toolResponse).substring(0, 200) + \"...\");\n                                                            } else {\n                                                                // New direct format from FastMCP\n                                                                toolResponse = parsedChunk.result;\n                                                                console.log(\"[PAGE.TSX] (Stream Loop) Using direct format for directions, toolResponse:\", JSON.stringify(toolResponse).substring(0, 200) + \"...\");\n                                                            }\n                                                        }\n                                                    }\n                                                    if (tc.name === \"get_directions\" && toolResponse && toolResponse.status === \"success\" && toolResponse.data && !isError && !isPartial) {\n                                                        console.log(\"[PAGE.TSX] (Final Buffer) Setting directionsData with:\", JSON.stringify(toolResponse.data).substring(0, 200) + \"...\");\n                                                        setDirectionsData(toolResponse.data);\n                                                        setMapDisplayKey((prevKey)=>prevKey + 1);\n                                                        setIsMapSectionVisible(true);\n                                                    } else if (tc.name === \"get_directions\" && !toolResponse) {\n                                                        console.error(\"[PAGE.TSX] (Final Buffer) ERROR: get_directions_response missing!\");\n                                                    }\n                                                    // NEW: Process tool call for preview extraction\n                                                    processToolCallForPreview(updatedToolCall, msg.id);\n                                                    // NEW: Web app detection logic\n                                                    if ((tc.name === \"create_web_app\" || tc.name === \"edit_web_app\") && !isError && !isPartial && tc.result) {\n                                                        try {\n                                                            const resultData = typeof tc.result === \"string\" ? JSON.parse(tc.result) : tc.result;\n                                                            if (resultData.status === \"success\" && resultData.url) {\n                                                                console.log(\"[PAGE.TSX] (Final Buffer) Setting webAppUrl with:\", resultData.url);\n                                                            // This will be set on the message object below\n                                                            }\n                                                        } catch (e) {\n                                                            console.warn(\"[PAGE.TSX] (Final Buffer) Failed to parse web app result:\", e);\n                                                        }\n                                                    }\n                                                    // NEW: Image generation detection logic\n                                                    if (tc.name === \"generate_images_with_prompts\" && !isError && !isPartial && tc.result) {\n                                                        try {\n                                                            const resultData = typeof tc.result === \"string\" ? JSON.parse(tc.result) : tc.result;\n                                                            if (resultData.status === \"success\" && resultData.results) {\n                                                                // Extract all image URLs from the results array\n                                                                const imageUrls = [];\n                                                                resultData.results.forEach((resultArray)=>{\n                                                                    if (Array.isArray(resultArray)) {\n                                                                        imageUrls.push(...resultArray);\n                                                                    }\n                                                                });\n                                                                if (imageUrls.length > 0) {\n                                                                    console.log(\"[PAGE.TSX] (Stream Loop) Setting generatedImageUrls with:\", imageUrls.length, \"images\");\n                                                                // This will be set on the message object below\n                                                                }\n                                                            }\n                                                        } catch (e) {\n                                                            console.warn(\"[PAGE.TSX] (Stream Loop) Failed to parse image generation result:\", e);\n                                                        }\n                                                    }\n                                                    return {\n                                                        ...part,\n                                                        toolCall: updatedToolCall\n                                                    };\n                                                }\n                                                return part;\n                                            });\n                                            if (!matchedToolCallInParts) {\n                                                console.warn(\"[PAGE.TSX] (Final Buffer) Tool call id \".concat(parsedChunk.call_id, \" not found in \").concat(msg.id));\n                                            }\n                                            let toolResponse = null;\n                                            if (parsedChunk.name === \"get_directions\" && parsedChunk.result) {\n                                                if (typeof parsedChunk.result === \"object\") {\n                                                    const responseKey = \"\".concat(parsedChunk.name, \"_response\");\n                                                    if (parsedChunk.result[responseKey]) {\n                                                        toolResponse = parsedChunk.result[responseKey];\n                                                    } else {\n                                                        toolResponse = parsedChunk.result;\n                                                    }\n                                                }\n                                            }\n                                            let finalMsgObject = {\n                                                ...msg,\n                                                parts: newParts,\n                                                thinking: true\n                                            };\n                                            if (parsedChunk.name === \"get_directions\" && toolResponse && !(typeof parsedChunk.is_partial === \"boolean\" && parsedChunk.is_partial) && !(typeof parsedChunk.is_error === \"boolean\" && parsedChunk.is_error) && toolResponse.status === \"success\" && toolResponse.data) {\n                                                finalMsgObject.showMapToggleForThisMessage = true;\n                                                finalMsgObject.directionsData = toolResponse.data;\n                                                console.log(\"[PAGE.TSX] (Final Buffer) Setting message directions data:\", JSON.stringify(toolResponse.data).substring(0, 200) + \"...\");\n                                            }\n                                            // NEW: Web app message object updates\n                                            if ((parsedChunk.name === \"create_web_app\" || parsedChunk.name === \"edit_web_app\") && !(typeof parsedChunk.is_partial === \"boolean\" && parsedChunk.is_partial) && !(typeof parsedChunk.is_error === \"boolean\" && parsedChunk.is_error) && parsedChunk.result) {\n                                                try {\n                                                    const resultData = typeof parsedChunk.result === \"string\" ? JSON.parse(parsedChunk.result) : parsedChunk.result;\n                                                    if (resultData.status === \"success\" && resultData.url) {\n                                                        finalMsgObject.showWebAppForThisMessage = true;\n                                                        finalMsgObject.webAppUrl = resultData.url;\n                                                    }\n                                                } catch (e) {\n                                                    console.warn(\"[PAGE.TSX] (Final Buffer) Failed to parse web app result for message:\", e);\n                                                }\n                                            }\n                                            // NEW: Image generation message object updates\n                                            if (parsedChunk.name === \"generate_images_with_prompts\" && !(typeof parsedChunk.is_partial === \"boolean\" && parsedChunk.is_partial) && !(typeof parsedChunk.is_error === \"boolean\" && parsedChunk.is_error) && parsedChunk.result) {\n                                                try {\n                                                    const resultData = typeof parsedChunk.result === \"string\" ? JSON.parse(parsedChunk.result) : parsedChunk.result;\n                                                    if (resultData.status === \"success\" && resultData.results) {\n                                                        // Extract all image URLs from the results array\n                                                        const imageUrls = [];\n                                                        resultData.results.forEach((resultArray)=>{\n                                                            if (Array.isArray(resultArray)) {\n                                                                imageUrls.push(...resultArray);\n                                                            }\n                                                        });\n                                                        if (imageUrls.length > 0) {\n                                                            finalMsgObject.showImagesForThisMessage = true;\n                                                            finalMsgObject.generatedImageUrls = imageUrls;\n                                                            console.log(\"[PAGE.TSX] (Final Buffer) Setting generatedImageUrls with:\", imageUrls.length, \"images\");\n                                                        }\n                                                    }\n                                                } catch (e) {\n                                                    console.warn(\"[PAGE.TSX] (Final Buffer) Failed to parse image generation result for message:\", e);\n                                                }\n                                            }\n                                            return finalMsgObject;\n                                        }\n                                        return msg;\n                                    }));\n                            } else if (parsedChunk.type === \"tool_sample_text_chunk\" && parsedChunk.parent_tool_call_id && typeof parsedChunk.content === \"string\") {\n                                setMessages((prev)=>prev.map((msg)=>{\n                                        if (msg.id === botMessageId) {\n                                            const newParts = msg.parts.map((part)=>{\n                                                if (part.type === \"tool_call\" && part.toolCall.call_id === parsedChunk.parent_tool_call_id) {\n                                                    const tc = part.toolCall;\n                                                    const currentPairs = tc.sampleCallPairs || [];\n                                                    let newPairs;\n                                                    if (currentPairs.length > 0) {\n                                                        const lastPair = currentPairs[currentPairs.length - 1];\n                                                        // Create new pair object with updated output\n                                                        const updatedLastPair = {\n                                                            ...lastPair,\n                                                            output: (lastPair.output || \"\") + parsedChunk.content\n                                                        };\n                                                        // Create new array with updated last pair\n                                                        newPairs = [\n                                                            ...currentPairs.slice(0, -1),\n                                                            updatedLastPair\n                                                        ];\n                                                    } else {\n                                                        // Create new pair\n                                                        newPairs = [\n                                                            {\n                                                                id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                                output: parsedChunk.content\n                                                            }\n                                                        ];\n                                                    }\n                                                    console.log(\"[PAGE.TSX] (Final Buffer) Updated sampleCallPairs (output) for \".concat(parsedChunk.parent_tool_call_id, \":\"), JSON.parse(JSON.stringify(newPairs)));\n                                                    return {\n                                                        ...part,\n                                                        toolCall: {\n                                                            ...tc,\n                                                            sampleCallPairs: newPairs\n                                                        }\n                                                    };\n                                                }\n                                                return part;\n                                            });\n                                            return {\n                                                ...msg,\n                                                parts: newParts,\n                                                thinking: true\n                                            };\n                                        }\n                                        return msg;\n                                    }));\n                            } else if (parsedChunk.type === \"tool_sample_thought_chunk\" && parsedChunk.parent_tool_call_id && typeof parsedChunk.content === \"string\") {\n                                setMessages((prev)=>prev.map((msg)=>{\n                                        if (msg.id === botMessageId) {\n                                            const newParts = msg.parts.map((part)=>{\n                                                if (part.type === \"tool_call\" && part.toolCall.call_id === parsedChunk.parent_tool_call_id) {\n                                                    const tc = part.toolCall;\n                                                    const currentPairs = tc.sampleCallPairs || [];\n                                                    let newPairs;\n                                                    // If lastPair exists and is still 'open' (no output yet), append thoughts.\n                                                    // Otherwise, this is a new sampling call's thoughts, so create a new pair.\n                                                    if (currentPairs.length > 0) {\n                                                        const lastPair = currentPairs[currentPairs.length - 1];\n                                                        if (typeof lastPair.output === \"undefined\") {\n                                                            // Update existing pair with thoughts\n                                                            const updatedLastPair = {\n                                                                ...lastPair,\n                                                                thoughts: (lastPair.thoughts || \"\") + parsedChunk.content\n                                                            };\n                                                            newPairs = [\n                                                                ...currentPairs.slice(0, -1),\n                                                                updatedLastPair\n                                                            ];\n                                                        } else {\n                                                            // Create new pair for new sampling call\n                                                            newPairs = [\n                                                                ...currentPairs,\n                                                                {\n                                                                    id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                                    thoughts: parsedChunk.content\n                                                                }\n                                                            ];\n                                                        }\n                                                    } else {\n                                                        // Create first pair\n                                                        newPairs = [\n                                                            {\n                                                                id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                                thoughts: parsedChunk.content\n                                                            }\n                                                        ];\n                                                    }\n                                                    console.log(\"[PAGE.TSX] (Final Buffer) Updated sampleCallPairs (thoughts) for \".concat(parsedChunk.parent_tool_call_id, \":\"), JSON.parse(JSON.stringify(newPairs)));\n                                                    return {\n                                                        ...part,\n                                                        toolCall: {\n                                                            ...tc,\n                                                            sampleCallPairs: newPairs\n                                                        }\n                                                    };\n                                                }\n                                                return part;\n                                            });\n                                            return {\n                                                ...msg,\n                                                parts: newParts,\n                                                thinking: true\n                                            };\n                                        }\n                                        return msg;\n                                    }));\n                            } else if (parsedChunk.type === \"stream_end\") {\n                                setMessages((prev)=>prev.map((msg)=>msg.id === botMessageId ? {\n                                            ...msg,\n                                            thinking: false\n                                        } : msg));\n                                setStatus(\"Ready\");\n                            } else if (parsedChunk.type === \"error\" && parsedChunk.content) {\n                                setMessages((prev)=>prev.map((msg)=>{\n                                        if (msg.id === botMessageId) {\n                                            const errorTextPart = {\n                                                type: \"text\",\n                                                id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                content: '<strong style=\"color: red;\">Stream Error:</strong> '.concat(renderSanitizedMarkdown(parsedChunk.content))\n                                            };\n                                            const newParts = [\n                                                ...msg.parts,\n                                                errorTextPart\n                                            ];\n                                            return {\n                                                ...msg,\n                                                parts: newParts,\n                                                thinking: false,\n                                                is_error_message: true\n                                            };\n                                        }\n                                        return msg;\n                                    }));\n                                setStatus(\"Ready\"); // Reset status after error\n                            }\n                        } catch (err) {\n                            console.error(\"Error parsing final stream chunk JSON:\", err, \"Raw final buffer:\", buffer);\n                        }\n                    }\n                    console.log(\"[PAGE.TSX] HTTP Response Stream Reader finished.\");\n                    setMessages((prev)=>prev.map((msg)=>msg.id === botMessageId && msg.thinking ? {\n                                ...msg,\n                                thinking: false\n                            } : msg));\n                    if (status !== \"Ready\") setStatus(\"Ready\");\n                    break;\n                }\n                buffer += decoder.decode(value, {\n                    stream: true\n                });\n                let newlineIndex;\n                while((newlineIndex = buffer.indexOf(\"\\n\")) >= 0){\n                    const line = buffer.substring(0, newlineIndex);\n                    buffer = buffer.substring(newlineIndex + 1);\n                    if (line.trim() === \"\") continue;\n                    try {\n                        const parsedChunk = JSON.parse(line);\n                        // console.log('[PAGE.TSX] Streamed Chunk:', JSON.stringify(parsedChunk)); // General log exists\n                        if (parsedChunk.type === \"text_chunk\" && parsedChunk.content) {\n                            setMessages((prev)=>prev.map((msg)=>{\n                                    if (msg.id === botMessageId) {\n                                        console.log(\"[PAGE.TSX] Updating message \".concat(msg.id, \" with text_chunk (stream loop). Current parts:\"), JSON.parse(JSON.stringify(msg.parts))); // DEEP COPY LOGGING\n                                        const newParts = [\n                                            ...msg.parts\n                                        ]; // Shallow copy of parts array\n                                        const lastPartIndex = newParts.length > 0 ? newParts.length - 1 : -1;\n                                        const lastPart = lastPartIndex !== -1 ? newParts[lastPartIndex] : null;\n                                        // Normalize the incoming chunk's content.\n                                        // The second argument to normalizeFragment was lastPart.content or \"\" in the original logic.\n                                        const contentFromChunk = normalizeFragment(parsedChunk.content, lastPart && lastPart.type === \"text\" ? lastPart.content : \"\");\n                                        if (lastPart && lastPart.type === \"text\") {\n                                            // Update the last part immutably by creating a new object\n                                            newParts[lastPartIndex] = {\n                                                ...lastPart,\n                                                content: lastPart.content + contentFromChunk\n                                            };\n                                        } else {\n                                            // Add a new text part if no previous text part or parts array is empty\n                                            newParts.push({\n                                                type: \"text\",\n                                                id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                content: contentFromChunk\n                                            });\n                                        }\n                                        return {\n                                            ...msg,\n                                            parts: newParts,\n                                            thinking: true\n                                        };\n                                    }\n                                    return msg;\n                                }));\n                        } else if (parsedChunk.type === \"thought_summary\" && parsedChunk.content) {\n                            setMessages((prev)=>prev.map((msg)=>{\n                                    if (msg.id === botMessageId) {\n                                        console.log(\"[PAGE.TSX] Updating message \".concat(msg.id, \" with thought_summary. Current parts:\"), JSON.parse(JSON.stringify(msg.parts)));\n                                        const newParts = [\n                                            ...msg.parts\n                                        ];\n                                        const lastPartIndex = newParts.length > 0 ? newParts.length - 1 : -1;\n                                        const lastPart = lastPartIndex !== -1 ? newParts[lastPartIndex] : null;\n                                        const contentFromChunk = normalizeFragment(parsedChunk.content, lastPart && lastPart.type === \"thought_summary\" ? lastPart.content : \"\");\n                                        if (lastPart && lastPart.type === \"thought_summary\") {\n                                            newParts[lastPartIndex] = {\n                                                ...lastPart,\n                                                content: lastPart.content + contentFromChunk\n                                            };\n                                        } else {\n                                            newParts.push({\n                                                type: \"thought_summary\",\n                                                id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                content: contentFromChunk\n                                            });\n                                        }\n                                        return {\n                                            ...msg,\n                                            parts: newParts,\n                                            thinking: true\n                                        };\n                                    }\n                                    return msg;\n                                }));\n                        } else if (parsedChunk.type === \"tool_call_pending\" && parsedChunk.name && parsedChunk.arguments) {\n                            const call_id_from_chunk = parsedChunk.call_id || \"tool-\".concat((0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])());\n                            setMessages((prev)=>prev.map((msg)=>{\n                                    if (msg.id === botMessageId) {\n                                        const existingToolCallPart = msg.parts.find((part)=>part.type === \"tool_call\" && part.toolCall.call_id === call_id_from_chunk);\n                                        if (existingToolCallPart) {\n                                            console.log(\"[PAGE.TSX] (stream loop) Tool call with ID \".concat(call_id_from_chunk, \" already exists in pending state. Ignoring duplicate pending message.\"));\n                                            return msg;\n                                        }\n                                        const newToolCallData = {\n                                            call_id: call_id_from_chunk,\n                                            name: parsedChunk.name,\n                                            arguments: typeof parsedChunk.arguments === \"string\" ? parsedChunk.arguments : JSON.stringify(parsedChunk.arguments),\n                                            status: \"Pending...\"\n                                        };\n                                        console.log(\"[PAGE.TSX] Tool Call Pending (New):\", JSON.parse(JSON.stringify(newToolCallData)));\n                                        const newParts = [\n                                            ...msg.parts\n                                        ];\n                                        newParts.push({\n                                            type: \"tool_call\",\n                                            id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                            toolCall: newToolCallData\n                                        });\n                                        newParts.push({\n                                            type: \"text\",\n                                            id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                            content: \"\"\n                                        });\n                                        return {\n                                            ...msg,\n                                            parts: newParts,\n                                            thinking: true\n                                        };\n                                    }\n                                    return msg;\n                                }));\n                        } else if (parsedChunk.type === \"tool_result\" && parsedChunk.call_id && typeof parsedChunk.result !== \"undefined\") {\n                            console.log(\"[PAGE.TSX] Received tool_result chunk:\", JSON.parse(JSON.stringify(parsedChunk))); // DEEP COPY LOGGING\n                            if (parsedChunk.name === \"get_directions\") {\n                                console.log(\"[PAGE.TSX] RAW get_directions tool_result CHUNK (repeated block):\", JSON.stringify(parsedChunk));\n                            }\n                            // console.log(`[PAGE.TSX] Parsed chunk is_partial value: ${parsedChunk.is_partial}`); // Keep for debugging if needed\n                            setMessages((prev)=>prev.map((msg)=>{\n                                    if (msg.id === botMessageId) {\n                                        console.log(\"[PAGE.TSX] Updating message \".concat(msg.id, \" with tool_result. Current parts:\"), JSON.parse(JSON.stringify(msg.parts))); // DEEP COPY LOGGING\n                                        let matchedToolCallInParts = false;\n                                        const newParts = msg.parts.map((part)=>{\n                                            if (part.type === \"tool_call\" && part.toolCall.call_id === parsedChunk.call_id) {\n                                                matchedToolCallInParts = true;\n                                                const tc = part.toolCall;\n                                                // console.log(`[PAGE.TSX] Existing tool call data for ${tc.call_id}:`, JSON.parse(JSON.stringify(tc)));\n                                                let finalResult = typeof parsedChunk.result === \"string\" ? parsedChunk.result : JSON.stringify(parsedChunk.result);\n                                                const isPartial = typeof parsedChunk.is_partial === \"boolean\" ? parsedChunk.is_partial : false;\n                                                const isError = typeof parsedChunk.is_error === \"boolean\" ? parsedChunk.is_error : false;\n                                                const newStatus = isPartial ? \"Streaming...\" : isError ? \"Error\" : \"Completed\";\n                                                // console.log(`[PAGE.TSX] Updating tool: ${tc.call_id}, New Status: ${newStatus}, Is Partial (derived): ${isPartial}, Is Error (derived): ${isError}`);\n                                                const updatedToolCall = {\n                                                    ...tc,\n                                                    result: isPartial && tc.result && tc.status === \"Streaming...\" ? tc.result + \"\\n---\\n\" + finalResult : finalResult,\n                                                    status: newStatus,\n                                                    is_error: isError,\n                                                    is_partial: isPartial\n                                                };\n                                                // console.log(`[PAGE.TSX] New tool call data for ${tc.call_id}:`, JSON.parse(JSON.stringify(updatedToolCall)));\n                                                // --- NEW: Extract get_directions_response ---\n                                                let toolResponse = null;\n                                                if (tc.name === \"get_directions\" && parsedChunk.result) {\n                                                    // Handle both old wrapped format and new direct format\n                                                    if (typeof parsedChunk.result === \"object\") {\n                                                        const responseKey = \"\".concat(tc.name, \"_response\");\n                                                        if (parsedChunk.result[responseKey]) {\n                                                            // Old wrapped format\n                                                            toolResponse = parsedChunk.result[responseKey];\n                                                            console.log(\"[PAGE.TSX] (Stream Loop) Using wrapped format for directions, toolResponse:\", JSON.stringify(toolResponse).substring(0, 200) + \"...\");\n                                                        } else {\n                                                            // New direct format from FastMCP\n                                                            toolResponse = parsedChunk.result;\n                                                            console.log(\"[PAGE.TSX] (Stream Loop) Using direct format for directions, toolResponse:\", JSON.stringify(toolResponse).substring(0, 200) + \"...\");\n                                                        }\n                                                    }\n                                                }\n                                                // --- END NEW ---\n                                                // If this is the final result for get_directions, set map data\n                                                if (tc.name === \"get_directions\" && toolResponse && toolResponse.status === \"success\" && toolResponse.data && !isError && !isPartial) {\n                                                    console.log(\"[PAGE.TSX] (Stream Loop) Setting directionsData with:\", JSON.stringify(toolResponse.data).substring(0, 200) + \"...\");\n                                                    setDirectionsData(toolResponse.data);\n                                                    setMapDisplayKey((prevKey)=>prevKey + 1);\n                                                    setIsMapSectionVisible(true); // MODIFIED: Show map section automatically\n                                                } else if (tc.name === \"get_directions\" && !toolResponse) {\n                                                    console.error(\"[PAGE.TSX] ERROR (stream loop): get_directions_response missing in parsedChunk.result!\");\n                                                }\n                                                // NEW: Web app detection logic\n                                                if ((tc.name === \"create_web_app\" || tc.name === \"edit_web_app\") && !isError && !isPartial && tc.result) {\n                                                    try {\n                                                        const resultData = typeof tc.result === \"string\" ? JSON.parse(tc.result) : tc.result;\n                                                        if (resultData.status === \"success\" && resultData.url) {\n                                                            console.log(\"[PAGE.TSX] (Final Buffer) Setting webAppUrl with:\", resultData.url);\n                                                        // This will be set on the message object below\n                                                        }\n                                                    } catch (e) {\n                                                        console.warn(\"[PAGE.TSX] (Final Buffer) Failed to parse web app result:\", e);\n                                                    }\n                                                }\n                                                // NEW: Image generation detection logic\n                                                if (tc.name === \"generate_images_with_prompts\" && !isError && !isPartial && tc.result) {\n                                                    try {\n                                                        const resultData = typeof tc.result === \"string\" ? JSON.parse(tc.result) : tc.result;\n                                                        if (resultData.status === \"success\" && resultData.results) {\n                                                            // Extract all image URLs from the results array\n                                                            const imageUrls = [];\n                                                            resultData.results.forEach((resultArray)=>{\n                                                                if (Array.isArray(resultArray)) {\n                                                                    imageUrls.push(...resultArray);\n                                                                }\n                                                            });\n                                                            if (imageUrls.length > 0) {\n                                                                console.log(\"[PAGE.TSX] (Stream Loop) Setting generatedImageUrls with:\", imageUrls.length, \"images\");\n                                                            // This will be set on the message object below\n                                                            }\n                                                        }\n                                                    } catch (e) {\n                                                        console.warn(\"[PAGE.TSX] (Stream Loop) Failed to parse image generation result:\", e);\n                                                    }\n                                                }\n                                                // NEW: Process tool call for preview extraction (streaming loop)\n                                                processToolCallForPreview(updatedToolCall, msg.id);\n                                                return {\n                                                    ...part,\n                                                    toolCall: updatedToolCall\n                                                };\n                                            }\n                                            return part;\n                                        });\n                                        if (!matchedToolCallInParts) {\n                                            console.warn(\"[PAGE.TSX] (stream loop) Tool call with id \".concat(parsedChunk.call_id, \" not found in message \").concat(msg.id, \" parts\"));\n                                        }\n                                        // --- NEW: Attach directionsData to message for rendering ---\n                                        let toolResponse = null;\n                                        if (parsedChunk.name === \"get_directions\" && parsedChunk.result) {\n                                            // Handle both old wrapped format and new direct format\n                                            if (typeof parsedChunk.result === \"object\") {\n                                                const responseKey = \"\".concat(parsedChunk.name, \"_response\");\n                                                if (parsedChunk.result[responseKey]) {\n                                                    // Old wrapped format\n                                                    toolResponse = parsedChunk.result[responseKey];\n                                                    console.log(\"[PAGE.TSX] (Stream Loop Message) Using wrapped format for directions, toolResponse:\", JSON.stringify(toolResponse).substring(0, 200) + \"...\");\n                                                } else {\n                                                    // New direct format from FastMCP\n                                                    toolResponse = parsedChunk.result;\n                                                    console.log(\"[PAGE.TSX] (Stream Loop Message) Using direct format for directions, toolResponse:\", JSON.stringify(toolResponse).substring(0, 200) + \"...\");\n                                                }\n                                            }\n                                        }\n                                        let finalMsgObject = {\n                                            ...msg,\n                                            parts: newParts,\n                                            thinking: true\n                                        };\n                                        if (parsedChunk.name === \"get_directions\" && toolResponse && !(typeof parsedChunk.is_partial === \"boolean\" && parsedChunk.is_partial) && !(typeof parsedChunk.is_error === \"boolean\" && parsedChunk.is_error) && toolResponse.status === \"success\" && toolResponse.data) {\n                                            finalMsgObject.showMapToggleForThisMessage = true;\n                                            finalMsgObject.directionsData = toolResponse.data;\n                                            console.log(\"[PAGE.TSX] (Stream Loop Message) Setting message directions data:\", JSON.stringify(toolResponse.data).substring(0, 200) + \"...\");\n                                        }\n                                        // NEW: Web app message object updates for streaming loop\n                                        if ((parsedChunk.name === \"create_web_app\" || parsedChunk.name === \"edit_web_app\") && !(typeof parsedChunk.is_partial === \"boolean\" && parsedChunk.is_partial) && !(typeof parsedChunk.is_error === \"boolean\" && parsedChunk.is_error) && parsedChunk.result) {\n                                            try {\n                                                const resultData = typeof parsedChunk.result === \"string\" ? JSON.parse(parsedChunk.result) : parsedChunk.result;\n                                                if (resultData.status === \"success\" && resultData.url) {\n                                                    finalMsgObject.showWebAppForThisMessage = true;\n                                                    finalMsgObject.webAppUrl = resultData.url;\n                                                }\n                                            } catch (e) {\n                                                console.warn(\"[PAGE.TSX] (Stream Loop) Failed to parse web app result for message:\", e);\n                                            }\n                                        }\n                                        // NEW: Image generation message object updates\n                                        if (parsedChunk.name === \"generate_images_with_prompts\" && !(typeof parsedChunk.is_partial === \"boolean\" && parsedChunk.is_partial) && !(typeof parsedChunk.is_error === \"boolean\" && parsedChunk.is_error) && parsedChunk.result) {\n                                            try {\n                                                const resultData = typeof parsedChunk.result === \"string\" ? JSON.parse(parsedChunk.result) : parsedChunk.result;\n                                                if (resultData.status === \"success\" && resultData.results) {\n                                                    // Extract all image URLs from the results array\n                                                    const imageUrls = [];\n                                                    resultData.results.forEach((resultArray)=>{\n                                                        if (Array.isArray(resultArray)) {\n                                                            imageUrls.push(...resultArray);\n                                                        }\n                                                    });\n                                                    if (imageUrls.length > 0) {\n                                                        finalMsgObject.showImagesForThisMessage = true;\n                                                        finalMsgObject.generatedImageUrls = imageUrls;\n                                                        console.log(\"[PAGE.TSX] (Final Buffer) Setting generatedImageUrls with:\", imageUrls.length, \"images\");\n                                                    }\n                                                }\n                                            } catch (e) {\n                                                console.warn(\"[PAGE.TSX] (Final Buffer) Failed to parse image generation result for message:\", e);\n                                            }\n                                        }\n                                        return finalMsgObject;\n                                    }\n                                    return msg;\n                                }));\n                        } else if (parsedChunk.type === \"stream_end\") {\n                            console.log(\"[PAGE.TSX] Stream ended for botMessageId:\", botMessageId);\n                            setMessages((prev)=>prev.map((msg)=>msg.id === botMessageId ? {\n                                        ...msg,\n                                        thinking: false\n                                    } : msg));\n                            setStatus(\"Ready\");\n                        } else if (parsedChunk.type === \"error\" && parsedChunk.content) {\n                            console.error(\"[PAGE.TSX] Received stream error chunk:\", parsedChunk);\n                            setMessages((prev)=>prev.map((msg)=>{\n                                    if (msg.id === botMessageId) {\n                                        const errorTextPart = {\n                                            type: \"text\",\n                                            id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                            content: '<strong style=\"color: red;\">Stream Error:</strong> '.concat(renderSanitizedMarkdown(parsedChunk.content))\n                                        };\n                                        const newParts = [\n                                            ...msg.parts,\n                                            errorTextPart\n                                        ];\n                                        return {\n                                            ...msg,\n                                            parts: newParts,\n                                            thinking: false,\n                                            is_error_message: true\n                                        };\n                                    }\n                                    return msg;\n                                }));\n                            setStatus(\"Ready\"); // Reset status after error\n                        } else if (parsedChunk.type === \"tool_sample_text_chunk\" && parsedChunk.parent_tool_call_id && typeof parsedChunk.content === \"string\") {\n                            setMessages((prev)=>prev.map((msg)=>{\n                                    if (msg.id === botMessageId) {\n                                        const newParts = msg.parts.map((part)=>{\n                                            if (part.type === \"tool_call\" && part.toolCall.call_id === parsedChunk.parent_tool_call_id) {\n                                                const tc = part.toolCall;\n                                                const currentPairs = tc.sampleCallPairs || [];\n                                                let newPairs;\n                                                if (currentPairs.length > 0) {\n                                                    const lastPair = currentPairs[currentPairs.length - 1];\n                                                    // Create new pair object with updated output\n                                                    const updatedLastPair = {\n                                                        ...lastPair,\n                                                        output: (lastPair.output || \"\") + parsedChunk.content\n                                                    };\n                                                    // Create new array with updated last pair\n                                                    newPairs = [\n                                                        ...currentPairs.slice(0, -1),\n                                                        updatedLastPair\n                                                    ];\n                                                } else {\n                                                    // Create new pair\n                                                    newPairs = [\n                                                        {\n                                                            id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                            output: parsedChunk.content\n                                                        }\n                                                    ];\n                                                }\n                                                console.log(\"[PAGE.TSX] (Stream Line) Updated sampleCallPairs (output) for \".concat(parsedChunk.parent_tool_call_id, \":\"), JSON.parse(JSON.stringify(newPairs)));\n                                                return {\n                                                    ...part,\n                                                    toolCall: {\n                                                        ...tc,\n                                                        sampleCallPairs: newPairs\n                                                    }\n                                                };\n                                            }\n                                            return part;\n                                        });\n                                        return {\n                                            ...msg,\n                                            parts: newParts,\n                                            thinking: true\n                                        };\n                                    }\n                                    return msg;\n                                }));\n                        } else if (parsedChunk.type === \"tool_sample_thought_chunk\" && parsedChunk.parent_tool_call_id && typeof parsedChunk.content === \"string\") {\n                            setMessages((prev)=>prev.map((msg)=>{\n                                    if (msg.id === botMessageId) {\n                                        const newParts = msg.parts.map((part)=>{\n                                            if (part.type === \"tool_call\" && part.toolCall.call_id === parsedChunk.parent_tool_call_id) {\n                                                const tc = part.toolCall;\n                                                const currentPairs = tc.sampleCallPairs || [];\n                                                let newPairs;\n                                                // If lastPair exists and is still 'open' (no output yet), append thoughts.\n                                                // Otherwise, this is a new sampling call's thoughts, so create a new pair.\n                                                if (currentPairs.length > 0) {\n                                                    const lastPair = currentPairs[currentPairs.length - 1];\n                                                    if (typeof lastPair.output === \"undefined\") {\n                                                        // Update existing pair with thoughts\n                                                        const updatedLastPair = {\n                                                            ...lastPair,\n                                                            thoughts: (lastPair.thoughts || \"\") + parsedChunk.content\n                                                        };\n                                                        newPairs = [\n                                                            ...currentPairs.slice(0, -1),\n                                                            updatedLastPair\n                                                        ];\n                                                    } else {\n                                                        // Create new pair for new sampling call\n                                                        newPairs = [\n                                                            ...currentPairs,\n                                                            {\n                                                                id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                                thoughts: parsedChunk.content\n                                                            }\n                                                        ];\n                                                    }\n                                                } else {\n                                                    // Create first pair\n                                                    newPairs = [\n                                                        {\n                                                            id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                                            thoughts: parsedChunk.content\n                                                        }\n                                                    ];\n                                                }\n                                                console.log(\"[PAGE.TSX] (Stream Line) Updated sampleCallPairs (thoughts) for \".concat(parsedChunk.parent_tool_call_id, \":\"), JSON.parse(JSON.stringify(newPairs)));\n                                                return {\n                                                    ...part,\n                                                    toolCall: {\n                                                        ...tc,\n                                                        sampleCallPairs: newPairs\n                                                    }\n                                                };\n                                            }\n                                            return part;\n                                        });\n                                        return {\n                                            ...msg,\n                                            parts: newParts,\n                                            thinking: true\n                                        };\n                                    }\n                                    return msg;\n                                }));\n                        }\n                    // ---- END: New chunk types for per-line stream processing ----\n                    } catch (err) {\n                        console.error(\"Error parsing stream chunk JSON:\", err, \"Raw line:\", line);\n                    }\n                }\n            }\n        } catch (error) {\n            console.error(\"Error sending message or processing stream:\", error);\n            const errorContent = error instanceof Error ? error.message : \"Sorry, I encountered an error processing your request.\";\n            const renderedErrorContent = renderSanitizedMarkdown(errorContent);\n            let botMessageFoundAndUpdated = false;\n            setMessages((prev)=>prev.map((msg)=>{\n                    if (msg.id === botMessageId) {\n                        botMessageFoundAndUpdated = true;\n                        const newErrorPart = {\n                            type: \"text\",\n                            id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                            content: renderedErrorContent\n                        };\n                        const updatedParts = [\n                            ...msg.parts || [],\n                            newErrorPart\n                        ]; // Ensure msg.parts exists\n                        return {\n                            ...msg,\n                            parts: updatedParts,\n                            thinking: false,\n                            is_error_message: true\n                        };\n                    }\n                    return msg;\n                }));\n            if (!botMessageFoundAndUpdated) {\n                setMessages((prevMessages)=>[\n                        ...prevMessages,\n                        {\n                            id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                            sender: \"bot\",\n                            parts: [\n                                {\n                                    type: \"text\",\n                                    id: (0,uuid__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(),\n                                    content: renderedErrorContent\n                                }\n                            ],\n                            timestamp: Date.now(),\n                            thinking: false,\n                            is_error_message: true\n                        }\n                    ]);\n            }\n        } finally{}\n    };\n    const handleExamplePromptClick = (title, detail)=>{\n        setUserInput(\"\".concat(title, \" \").concat(detail));\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const viewport = scrollAreaRef.current;\n        if (viewport) {\n            // The viewport itself is the scrollable container in ScrollArea\n            viewport.scrollTop = viewport.scrollHeight;\n        }\n    }, [\n        messages\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const style = document.createElement(\"style\");\n        style.innerHTML = \"\\n      .animated-ellipsis span {\\n        opacity: 0;\\n        animation: an_ellipsis 1.2s infinite;\\n        animation-fill-mode: forwards; /* Keep the final state of the animation */\\n      }\\n      .animated-ellipsis span:nth-child(1) { animation-delay: 0.1s; }\\n      .animated-ellipsis span:nth-child(2) { animation-delay: 0.25s; }\\n      .animated-ellipsis span:nth-child(3) { animation-delay: 0.4s; }\\n      @keyframes an_ellipsis {\\n        0% { opacity: 0; transform: translateY(-0.1em);}\\n        30% { opacity: 1; transform: translateY(0);}\\n        70% { opacity: 1; transform: translateY(0);}\\n        100% { opacity: 0; transform: translateY(0.1em);}\\n      }\\n      /* Add CSS for thought summary details arrow rotation */\\n      .thought-summary-details[open] > summary .details-arrow {\\n        transform: rotate(180deg);\\n      }\\n      /* Add CSS for tool call details arrow rotation */\\n      .tool-call-display[open] > summary .details-arrow {\\n        transform: rotate(180deg);\\n      }\\n      /* Ensure tool call displays don't cause horizontal overflow */\\n      .tool-call-display {\\n        max-width: 100%;\\n        overflow-wrap: break-word;\\n        word-break: break-all;\\n      }\\n      .tool-call-display pre {\\n        max-width: 100%;\\n        overflow-x: auto;\\n        word-break: break-all;\\n        white-space: pre-wrap;\\n        overflow-wrap: anywhere;\\n      }\\n      .tool-call-display .tool-call-content {\\n        max-width: 100%;\\n        overflow-wrap: break-word;\\n      }\\n      /* Add some basic prose styling for markdown content if not already globally available */\\n      .prose {\\n        line-height: 1.35; /* Increased for better readability */\\n        font-size: 0.94rem;\\n        word-wrap: break-word; /* Force word wrapping */\\n        overflow-wrap: break-word; /* Modern equivalent */\\n        word-break: break-word; /* Break long words */\\n      }\\n      .prose p { \\n        margin-bottom: 0.5em; /* Reduced for tighter spacing */\\n        word-wrap: break-word;\\n        overflow-wrap: break-word;\\n      }\\n      /* Specific URL and link handling to prevent overflow */\\n      .prose a {\\n        word-break: break-all; /* Break URLs aggressively */\\n        overflow-wrap: break-word;\\n        hyphens: auto;\\n      }\\n      /* Line clamp utilities for text truncation */\\n      .line-clamp-1 {\\n        overflow: hidden;\\n        display: -webkit-box;\\n        -webkit-box-orient: vertical;\\n        -webkit-line-clamp: 1;\\n      }\\n      .line-clamp-2 {\\n        overflow: hidden;\\n        display: -webkit-box;\\n        -webkit-box-orient: vertical;\\n        -webkit-line-clamp: 2;\\n      }\\n      .line-clamp-3 {\\n        overflow: hidden;\\n        display: -webkit-box;\\n        -webkit-box-orient: vertical;\\n        -webkit-line-clamp: 3;\\n      }\\n      .prose ul {\\n        list-style-type: disc;\\n        margin-block-start: 0;\\n        margin-block-end: 0.5em; /* Reduced */\\n        padding-inline-start: 1.25rem;\\n      }\\n      .prose ul ul {\\n        list-style-type: circle;\\n      }\\n      .prose ul ul ul {\\n        list-style-type: square;\\n      }\\n      .prose ol {\\n        list-style-type: decimal;\\n        margin-block-start: 0;\\n        margin-block-end: 0.5em; /* Reduced */\\n        padding-inline-start: 1.25rem;\\n      }\\n      .prose li p {\\n        display: inline;\\n        margin-bottom: 0.2em;\\n      }\\n      .prose li {\\n        overflow-wrap: break-word;\\n        word-break: break-word; \\n        white-space: normal; \\n      }\\n      .prose pre {\\n        background-color: hsl(var(--muted));\\n        color: hsl(var(--muted-foreground));\\n        padding: 1em;\\n        border-radius: 0.375rem; \\n        overflow-x: auto;\\n        font-size: 0.875em;\\n        border: 1px solid hsl(var(--border));\\n      }\\n      .prose code:not(pre code) {\\n        background-color: hsl(var(--muted));\\n        color: hsl(var(--primary)); /* Using primary color for inline code for better visibility */\\n        padding: 0.2em 0.4em;\\n        margin: 0 0.1em;\\n        font-size: 0.85em;\\n        border-radius: 0.25rem;\\n      }\\n      .dark .prose pre {\\n        background-color: hsl(var(--secondary)); /* A slightly different dark for pre blocks */\\n         border: 1px solid hsl(var(--border));\\n      }\\n       .dark .prose code:not(pre code) {\\n        background-color: hsl(var(--secondary));\\n      }\\n      /* Responsive images in prose */\\n      .prose img {\\n        max-width: 100%; /* Ensure images are responsive by default */\\n        height: auto;    /* Allow image to set its own height based on aspect ratio */\\n        min-height: 150px; /* Reserve some minimum space to reduce layout shift on mobile */\\n        max-height: 350px; /* Prevent images from becoming excessively tall */\\n        object-fit: contain; /* Ensure the image fits within bounds & maintains aspect ratio */\\n        display: block;  /* Allows margin auto to work for centering */\\n        margin-left: auto;\\n        margin-right: auto;\\n        margin-top: 0.5em;\\n        margin-bottom: 0.5em;\\n        border-radius: 0.375rem; /* Add a slight rounding to images */\\n        background-color: hsl(var(--muted-foreground) / 0.05); /* Subtle background for loading state */\\n      }\\n\\n      .dark .prose img {\\n        background-color: hsl(var(--muted-foreground) / 0.1); /* Slightly more visible on dark for loading */\\n      }\\n\\n      /* Video styling to match images */\\n      .prose video {\\n        max-width: 100%;\\n        height: auto;\\n        max-height: 400px;\\n        border-radius: 0.375rem;\\n        margin: 0.5em auto;\\n        display: block;\\n        background-color: hsl(var(--muted-foreground) / 0.05);\\n        border: 1px solid hsl(var(--border));\\n      }\\n\\n      .dark .prose video {\\n        background-color: hsl(var(--muted-foreground) / 0.1);\\n        border: 1px solid hsl(var(--border));\\n      }\\n\\n      @media (min-width: 1024px) { /* Desktop screens */\\n        .prose img {\\n          max-width: 60%; /* Make images smaller on desktop */\\n          max-height: 500px; /* Allow larger images on desktop */\\n        }\\n        \\n        .prose video {\\n          max-width: 70%; /* Make videos slightly larger than images on desktop */\\n          max-height: 600px; /* Allow larger videos on desktop */\\n        }\\n      }\\n    \";\n        document.head.appendChild(style);\n        // Cleanup function to remove the style when the component unmounts\n        return ()=>{\n            document.head.removeChild(style);\n        };\n    }, []); // Empty dependency array ensures this runs only once on mount and unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const setVh = ()=>{\n            document.documentElement.style.setProperty(\"--vh\", \"\".concat(window.innerHeight, \"px\"));\n        };\n        window.addEventListener(\"resize\", setVh);\n        setVh();\n        return ()=>window.removeEventListener(\"resize\", setVh);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Force re-render of MapDisplay when appTheme changes to apply new mapId\n        setMapDisplayKey((prevKey)=>prevKey + 1);\n    }, [\n        appTheme\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col h-[calc(var(--vh))] bg-background text-foreground transition-colors duration-300\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                className: \"px-2 py-2 sm:px-4 sm:py-3 border-b border-border flex justify-between items-center bg-muted/40 transition-colors duration-300\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center space-x-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                variant: \"ghost\",\n                                size: \"icon\",\n                                className: \"hover:bg-muted\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                                    className: \"w-5 h-5\"\n                                }, void 0, false, {\n                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                    lineNumber: 1611,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                lineNumber: 1610,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"relative\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                        value: selectedModel,\n                                        onChange: (e)=>setSelectedModel(e.target.value),\n                                        className: \"bg-background border border-input text-foreground rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-ring hover:bg-muted cursor-pointer appearance-none pr-8 w-auto sm:min-w-[150px]\",\n                                        children: modelOptions.map((option)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                                value: option.value,\n                                                children: option.label\n                                            }, option.value, false, {\n                                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                lineNumber: 1621,\n                                                columnNumber: 17\n                                            }, this))\n                                    }, void 0, false, {\n                                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                        lineNumber: 1615,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n                                        className: \"w-4 h-4 absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none text-muted-foreground\"\n                                    }, void 0, false, {\n                                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                        lineNumber: 1626,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                lineNumber: 1614,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                        lineNumber: 1609,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center space-x-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_mode_toggle__WEBPACK_IMPORTED_MODULE_2__.ModeToggle, {}, void 0, false, {\n                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                lineNumber: 1630,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                variant: \"ghost\",\n                                size: \"icon\",\n                                className: \"hover:bg-muted\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                                    className: \"w-5 h-5\"\n                                }, void 0, false, {\n                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                    lineNumber: 1632,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                lineNumber: 1631,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                        lineNumber: 1629,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                lineNumber: 1608,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                className: \"flex-grow flex flex-col items-center p-2 sm:p-4 relative overflow-hidden transition-colors duration-300\",\n                children: showInitialView ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    id: \"initialView\",\n                    className: \"text-center w-full px-2 flex-grow flex flex-col justify-center items-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                            className: \"text-3xl sm:text-4xl font-semibold text-foreground mb-2 transition-colors duration-300\",\n                            children: \"AST. Chat\"\n                        }, void 0, false, {\n                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                            lineNumber: 1640,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-md sm:text-lg text-muted-foreground mb-6 sm:mb-10 transition-colors duration-300\",\n                            children: \"How can I help you today?\"\n                        }, void 0, false, {\n                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                            lineNumber: 1643,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 max-w-4xl lg:max-w-5xl xl:max-w-7xl mx-auto w-full\",\n                            children: examplePrompts.map((prompt, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                    variant: \"outline\",\n                                    className: \"h-auto text-left p-3 sm:p-4 border-border rounded-lg shadow hover:shadow-md dark:hover:bg-muted transition\",\n                                    onClick: ()=>handleExamplePromptClick(prompt.title, prompt.detail),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                            className: \"font-semibold text-foreground text-sm sm:text-base\",\n                                            children: prompt.title\n                                        }, void 0, false, {\n                                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                            lineNumber: 1654,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-xs sm:text-sm text-muted-foreground\",\n                                            children: prompt.detail\n                                        }, void 0, false, {\n                                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                            lineNumber: 1657,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, index, true, {\n                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                    lineNumber: 1648,\n                                    columnNumber: 17\n                                }, this))\n                        }, void 0, false, {\n                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                            lineNumber: 1646,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                    lineNumber: 1639,\n                    columnNumber: 11\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_5__.ScrollArea, {\n                    className: \"w-full mx-auto flex-grow\",\n                    ref: scrollAreaRef,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        id: \"chatLog\",\n                        className: \"space-y-3 sm:space-y-4 flex flex-col pb-[calc(68px+env(safe-area-inset-bottom))] max-w-4xl lg:max-w-5xl xl:max-w-7xl mx-auto px-2 sm:px-4\",\n                        children: messages.map((msg)=>{\n                            var _msg_directionsData_routes__legs, _msg_directionsData_routes_, _msg_directionsData_routes, _msg_directionsData, _msg_directionsData_routes__legs__duration, _msg_directionsData_routes__legs__distance;\n                            // Define base and conditional classes for the message bubble\n                            let bubbleClasses = \"flex flex-col break-words\"; // Common base for all\n                            let thinkingIndicatorColor = \"text-muted-foreground\"; // Default for thinking indicator\n                            if (msg.sender === \"user\") {\n                                bubbleClasses += \" p-2 rounded-2xl max-w-[95%] sm:max-w-[85%] bg-sky-400 text-sky-900 self-end\";\n                            } else {\n                                if (msg.is_error_message) {\n                                    bubbleClasses += \" px-1 py-1 sm:p-2 rounded-xl max-w-[95%] sm:max-w-[85%] bg-destructive text-destructive-foreground self-start rounded-bl-sm\";\n                                    thinkingIndicatorColor = \"text-destructive-foreground\"; // Match error bubble text\n                                } else {\n                                    // Normal bot message - less \"bubble\" like ChatGPT\n                                    bubbleClasses += \" w-full self-start py-1 sm:py-2 text-foreground\"; // Use page foreground color\n                                    // Add some vertical margin to distinguish bot messages, and horizontal padding for content.\n                                    bubbleClasses += \" my-2 sm:my-3 px-1 sm:px-2\";\n                                    thinkingIndicatorColor = \"text-foreground\"; // Match normal bot text\n                                }\n                            }\n                            // Compute which parts to render: for direction messages, only show text before the get_directions tool call\n                            const partsToRender = msg.directionsData ? (()=>{\n                                const idx = msg.parts.findIndex((p)=>p.type === \"tool_call\" && p.toolCall.name === \"get_directions\");\n                                return idx >= 0 ? msg.parts.slice(0, idx) : msg.parts;\n                            })() : msg.parts;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: bubbleClasses,\n                                children: [\n                                    partsToRender.map((part)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {\n                                            children: [\n                                                part.type === \"text\" && part.content && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"w-full max-w-full min-w-0\",\n                                                    children: parseTextWithURLs(part.content).map((textPart, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {\n                                                            children: textPart.type === \"text\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"message-content prose dark:prose-invert w-full max-w-full min-w-0 text-part-fade-in\",\n                                                                style: {\n                                                                    wordBreak: \"break-word\",\n                                                                    overflowWrap: \"anywhere\"\n                                                                },\n                                                                dangerouslySetInnerHTML: {\n                                                                    __html: renderSanitizedMarkdown(textPart.content)\n                                                                }\n                                                            }, \"\".concat(part.id, \"-text-\").concat(index), false, {\n                                                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                                lineNumber: 1706,\n                                                                columnNumber: 35\n                                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_URLPreview__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                                                url: textPart.content,\n                                                                className: \"my-2 w-full max-w-full\"\n                                                            }, \"\".concat(part.id, \"-url-\").concat(index), false, {\n                                                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                                lineNumber: 1713,\n                                                                columnNumber: 35\n                                                            }, this)\n                                                        }, \"\".concat(part.id, \"-\").concat(index), false, {\n                                                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                            lineNumber: 1704,\n                                                            columnNumber: 31\n                                                        }, this))\n                                                }, void 0, false, {\n                                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                    lineNumber: 1702,\n                                                    columnNumber: 27\n                                                }, this),\n                                                part.type === \"tool_call\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ToolCallDisplay__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                        toolCall: part.toolCall,\n                                                        renderSanitizedMarkdown: renderSanitizedMarkdown\n                                                    }, void 0, false, {\n                                                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                        lineNumber: 1725,\n                                                        columnNumber: 29\n                                                    }, this)\n                                                }, void 0, false),\n                                                part.type === \"thought_summary\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"details\", {\n                                                    className: \"thought-summary-details my-2 rounded-lg border border-border bg-muted/20 shadow-sm\",\n                                                    open: false,\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"summary\", {\n                                                            className: \"thought-summary-summary cursor-pointer p-3 list-none flex items-center justify-between text-sm font-medium text-muted-foreground hover:bg-muted/40 rounded-t-lg\",\n                                                            children: [\n                                                                msg.thinking ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: \"flex items-center\",\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                                                                            className: \"w-4 h-4 mr-2 animate-spin\"\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                                            lineNumber: 1737,\n                                                                            columnNumber: 35\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                            className: \"italic\",\n                                                                            children: \"AST. thinking\"\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                                            lineNumber: 1738,\n                                                                            columnNumber: 35\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                                    lineNumber: 1736,\n                                                                    columnNumber: 33\n                                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                    className: \"italic\",\n                                                                    children: \"Thought Process\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                                    lineNumber: 1741,\n                                                                    columnNumber: 33\n                                                                }, this),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n                                                                    className: \"w-5 h-5 transition-transform duration-200 details-arrow\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                                    lineNumber: 1743,\n                                                                    columnNumber: 31\n                                                                }, this)\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                            lineNumber: 1734,\n                                                            columnNumber: 29\n                                                        }, this),\n                                                        part.content && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"w-full max-w-full min-w-0 p-3 border-t border-border bg-background rounded-b-lg\",\n                                                            children: parseTextWithURLs(part.content).map((textPart, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {\n                                                                    children: textPart.type === \"text\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: \"message-content prose-sm italic text-muted-foreground dark:prose-invert w-full max-w-full min-w-0 text-part-fade-in\",\n                                                                        style: {\n                                                                            wordBreak: \"break-word\",\n                                                                            overflowWrap: \"anywhere\"\n                                                                        },\n                                                                        dangerouslySetInnerHTML: {\n                                                                            __html: renderSanitizedMarkdown(textPart.content)\n                                                                        }\n                                                                    }, \"\".concat(part.id, \"-thought-text-\").concat(index), false, {\n                                                                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                                        lineNumber: 1750,\n                                                                        columnNumber: 39\n                                                                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_URLPreview__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                                                        url: textPart.content,\n                                                                        className: \"my-2 w-full max-w-full\"\n                                                                    }, \"\".concat(part.id, \"-thought-url-\").concat(index), false, {\n                                                                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                                        lineNumber: 1757,\n                                                                        columnNumber: 39\n                                                                    }, this)\n                                                                }, \"\".concat(part.id, \"-thought-\").concat(index), false, {\n                                                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                                    lineNumber: 1748,\n                                                                    columnNumber: 35\n                                                                }, this))\n                                                        }, void 0, false, {\n                                                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                            lineNumber: 1746,\n                                                            columnNumber: 31\n                                                        }, this)\n                                                    ]\n                                                }, \"\".concat(part.id, \"-thought-details\"), true, {\n                                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                    lineNumber: 1729,\n                                                    columnNumber: 27\n                                                }, this)\n                                            ]\n                                        }, part.id, true, {\n                                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                            lineNumber: 1700,\n                                            columnNumber: 23\n                                        }, this)),\n                                    getPreviewsForMessage(msg.id).map((preview)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ContentPreview__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                                            id: preview.id,\n                                            type: preview.type,\n                                            data: preview.data,\n                                            toolCall: preview.toolCall,\n                                            onUpdate: updatePreview\n                                        }, preview.id, false, {\n                                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                            lineNumber: 1774,\n                                            columnNumber: 23\n                                        }, this)),\n                                    msg.directionsData && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                        children: [\n                                            console.log(\"[PAGE.TSX] Rendering MapDisplay for message\", msg.id, msg.directionsData),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"border rounded-lg shadow-md bg-muted/40 p-0 overflow-hidden mt-2\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MapDisplay__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                                    directionsResponse: msg.directionsData,\n                                                    googleMapsApiKey: googleMapsApiKey,\n                                                    showTraffic: showTraffic,\n                                                    theme: appTheme === \"dark\" ? _components_MapDisplay__WEBPACK_IMPORTED_MODULE_10__.nightTheme : _components_MapDisplay__WEBPACK_IMPORTED_MODULE_10__.defaultTheme\n                                                }, mapDisplayKey, false, {\n                                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                    lineNumber: 1788,\n                                                    columnNumber: 27\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                lineNumber: 1787,\n                                                columnNumber: 25\n                                            }, this),\n                                            ((_msg_directionsData = msg.directionsData) === null || _msg_directionsData === void 0 ? void 0 : (_msg_directionsData_routes = _msg_directionsData.routes) === null || _msg_directionsData_routes === void 0 ? void 0 : (_msg_directionsData_routes_ = _msg_directionsData_routes[0]) === null || _msg_directionsData_routes_ === void 0 ? void 0 : (_msg_directionsData_routes__legs = _msg_directionsData_routes_.legs) === null || _msg_directionsData_routes__legs === void 0 ? void 0 : _msg_directionsData_routes__legs[0]) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"p-2\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_DirectionsSteps__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                                    steps: msg.directionsData.routes[0].legs[0].steps,\n                                                    totalDuration: (_msg_directionsData_routes__legs__duration = msg.directionsData.routes[0].legs[0].duration) === null || _msg_directionsData_routes__legs__duration === void 0 ? void 0 : _msg_directionsData_routes__legs__duration.text,\n                                                    totalDistance: (_msg_directionsData_routes__legs__distance = msg.directionsData.routes[0].legs[0].distance) === null || _msg_directionsData_routes__legs__distance === void 0 ? void 0 : _msg_directionsData_routes__legs__distance.text\n                                                }, void 0, false, {\n                                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                    lineNumber: 1798,\n                                                    columnNumber: 29\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                lineNumber: 1797,\n                                                columnNumber: 27\n                                            }, this)\n                                        ]\n                                    }, void 0, true),\n                                    msg.showImagesForThisMessage && msg.generatedImageUrls && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-4 border rounded-lg shadow-md bg-muted/40 overflow-hidden\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center justify-between p-3 bg-background border-b border-border\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                    className: \"text-sm font-semibold text-foreground\",\n                                                    children: \"Generated Images\"\n                                                }, void 0, false, {\n                                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                    lineNumber: 1810,\n                                                    columnNumber: 27\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                lineNumber: 1809,\n                                                columnNumber: 25\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"bg-background\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ImageDisplay__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                                    imageUrls: msg.generatedImageUrls\n                                                }, void 0, false, {\n                                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                    lineNumber: 1813,\n                                                    columnNumber: 27\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                lineNumber: 1812,\n                                                columnNumber: 25\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                        lineNumber: 1808,\n                                        columnNumber: 23\n                                    }, this)\n                                ]\n                            }, msg.id, true, {\n                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                lineNumber: 1695,\n                                columnNumber: 19\n                            }, this);\n                        })\n                    }, void 0, false, {\n                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                        lineNumber: 1666,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                    lineNumber: 1665,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                lineNumber: 1637,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"footer\", {\n                className: \"flex-none px-2 pb-[env(safe-area-inset-bottom)] pt-2 sm:px-4 sm:pb-[env(safe-area-inset-bottom)] sm:pt-3 bg-muted/40 border-t border-border transition-colors duration-300\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                        onSubmit: handleSend,\n                        className: \"max-w-4xl lg:max-w-5xl xl:max-w-7xl mx-auto\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center bg-background border border-input rounded-xl shadow-sm p-2 transition-colors duration-300 focus-within:ring-2 focus-within:ring-ring\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                    type: \"button\",\n                                    variant: \"ghost\",\n                                    size: \"icon\",\n                                    className: \"text-muted-foreground hover:text-foreground\",\n                                    onClick: ()=>{\n                                        var _fileInputRef_current;\n                                        return (_fileInputRef_current = fileInputRef.current) === null || _fileInputRef_current === void 0 ? void 0 : _fileInputRef_current.click();\n                                    },\n                                    title: \"Attach files\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n                                        className: \"w-5 h-5\"\n                                    }, void 0, false, {\n                                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                        lineNumber: 1836,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                    lineNumber: 1828,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"file\",\n                                    multiple: true,\n                                    ref: fileInputRef,\n                                    onChange: handleFileSelect,\n                                    style: {\n                                        display: \"none\"\n                                    },\n                                    accept: \"image/*,.heic,.heif,application/pdf,.txt,.md,.py,.js,.html,.css,.json,.csv,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation\"\n                                }, void 0, false, {\n                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                    lineNumber: 1839,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                    type: \"button\",\n                                    variant: sendLocation ? \"secondary\" : \"ghost\",\n                                    size: \"icon\",\n                                    onClick: ()=>setSendLocation(!sendLocation),\n                                    className: \"mr-2 \".concat(sendLocation ? \"text-primary\" : \"text-muted-foreground\", \" hover:text-foreground\"),\n                                    title: sendLocation ? \"Stop sending location\" : \"Send current location with query\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_22__[\"default\"], {\n                                        className: \"w-5 h-5\"\n                                    }, void 0, false, {\n                                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                        lineNumber: 1855,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                    lineNumber: 1847,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_4__.Input, {\n                                    type: \"text\",\n                                    id: \"userInput\",\n                                    value: userInput,\n                                    onChange: (e)=>setUserInput(e.target.value),\n                                    className: \"flex-grow p-2 bg-transparent focus:outline-none border-0 focus:ring-0 placeholder-muted-foreground\",\n                                    placeholder: \"Send a message...\",\n                                    autoComplete: \"off\"\n                                }, void 0, false, {\n                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                    lineNumber: 1857,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                    type: \"submit\",\n                                    variant: \"default\",\n                                    size: \"icon\",\n                                    disabled: !(userInput.trim() || selectedFiles.length > 0) || status !== \"Ready\",\n                                    className: \"rounded-lg\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n                                        className: \"w-5 h-5\"\n                                    }, void 0, false, {\n                                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                        lineNumber: 1867,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                    lineNumber: 1866,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                            lineNumber: 1827,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                        lineNumber: 1826,\n                        columnNumber: 9\n                    }, this),\n                    selectedFiles.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"max-w-4xl lg:max-w-5xl xl:max-w-7xl mx-auto mt-2 text-xs text-muted-foreground\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"font-medium mb-1\",\n                                children: \"Selected files:\"\n                            }, void 0, false, {\n                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                lineNumber: 1874,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                                className: \"list-disc list-inside pl-1 space-y-0.5\",\n                                children: selectedFiles.map((file)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                        className: \"flex items-center justify-between\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                children: [\n                                                    file.name,\n                                                    \" (\",\n                                                    Math.round(file.size / 1024),\n                                                    \" KB)\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                lineNumber: 1878,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                                variant: \"ghost\",\n                                                size: \"sm\",\n                                                onClick: ()=>removeSelectedFile(file.name),\n                                                className: \"text-red-500 hover:text-red-700 p-1 h-auto\",\n                                                children: \"Remove\"\n                                            }, void 0, false, {\n                                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                                lineNumber: 1879,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, file.name, true, {\n                                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                        lineNumber: 1877,\n                                        columnNumber: 17\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                lineNumber: 1875,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                        lineNumber: 1873,\n                        columnNumber: 11\n                    }, this),\n                    fileProcessingStatus && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"max-w-4xl lg:max-w-5xl xl:max-w-7xl mx-auto mt-2 text-xs text-blue-600 dark:text-blue-400\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowUp_ChevronDown_Loader2_MapPin_Menu_Paperclip_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                                    className: \"w-3 h-3 mr-1 animate-spin\"\n                                }, void 0, false, {\n                                    fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                                    lineNumber: 1891,\n                                    columnNumber: 15\n                                }, this),\n                                fileProcessingStatus\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                            lineNumber: 1890,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                        lineNumber: 1889,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-xs text-muted-foreground/80 text-center mt-2 pb-1\",\n                        children: [\n                            \"Status: \",\n                            status\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                        lineNumber: 1896,\n                        columnNumber: 10\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n                lineNumber: 1825,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/var/www/flask_app/ast_chat/app/page.tsx\",\n        lineNumber: 1607,\n        columnNumber: 5\n    }, this);\n}\n_s(ChatPage, \"Q74xVzF0uMRh4Mhv4bdyKynLDmo=\", false, function() {\n    return [\n        next_themes__WEBPACK_IMPORTED_MODULE_13__.useTheme,\n        _hooks_useContentPreviews__WEBPACK_IMPORTED_MODULE_14__.useContentPreviews\n    ];\n});\n_c = ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akgsS0FBS04sSUFBSTtnREFBR3FRLFdBQVU7MERBQTZDOzs7Ozs7O3VDQUZoSS9QLEtBQUtOLElBQUk7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBV3pCeEMsc0NBQ0MsOERBQUM0Uzt3QkFBSUMsV0FBVTtrQ0FDYiw0RUFBQ0Q7NEJBQUlDLFdBQVU7OzhDQUNiLDhEQUFDNVUsOEhBQU9BO29DQUFDNFUsV0FBVTs7Ozs7O2dDQUNsQjdTOzs7Ozs7Ozs7Ozs7a0NBSU4sOERBQUNxVDt3QkFBRVIsV0FBVTs7NEJBQXlEOzRCQUFTeFM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJeEY7R0FoekR3QmI7O1FBa0JNWCxrREFBUUE7UUFRaENDLDBFQUFrQkE7OztLQTFCQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vYXBwL3BhZ2UudHN4Pzc2MDMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIEZvcm1FdmVudCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgTW9kZVRvZ2dsZSB9IGZyb20gXCJAL2NvbXBvbmVudHMvbW9kZS10b2dnbGVcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYnV0dG9uXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvaW5wdXRcIjtcbmltcG9ydCB7IFNjcm9sbEFyZWEgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL3Njcm9sbC1hcmVhXCI7XG5pbXBvcnQgeyBDaGV2cm9uRG93biwgTWVudSwgTG9jaywgUGFwZXJjbGlwLCBBcnJvd1VwLCBNYXBQaW4sIExvYWRlcjIgfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5pbXBvcnQgeyBtYXJrZWQgfSBmcm9tICdtYXJrZWQnO1xuaW1wb3J0IERPTVB1cmlmeSBmcm9tICdkb21wdXJpZnknO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgVG9vbENhbGxEaXNwbGF5IGZyb20gXCJAL2NvbXBvbmVudHMvVG9vbENhbGxEaXNwbGF5XCI7XG5pbXBvcnQgVVJMUHJldmlldyBmcm9tIFwiQC9jb21wb25lbnRzL1VSTFByZXZpZXdcIjtcbmltcG9ydCBNYXBEaXNwbGF5LCB7IGRlZmF1bHRUaGVtZSwgbmlnaHRUaGVtZSB9IGZyb20gXCJAL2NvbXBvbmVudHMvTWFwRGlzcGxheVwiO1xuaW1wb3J0IERpcmVjdGlvbnNTdGVwcyBmcm9tIFwiQC9jb21wb25lbnRzL0RpcmVjdGlvbnNTdGVwc1wiO1xuaW1wb3J0IEltYWdlRGlzcGxheSBmcm9tIFwiQC9jb21wb25lbnRzL0ltYWdlRGlzcGxheVwiO1xuaW1wb3J0IHsgdXNlVGhlbWUgfSBmcm9tIFwibmV4dC10aGVtZXNcIjtcbmltcG9ydCB7IHVzZUNvbnRlbnRQcmV2aWV3cyB9IGZyb20gXCJAL2hvb2tzL3VzZUNvbnRlbnRQcmV2aWV3c1wiO1xuaW1wb3J0IENvbnRlbnRQcmV2aWV3IGZyb20gXCJAL2NvbXBvbmVudHMvQ29udGVudFByZXZpZXdcIjtcbmltcG9ydCB7IGV4dHJhY3RQcmV2aWV3RnJvbVRvb2xDYWxsLCBzaG91bGRFeHRyYWN0UHJldmlldyB9IGZyb20gXCJAL3V0aWxzL3ByZXZpZXdFeHRyYWN0b3JzXCI7XG5cbi8vIEVuc3VyZSBtYXJrZWQgcnVucyBzeW5jaHJvbm91c2x5IGZvciB0aGlzIHBhZ2UgdG9vLCBpZiBub3QgYWxyZWFkeSBnbG9iYWxcbm1hcmtlZC5zZXRPcHRpb25zKHsgYXN5bmM6IGZhbHNlIH0pO1xuXG4vLyBDb25maWd1cmF0aW9uIGZvciB0aGUgYmFja2VuZCBBUEkgZW5kcG9pbnRcbmNvbnN0IEJBQ0tFTkRfQVBJX0JBU0VfVVJMID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFDS0VORF9BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjUwMDEnOyAvLyBEZWZhdWx0IHRvIGxvY2FsaG9zdDo1MDAxXG5cbmludGVyZmFjZSBUb29sQ2FsbERhdGEge1xuICBjYWxsX2lkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgYXJndW1lbnRzOiBzdHJpbmc7XG4gIHJlc3VsdD86IHN0cmluZztcbiAgc3RhdHVzPzogXCJQZW5kaW5nLi4uXCIgfCBcIkNvbXBsZXRlZFwiIHwgXCJFcnJvclwiIHwgXCJTdHJlYW1pbmcuLi5cIjtcbiAgaXNfZXJyb3I/OiBib29sZWFuO1xuICBpc19wYXJ0aWFsPzogYm9vbGVhbjtcbiAgc2FtcGxlQ2FsbFBhaXJzPzogQXJyYXk8eyBpZDogc3RyaW5nOyB0aG91Z2h0cz86IHN0cmluZzsgb3V0cHV0Pzogc3RyaW5nOyB9Pjtcbn1cblxuLy8gTkVXOiBEZWZpbmUgYSB0eXBlIGZvciBpbmRpdmlkdWFsIHBhcnRzIG9mIGEgbWVzc2FnZVxudHlwZSBNZXNzYWdlUGFydCA9XG4gIHwgeyB0eXBlOiBcInRleHRcIjsgaWQ6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH1cbiAgfCB7IHR5cGU6IFwidG9vbF9jYWxsXCI7IGlkOiBzdHJpbmc7IHRvb2xDYWxsOiBUb29sQ2FsbERhdGEgfVxuICB8IHsgdHlwZTogXCJ0aG91Z2h0X3N1bW1hcnlcIjsgaWQ6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH07XG5cbmludGVyZmFjZSBNZXNzYWdlIHtcbiAgaWQ6IHN0cmluZztcbiAgc2VuZGVyOiBcInVzZXJcIiB8IFwiYm90XCI7XG4gIHBhcnRzOiBNZXNzYWdlUGFydFtdOyAvLyBSRVBMQUNFUyBjb250ZW50IGFuZCB0b29sX2NhbGxzXG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICB0aGlua2luZz86IGJvb2xlYW47XG4gIGlzX2Vycm9yX21lc3NhZ2U/OiBib29sZWFuOyAvLyBUbyBmbGFnIGJvdCBtZXNzYWdlcyB0aGF0IGFyZSBlcnJvcnNcbiAgc2hvd01hcFRvZ2dsZUZvclRoaXNNZXNzYWdlPzogYm9vbGVhbjsgLy8gPC0tIE5ldyBmbGFnXG4gIGRpcmVjdGlvbnNEYXRhPzogYW55O1xuICBzaG93V2ViQXBwRm9yVGhpc01lc3NhZ2U/OiBib29sZWFuOyAvLyA8LS0gTmV3IGZsYWcgZm9yIHdlYiBhcHBzXG4gIHdlYkFwcFVybD86IHN0cmluZzsgLy8gPC0tIFN0b3JlIHdlYiBhcHAgVVJMXG4gIHNob3dJbWFnZXNGb3JUaGlzTWVzc2FnZT86IGJvb2xlYW47IC8vIDwtLSBOZXcgZmxhZyBmb3IgZ2VuZXJhdGVkIGltYWdlc1xuICBnZW5lcmF0ZWRJbWFnZVVybHM/OiBzdHJpbmdbXTsgLy8gPC0tIFN0b3JlIGdlbmVyYXRlZCBpbWFnZSBVUkxzXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENoYXRQYWdlKCkge1xuICBjb25zdCBbdXNlcklucHV0LCBzZXRVc2VySW5wdXRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXSk7XG4gIGNvbnN0IFtzZWxlY3RlZEZpbGVzLCBzZXRTZWxlY3RlZEZpbGVzXSA9IHVzZVN0YXRlPEZpbGVbXT4oW10pOyAvLyA8LS0gTmV3IHN0YXRlIGZvciBzZWxlY3RlZCBmaWxlc1xuICBjb25zdCBmaWxlSW5wdXRSZWYgPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4obnVsbCk7IC8vIDwtLSBSZWYgZm9yIGZpbGUgaW5wdXRcbiAgY29uc3QgW2ZpbGVQcm9jZXNzaW5nU3RhdHVzLCBzZXRGaWxlUHJvY2Vzc2luZ1N0YXR1c10gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTsgLy8gPC0tIFN0YXR1cyBmb3IgZmlsZSBwcm9jZXNzaW5nXG4gIGNvbnN0IFtzaG93SW5pdGlhbFZpZXcsIHNldFNob3dJbml0aWFsVmlld10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3Qgc2Nyb2xsQXJlYVJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7IC8vIFJlZiBmb3IgdGhlIFNjcm9sbEFyZWEncyB2aWV3cG9ydCBlbGVtZW50XG4gIGNvbnN0IFtzdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZSgnUmVhZHknKTtcbiAgY29uc3QgW2FwaVNlbmRlcl0gPSB1c2VTdGF0ZSgnKzE3MTQ1OTg2MTA1Jyk7XG4gIGNvbnN0IFtjdXJyZW50VXNlckxvY2F0aW9uLCBzZXRDdXJyZW50VXNlckxvY2F0aW9uXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2VuZExvY2F0aW9uLCBzZXRTZW5kTG9jYXRpb25dID0gdXNlU3RhdGUoZmFsc2UpOyAvLyBOZXcgc3RhdGUgZm9yIHRvZ2dsZVxuICBjb25zdCBbZGlyZWN0aW9uc0RhdGEsIHNldERpcmVjdGlvbnNEYXRhXSA9IHVzZVN0YXRlPGFueSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbZ29vZ2xlTWFwc0FwaUtleV0gPSB1c2VTdGF0ZShwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfTUFQU19BUElfS0VZIHx8IFwiXCIpO1xuICBjb25zdCBbbWFwRGlzcGxheUtleSwgc2V0TWFwRGlzcGxheUtleV0gPSB1c2VTdGF0ZSgwKTsgLy8gS2V5IGZvciBmb3JjaW5nIE1hcERpc3BsYXkgcmUtcmVuZGVyXG4gIGNvbnN0IFtzaG93VHJhZmZpYywgc2V0U2hvd1RyYWZmaWNdID0gdXNlU3RhdGUoZmFsc2UpOyAvLyBTdGF0ZSBmb3IgdHJhZmZpYyBsYXllclxuICBjb25zdCBbaXNNYXBTZWN0aW9uVmlzaWJsZSwgc2V0SXNNYXBTZWN0aW9uVmlzaWJsZV0gPSB1c2VTdGF0ZShmYWxzZSk7IC8vIDwtLSBTdGF0ZSBmb3IgbWFwIHNlY3Rpb24gdmlzaWJpbGl0eVxuXG4gIGNvbnN0IHsgdGhlbWU6IGFwcFRoZW1lIH0gPSB1c2VUaGVtZSgpOyAvLyBHZXQgY3VycmVudCBhcHBsaWNhdGlvbiB0aGVtZVxuXG4gIC8vIE5FVzogQWRkIGNvbnRlbnQgcHJldmlld3MgaG9va1xuICBjb25zdCB7IFxuICAgIHVwc2VydFByZXZpZXcsIFxuICAgIHVwZGF0ZVByZXZpZXcsIFxuICAgIGdldFByZXZpZXdzRm9yTWVzc2FnZSwgXG4gICAgcmVtb3ZlUHJldmlldyBcbiAgfSA9IHVzZUNvbnRlbnRQcmV2aWV3cygpO1xuXG4gIC8vIERlZmluZSBhdmFpbGFibGUgbW9kZWxzIGFzIGFuIGFycmF5IG9mIG9iamVjdHMgZm9yIHRoZSBkcm9wZG93blxuICBjb25zdCBtb2RlbE9wdGlvbnMgPSBbXG4gICAgeyB2YWx1ZTogXCJnZW1pbmktMi41LWZsYXNoLXByZXZpZXctMDUtMjBcIiwgbGFiZWw6IFwiR2VtaW5pIDIuNSBGbGFzaFwiIH0sXG4gICAgeyB2YWx1ZTogXCJnZW1pbmktMi41LXByby1wcmV2aWV3LTA1LTA2XCIsIGxhYmVsOiBcIkdlbWluaSAyLjUgUHJvXCIgfSxcbiAgICAvLyBBZGQgbW9yZSBtb2RlbHMgaGVyZSBpbiB0aGUgZnV0dXJlXG4gICAgLy8geyB2YWx1ZTogXCJncHQtNC4xLTIwMjUtMDQtMTRcIiwgbGFiZWw6IFwiR1BULTQuMVwiIH0sIFxuICBdO1xuICBjb25zdCBbc2VsZWN0ZWRNb2RlbCwgc2V0U2VsZWN0ZWRNb2RlbF0gPSB1c2VTdGF0ZShtb2RlbE9wdGlvbnNbMV0udmFsdWUpOyAvLyBEZWZhdWx0IHRvIHRoZSBzZWNvbmQgbW9kZWwgKFBybylcblxuICAvLyBORVc6IEhlbHBlciBmdW5jdGlvbiB0byBwcm9jZXNzIHRvb2wgY2FsbHMgZm9yIHByZXZpZXcgZXh0cmFjdGlvblxuICBjb25zdCBwcm9jZXNzVG9vbENhbGxGb3JQcmV2aWV3ID0gKHRvb2xDYWxsOiBUb29sQ2FsbERhdGEsIG1lc3NhZ2VJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKHNob3VsZEV4dHJhY3RQcmV2aWV3KHRvb2xDYWxsKSkge1xuICAgICAgY29uc3QgZXh0cmFjdGVkUHJldmlldyA9IGV4dHJhY3RQcmV2aWV3RnJvbVRvb2xDYWxsKHRvb2xDYWxsKTtcbiAgICAgIGlmIChleHRyYWN0ZWRQcmV2aWV3ICYmIGV4dHJhY3RlZFByZXZpZXcuc2hvdWxkU2hvdykge1xuICAgICAgICBjb25zb2xlLmxvZyhgW1BBR0UuVFNYXSBFeHRyYWN0ZWQgcHJldmlldyBmb3IgdG9vbCAke3Rvb2xDYWxsLm5hbWV9OmAsIGV4dHJhY3RlZFByZXZpZXcpO1xuICAgICAgICB1cHNlcnRQcmV2aWV3KFxuICAgICAgICAgIGV4dHJhY3RlZFByZXZpZXcuaWQsXG4gICAgICAgICAgZXh0cmFjdGVkUHJldmlldy50eXBlLFxuICAgICAgICAgIGV4dHJhY3RlZFByZXZpZXcuZGF0YSxcbiAgICAgICAgICBtZXNzYWdlSWQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgICAgIGNhbGxfaWQ6IHRvb2xDYWxsLmNhbGxfaWQsXG4gICAgICAgICAgICBzdGF0dXM6IHRvb2xDYWxsLnN0YXR1cyxcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIEZ1bmN0aW9uIHRvIGRldGVjdCBhbmQgY29udmVydCBIRUlDIGZpbGVzIHRvIEpQRUdcbiAgY29uc3QgY29udmVydEhlaWNUb0pwZWcgPSBhc3luYyAoZmlsZTogRmlsZSk6IFByb21pc2U8RmlsZT4gPT4ge1xuICAgIGNvbnN0IGlzSGVpYyA9IGZpbGUubmFtZS50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcuaGVpYycpIHx8IFxuICAgICAgICAgICAgICAgICAgIGZpbGUubmFtZS50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcuaGVpZicpIHx8IFxuICAgICAgICAgICAgICAgICAgIGZpbGUudHlwZSA9PT0gJ2ltYWdlL2hlaWMnIHx8IFxuICAgICAgICAgICAgICAgICAgIGZpbGUudHlwZSA9PT0gJ2ltYWdlL2hlaWYnO1xuXG4gICAgaWYgKCFpc0hlaWMpIHtcbiAgICAgIHJldHVybiBmaWxlOyAvLyBSZXR1cm4gb3JpZ2luYWwgZmlsZSBpZiBub3QgSEVJQ1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+UhCBDb252ZXJ0aW5nIEhFSUMgZmlsZSBcIiR7ZmlsZS5uYW1lfVwiIHRvIEpQRUcuLi5gKTtcbiAgICAgIFxuICAgICAgLy8gRHluYW1pYyBpbXBvcnQgdG8gYXZvaWQgU1NSIGlzc3Vlc1xuICAgICAgY29uc3QgeyBkZWZhdWx0OiBoZWljMmFueSB9ID0gYXdhaXQgaW1wb3J0KCdoZWljMmFueScpO1xuICAgICAgXG4gICAgICAvLyBUcnkgaGVpYzJhbnkgY29udmVyc2lvblxuICAgICAgY29uc3QgY29udmVydGVkQmxvYiA9IGF3YWl0IGhlaWMyYW55KHtcbiAgICAgICAgYmxvYjogZmlsZSxcbiAgICAgICAgdG9UeXBlOiAnaW1hZ2UvanBlZycsXG4gICAgICAgIHF1YWxpdHk6IDAuODUsXG4gICAgICB9KSBhcyBCbG9iO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgbmV3IGZpbGVuYW1lIHdpdGggLmpwZyBleHRlbnNpb25cbiAgICAgIGNvbnN0IG9yaWdpbmFsTmFtZSA9IGZpbGUubmFtZS5yZXBsYWNlKC9cXC4oaGVpY3xoZWlmKSQvaSwgJycpO1xuICAgICAgY29uc3QgbmV3RmlsZU5hbWUgPSBgJHtvcmlnaW5hbE5hbWV9LmpwZ2A7XG5cbiAgICAgIC8vIENyZWF0ZSBuZXcgRmlsZSBvYmplY3Qgd2l0aCBjb252ZXJ0ZWQgYmxvYlxuICAgICAgY29uc3QgY29udmVydGVkRmlsZSA9IG5ldyBGaWxlKFtjb252ZXJ0ZWRCbG9iXSwgbmV3RmlsZU5hbWUsIHtcbiAgICAgICAgdHlwZTogJ2ltYWdlL2pwZWcnLFxuICAgICAgICBsYXN0TW9kaWZpZWQ6IGZpbGUubGFzdE1vZGlmaWVkLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDinIUgU3VjY2Vzc2Z1bGx5IGNvbnZlcnRlZCBcIiR7ZmlsZS5uYW1lfVwiIHRvIFwiJHtuZXdGaWxlTmFtZX1cIiAoJHtNYXRoLnJvdW5kKGNvbnZlcnRlZEZpbGUuc2l6ZSAvIDEwMjQpfUtCKWApO1xuICAgICAgcmV0dXJuIGNvbnZlcnRlZEZpbGU7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gRnJvbnRlbmQgSEVJQyBjb252ZXJzaW9uIGZhaWxlZCBmb3IgXCIke2ZpbGUubmFtZX1cIjpgLCBlcnJvcik7XG4gICAgICBcbiAgICAgIC8vIFRyeSBDYW52YXMgQVBJIGZhbGxiYWNrXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+UhCBBdHRlbXB0aW5nIENhbnZhcyBBUEkgZmFsbGJhY2sgZm9yIFwiJHtmaWxlLm5hbWV9XCIuLi5gKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGltYWdlQml0bWFwID0gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAoZmlsZSk7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghY3R4KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZ2V0IGNhbnZhcyBjb250ZXh0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGltYWdlQml0bWFwLndpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1hZ2VCaXRtYXAuaGVpZ2h0O1xuICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlQml0bWFwLCAwLCAwKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNhbnZhc0Jsb2IgPSBhd2FpdCBuZXcgUHJvbWlzZTxCbG9iPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgY2FudmFzLnRvQmxvYigoYmxvYikgPT4ge1xuICAgICAgICAgICAgaWYgKGJsb2IpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShibG9iKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0NhbnZhcyB0b0Jsb2IgZmFpbGVkJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sICdpbWFnZS9qcGVnJywgMC44NSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxOYW1lID0gZmlsZS5uYW1lLnJlcGxhY2UoL1xcLihoZWljfGhlaWYpJC9pLCAnJyk7XG4gICAgICAgIGNvbnN0IG5ld0ZpbGVOYW1lID0gYCR7b3JpZ2luYWxOYW1lfS5qcGdgO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY29udmVydGVkRmlsZSA9IG5ldyBGaWxlKFtjYW52YXNCbG9iXSwgbmV3RmlsZU5hbWUsIHtcbiAgICAgICAgICB0eXBlOiAnaW1hZ2UvanBlZycsXG4gICAgICAgICAgbGFzdE1vZGlmaWVkOiBmaWxlLmxhc3RNb2RpZmllZCxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIENhbnZhcyBBUEkgZmFsbGJhY2sgc3VjY2VlZGVkIGZvciBcIiR7ZmlsZS5uYW1lfVwiIOKGkiBcIiR7bmV3RmlsZU5hbWV9XCJgKTtcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRlZEZpbGU7XG4gICAgICAgIFxuICAgICAgfSBjYXRjaCAoY2FudmFzRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gQ2FudmFzIEFQSSBmYWxsYmFjayBhbHNvIGZhaWxlZCBmb3IgXCIke2ZpbGUubmFtZX1cIjpgLCBjYW52YXNFcnJvcik7XG4gICAgICAgIFxuICAgICAgICAvLyBGaW5hbCBmYWxsYmFjazogVXBsb2FkIEhFSUMgZmlsZSBhbmQgbGV0IGJhY2tlbmQgaGFuZGxlIGNvbnZlcnNpb25cbiAgICAgICAgY29uc29sZS5sb2coYPCflIQgV2lsbCB1cGxvYWQgXCIke2ZpbGUubmFtZX1cIiBmb3Igc2VydmVyLXNpZGUgY29udmVyc2lvbi4uLmApO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFyayB0aGlzIGZpbGUgZm9yIHNlcnZlci1zaWRlIGNvbnZlcnNpb24gYnkgYWRkaW5nIGEgc3BlY2lhbCBwcm9wZXJ0eVxuICAgICAgICBjb25zdCBmaWxlV2l0aENvbnZlcnNpb25GbGFnID0gbmV3IEZpbGUoW2ZpbGVdLCBmaWxlLm5hbWUsIHtcbiAgICAgICAgICB0eXBlOiBmaWxlLnR5cGUgfHwgJ2ltYWdlL2hlaWMnLFxuICAgICAgICAgIGxhc3RNb2RpZmllZDogZmlsZS5sYXN0TW9kaWZpZWQsXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGEgY3VzdG9tIHByb3BlcnR5IHRvIGluZGljYXRlIHRoaXMgbmVlZHMgc2VydmVyLXNpZGUgY29udmVyc2lvblxuICAgICAgICAoZmlsZVdpdGhDb252ZXJzaW9uRmxhZyBhcyBhbnkpLm5lZWRzU2VydmVyQ29udmVyc2lvbiA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmlsZVdpdGhDb252ZXJzaW9uRmxhZztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZXhhbXBsZVByb21wdHMgPSBbXG4gICAgeyB0aXRsZTogXCJXaGF0IGFyZSB0aGUgYWR2YW50YWdlc1wiLCBkZXRhaWw6IFwib2YgdXNpbmcgTmV4dC5qcz9cIiB9LFxuICAgIHsgdGl0bGU6IFwiV3JpdGUgY29kZSB0b1wiLCBkZXRhaWw6IFwiZGVtb25zdHJhdGUgZGlqa3N0cmFcXFxcJ3MgYWxnb3JpdGhtXCIgfSxcbiAgICB7IHRpdGxlOiBcIkhlbHAgbWUgd3JpdGUgYW4gZXNzYXlcIiwgZGV0YWlsOiBcImFib3V0IHNpbGljb24gdmFsbGV5XCIgfSxcbiAgICB7IHRpdGxlOiBcIldoYXQgaXMgdGhlIHdlYXRoZXJcIiwgZGV0YWlsOiBcImluIFNhbiBGcmFuY2lzY28/XCIgfSxcbiAgXTtcblxuICAvLyBIZWxwZXIgdG8gZW5zdXJlIG1hcmtkb3duIGJsb2NrIGVsZW1lbnRzIGFyZSBwcm9wZXJseSBzcGFjZWRcbiAgY29uc3Qgbm9ybWFsaXplRnJhZ21lbnQgPSAoZnJhZ21lbnQ6IHN0cmluZywgX3ByZXZDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgIC8vIFRFTVBPUkFSSUxZIEEgUEFTUy1USFJPVUdIXG4gICAgcmV0dXJuIGZyYWdtZW50O1xuICB9O1xuXG4gIC8vIE5FVzogRnVuY3Rpb24gdG8gY29udmVydCBzdGFuZGFsb25lIGltYWdlL3ZpZGVvIFVSTHMgdG8gSFRNTCBlbGVtZW50c1xuICBjb25zdCBjb252ZXJ0TWVkaWFVcmxzID0gKHRleHQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgLy8gQ29tbW9uIGltYWdlIGV4dGVuc2lvbnNcbiAgICBjb25zdCBpbWFnZUV4dGVuc2lvbnMgPSAvXFwuKGpwZ3xqcGVnfHBuZ3xnaWZ8d2VicHxzdmd8Ym1wfGljb3x0aWZmKShcXD9bXilcXHNcIiddKik/JC9pO1xuICAgIC8vIENvbW1vbiB2aWRlbyBleHRlbnNpb25zICBcbiAgICBjb25zdCB2aWRlb0V4dGVuc2lvbnMgPSAvXFwuKG1wNHx3ZWJtfG9nZ3xtb3Z8YXZpfHdtdnxmbHZ8bTR2KShcXD9bXilcXHNcIiddKik/JC9pO1xuICAgIFxuICAgIC8vIE1vcmUgY29tcHJlaGVuc2l2ZSBVUkwgcGF0dGVybiB0aGF0IGhhbmRsZXMgVVJMcyBpbiB2YXJpb3VzIGNvbnRleHRzXG4gICAgLy8gVGhpcyBwYXR0ZXJuIGxvb2tzIGZvciBodHRwL2h0dHBzIFVSTHMgdGhhdCBhcmUgbm90IGFscmVhZHkgaW4gbWFya2Rvd24gaW1hZ2UvbGluayBmb3JtYXRcbiAgICBjb25zdCB1cmxQYXR0ZXJuID0gLyg/PCEhXFxbKSg/PCFcXF1cXCgpKD88IVxcWy4qP1xcXVxcKClodHRwcz86XFwvXFwvW15cXHM8PlwiJ1xcXVxcKV0rL2c7XG4gICAgXG4gICAgbGV0IHByb2Nlc3NlZFRleHQgPSB0ZXh0LnJlcGxhY2UodXJsUGF0dGVybiwgKHVybCkgPT4ge1xuICAgICAgLy8gUmVtb3ZlIHRyYWlsaW5nIHB1bmN0dWF0aW9uIHRoYXQgbWlnaHQgbm90IGJlIHBhcnQgb2YgdGhlIFVSTFxuICAgICAgY29uc3QgY2xlYW5VcmwgPSB1cmwucmVwbGFjZSgvWy4sOzohPylcIiddKyQvLCAnJyk7XG4gICAgICBcbiAgICAgIGlmIChpbWFnZUV4dGVuc2lvbnMudGVzdChjbGVhblVybCkpIHtcbiAgICAgICAgcmV0dXJuIGAhW0ltYWdlXSgke2NsZWFuVXJsfSlgO1xuICAgICAgfSBlbHNlIGlmICh2aWRlb0V4dGVuc2lvbnMudGVzdChjbGVhblVybCkpIHtcbiAgICAgICAgcmV0dXJuIGA8dmlkZW8gY29udHJvbHMgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMCU7IGhlaWdodDogYXV0bzsgbWF4LWhlaWdodDogNDAwcHg7IGJvcmRlci1yYWRpdXM6IDAuMzc1cmVtOyBtYXJnaW46IDAuNWVtIGF1dG87IGRpc3BsYXk6IGJsb2NrO1wiPlxuICAgICAgICAgIDxzb3VyY2Ugc3JjPVwiJHtjbGVhblVybH1cIiB0eXBlPVwidmlkZW8vJHtjbGVhblVybC5zcGxpdCgnLicpLnBvcCgpPy5zcGxpdCgnPycpWzBdIHx8ICdtcDQnfVwiPlxuICAgICAgICAgIFlvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSB2aWRlbyB0YWcuXG4gICAgICAgICAgPGEgaHJlZj1cIiR7Y2xlYW5Vcmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiPlZpZXcgdmlkZW88L2E+XG4gICAgICAgIDwvdmlkZW8+YDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHVybDsgLy8gUmV0dXJuIG9yaWdpbmFsIFVSTCBpZiBub3QgbWVkaWFcbiAgICB9KTtcblxuICAgIC8vIEFkZGl0aW9uYWwgYWdncmVzc2l2ZSBwYXR0ZXJuIHRvIGNhdGNoIGFueSBVUkxzIHRoYXQgbWlnaHQgYmUgaW4gcXVvdGVzIG9yIG90aGVyIGNvbnRleHRzXG4gICAgY29uc3QgYWdncmVzc2l2ZVVybFBhdHRlcm4gPSAvaHR0cHM/OlxcL1xcL1teXFxzPD5cIidcXF1cXClcXH1dK1xcLihqcGd8anBlZ3xwbmd8Z2lmfHdlYnB8c3ZnfGJtcHxpY298dGlmZnxtcDR8d2VibXxvZ2d8bW92fGF2aXx3bXZ8Zmx2fG00dikoXFw/W15cXHM8PlwiJ1xcXVxcKVxcfV0qKT8vZ2k7XG4gICAgXG4gICAgcHJvY2Vzc2VkVGV4dCA9IHByb2Nlc3NlZFRleHQucmVwbGFjZShhZ2dyZXNzaXZlVXJsUGF0dGVybiwgKHVybCkgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBVUkwgaXMgYWxyZWFkeSBjb252ZXJ0ZWQgdG8gbWFya2Rvd25cbiAgICAgIGlmIChwcm9jZXNzZWRUZXh0LmluY2x1ZGVzKGAhW0ltYWdlXSgke3VybH0pYCkpIHtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNsZWFuVXJsID0gdXJsLnJlcGxhY2UoL1suLDs6IT8pXCInXFx9XSskLywgJycpO1xuICAgICAgcmV0dXJuIGAhW0ltYWdlXSgke2NsZWFuVXJsfSlgO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBwcm9jZXNzZWRUZXh0O1xuICB9O1xuXG4gIGNvbnN0IHJlbmRlclNhbml0aXplZE1hcmtkb3duID0gKHRleHQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgLy8gRmlyc3QgY29udmVydCBzdGFuZGFsb25lIG1lZGlhIFVSTHMgdG8gcHJvcGVyIG1hcmtkb3duL0hUTUxcbiAgICBjb25zdCB0ZXh0V2l0aE1lZGlhID0gY29udmVydE1lZGlhVXJscyh0ZXh0KTtcbiAgICBcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGFzc3VtZXMgaXQncyBydW5uaW5nIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudFxuICAgIC8vIGR1ZSB0byB0aGUgXCJ1c2UgY2xpZW50XCIgZGlyZWN0aXZlIG9uIHRoZSBjb21wb25lbnQgYW5kIHVzZSBvZiBET01QdXJpZnkuXG4gICAgLy8gbWFya2VkLnBhcnNlIGlzIGNvbmZpZ3VyZWQgdG8gcnVuIHN5bmNocm9ub3VzbHkuXG4gICAgY29uc3QgZGlydHlIdG1sID0gbWFya2VkLnBhcnNlKHRleHRXaXRoTWVkaWEsIHsgZ2ZtOiB0cnVlLCBicmVha3M6IHRydWUgfSkgYXMgc3RyaW5nO1xuICAgIHJldHVybiBET01QdXJpZnkuc2FuaXRpemUoZGlydHlIdG1sKTtcbiAgfTtcblxuICAvLyBORVc6IEZ1bmN0aW9uIHRvIHBhcnNlIHRleHQgYW5kIGV4dHJhY3QgVVJMcyBmb3Igc3BlY2lhbCByZW5kZXJpbmdcbiAgaW50ZXJmYWNlIFRleHRQYXJ0IHtcbiAgICB0eXBlOiAndGV4dCcgfCAndXJsJztcbiAgICBjb250ZW50OiBzdHJpbmc7XG4gIH1cblxuICBjb25zdCBwYXJzZVRleHRXaXRoVVJMcyA9ICh0ZXh0OiBzdHJpbmcpOiBUZXh0UGFydFtdID0+IHtcbiAgICBjb25zdCB1cmxSZWdleCA9IC9odHRwcz86XFwvXFwvW15cXHM8PlwiJ1xcXVxcKVxcfV0rL2c7XG4gICAgY29uc3QgcGFydHM6IFRleHRQYXJ0W10gPSBbXTtcbiAgICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgICBsZXQgbWF0Y2g7XG5cbiAgICB3aGlsZSAoKG1hdGNoID0gdXJsUmVnZXguZXhlYyh0ZXh0KSkgIT09IG51bGwpIHtcbiAgICAgIC8vIEFkZCB0ZXh0IGJlZm9yZSB0aGUgVVJMXG4gICAgICBpZiAobWF0Y2guaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgYmVmb3JlVGV4dCA9IHRleHQuc3Vic3RyaW5nKGxhc3RJbmRleCwgbWF0Y2guaW5kZXgpO1xuICAgICAgICBpZiAoYmVmb3JlVGV4dC50cmltKCkpIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKHsgdHlwZTogJ3RleHQnLCBjb250ZW50OiBiZWZvcmVUZXh0IH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0aGUgVVJMIChjbGVhbiB1cCB0cmFpbGluZyBwdW5jdHVhdGlvbilcbiAgICAgIGNvbnN0IHVybCA9IG1hdGNoWzBdLnJlcGxhY2UoL1suLDs6IT8pXCInXFx9XSskLywgJycpO1xuICAgICAgXG4gICAgICAvLyBTa2lwIGlmIGl0J3MgYWxyZWFkeSBhbiBpbWFnZS92aWRlbyAoaGFuZGxlZCBieSBtYXJrZG93bilcbiAgICAgIGNvbnN0IGlzTWVkaWEgPSAvXFwuKGpwZ3xqcGVnfHBuZ3xnaWZ8d2VicHxzdmd8Ym1wfGljb3x0aWZmfG1wNHx3ZWJtfG9nZ3xtb3Z8YXZpfHdtdnxmbHZ8bTR2KShcXD9bXilcXHNcIiddKik/JC9pLnRlc3QodXJsKTtcbiAgICAgIFxuICAgICAgaWYgKCFpc01lZGlhKSB7XG4gICAgICAgIHBhcnRzLnB1c2goeyB0eXBlOiAndXJsJywgY29udGVudDogdXJsIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gS2VlcCBhcyB0ZXh0IGZvciBtYXJrZG93biBwcm9jZXNzaW5nXG4gICAgICAgIHBhcnRzLnB1c2goeyB0eXBlOiAndGV4dCcsIGNvbnRlbnQ6IG1hdGNoWzBdIH0pO1xuICAgICAgfVxuXG4gICAgICBsYXN0SW5kZXggPSB1cmxSZWdleC5sYXN0SW5kZXg7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlbWFpbmluZyB0ZXh0XG4gICAgaWYgKGxhc3RJbmRleCA8IHRleHQubGVuZ3RoKSB7XG4gICAgICBjb25zdCByZW1haW5pbmdUZXh0ID0gdGV4dC5zdWJzdHJpbmcobGFzdEluZGV4KTtcbiAgICAgIGlmIChyZW1haW5pbmdUZXh0LnRyaW0oKSkge1xuICAgICAgICBwYXJ0cy5wdXNoKHsgdHlwZTogJ3RleHQnLCBjb250ZW50OiByZW1haW5pbmdUZXh0IH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIG5vIFVSTHMgZm91bmQsIHJldHVybiB0aGUgd2hvbGUgdGV4dCBhcyBvbmUgcGFydFxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHBhcnRzLnB1c2goeyB0eXBlOiAndGV4dCcsIGNvbnRlbnQ6IHRleHQgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnRzO1xuICB9O1xuXG4gIGNvbnN0IGdldEN1cnJlbnRMb2NhdGlvbiA9ICgpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiW1BBR0UuVFNYXSBnZXRDdXJyZW50TG9jYXRpb24gY2FsbGVkXCIpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAoIW5hdmlnYXRvci5nZW9sb2NhdGlvbikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiW1BBR0UuVFNYXSBHZW9sb2NhdGlvbiBub3Qgc3VwcG9ydGVkXCIpO1xuICAgICAgICByZWplY3QoXCJHZW9sb2NhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgYnJvd3Nlci5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUEFHRS5UU1hdIEdlb2xvY2F0aW9uIHRpbWVvdXRcIik7XG4gICAgICAgIHJlamVjdChcIkZhaWxlZCB0byBnZXQgbG9jYXRpb246IFRpbWVvdXQuXCIpO1xuICAgICAgfSwgMTAwMDApOyAvLyAxMCBzZWNvbmQgdGltZW91dFxuXG4gICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKFxuICAgICAgICAocG9zaXRpb24pID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICBjb25zdCBjb29yZHMgPSBgJHtwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGV9LCR7cG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZX1gO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiW1BBR0UuVFNYXSBHZW9sb2NhdGlvbiBzdWNjZXNzOlwiLCBjb29yZHMpO1xuICAgICAgICAgIHNldEN1cnJlbnRVc2VyTG9jYXRpb24oY29vcmRzKTsgLy8gVXBkYXRlIHN0YXRlIGhlcmUgYXMgd2VsbFxuICAgICAgICAgIHJlc29sdmUoY29vcmRzKTtcbiAgICAgICAgfSxcbiAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIltQQUdFLlRTWF0gR2VvbG9jYXRpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgICAgICAgICBsZXQgbWVzc2FnZSA9IFwiVW5hYmxlIHRvIHJldHJpZXZlIHlvdXIgbG9jYXRpb24uIFBsZWFzZSBlbnN1cmUgbG9jYXRpb24gc2VydmljZXMgYXJlIGVuYWJsZWQuXCI7XG4gICAgICAgICAgc3dpdGNoKGVycm9yLmNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgZXJyb3IuUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkxvY2F0aW9uIHBlcm1pc3Npb24gZGVuaWVkLiBQbGVhc2UgZW5hYmxlIGl0IGluIHlvdXIgYnJvd3NlciBzZXR0aW5ncy5cIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGVycm9yLlBPU0lUSU9OX1VOQVZBSUxBQkxFOlxuICAgICAgICAgICAgICBtZXNzYWdlID0gXCJMb2NhdGlvbiBpbmZvcm1hdGlvbiBpcyB1bmF2YWlsYWJsZS5cIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGVycm9yLlRJTUVPVVQ6XG4gICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIlJlcXVlc3QgdG8gZ2V0IHVzZXIgbG9jYXRpb24gdGltZWQgb3V0LlwiOyAvLyBUaGlzIGNhc2UgbWlnaHQgYmUgcHJlZW1wdGVkIGJ5IG91ciBvd24gc2V0VGltZW91dFxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVqZWN0KG1lc3NhZ2UpO1xuICAgICAgICB9LFxuICAgICAgICB7IGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZSwgdGltZW91dDogODAwMCwgbWF4aW11bUFnZTogMCB9IC8vIEFkZGVkIG9wdGlvbnNcbiAgICAgICk7XG4gICAgfSk7XG4gIH07XG4gIFxuICBjb25zdCBoYW5kbGVGaWxlU2VsZWN0ID0gYXN5bmMgKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQuZmlsZXMpIHtcbiAgICAgIGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbShldmVudC50YXJnZXQuZmlsZXMpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBhbnkgZmlsZXMgYXJlIEhFSUNcbiAgICAgIGNvbnN0IGhlaWNGaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IFxuICAgICAgICBmaWxlLm5hbWUudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLmhlaWMnKSB8fCBcbiAgICAgICAgZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5oZWlmJykgfHwgXG4gICAgICAgIGZpbGUudHlwZSA9PT0gJ2ltYWdlL2hlaWMnIHx8IFxuICAgICAgICBmaWxlLnR5cGUgPT09ICdpbWFnZS9oZWlmJ1xuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKGhlaWNGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNldEZpbGVQcm9jZXNzaW5nU3RhdHVzKGBDb252ZXJ0aW5nICR7aGVpY0ZpbGVzLmxlbmd0aH0gSEVJQyBmaWxlJHtoZWljRmlsZXMubGVuZ3RoID4gMSA/ICdzJyA6ICcnfSB0byBKUEVHLi4uYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIENvbnZlcnQgYW55IEhFSUMgZmlsZXMgdG8gSlBFR1xuICAgICAgICBjb25zdCBjb252ZXJ0ZWRGaWxlcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgIGZpbGVzLm1hcChmaWxlID0+IGNvbnZlcnRIZWljVG9KcGVnKGZpbGUpKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgYW55IGZpbGVzIG5lZWQgc2VydmVyLXNpZGUgY29udmVyc2lvblxuICAgICAgICBjb25zdCBzZXJ2ZXJDb252ZXJzaW9uRmlsZXMgPSBjb252ZXJ0ZWRGaWxlcy5maWx0ZXIoZmlsZSA9PiAoZmlsZSBhcyBhbnkpLm5lZWRzU2VydmVyQ29udmVyc2lvbik7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VydmVyQ29udmVyc2lvbkZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzZXRGaWxlUHJvY2Vzc2luZ1N0YXR1cyhg8J+TpCBTZW5kaW5nICR7c2VydmVyQ29udmVyc2lvbkZpbGVzLmxlbmd0aH0gSEVJQyBmaWxlJHtzZXJ2ZXJDb252ZXJzaW9uRmlsZXMubGVuZ3RoID4gMSA/ICdzJyA6ICcnfSBmb3Igc2VydmVyLXNpZGUgY29udmVyc2lvbi4uLmApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldEZpbGVQcm9jZXNzaW5nU3RhdHVzKG51bGwpOyAvLyBDbGVhciBzdGF0dXMgd2hlbiBkb25lXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNldFNlbGVjdGVkRmlsZXMocHJldkZpbGVzID0+IFsuLi5wcmV2RmlsZXMsIC4uLmNvbnZlcnRlZEZpbGVzXSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIHNlbGVjdGVkIGZpbGVzOicsIGVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNob3cgdXNlci1mcmllbmRseSBlcnJvciBtZXNzYWdlXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ1VuYWJsZSB0byBjb252ZXJ0IEhFSUMnKSkge1xuICAgICAgICAgIHNldEZpbGVQcm9jZXNzaW5nU3RhdHVzKGDinYwgSEVJQyBjb252ZXJzaW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhIGRpZmZlcmVudCBpbWFnZSBmb3JtYXQuYCk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRGaWxlUHJvY2Vzc2luZ1N0YXR1cyhudWxsKSwgNTAwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRmFsbCBiYWNrIHRvIGFkZGluZyBvcmlnaW5hbCBmaWxlcyBpZiBjb252ZXJzaW9uIGZhaWxzXG4gICAgICAgICAgc2V0U2VsZWN0ZWRGaWxlcyhwcmV2RmlsZXMgPT4gWy4uLnByZXZGaWxlcywgLi4uZmlsZXNdKTtcbiAgICAgICAgICBzZXRGaWxlUHJvY2Vzc2luZ1N0YXR1cyhudWxsKTsgLy8gQ2xlYXIgc3RhdHVzIG9uIGVycm9yXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gJyc7IC8vIFJlc2V0IGZpbGUgaW5wdXQgdG8gYWxsb3cgc2VsZWN0aW5nIHRoZSBzYW1lIGZpbGUgYWdhaW5cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlU2VsZWN0ZWRGaWxlID0gKGZpbGVOYW1lVG9SZW1vdmU6IHN0cmluZykgPT4ge1xuICAgIHNldFNlbGVjdGVkRmlsZXMocHJldkZpbGVzID0+IHByZXZGaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLm5hbWUgIT09IGZpbGVOYW1lVG9SZW1vdmUpKTtcbiAgfTtcblxuICBjb25zdCBmaWxlVG9CYXNlNjQgPSAoZmlsZTogRmlsZSk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlYWRlci5yZXN1bHQgYXMgc3RyaW5nO1xuICAgICAgICByZXNvbHZlKHJlc3VsdC5zcGxpdCgnLCcpWzFdKTsgLy8gR2V0IGRhdGEgcGFydCBhZnRlciBjb21tYVxuICAgICAgfTtcbiAgICAgIHJlYWRlci5vbmVycm9yID0gZXJyb3IgPT4gcmVqZWN0KGVycm9yKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBORVc6IFVwbG9hZCBmaWxlcyBpbW1lZGlhdGVseSBhbmQgZ2V0IFVSTHNcbiAgY29uc3QgdXBsb2FkRmlsZXMgPSBhc3luYyAoZmlsZXM6IEZpbGVbXSk6IFByb21pc2U8c3RyaW5nW10+ID0+IHtcbiAgICBjb25zdCB1cGxvYWRQcm9taXNlcyA9IGZpbGVzLm1hcChhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGZpbGUgbmVlZHMgc2VydmVyLXNpZGUgSEVJQyBjb252ZXJzaW9uXG4gICAgICBjb25zdCBuZWVkc1NlcnZlckNvbnZlcnNpb24gPSAoZmlsZSBhcyBhbnkpLm5lZWRzU2VydmVyQ29udmVyc2lvbjtcbiAgICAgIGlmIChuZWVkc1NlcnZlckNvbnZlcnNpb24pIHtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdjb252ZXJ0X2hlaWMnLCAndHJ1ZScpO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+TpCBVcGxvYWRpbmcgXCIke2ZpbGUubmFtZX1cIiBmb3Igc2VydmVyLXNpZGUgSEVJQyBjb252ZXJzaW9uLi4uYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QkFDS0VORF9BUElfQkFTRV9VUkx9L3VwbG9hZGAsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBib2R5OiBmb3JtRGF0YSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVcGxvYWQgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgLy8gTG9nIHNlcnZlci1zaWRlIEhFSUMgY29udmVyc2lvbiBpZiBpdCBvY2N1cnJlZFxuICAgICAgICBpZiAocmVzdWx0LmNvbnZlcnRlZF9mcm9tX2hlaWMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIFNlcnZlciBjb252ZXJ0ZWQgSEVJQyBmaWxlIFwiJHtyZXN1bHQub3JpZ2luYWxfZmlsZW5hbWV9XCIgdG8gSlBFRzogXCIke3Jlc3VsdC5maWxlbmFtZX1cImApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0LnVybDsgLy8gQmFja2VuZCBzaG91bGQgcmV0dXJuIHsgdXJsOiBcIi4uLlwiIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byB1cGxvYWQgJHtmaWxlLm5hbWV9OmAsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHVwbG9hZFByb21pc2VzKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVTZW5kID0gYXN5bmMgKGU/OiBGb3JtRXZlbnQ8SFRNTEZvcm1FbGVtZW50PiB8IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKGUgJiYgdHlwZW9mIChlIGFzIEZvcm1FdmVudDxIVE1MRm9ybUVsZW1lbnQ+KS5wcmV2ZW50RGVmYXVsdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgKGUgYXMgRm9ybUV2ZW50PEhUTUxGb3JtRWxlbWVudD4pLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIFxuICAgIGxldCBjdXJyZW50TWVzc2FnZVRleHQgPSB1c2VySW5wdXQudHJpbSgpOyAvLyBVc2UgYSBtdXRhYmxlIHZhcmlhYmxlIGZvciBtZXNzYWdlIHRleHRcbiAgICBpZiAoIWN1cnJlbnRNZXNzYWdlVGV4dCAmJiBzZWxlY3RlZEZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOyAvLyBSZXR1cm4gaWYgbm8gdGV4dCBhbmQgbm8gZmlsZXNcblxuICAgIC8vIC0tLSBORVc6IFVwbG9hZCBmaWxlcyBpbW1lZGlhdGVseSBhbmQgZ2V0IFVSTHMgLS0tXG4gICAgbGV0IGF0dGFjaG1lbnRVcmxzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChzZWxlY3RlZEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldFN0YXR1cygnVXBsb2FkaW5nIGZpbGVzLi4uJyk7XG4gICAgICAgIGF0dGFjaG1lbnRVcmxzID0gYXdhaXQgdXBsb2FkRmlsZXMoc2VsZWN0ZWRGaWxlcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGaWxlcyB1cGxvYWRlZCBzdWNjZXNzZnVsbHk6JywgYXR0YWNobWVudFVybHMpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmlsZSB1cGxvYWQgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgc2V0U3RhdHVzKCdSZWFkeScpO1xuICAgICAgICAvLyBTaG93IGVycm9yIHRvIHVzZXJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlSWQgPSB1dWlkdjQoKTtcbiAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbXG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogZXJyb3JNZXNzYWdlSWQsXG4gICAgICAgICAgICBzZW5kZXI6ICdib3QnLFxuICAgICAgICAgICAgcGFydHM6IFt7dHlwZTogXCJ0ZXh0XCIsIGlkOiB1dWlkdjQoKSwgY29udGVudDogYDxzdHJvbmcgc3R5bGU9XCJjb2xvcjogcmVkO1wiPlVwbG9hZCBFcnJvcjo8L3N0cm9uZz4gRmFpbGVkIHRvIHVwbG9hZCBmaWxlcy4gUGxlYXNlIHRyeSBhZ2Fpbi5gfV0sXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICB0aGlua2luZzogZmFsc2UsXG4gICAgICAgICAgICBpc19lcnJvcl9tZXNzYWdlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIC0tLSBMb2NhdGlvbiBBcHBlbmRpbmcgTG9naWMgLS0tXG4gICAgbGV0IHJlc29sdmVkT3JpZ2luRm9yUXVlcnk6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoc2VuZExvY2F0aW9uKSB7XG4gICAgICBpZiAoY3VycmVudFVzZXJMb2NhdGlvbikge1xuICAgICAgICByZXNvbHZlZE9yaWdpbkZvclF1ZXJ5ID0gY3VycmVudFVzZXJMb2NhdGlvbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJBdHRlbXB0aW5nIHRvIGdldCBjdXJyZW50IGxvY2F0aW9uIGJlY2F1c2UgdG9nZ2xlIGlzIG9uLi4uXCIpO1xuICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gYXdhaXQgZ2V0Q3VycmVudExvY2F0aW9uKCk7XG4gICAgICAgICAgcmVzb2x2ZWRPcmlnaW5Gb3JRdWVyeSA9IGxvY2F0aW9uO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ3VycmVudCBsb2NhdGlvbiBvYnRhaW5lZCBmb3IgcXVlcnk6XCIsIGxvY2F0aW9uKTtcbiAgICAgICAgfSBjYXRjaCAobG9jYXRpb25FcnJvcjogYW55KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgbG9jYXRpb24gZm9yIHF1ZXJ5OlwiLCBsb2NhdGlvbkVycm9yKTtcbiAgICAgICAgICAvLyBEaXNwbGF5IGVycm9yIHRvIHVzZXIgaW1tZWRpYXRlbHksIHNpbWlsYXIgdG8gYmVmb3JlLCBidXQgdGllZCB0byBib3QncyB0aGlua2luZyBtZXNzYWdlXG4gICAgICAgICAgY29uc3QgdGVtcEJvdE1lc3NhZ2VJZCA9IHV1aWR2NCgpOyAvLyBDcmVhdGUgYSB0ZW1wb3JhcnkgSUQgZm9yIHRoaXMgZXJyb3IgbWVzc2FnZVxuICAgICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gW1xuICAgICAgICAgICAgLi4ucHJldiwgLy8gS2VlcCBwcmV2aW91cyBtZXNzYWdlc1xuICAgICAgICAgICAgeyAvLyBBZGQgdGhlIHVzZXIncyBhdHRlbXB0IChpZiBhbnkgdGV4dCB3YXMgdHlwZWQpXG4gICAgICAgICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgICAgc2VuZGVyOiBcInVzZXJcIixcbiAgICAgICAgICAgICAgcGFydHM6IGN1cnJlbnRNZXNzYWdlVGV4dCA/IFt7IHR5cGU6IFwidGV4dFwiLCBpZDogdXVpZHY0KCksIGNvbnRlbnQ6IGN1cnJlbnRNZXNzYWdlVGV4dCB9XSA6IFtdLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyAvLyBBZGQgdGhlIGJvdCdzIGVycm9yIHJlc3BvbnNlXG4gICAgICAgICAgICAgIGlkOiB0ZW1wQm90TWVzc2FnZUlkLFxuICAgICAgICAgICAgICBzZW5kZXI6ICdib3QnLFxuICAgICAgICAgICAgICBwYXJ0czogW3t0eXBlOiBcInRleHRcIiwgaWQ6IHV1aWR2NCgpLCBjb250ZW50OiBgPHN0cm9uZyBzdHlsZT1cXFwiY29sb3I6IHJlZDtcXFwiPkxvY2F0aW9uIEVycm9yOjwvc3Ryb25nPiAke2xvY2F0aW9uRXJyb3J9YH1dLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgIHRoaW5raW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNfZXJyb3JfbWVzc2FnZTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0pO1xuICAgICAgICAgIGlmIChzaG93SW5pdGlhbFZpZXcpIHNldFNob3dJbml0aWFsVmlldyhmYWxzZSk7XG4gICAgICAgICAgc2V0VXNlcklucHV0KFwiXCIpOyAvLyBDbGVhciBpbnB1dFxuICAgICAgICAgIHNldFNlbGVjdGVkRmlsZXMoW10pOyAvLyBDbGVhciBmaWxlc1xuICAgICAgICAgIHNldFN0YXR1cygnUmVhZHknKTtcbiAgICAgICAgICByZXR1cm47IFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocmVzb2x2ZWRPcmlnaW5Gb3JRdWVyeSkge1xuICAgICAgICAvLyBBcHBlbmQgdG8gdGhlIG1lc3NhZ2UgdGV4dCB0aGF0IHdpbGwgYmUgc2VudFxuICAgICAgICBjdXJyZW50TWVzc2FnZVRleHQgPSBgJHtjdXJyZW50TWVzc2FnZVRleHR9IChNeSBjdXJyZW50IGxvY2F0aW9uIGlzOiAke3Jlc29sdmVkT3JpZ2luRm9yUXVlcnl9KWA7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIC0tLSBFbmQgTG9jYXRpb24gQXBwZW5kaW5nIExvZ2ljIC0tLVxuXG4gICAgLy8gLS0tIE5FVzogSW5jbHVkZSBhdHRhY2htZW50IFVSTHMgZGlyZWN0bHkgaW4gdGhlIG1lc3NhZ2UgLS0tXG4gICAgaWYgKGF0dGFjaG1lbnRVcmxzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGF0dGFjaG1lbnRMaXN0ID0gYXR0YWNobWVudFVybHMubWFwKCh1cmwsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gc2VsZWN0ZWRGaWxlc1tpbmRleF0/Lm5hbWUgfHwgYEF0dGFjaG1lbnQgJHtpbmRleCArIDF9YDtcbiAgICAgICAgcmV0dXJuIGAtICR7ZmlsZU5hbWV9OiAke3VybH1gO1xuICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICBcbiAgICAgIGN1cnJlbnRNZXNzYWdlVGV4dCArPSBgXFxuXFxuQXR0YWNoZWQgZmlsZXM6XFxuJHthdHRhY2htZW50TGlzdH1gO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJNZXNzYWdlSWQgPSB1dWlkdjQoKTtcbiAgICBjb25zdCB1c2VyTWVzc2FnZVBhcnRzOiBNZXNzYWdlUGFydFtdID0gW107XG4gICAgaWYgKGN1cnJlbnRNZXNzYWdlVGV4dCkgeyAvLyBVc2UgcG90ZW50aWFsbHkgbW9kaWZpZWQgbWVzc2FnZSB0ZXh0XG4gICAgICB1c2VyTWVzc2FnZVBhcnRzLnB1c2goeyB0eXBlOiBcInRleHRcIiwgaWQ6IHV1aWR2NCgpLCBjb250ZW50OiBjdXJyZW50TWVzc2FnZVRleHQgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlck1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICBpZDogdXNlck1lc3NhZ2VJZCxcbiAgICAgIHNlbmRlcjogXCJ1c2VyXCIsXG4gICAgICBwYXJ0czogdXNlck1lc3NhZ2VQYXJ0cyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9O1xuICAgIHNldE1lc3NhZ2VzKChwcmV2TWVzc2FnZXMpID0+IFsuLi5wcmV2TWVzc2FnZXMsIHVzZXJNZXNzYWdlXSk7XG4gICAgc2V0VXNlcklucHV0KFwiXCIpOyBcbiAgICBpZiAoc2hvd0luaXRpYWxWaWV3KSBzZXRTaG93SW5pdGlhbFZpZXcoZmFsc2UpO1xuXG4gICAgY29uc3QgYm90TWVzc2FnZUlkID0gdXVpZHY0KCk7XG4gICAgc2V0TWVzc2FnZXMoKHByZXZNZXNzYWdlcykgPT4gW1xuICAgICAgLi4ucHJldk1lc3NhZ2VzLFxuICAgICAgeyBcbiAgICAgICAgaWQ6IGJvdE1lc3NhZ2VJZCwgXG4gICAgICAgIHNlbmRlcjogJ2JvdCcsIFxuICAgICAgICBwYXJ0czogW3sgdHlwZTogXCJ0aG91Z2h0X3N1bW1hcnlcIiwgaWQ6IHV1aWR2NCgpLCBjb250ZW50OiBcIlwiIH1dLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIHRoaW5raW5nOiB0cnVlXG4gICAgICB9LFxuICAgIF0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIC0tLSBORVc6IFNpbXBsaWZpZWQgcGF5bG9hZCB3aXRoIFVSTHMgaW5zdGVhZCBvZiBiYXNlNjQgLS0tXG4gICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICBzZW5kZXI6IGFwaVNlbmRlcixcbiAgICAgICAgcXVlcnk6IGN1cnJlbnRNZXNzYWdlVGV4dCwgLy8gVGhpcyBub3cgaW5jbHVkZXMgYXR0YWNobWVudCBVUkxzXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgICBtb2RlbDogc2VsZWN0ZWRNb2RlbCxcbiAgICAgICAgYXR0YWNobWVudF91cmxzOiBhdHRhY2htZW50VXJscy5sZW5ndGggPiAwID8gYXR0YWNobWVudFVybHMgOiB1bmRlZmluZWQsIC8vIE5FVzogRGlyZWN0IFVSTCBhcnJheVxuICAgICAgfTtcblxuICAgICAgLy8gQ2xlYXIgc2VsZWN0ZWQgZmlsZXMgbm93IHRoYXQgdGhleSdyZSB1cGxvYWRlZCBhbmQgaW4gdGhlIG1lc3NhZ2VcbiAgICAgIHNldFNlbGVjdGVkRmlsZXMoW10pO1xuICAgICAgc2V0U3RhdHVzKCdQcm9jZXNzaW5nLi4uJyk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QkFDS0VORF9BUElfQkFTRV9VUkx9L3F1ZXJ5YCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICBsZXQgZXJyb3JEZXRhaWwgPSBgSFRUUCBlcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JKc29uID0gSlNPTi5wYXJzZShlcnJvclRleHQpO1xuICAgICAgICAgICAgZXJyb3JEZXRhaWwgPSBlcnJvckpzb24uZXJyb3IgfHwgZXJyb3JKc29uLmRldGFpbCB8fCBlcnJvckRldGFpbDtcbiAgICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yVGV4dCkgZXJyb3JEZXRhaWwgKz0gYCAtICR7ZXJyb3JUZXh0fWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGV0YWlsKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5ib2R5KSB0aHJvdyBuZXcgRXJyb3IoJ1Jlc3BvbnNlIGJvZHkgaXMgbnVsbCcpO1xuXG4gICAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgICAgbGV0IGJ1ZmZlciA9IFwiXCI7IC8vIEJ1ZmZlciBmb3IgYWNjdW11bGF0aW5nIHN0cmVhbSBkYXRhXG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICBpZiAoYnVmZmVyLnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRDaHVuayA9IEpTT04ucGFyc2UoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tQQUdFLlRTWF0gRmluYWwgQnVmZmVyIENodW5rOicsIEpTT04uc3RyaW5naWZ5KHBhcnNlZENodW5rKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWRDaHVuay50eXBlID09PSAndGV4dF9jaHVuaycgJiYgcGFyc2VkQ2h1bmsuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBwcmV2Lm1hcChtc2cgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2cuaWQgPT09IGJvdE1lc3NhZ2VJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudENvbnRlbnQgPSBwYXJzZWRDaHVuay5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3UGFydHMgPSBbLi4ubXNnLnBhcnRzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFBhcnQgPSBuZXdQYXJ0cy5sZW5ndGggPiAwID8gbmV3UGFydHNbbmV3UGFydHMubGVuZ3RoIC0gMV0gOiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0UGFydCAmJiBsYXN0UGFydC50eXBlID09PSBcInRleHRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENvbnRlbnQgPSBub3JtYWxpemVGcmFnbWVudChjdXJyZW50Q29udGVudCwgbGFzdFBhcnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGFydC5jb250ZW50ICs9IGN1cnJlbnRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENvbnRlbnQgPSBub3JtYWxpemVGcmFnbWVudChjdXJyZW50Q29udGVudCwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHsgdHlwZTogXCJ0ZXh0XCIsIGlkOiB1dWlkdjQoKSwgY29udGVudDogY3VycmVudENvbnRlbnQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubXNnLCBwYXJ0czogbmV3UGFydHMsIHRoaW5raW5nOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtc2c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkQ2h1bmsudHlwZSA9PT0gJ3Rob3VnaHRfc3VtbWFyeScgJiYgcGFyc2VkQ2h1bmsuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBwcmV2Lm1hcChtc2cgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2cuaWQgPT09IGJvdE1lc3NhZ2VJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXJ0cyA9IG1zZy5wYXJ0cy5tYXAocGFydCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydC50eXBlID09PSBcInRob3VnaHRfc3VtbWFyeVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudEZyb21DaHVuayA9IG5vcm1hbGl6ZUZyYWdtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRDaHVuay5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LmNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLnBhcnQsIGNvbnRlbnQ6IHBhcnQuY29udGVudCArIGNvbnRlbnRGcm9tQ2h1bmsgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubXNnLCBwYXJ0czogbmV3UGFydHMsIHRoaW5raW5nOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtc2c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkQ2h1bmsudHlwZSA9PT0gJ3Rvb2xfY2FsbF9wZW5kaW5nJyAmJiBwYXJzZWRDaHVuay5uYW1lICYmIHBhcnNlZENodW5rLmFyZ3VtZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FsbF9pZF9mcm9tX2NodW5rID0gcGFyc2VkQ2h1bmsuY2FsbF9pZCB8fCBgdG9vbC0ke3V1aWR2NCgpfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5pZCA9PT0gYm90TWVzc2FnZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVG9vbENhbGxQYXJ0ID0gbXNnLnBhcnRzLmZpbmQocGFydCA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC50eXBlID09PSBcInRvb2xfY2FsbFwiICYmIHBhcnQudG9vbENhbGwuY2FsbF9pZCA9PT0gY2FsbF9pZF9mcm9tX2NodW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1Rvb2xDYWxsUGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtQQUdFLlRTWF0gKGZpbmFsIGJ1ZmZlcikgVG9vbCBjYWxsIHdpdGggSUQgJHtjYWxsX2lkX2Zyb21fY2h1bmt9IGFscmVhZHkgZXhpc3RzLiBJZ25vcmluZyBkdXBsaWNhdGUgcGVuZGluZy5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtc2c7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Rvb2xDYWxsRGF0YTogVG9vbENhbGxEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbF9pZDogY2FsbF9pZF9mcm9tX2NodW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcGFyc2VkQ2h1bmsubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogdHlwZW9mIHBhcnNlZENodW5rLmFyZ3VtZW50cyA9PT0gJ3N0cmluZycgPyBwYXJzZWRDaHVuay5hcmd1bWVudHMgOiBKU09OLnN0cmluZ2lmeShwYXJzZWRDaHVuay5hcmd1bWVudHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcIlBlbmRpbmcuLi5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tQQUdFLlRTWF0gKGZpbmFsIGJ1ZmZlcikgVG9vbCBDYWxsIFBlbmRpbmcgKE5ldyk6JywgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShuZXdUb29sQ2FsbERhdGEpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhcnRzID0gWy4uLm1zZy5wYXJ0c107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnRzLnB1c2goeyB0eXBlOiBcInRvb2xfY2FsbFwiIGFzIGNvbnN0LCBpZDogdXVpZHY0KCksIHRvb2xDYWxsOiBuZXdUb29sQ2FsbERhdGEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnRzLnB1c2goeyB0eXBlOiBcInRleHRcIiBhcyBjb25zdCwgaWQ6IHV1aWR2NCgpLCBjb250ZW50OiBcIlwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5tc2csIHBhcnRzOiBuZXdQYXJ0cywgdGhpbmtpbmc6IHRydWUgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZWRDaHVuay50eXBlID09PSAndG9vbF9yZXN1bHQnICYmIHBhcnNlZENodW5rLmNhbGxfaWQgJiYgdHlwZW9mIHBhcnNlZENodW5rLnJlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5pZCA9PT0gYm90TWVzc2FnZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWRDaHVuay5uYW1lID09PSBcImdldF9kaXJlY3Rpb25zXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW1BBR0UuVFNYXSAoRmluYWwgQnVmZmVyKSBSQVcgZ2V0X2RpcmVjdGlvbnMgdG9vbF9yZXN1bHQgQ0hVTks6XCIsIEpTT04uc3RyaW5naWZ5KHBhcnNlZENodW5rKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZWRUb29sQ2FsbEluUGFydHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGFydHMgPSBtc2cucGFydHMubWFwKHBhcnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQudHlwZSA9PT0gXCJ0b29sX2NhbGxcIiAmJiBwYXJ0LnRvb2xDYWxsLmNhbGxfaWQgPT09IHBhcnNlZENodW5rLmNhbGxfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkVG9vbENhbGxJblBhcnRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YyA9IHBhcnQudG9vbENhbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsUmVzdWx0ID0gdHlwZW9mIHBhcnNlZENodW5rLnJlc3VsdCA9PT0gJ3N0cmluZycgPyBwYXJzZWRDaHVuay5yZXN1bHQgOiBKU09OLnN0cmluZ2lmeShwYXJzZWRDaHVuay5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzUGFydGlhbCA9IHR5cGVvZiBwYXJzZWRDaHVuay5pc19wYXJ0aWFsID09PSAnYm9vbGVhbicgPyBwYXJzZWRDaHVuay5pc19wYXJ0aWFsIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNFcnJvciA9IHR5cGVvZiBwYXJzZWRDaHVuay5pc19lcnJvciA9PT0gJ2Jvb2xlYW4nID8gcGFyc2VkQ2h1bmsuaXNfZXJyb3IgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdTdGF0dXM6IFRvb2xDYWxsRGF0YVsnc3RhdHVzJ10gPSBpc1BhcnRpYWwgPyBcIlN0cmVhbWluZy4uLlwiIDogKGlzRXJyb3IgPyBcIkVycm9yXCIgOiBcIkNvbXBsZXRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkVG9vbENhbGw6IFRvb2xDYWxsRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udGMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogaXNQYXJ0aWFsICYmIHRjLnJlc3VsdCAmJiB0Yy5zdGF0dXMgPT09IFwiU3RyZWFtaW5nLi4uXCIgPyB0Yy5yZXN1bHQgKyAnXFxuLS0tXFxuJyArIGZpbmFsUmVzdWx0IDogZmluYWxSZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogbmV3U3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19lcnJvcjogaXNFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcGFydGlhbDogaXNQYXJ0aWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvb2xSZXNwb25zZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRjLm5hbWUgPT09IFwiZ2V0X2RpcmVjdGlvbnNcIiAmJiBwYXJzZWRDaHVuay5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIGJvdGggb2xkIHdyYXBwZWQgZm9ybWF0IGFuZCBuZXcgZGlyZWN0IGZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhcnNlZENodW5rLnJlc3VsdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlS2V5ID0gYCR7dGMubmFtZX1fcmVzcG9uc2VgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZENodW5rLnJlc3VsdFtyZXNwb25zZUtleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbGQgd3JhcHBlZCBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sUmVzcG9uc2UgPSBwYXJzZWRDaHVuay5yZXN1bHRbcmVzcG9uc2VLZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW1BBR0UuVFNYXSAoU3RyZWFtIExvb3ApIFVzaW5nIHdyYXBwZWQgZm9ybWF0IGZvciBkaXJlY3Rpb25zLCB0b29sUmVzcG9uc2U6XCIsIEpTT04uc3RyaW5naWZ5KHRvb2xSZXNwb25zZSkuc3Vic3RyaW5nKDAsIDIwMCkgKyBcIi4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmV3IGRpcmVjdCBmb3JtYXQgZnJvbSBGYXN0TUNQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFJlc3BvbnNlID0gcGFyc2VkQ2h1bmsucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW1BBR0UuVFNYXSAoU3RyZWFtIExvb3ApIFVzaW5nIGRpcmVjdCBmb3JtYXQgZm9yIGRpcmVjdGlvbnMsIHRvb2xSZXNwb25zZTpcIiwgSlNPTi5zdHJpbmdpZnkodG9vbFJlc3BvbnNlKS5zdWJzdHJpbmcoMCwgMjAwKSArIFwiLi4uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Yy5uYW1lID09PSBcImdldF9kaXJlY3Rpb25zXCIgJiYgdG9vbFJlc3BvbnNlICYmIHRvb2xSZXNwb25zZS5zdGF0dXMgPT09IFwic3VjY2Vzc1wiICYmIHRvb2xSZXNwb25zZS5kYXRhICYmICFpc0Vycm9yICYmICFpc1BhcnRpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbUEFHRS5UU1hdIChGaW5hbCBCdWZmZXIpIFNldHRpbmcgZGlyZWN0aW9uc0RhdGEgd2l0aDpcIiwgSlNPTi5zdHJpbmdpZnkodG9vbFJlc3BvbnNlLmRhdGEpLnN1YnN0cmluZygwLCAyMDApICsgXCIuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldERpcmVjdGlvbnNEYXRhKHRvb2xSZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TWFwRGlzcGxheUtleShwcmV2S2V5ID0+IHByZXZLZXkgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXNNYXBTZWN0aW9uVmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRjLm5hbWUgPT09IFwiZ2V0X2RpcmVjdGlvbnNcIiAmJiAhdG9vbFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUEFHRS5UU1hdIChGaW5hbCBCdWZmZXIpIEVSUk9SOiBnZXRfZGlyZWN0aW9uc19yZXNwb25zZSBtaXNzaW5nIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTkVXOiBQcm9jZXNzIHRvb2wgY2FsbCBmb3IgcHJldmlldyBleHRyYWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1Rvb2xDYWxsRm9yUHJldmlldyh1cGRhdGVkVG9vbENhbGwsIG1zZy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTkVXOiBXZWIgYXBwIGRldGVjdGlvbiBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGMubmFtZSA9PT0gXCJjcmVhdGVfd2ViX2FwcFwiIHx8IHRjLm5hbWUgPT09IFwiZWRpdF93ZWJfYXBwXCIpICYmICFpc0Vycm9yICYmICFpc1BhcnRpYWwgJiYgdGMucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHREYXRhID0gdHlwZW9mIHRjLnJlc3VsdCA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKHRjLnJlc3VsdCkgOiB0Yy5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0RGF0YS5zdGF0dXMgPT09IFwic3VjY2Vzc1wiICYmIHJlc3VsdERhdGEudXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbUEFHRS5UU1hdIChGaW5hbCBCdWZmZXIpIFNldHRpbmcgd2ViQXBwVXJsIHdpdGg6XCIsIHJlc3VsdERhdGEudXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgYmUgc2V0IG9uIHRoZSBtZXNzYWdlIG9iamVjdCBiZWxvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJbUEFHRS5UU1hdIChGaW5hbCBCdWZmZXIpIEZhaWxlZCB0byBwYXJzZSB3ZWIgYXBwIHJlc3VsdDpcIiwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTkVXOiBJbWFnZSBnZW5lcmF0aW9uIGRldGVjdGlvbiBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Yy5uYW1lID09PSBcImdlbmVyYXRlX2ltYWdlc193aXRoX3Byb21wdHNcIiAmJiAhaXNFcnJvciAmJiAhaXNQYXJ0aWFsICYmIHRjLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0RGF0YSA9IHR5cGVvZiB0Yy5yZXN1bHQgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZSh0Yy5yZXN1bHQpIDogdGMucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdERhdGEuc3RhdHVzID09PSBcInN1Y2Nlc3NcIiAmJiByZXN1bHREYXRhLnJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGFsbCBpbWFnZSBVUkxzIGZyb20gdGhlIHJlc3VsdHMgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZVVybHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0RGF0YS5yZXN1bHRzLmZvckVhY2goKHJlc3VsdEFycmF5OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0QXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVVybHMucHVzaCguLi5yZXN1bHRBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbUEFHRS5UU1hdIChTdHJlYW0gTG9vcCkgU2V0dGluZyBnZW5lcmF0ZWRJbWFnZVVybHMgd2l0aDpcIiwgaW1hZ2VVcmxzLmxlbmd0aCwgXCJpbWFnZXNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSBzZXQgb24gdGhlIG1lc3NhZ2Ugb2JqZWN0IGJlbG93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJbUEFHRS5UU1hdIChTdHJlYW0gTG9vcCkgRmFpbGVkIHRvIHBhcnNlIGltYWdlIGdlbmVyYXRpb24gcmVzdWx0OlwiLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5wYXJ0LCB0b29sQ2FsbDogdXBkYXRlZFRvb2xDYWxsIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0Y2hlZFRvb2xDYWxsSW5QYXJ0cykgeyBjb25zb2xlLndhcm4oYFtQQUdFLlRTWF0gKEZpbmFsIEJ1ZmZlcikgVG9vbCBjYWxsIGlkICR7cGFyc2VkQ2h1bmsuY2FsbF9pZH0gbm90IGZvdW5kIGluICR7bXNnLmlkfWApOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b29sUmVzcG9uc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkQ2h1bmsubmFtZSA9PT0gXCJnZXRfZGlyZWN0aW9uc1wiICYmIHBhcnNlZENodW5rLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJzZWRDaHVuay5yZXN1bHQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VLZXkgPSBgJHtwYXJzZWRDaHVuay5uYW1lfV9yZXNwb25zZWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZENodW5rLnJlc3VsdFtyZXNwb25zZUtleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFJlc3BvbnNlID0gcGFyc2VkQ2h1bmsucmVzdWx0W3Jlc3BvbnNlS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sUmVzcG9uc2UgPSBwYXJzZWRDaHVuay5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbE1zZ09iamVjdCA9IHsgLi4ubXNnLCBwYXJ0czogbmV3UGFydHMsIHRoaW5raW5nOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZENodW5rLm5hbWUgPT09IFwiZ2V0X2RpcmVjdGlvbnNcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFJlc3BvbnNlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKHR5cGVvZiBwYXJzZWRDaHVuay5pc19wYXJ0aWFsID09PSAnYm9vbGVhbicgJiYgcGFyc2VkQ2h1bmsuaXNfcGFydGlhbCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEodHlwZW9mIHBhcnNlZENodW5rLmlzX2Vycm9yID09PSAnYm9vbGVhbicgJiYgcGFyc2VkQ2h1bmsuaXNfZXJyb3IpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sUmVzcG9uc2Uuc3RhdHVzID09PSBcInN1Y2Nlc3NcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFJlc3BvbnNlLmRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE1zZ09iamVjdC5zaG93TWFwVG9nZ2xlRm9yVGhpc01lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxNc2dPYmplY3QuZGlyZWN0aW9uc0RhdGEgPSB0b29sUmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW1BBR0UuVFNYXSAoRmluYWwgQnVmZmVyKSBTZXR0aW5nIG1lc3NhZ2UgZGlyZWN0aW9ucyBkYXRhOlwiLCBKU09OLnN0cmluZ2lmeSh0b29sUmVzcG9uc2UuZGF0YSkuc3Vic3RyaW5nKDAsIDIwMCkgKyBcIi4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBORVc6IFdlYiBhcHAgbWVzc2FnZSBvYmplY3QgdXBkYXRlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHBhcnNlZENodW5rLm5hbWUgPT09IFwiY3JlYXRlX3dlYl9hcHBcIiB8fCBwYXJzZWRDaHVuay5uYW1lID09PSBcImVkaXRfd2ViX2FwcFwiKSAmJiAhKHR5cGVvZiBwYXJzZWRDaHVuay5pc19wYXJ0aWFsID09PSAnYm9vbGVhbicgJiYgcGFyc2VkQ2h1bmsuaXNfcGFydGlhbCkgJiYgISh0eXBlb2YgcGFyc2VkQ2h1bmsuaXNfZXJyb3IgPT09ICdib29sZWFuJyAmJiBwYXJzZWRDaHVuay5pc19lcnJvcikgJiYgcGFyc2VkQ2h1bmsucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdERhdGEgPSB0eXBlb2YgcGFyc2VkQ2h1bmsucmVzdWx0ID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UocGFyc2VkQ2h1bmsucmVzdWx0KSA6IHBhcnNlZENodW5rLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0RGF0YS5zdGF0dXMgPT09IFwic3VjY2Vzc1wiICYmIHJlc3VsdERhdGEudXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsTXNnT2JqZWN0LnNob3dXZWJBcHBGb3JUaGlzTWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsTXNnT2JqZWN0LndlYkFwcFVybCA9IHJlc3VsdERhdGEudXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJbUEFHRS5UU1hdIChGaW5hbCBCdWZmZXIpIEZhaWxlZCB0byBwYXJzZSB3ZWIgYXBwIHJlc3VsdCBmb3IgbWVzc2FnZTpcIiwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTkVXOiBJbWFnZSBnZW5lcmF0aW9uIG1lc3NhZ2Ugb2JqZWN0IHVwZGF0ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZENodW5rLm5hbWUgPT09IFwiZ2VuZXJhdGVfaW1hZ2VzX3dpdGhfcHJvbXB0c1wiICYmICEodHlwZW9mIHBhcnNlZENodW5rLmlzX3BhcnRpYWwgPT09ICdib29sZWFuJyAmJiBwYXJzZWRDaHVuay5pc19wYXJ0aWFsKSAmJiAhKHR5cGVvZiBwYXJzZWRDaHVuay5pc19lcnJvciA9PT0gJ2Jvb2xlYW4nICYmIHBhcnNlZENodW5rLmlzX2Vycm9yKSAmJiBwYXJzZWRDaHVuay5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0RGF0YSA9IHR5cGVvZiBwYXJzZWRDaHVuay5yZXN1bHQgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShwYXJzZWRDaHVuay5yZXN1bHQpIDogcGFyc2VkQ2h1bmsucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHREYXRhLnN0YXR1cyA9PT0gXCJzdWNjZXNzXCIgJiYgcmVzdWx0RGF0YS5yZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgYWxsIGltYWdlIFVSTHMgZnJvbSB0aGUgcmVzdWx0cyBhcnJheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZVVybHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdERhdGEucmVzdWx0cy5mb3JFYWNoKChyZXN1bHRBcnJheTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHRBcnJheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVVybHMucHVzaCguLi5yZXN1bHRBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsTXNnT2JqZWN0LnNob3dJbWFnZXNGb3JUaGlzTWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE1zZ09iamVjdC5nZW5lcmF0ZWRJbWFnZVVybHMgPSBpbWFnZVVybHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltQQUdFLlRTWF0gKEZpbmFsIEJ1ZmZlcikgU2V0dGluZyBnZW5lcmF0ZWRJbWFnZVVybHMgd2l0aDpcIiwgaW1hZ2VVcmxzLmxlbmd0aCwgXCJpbWFnZXNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiW1BBR0UuVFNYXSAoRmluYWwgQnVmZmVyKSBGYWlsZWQgdG8gcGFyc2UgaW1hZ2UgZ2VuZXJhdGlvbiByZXN1bHQgZm9yIG1lc3NhZ2U6XCIsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaW5hbE1zZ09iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tLSBTVEFSVDogTmV3IGNodW5rIHR5cGVzIGZvciBmaW5hbCBidWZmZXIgcHJvY2Vzc2luZyAtLS0tXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZENodW5rLnR5cGUgPT09ICd0b29sX3NhbXBsZV90ZXh0X2NodW5rJyAmJiBwYXJzZWRDaHVuay5wYXJlbnRfdG9vbF9jYWxsX2lkICYmIHR5cGVvZiBwYXJzZWRDaHVuay5jb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBwcmV2Lm1hcChtc2cgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2cuaWQgPT09IGJvdE1lc3NhZ2VJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXJ0cyA9IG1zZy5wYXJ0cy5tYXAocGFydCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydC50eXBlID09PSBcInRvb2xfY2FsbFwiICYmIHBhcnQudG9vbENhbGwuY2FsbF9pZCA9PT0gcGFyc2VkQ2h1bmsucGFyZW50X3Rvb2xfY2FsbF9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRjID0gcGFydC50b29sQ2FsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UGFpcnMgPSB0Yy5zYW1wbGVDYWxsUGFpcnMgfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1BhaXJzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UGFpcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0UGFpciA9IGN1cnJlbnRQYWlyc1tjdXJyZW50UGFpcnMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgcGFpciBvYmplY3Qgd2l0aCB1cGRhdGVkIG91dHB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkTGFzdFBhaXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5sYXN0UGFpcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dDogKGxhc3RQYWlyLm91dHB1dCB8fCBcIlwiKSArIHBhcnNlZENodW5rLmNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBhcnJheSB3aXRoIHVwZGF0ZWQgbGFzdCBwYWlyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhaXJzID0gWy4uLmN1cnJlbnRQYWlycy5zbGljZSgwLCAtMSksIHVwZGF0ZWRMYXN0UGFpcl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBwYWlyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhaXJzID0gW3sgaWQ6IHV1aWR2NCgpLCBvdXRwdXQ6IHBhcnNlZENodW5rLmNvbnRlbnQgfV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbUEFHRS5UU1hdIChGaW5hbCBCdWZmZXIpIFVwZGF0ZWQgc2FtcGxlQ2FsbFBhaXJzIChvdXRwdXQpIGZvciAke3BhcnNlZENodW5rLnBhcmVudF90b29sX2NhbGxfaWR9OmAsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobmV3UGFpcnMpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucGFydCwgdG9vbENhbGw6IHsgLi4udGMsIHNhbXBsZUNhbGxQYWlyczogbmV3UGFpcnMgfSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5tc2csIHBhcnRzOiBuZXdQYXJ0cywgdGhpbmtpbmc6IHRydWUgfTsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtc2c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkQ2h1bmsudHlwZSA9PT0gJ3Rvb2xfc2FtcGxlX3Rob3VnaHRfY2h1bmsnICYmIHBhcnNlZENodW5rLnBhcmVudF90b29sX2NhbGxfaWQgJiYgdHlwZW9mIHBhcnNlZENodW5rLmNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5pZCA9PT0gYm90TWVzc2FnZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhcnRzID0gbXNnLnBhcnRzLm1hcChwYXJ0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09IFwidG9vbF9jYWxsXCIgJiYgcGFydC50b29sQ2FsbC5jYWxsX2lkID09PSBwYXJzZWRDaHVuay5wYXJlbnRfdG9vbF9jYWxsX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGMgPSBwYXJ0LnRvb2xDYWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQYWlycyA9IHRjLnNhbXBsZUNhbGxQYWlycyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3UGFpcnM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBsYXN0UGFpciBleGlzdHMgYW5kIGlzIHN0aWxsICdvcGVuJyAobm8gb3V0cHV0IHlldCksIGFwcGVuZCB0aG91Z2h0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIHRoaXMgaXMgYSBuZXcgc2FtcGxpbmcgY2FsbCdzIHRob3VnaHRzLCBzbyBjcmVhdGUgYSBuZXcgcGFpci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhaXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFBhaXIgPSBjdXJyZW50UGFpcnNbY3VycmVudFBhaXJzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxhc3RQYWlyLm91dHB1dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBwYWlyIHdpdGggdGhvdWdodHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRMYXN0UGFpciA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5sYXN0UGFpcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aG91Z2h0czogKGxhc3RQYWlyLnRob3VnaHRzIHx8IFwiXCIpICsgcGFyc2VkQ2h1bmsuY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhaXJzID0gWy4uLmN1cnJlbnRQYWlycy5zbGljZSgwLCAtMSksIHVwZGF0ZWRMYXN0UGFpcl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IHBhaXIgZm9yIG5ldyBzYW1wbGluZyBjYWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYWlycyA9IFsuLi5jdXJyZW50UGFpcnMsIHsgaWQ6IHV1aWR2NCgpLCB0aG91Z2h0czogcGFyc2VkQ2h1bmsuY29udGVudCB9XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBmaXJzdCBwYWlyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhaXJzID0gW3sgaWQ6IHV1aWR2NCgpLCB0aG91Z2h0czogcGFyc2VkQ2h1bmsuY29udGVudCB9XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtQQUdFLlRTWF0gKEZpbmFsIEJ1ZmZlcikgVXBkYXRlZCBzYW1wbGVDYWxsUGFpcnMgKHRob3VnaHRzKSBmb3IgJHtwYXJzZWRDaHVuay5wYXJlbnRfdG9vbF9jYWxsX2lkfTpgLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG5ld1BhaXJzKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLnBhcnQsIHRvb2xDYWxsOiB7IC4uLnRjLCBzYW1wbGVDYWxsUGFpcnM6IG5ld1BhaXJzIH0gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubXNnLCBwYXJ0czogbmV3UGFydHMsIHRoaW5raW5nOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtc2c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tLSBFTkQ6IE5ldyBjaHVuayB0eXBlcyBmb3IgZmluYWwgYnVmZmVyIHByb2Nlc3NpbmcgLS0tLVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJzZWRDaHVuay50eXBlID09PSAnc3RyZWFtX2VuZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gcHJldi5tYXAobXNnID0+IG1zZy5pZCA9PT0gYm90TWVzc2FnZUlkID8gey4uLm1zZywgdGhpbmtpbmc6IGZhbHNlIH0gOiBtc2cpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFN0YXR1cygnUmVhZHknKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZWRDaHVuay50eXBlID09PSAnZXJyb3InICYmIHBhcnNlZENodW5rLmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5pZCA9PT0gYm90TWVzc2FnZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dFBhcnQ6IE1lc3NhZ2VQYXJ0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogdXVpZHY0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBgPHN0cm9uZyBzdHlsZT1cImNvbG9yOiByZWQ7XCI+U3RyZWFtIEVycm9yOjwvc3Ryb25nPiAke3JlbmRlclNhbml0aXplZE1hcmtkb3duKHBhcnNlZENodW5rLmNvbnRlbnQpfWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGFydHMgPSBbLi4ubXNnLnBhcnRzLCBlcnJvclRleHRQYXJ0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5tc2csIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IG5ld1BhcnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmtpbmc6IGZhbHNlLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2Vycm9yX21lc3NhZ2U6IHRydWUgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtc2c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTdGF0dXMoJ1JlYWR5Jyk7IC8vIFJlc2V0IHN0YXR1cyBhZnRlciBlcnJvclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgZmluYWwgc3RyZWFtIGNodW5rIEpTT046JywgZXJyLCAnUmF3IGZpbmFsIGJ1ZmZlcjonLCBidWZmZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbUEFHRS5UU1hdIEhUVFAgUmVzcG9uc2UgU3RyZWFtIFJlYWRlciBmaW5pc2hlZC4nKTtcbiAgICAgICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gcHJldi5tYXAobXNnID0+IG1zZy5pZCA9PT0gYm90TWVzc2FnZUlkICYmIG1zZy50aGlua2luZyA/IHsuLi5tc2csIHRoaW5raW5nOiBmYWxzZSB9IDogbXNnKSk7XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSAnUmVhZHknKSBzZXRTdGF0dXMoJ1JlYWR5Jyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1ZmZlciArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XG4gICAgICAgIGxldCBuZXdsaW5lSW5kZXg7XG5cbiAgICAgICAgd2hpbGUgKChuZXdsaW5lSW5kZXggPSBidWZmZXIuaW5kZXhPZignXFxuJykpID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXIuc3Vic3RyaW5nKDAsIG5ld2xpbmVJbmRleCk7XG4gICAgICAgICAgICBidWZmZXIgPSBidWZmZXIuc3Vic3RyaW5nKG5ld2xpbmVJbmRleCArIDEpO1xuXG4gICAgICAgICAgICBpZiAobGluZS50cmltKCkgPT09ICcnKSBjb250aW51ZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkQ2h1bmsgPSBKU09OLnBhcnNlKGxpbmUpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdbUEFHRS5UU1hdIFN0cmVhbWVkIENodW5rOicsIEpTT04uc3RyaW5naWZ5KHBhcnNlZENodW5rKSk7IC8vIEdlbmVyYWwgbG9nIGV4aXN0c1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZENodW5rLnR5cGUgPT09ICd0ZXh0X2NodW5rJyAmJiBwYXJzZWRDaHVuay5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gcHJldi5tYXAobXNnID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2cuaWQgPT09IGJvdE1lc3NhZ2VJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbUEFHRS5UU1hdIFVwZGF0aW5nIG1lc3NhZ2UgJHttc2cuaWR9IHdpdGggdGV4dF9jaHVuayAoc3RyZWFtIGxvb3ApLiBDdXJyZW50IHBhcnRzOmAsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobXNnLnBhcnRzKSkpOyAvLyBERUVQIENPUFkgTE9HR0lOR1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhcnRzID0gWy4uLm1zZy5wYXJ0c107IC8vIFNoYWxsb3cgY29weSBvZiBwYXJ0cyBhcnJheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQYXJ0SW5kZXggPSBuZXdQYXJ0cy5sZW5ndGggPiAwID8gbmV3UGFydHMubGVuZ3RoIC0gMSA6IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQYXJ0ID0gbGFzdFBhcnRJbmRleCAhPT0gLTEgPyBuZXdQYXJ0c1tsYXN0UGFydEluZGV4XSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9ybWFsaXplIHRoZSBpbmNvbWluZyBjaHVuaydzIGNvbnRlbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHNlY29uZCBhcmd1bWVudCB0byBub3JtYWxpemVGcmFnbWVudCB3YXMgbGFzdFBhcnQuY29udGVudCBvciBcIlwiIGluIHRoZSBvcmlnaW5hbCBsb2dpYy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RnJvbUNodW5rID0gbm9ybWFsaXplRnJhZ21lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZENodW5rLmNvbnRlbnQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGFydCAmJiBsYXN0UGFydC50eXBlID09PSBcInRleHRcIiA/IGxhc3RQYXJ0LmNvbnRlbnQgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0UGFydCAmJiBsYXN0UGFydC50eXBlID09PSBcInRleHRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGxhc3QgcGFydCBpbW11dGFibHkgYnkgY3JlYXRpbmcgYSBuZXcgb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnRzW2xhc3RQYXJ0SW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGxhc3RQYXJ0IGFzIHsgdHlwZTogXCJ0ZXh0XCI7IGlkOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZyB9KSwgLy8gRW5zdXJlIGNvcnJlY3QgdHlwZSBmb3Igc3ByZWFkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBsYXN0UGFydC5jb250ZW50ICsgY29udGVudEZyb21DaHVuayBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBuZXcgdGV4dCBwYXJ0IGlmIG5vIHByZXZpb3VzIHRleHQgcGFydCBvciBwYXJ0cyBhcnJheSBpcyBlbXB0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogdXVpZHY0KCksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudEZyb21DaHVuayBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLm1zZywgcGFydHM6IG5ld1BhcnRzLCB0aGlua2luZzogdHJ1ZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkQ2h1bmsudHlwZSA9PT0gJ3Rob3VnaHRfc3VtbWFyeScgJiYgcGFyc2VkQ2h1bmsuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobXNnLmlkID09PSBib3RNZXNzYWdlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1BBR0UuVFNYXSBVcGRhdGluZyBtZXNzYWdlICR7bXNnLmlkfSB3aXRoIHRob3VnaHRfc3VtbWFyeS4gQ3VycmVudCBwYXJ0czpgLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG1zZy5wYXJ0cykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXJ0cyA9IFsuLi5tc2cucGFydHNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQYXJ0SW5kZXggPSBuZXdQYXJ0cy5sZW5ndGggPiAwID8gbmV3UGFydHMubGVuZ3RoIC0gMSA6IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQYXJ0ID0gbGFzdFBhcnRJbmRleCAhPT0gLTEgPyBuZXdQYXJ0c1tsYXN0UGFydEluZGV4XSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudEZyb21DaHVuayA9IG5vcm1hbGl6ZUZyYWdtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRDaHVuay5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGFydCAmJiBsYXN0UGFydC50eXBlID09PSBcInRob3VnaHRfc3VtbWFyeVwiID8gbGFzdFBhcnQuY29udGVudCA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RQYXJ0ICYmIGxhc3RQYXJ0LnR5cGUgPT09IFwidGhvdWdodF9zdW1tYXJ5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFydHNbbGFzdFBhcnRJbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4obGFzdFBhcnQgYXMgeyB0eXBlOiBcInRob3VnaHRfc3VtbWFyeVwiOyBpZDogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBsYXN0UGFydC5jb250ZW50ICsgY29udGVudEZyb21DaHVua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0aG91Z2h0X3N1bW1hcnlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRGcm9tQ2h1bmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLm1zZywgcGFydHM6IG5ld1BhcnRzLCB0aGlua2luZzogdHJ1ZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkQ2h1bmsudHlwZSA9PT0gJ3Rvb2xfY2FsbF9wZW5kaW5nJyAmJiBwYXJzZWRDaHVuay5uYW1lICYmIHBhcnNlZENodW5rLmFyZ3VtZW50cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWxsX2lkX2Zyb21fY2h1bmsgPSBwYXJzZWRDaHVuay5jYWxsX2lkIHx8IGB0b29sLSR7dXVpZHY0KCl9YDtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBwcmV2Lm1hcChtc2cgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5pZCA9PT0gYm90TWVzc2FnZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdUb29sQ2FsbFBhcnQgPSBtc2cucGFydHMuZmluZChwYXJ0ID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQudHlwZSA9PT0gXCJ0b29sX2NhbGxcIiAmJiBwYXJ0LnRvb2xDYWxsLmNhbGxfaWQgPT09IGNhbGxfaWRfZnJvbV9jaHVua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdUb29sQ2FsbFBhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtQQUdFLlRTWF0gKHN0cmVhbSBsb29wKSBUb29sIGNhbGwgd2l0aCBJRCAke2NhbGxfaWRfZnJvbV9jaHVua30gYWxyZWFkeSBleGlzdHMgaW4gcGVuZGluZyBzdGF0ZS4gSWdub3JpbmcgZHVwbGljYXRlIHBlbmRpbmcgbWVzc2FnZS5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdUb29sQ2FsbERhdGE6IFRvb2xDYWxsRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbF9pZDogY2FsbF9pZF9mcm9tX2NodW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJzZWRDaHVuay5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHR5cGVvZiBwYXJzZWRDaHVuay5hcmd1bWVudHMgPT09ICdzdHJpbmcnID8gcGFyc2VkQ2h1bmsuYXJndW1lbnRzIDogSlNPTi5zdHJpbmdpZnkocGFyc2VkQ2h1bmsuYXJndW1lbnRzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcIlBlbmRpbmcuLi5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbUEFHRS5UU1hdIFRvb2wgQ2FsbCBQZW5kaW5nIChOZXcpOicsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobmV3VG9vbENhbGxEYXRhKSkpOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXJ0cyA9IFsuLi5tc2cucGFydHNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnRzLnB1c2goeyB0eXBlOiBcInRvb2xfY2FsbFwiIGFzIGNvbnN0LCBpZDogdXVpZHY0KCksIHRvb2xDYWxsOiBuZXdUb29sQ2FsbERhdGEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFydHMucHVzaCh7IHR5cGU6IFwidGV4dFwiIGFzIGNvbnN0LCBpZDogdXVpZHY0KCksIGNvbnRlbnQ6IFwiXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubXNnLCBwYXJ0czogbmV3UGFydHMsIHRoaW5raW5nOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbXNnO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZWRDaHVuay50eXBlID09PSAndG9vbF9yZXN1bHQnICYmIHBhcnNlZENodW5rLmNhbGxfaWQgJiYgdHlwZW9mIHBhcnNlZENodW5rLnJlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tQQUdFLlRTWF0gUmVjZWl2ZWQgdG9vbF9yZXN1bHQgY2h1bms6JywgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYXJzZWRDaHVuaykpKTsgLy8gREVFUCBDT1BZIExPR0dJTkdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZENodW5rLm5hbWUgPT09IFwiZ2V0X2RpcmVjdGlvbnNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbUEFHRS5UU1hdIFJBVyBnZXRfZGlyZWN0aW9ucyB0b29sX3Jlc3VsdCBDSFVOSyAocmVwZWF0ZWQgYmxvY2spOlwiLCBKU09OLnN0cmluZ2lmeShwYXJzZWRDaHVuaykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBbUEFHRS5UU1hdIFBhcnNlZCBjaHVuayBpc19wYXJ0aWFsIHZhbHVlOiAke3BhcnNlZENodW5rLmlzX3BhcnRpYWx9YCk7IC8vIEtlZXAgZm9yIGRlYnVnZ2luZyBpZiBuZWVkZWRcblxuICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobXNnLmlkID09PSBib3RNZXNzYWdlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1BBR0UuVFNYXSBVcGRhdGluZyBtZXNzYWdlICR7bXNnLmlkfSB3aXRoIHRvb2xfcmVzdWx0LiBDdXJyZW50IHBhcnRzOmAsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobXNnLnBhcnRzKSkpOyAvLyBERUVQIENPUFkgTE9HR0lOR1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaGVkVG9vbENhbGxJblBhcnRzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGFydHMgPSBtc2cucGFydHMubWFwKHBhcnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydC50eXBlID09PSBcInRvb2xfY2FsbFwiICYmIHBhcnQudG9vbENhbGwuY2FsbF9pZCA9PT0gcGFyc2VkQ2h1bmsuY2FsbF9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZFRvb2xDYWxsSW5QYXJ0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YyA9IHBhcnQudG9vbENhbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgW1BBR0UuVFNYXSBFeGlzdGluZyB0b29sIGNhbGwgZGF0YSBmb3IgJHt0Yy5jYWxsX2lkfTpgLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRjKSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxSZXN1bHQgPSB0eXBlb2YgcGFyc2VkQ2h1bmsucmVzdWx0ID09PSAnc3RyaW5nJyA/IHBhcnNlZENodW5rLnJlc3VsdCA6IEpTT04uc3RyaW5naWZ5KHBhcnNlZENodW5rLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1BhcnRpYWwgPSB0eXBlb2YgcGFyc2VkQ2h1bmsuaXNfcGFydGlhbCA9PT0gJ2Jvb2xlYW4nID8gcGFyc2VkQ2h1bmsuaXNfcGFydGlhbCA6IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNFcnJvciA9IHR5cGVvZiBwYXJzZWRDaHVuay5pc19lcnJvciA9PT0gJ2Jvb2xlYW4nID8gcGFyc2VkQ2h1bmsuaXNfZXJyb3IgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1N0YXR1czogVG9vbENhbGxEYXRhWydzdGF0dXMnXSA9IGlzUGFydGlhbCA/IFwiU3RyZWFtaW5nLi4uXCIgOiAoaXNFcnJvciA/IFwiRXJyb3JcIiA6IFwiQ29tcGxldGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgW1BBR0UuVFNYXSBVcGRhdGluZyB0b29sOiAke3RjLmNhbGxfaWR9LCBOZXcgU3RhdHVzOiAke25ld1N0YXR1c30sIElzIFBhcnRpYWwgKGRlcml2ZWQpOiAke2lzUGFydGlhbH0sIElzIEVycm9yIChkZXJpdmVkKTogJHtpc0Vycm9yfWApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkVG9vbENhbGw6IFRvb2xDYWxsRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi50YyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGlzUGFydGlhbCAmJiB0Yy5yZXN1bHQgJiYgdGMuc3RhdHVzID09PSBcIlN0cmVhbWluZy4uLlwiID8gdGMucmVzdWx0ICsgJ1xcbi0tLVxcbicgKyBmaW5hbFJlc3VsdCA6IGZpbmFsUmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogbmV3U3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2Vycm9yOiBpc0Vycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX3BhcnRpYWw6IGlzUGFydGlhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgW1BBR0UuVFNYXSBOZXcgdG9vbCBjYWxsIGRhdGEgZm9yICR7dGMuY2FsbF9pZH06YCwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1cGRhdGVkVG9vbENhbGwpKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSBORVc6IEV4dHJhY3QgZ2V0X2RpcmVjdGlvbnNfcmVzcG9uc2UgLS0tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG9vbFJlc3BvbnNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0Yy5uYW1lID09PSBcImdldF9kaXJlY3Rpb25zXCIgJiYgcGFyc2VkQ2h1bmsucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIGJvdGggb2xkIHdyYXBwZWQgZm9ybWF0IGFuZCBuZXcgZGlyZWN0IGZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyc2VkQ2h1bmsucmVzdWx0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUtleSA9IGAke3RjLm5hbWV9X3Jlc3BvbnNlYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZENodW5rLnJlc3VsdFtyZXNwb25zZUtleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9sZCB3cmFwcGVkIGZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFJlc3BvbnNlID0gcGFyc2VkQ2h1bmsucmVzdWx0W3Jlc3BvbnNlS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW1BBR0UuVFNYXSAoU3RyZWFtIExvb3ApIFVzaW5nIHdyYXBwZWQgZm9ybWF0IGZvciBkaXJlY3Rpb25zLCB0b29sUmVzcG9uc2U6XCIsIEpTT04uc3RyaW5naWZ5KHRvb2xSZXNwb25zZSkuc3Vic3RyaW5nKDAsIDIwMCkgKyBcIi4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5ldyBkaXJlY3QgZm9ybWF0IGZyb20gRmFzdE1DUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFJlc3BvbnNlID0gcGFyc2VkQ2h1bmsucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbUEFHRS5UU1hdIChTdHJlYW0gTG9vcCkgVXNpbmcgZGlyZWN0IGZvcm1hdCBmb3IgZGlyZWN0aW9ucywgdG9vbFJlc3BvbnNlOlwiLCBKU09OLnN0cmluZ2lmeSh0b29sUmVzcG9uc2UpLnN1YnN0cmluZygwLCAyMDApICsgXCIuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gRU5EIE5FVyAtLS1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmluYWwgcmVzdWx0IGZvciBnZXRfZGlyZWN0aW9ucywgc2V0IG1hcCBkYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGMubmFtZSA9PT0gXCJnZXRfZGlyZWN0aW9uc1wiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFJlc3BvbnNlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFJlc3BvbnNlLnN0YXR1cyA9PT0gXCJzdWNjZXNzXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sUmVzcG9uc2UuZGF0YSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpc0Vycm9yICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWlzUGFydGlhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbUEFHRS5UU1hdIChTdHJlYW0gTG9vcCkgU2V0dGluZyBkaXJlY3Rpb25zRGF0YSB3aXRoOlwiLCBKU09OLnN0cmluZ2lmeSh0b29sUmVzcG9uc2UuZGF0YSkuc3Vic3RyaW5nKDAsIDIwMCkgKyBcIi4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXREaXJlY3Rpb25zRGF0YSh0b29sUmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TWFwRGlzcGxheUtleShwcmV2S2V5ID0+IHByZXZLZXkgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc01hcFNlY3Rpb25WaXNpYmxlKHRydWUpOyAvLyBNT0RJRklFRDogU2hvdyBtYXAgc2VjdGlvbiBhdXRvbWF0aWNhbGx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRjLm5hbWUgPT09IFwiZ2V0X2RpcmVjdGlvbnNcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0b29sUmVzcG9uc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiW1BBR0UuVFNYXSBFUlJPUiAoc3RyZWFtIGxvb3ApOiBnZXRfZGlyZWN0aW9uc19yZXNwb25zZSBtaXNzaW5nIGluIHBhcnNlZENodW5rLnJlc3VsdCFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5FVzogV2ViIGFwcCBkZXRlY3Rpb24gbG9naWNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGMubmFtZSA9PT0gXCJjcmVhdGVfd2ViX2FwcFwiIHx8IHRjLm5hbWUgPT09IFwiZWRpdF93ZWJfYXBwXCIpICYmICFpc0Vycm9yICYmICFpc1BhcnRpYWwgJiYgdGMucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0RGF0YSA9IHR5cGVvZiB0Yy5yZXN1bHQgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZSh0Yy5yZXN1bHQpIDogdGMucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0RGF0YS5zdGF0dXMgPT09IFwic3VjY2Vzc1wiICYmIHJlc3VsdERhdGEudXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltQQUdFLlRTWF0gKEZpbmFsIEJ1ZmZlcikgU2V0dGluZyB3ZWJBcHBVcmwgd2l0aDpcIiwgcmVzdWx0RGF0YS51cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIGJlIHNldCBvbiB0aGUgbWVzc2FnZSBvYmplY3QgYmVsb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiW1BBR0UuVFNYXSAoRmluYWwgQnVmZmVyKSBGYWlsZWQgdG8gcGFyc2Ugd2ViIGFwcCByZXN1bHQ6XCIsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTkVXOiBJbWFnZSBnZW5lcmF0aW9uIGRldGVjdGlvbiBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRjLm5hbWUgPT09IFwiZ2VuZXJhdGVfaW1hZ2VzX3dpdGhfcHJvbXB0c1wiICYmICFpc0Vycm9yICYmICFpc1BhcnRpYWwgJiYgdGMucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0RGF0YSA9IHR5cGVvZiB0Yy5yZXN1bHQgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZSh0Yy5yZXN1bHQpIDogdGMucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0RGF0YS5zdGF0dXMgPT09IFwic3VjY2Vzc1wiICYmIHJlc3VsdERhdGEucmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBhbGwgaW1hZ2UgVVJMcyBmcm9tIHRoZSByZXN1bHRzIGFycmF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZVVybHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHREYXRhLnJlc3VsdHMuZm9yRWFjaCgocmVzdWx0QXJyYXk6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdEFycmF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVVybHMucHVzaCguLi5yZXN1bHRBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltQQUdFLlRTWF0gKFN0cmVhbSBMb29wKSBTZXR0aW5nIGdlbmVyYXRlZEltYWdlVXJscyB3aXRoOlwiLCBpbWFnZVVybHMubGVuZ3RoLCBcImltYWdlc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgYmUgc2V0IG9uIHRoZSBtZXNzYWdlIG9iamVjdCBiZWxvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJbUEFHRS5UU1hdIChTdHJlYW0gTG9vcCkgRmFpbGVkIHRvIHBhcnNlIGltYWdlIGdlbmVyYXRpb24gcmVzdWx0OlwiLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5FVzogUHJvY2VzcyB0b29sIGNhbGwgZm9yIHByZXZpZXcgZXh0cmFjdGlvbiAoc3RyZWFtaW5nIGxvb3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzVG9vbENhbGxGb3JQcmV2aWV3KHVwZGF0ZWRUb29sQ2FsbCwgbXNnLmlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucGFydCwgdG9vbENhbGw6IHVwZGF0ZWRUb29sQ2FsbCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0Y2hlZFRvb2xDYWxsSW5QYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgW1BBR0UuVFNYXSAoc3RyZWFtIGxvb3ApIFRvb2wgY2FsbCB3aXRoIGlkICR7cGFyc2VkQ2h1bmsuY2FsbF9pZH0gbm90IGZvdW5kIGluIG1lc3NhZ2UgJHttc2cuaWR9IHBhcnRzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSBORVc6IEF0dGFjaCBkaXJlY3Rpb25zRGF0YSB0byBtZXNzYWdlIGZvciByZW5kZXJpbmcgLS0tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvb2xSZXNwb25zZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZENodW5rLm5hbWUgPT09IFwiZ2V0X2RpcmVjdGlvbnNcIiAmJiBwYXJzZWRDaHVuay5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBib3RoIG9sZCB3cmFwcGVkIGZvcm1hdCBhbmQgbmV3IGRpcmVjdCBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyc2VkQ2h1bmsucmVzdWx0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlS2V5ID0gYCR7cGFyc2VkQ2h1bmsubmFtZX1fcmVzcG9uc2VgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWRDaHVuay5yZXN1bHRbcmVzcG9uc2VLZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9sZCB3cmFwcGVkIGZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sUmVzcG9uc2UgPSBwYXJzZWRDaHVuay5yZXN1bHRbcmVzcG9uc2VLZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltQQUdFLlRTWF0gKFN0cmVhbSBMb29wIE1lc3NhZ2UpIFVzaW5nIHdyYXBwZWQgZm9ybWF0IGZvciBkaXJlY3Rpb25zLCB0b29sUmVzcG9uc2U6XCIsIEpTT04uc3RyaW5naWZ5KHRvb2xSZXNwb25zZSkuc3Vic3RyaW5nKDAsIDIwMCkgKyBcIi4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXcgZGlyZWN0IGZvcm1hdCBmcm9tIEZhc3RNQ1BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFJlc3BvbnNlID0gcGFyc2VkQ2h1bmsucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltQQUdFLlRTWF0gKFN0cmVhbSBMb29wIE1lc3NhZ2UpIFVzaW5nIGRpcmVjdCBmb3JtYXQgZm9yIGRpcmVjdGlvbnMsIHRvb2xSZXNwb25zZTpcIiwgSlNPTi5zdHJpbmdpZnkodG9vbFJlc3BvbnNlKS5zdWJzdHJpbmcoMCwgMjAwKSArIFwiLi4uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbE1zZ09iamVjdCA9IHsgLi4ubXNnLCBwYXJ0czogbmV3UGFydHMsIHRoaW5raW5nOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRDaHVuay5uYW1lID09PSBcImdldF9kaXJlY3Rpb25zXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbFJlc3BvbnNlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEodHlwZW9mIHBhcnNlZENodW5rLmlzX3BhcnRpYWwgPT09ICdib29sZWFuJyAmJiBwYXJzZWRDaHVuay5pc19wYXJ0aWFsKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKHR5cGVvZiBwYXJzZWRDaHVuay5pc19lcnJvciA9PT0gJ2Jvb2xlYW4nICYmIHBhcnNlZENodW5rLmlzX2Vycm9yKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sUmVzcG9uc2Uuc3RhdHVzID09PSBcInN1Y2Nlc3NcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sUmVzcG9uc2UuZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE1zZ09iamVjdC5zaG93TWFwVG9nZ2xlRm9yVGhpc01lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE1zZ09iamVjdC5kaXJlY3Rpb25zRGF0YSA9IHRvb2xSZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltQQUdFLlRTWF0gKFN0cmVhbSBMb29wIE1lc3NhZ2UpIFNldHRpbmcgbWVzc2FnZSBkaXJlY3Rpb25zIGRhdGE6XCIsIEpTT04uc3RyaW5naWZ5KHRvb2xSZXNwb25zZS5kYXRhKS5zdWJzdHJpbmcoMCwgMjAwKSArIFwiLi4uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBORVc6IFdlYiBhcHAgbWVzc2FnZSBvYmplY3QgdXBkYXRlcyBmb3Igc3RyZWFtaW5nIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHBhcnNlZENodW5rLm5hbWUgPT09IFwiY3JlYXRlX3dlYl9hcHBcIiB8fCBwYXJzZWRDaHVuay5uYW1lID09PSBcImVkaXRfd2ViX2FwcFwiKSAmJiAhKHR5cGVvZiBwYXJzZWRDaHVuay5pc19wYXJ0aWFsID09PSAnYm9vbGVhbicgJiYgcGFyc2VkQ2h1bmsuaXNfcGFydGlhbCkgJiYgISh0eXBlb2YgcGFyc2VkQ2h1bmsuaXNfZXJyb3IgPT09ICdib29sZWFuJyAmJiBwYXJzZWRDaHVuay5pc19lcnJvcikgJiYgcGFyc2VkQ2h1bmsucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHREYXRhID0gdHlwZW9mIHBhcnNlZENodW5rLnJlc3VsdCA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKHBhcnNlZENodW5rLnJlc3VsdCkgOiBwYXJzZWRDaHVuay5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0RGF0YS5zdGF0dXMgPT09IFwic3VjY2Vzc1wiICYmIHJlc3VsdERhdGEudXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxNc2dPYmplY3Quc2hvd1dlYkFwcEZvclRoaXNNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE1zZ09iamVjdC53ZWJBcHBVcmwgPSByZXN1bHREYXRhLnVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiW1BBR0UuVFNYXSAoU3RyZWFtIExvb3ApIEZhaWxlZCB0byBwYXJzZSB3ZWIgYXBwIHJlc3VsdCBmb3IgbWVzc2FnZTpcIiwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTkVXOiBJbWFnZSBnZW5lcmF0aW9uIG1lc3NhZ2Ugb2JqZWN0IHVwZGF0ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkQ2h1bmsubmFtZSA9PT0gXCJnZW5lcmF0ZV9pbWFnZXNfd2l0aF9wcm9tcHRzXCIgJiYgISh0eXBlb2YgcGFyc2VkQ2h1bmsuaXNfcGFydGlhbCA9PT0gJ2Jvb2xlYW4nICYmIHBhcnNlZENodW5rLmlzX3BhcnRpYWwpICYmICEodHlwZW9mIHBhcnNlZENodW5rLmlzX2Vycm9yID09PSAnYm9vbGVhbicgJiYgcGFyc2VkQ2h1bmsuaXNfZXJyb3IpICYmIHBhcnNlZENodW5rLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0RGF0YSA9IHR5cGVvZiBwYXJzZWRDaHVuay5yZXN1bHQgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShwYXJzZWRDaHVuay5yZXN1bHQpIDogcGFyc2VkQ2h1bmsucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdERhdGEuc3RhdHVzID09PSBcInN1Y2Nlc3NcIiAmJiByZXN1bHREYXRhLnJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGFsbCBpbWFnZSBVUkxzIGZyb20gdGhlIHJlc3VsdHMgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZVVybHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0RGF0YS5yZXN1bHRzLmZvckVhY2goKHJlc3VsdEFycmF5OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0QXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVVybHMucHVzaCguLi5yZXN1bHRBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VVcmxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxNc2dPYmplY3Quc2hvd0ltYWdlc0ZvclRoaXNNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxNc2dPYmplY3QuZ2VuZXJhdGVkSW1hZ2VVcmxzID0gaW1hZ2VVcmxzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltQQUdFLlRTWF0gKEZpbmFsIEJ1ZmZlcikgU2V0dGluZyBnZW5lcmF0ZWRJbWFnZVVybHMgd2l0aDpcIiwgaW1hZ2VVcmxzLmxlbmd0aCwgXCJpbWFnZXNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJbUEFHRS5UU1hdIChGaW5hbCBCdWZmZXIpIEZhaWxlZCB0byBwYXJzZSBpbWFnZSBnZW5lcmF0aW9uIHJlc3VsdCBmb3IgbWVzc2FnZTpcIiwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbmFsTXNnT2JqZWN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkQ2h1bmsudHlwZSA9PT0gJ3N0cmVhbV9lbmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbUEFHRS5UU1hdIFN0cmVhbSBlbmRlZCBmb3IgYm90TWVzc2FnZUlkOicsIGJvdE1lc3NhZ2VJZCk7XG4gICAgICAgICAgICAgICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gcHJldi5tYXAobXNnID0+IG1zZy5pZCA9PT0gYm90TWVzc2FnZUlkID8gey4uLm1zZywgdGhpbmtpbmc6IGZhbHNlIH0gOiBtc2cpKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0U3RhdHVzKCdSZWFkeScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkQ2h1bmsudHlwZSA9PT0gJ2Vycm9yJyAmJiBwYXJzZWRDaHVuay5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tQQUdFLlRTWF0gUmVjZWl2ZWQgc3RyZWFtIGVycm9yIGNodW5rOicsIHBhcnNlZENodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBwcmV2Lm1hcChtc2cgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5pZCA9PT0gYm90TWVzc2FnZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0UGFydDogTWVzc2FnZVBhcnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogdXVpZHY0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGA8c3Ryb25nIHN0eWxlPVwiY29sb3I6IHJlZDtcIj5TdHJlYW0gRXJyb3I6PC9zdHJvbmc+ICR7cmVuZGVyU2FuaXRpemVkTWFya2Rvd24ocGFyc2VkQ2h1bmsuY29udGVudCl9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGFydHMgPSBbLi4ubXNnLnBhcnRzLCBlcnJvclRleHRQYXJ0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ubXNnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IG5ld1BhcnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlua2luZzogZmFsc2UsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19lcnJvcl9tZXNzYWdlOiB0cnVlIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbXNnO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIHNldFN0YXR1cygnUmVhZHknKTsgLy8gUmVzZXQgc3RhdHVzIGFmdGVyIGVycm9yXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIC0tLS0gU1RBUlQ6IE5ldyBjaHVuayB0eXBlcyBmb3IgcGVyLWxpbmUgc3RyZWFtIHByb2Nlc3NpbmcgLS0tLVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZENodW5rLnR5cGUgPT09ICd0b29sX3NhbXBsZV90ZXh0X2NodW5rJyAmJiBwYXJzZWRDaHVuay5wYXJlbnRfdG9vbF9jYWxsX2lkICYmIHR5cGVvZiBwYXJzZWRDaHVuay5jb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobXNnLmlkID09PSBib3RNZXNzYWdlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXJ0cyA9IG1zZy5wYXJ0cy5tYXAocGFydCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09IFwidG9vbF9jYWxsXCIgJiYgcGFydC50b29sQ2FsbC5jYWxsX2lkID09PSBwYXJzZWRDaHVuay5wYXJlbnRfdG9vbF9jYWxsX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGMgPSBwYXJ0LnRvb2xDYWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFBhaXJzID0gdGMuc2FtcGxlQ2FsbFBhaXJzIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1BhaXJzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhaXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0UGFpciA9IGN1cnJlbnRQYWlyc1tjdXJyZW50UGFpcnMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBwYWlyIG9iamVjdCB3aXRoIHVwZGF0ZWQgb3V0cHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZExhc3RQYWlyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5sYXN0UGFpcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiAobGFzdFBhaXIub3V0cHV0IHx8IFwiXCIpICsgcGFyc2VkQ2h1bmsuY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBhcnJheSB3aXRoIHVwZGF0ZWQgbGFzdCBwYWlyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFpcnMgPSBbLi4uY3VycmVudFBhaXJzLnNsaWNlKDAsIC0xKSwgdXBkYXRlZExhc3RQYWlyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBwYWlyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFpcnMgPSBbeyBpZDogdXVpZHY0KCksIG91dHB1dDogcGFyc2VkQ2h1bmsuY29udGVudCB9XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtQQUdFLlRTWF0gKFN0cmVhbSBMaW5lKSBVcGRhdGVkIHNhbXBsZUNhbGxQYWlycyAob3V0cHV0KSBmb3IgJHtwYXJzZWRDaHVuay5wYXJlbnRfdG9vbF9jYWxsX2lkfTpgLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG5ld1BhaXJzKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucGFydCwgdG9vbENhbGw6IHsgLi4udGMsIHNhbXBsZUNhbGxQYWlyczogbmV3UGFpcnMgfSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLm1zZywgcGFydHM6IG5ld1BhcnRzLCB0aGlua2luZzogdHJ1ZSB9OyBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtc2c7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlZENodW5rLnR5cGUgPT09ICd0b29sX3NhbXBsZV90aG91Z2h0X2NodW5rJyAmJiBwYXJzZWRDaHVuay5wYXJlbnRfdG9vbF9jYWxsX2lkICYmIHR5cGVvZiBwYXJzZWRDaHVuay5jb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobXNnLmlkID09PSBib3RNZXNzYWdlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXJ0cyA9IG1zZy5wYXJ0cy5tYXAocGFydCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09IFwidG9vbF9jYWxsXCIgJiYgcGFydC50b29sQ2FsbC5jYWxsX2lkID09PSBwYXJzZWRDaHVuay5wYXJlbnRfdG9vbF9jYWxsX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YyA9IHBhcnQudG9vbENhbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UGFpcnMgPSB0Yy5zYW1wbGVDYWxsUGFpcnMgfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3UGFpcnM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGxhc3RQYWlyIGV4aXN0cyBhbmQgaXMgc3RpbGwgJ29wZW4nIChubyBvdXRwdXQgeWV0KSwgYXBwZW5kIHRob3VnaHRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB0aGlzIGlzIGEgbmV3IHNhbXBsaW5nIGNhbGwncyB0aG91Z2h0cywgc28gY3JlYXRlIGEgbmV3IHBhaXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhaXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0UGFpciA9IGN1cnJlbnRQYWlyc1tjdXJyZW50UGFpcnMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsYXN0UGFpci5vdXRwdXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBwYWlyIHdpdGggdGhvdWdodHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZExhc3RQYWlyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ubGFzdFBhaXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aG91Z2h0czogKGxhc3RQYWlyLnRob3VnaHRzIHx8IFwiXCIpICsgcGFyc2VkQ2h1bmsuY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYWlycyA9IFsuLi5jdXJyZW50UGFpcnMuc2xpY2UoMCwgLTEpLCB1cGRhdGVkTGFzdFBhaXJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgcGFpciBmb3IgbmV3IHNhbXBsaW5nIGNhbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFpcnMgPSBbLi4uY3VycmVudFBhaXJzLCB7IGlkOiB1dWlkdjQoKSwgdGhvdWdodHM6IHBhcnNlZENodW5rLmNvbnRlbnQgfV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgZmlyc3QgcGFpclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhaXJzID0gW3sgaWQ6IHV1aWR2NCgpLCB0aG91Z2h0czogcGFyc2VkQ2h1bmsuY29udGVudCB9XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtQQUdFLlRTWF0gKFN0cmVhbSBMaW5lKSBVcGRhdGVkIHNhbXBsZUNhbGxQYWlycyAodGhvdWdodHMpIGZvciAke3BhcnNlZENodW5rLnBhcmVudF90b29sX2NhbGxfaWR9OmAsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobmV3UGFpcnMpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5wYXJ0LCB0b29sQ2FsbDogeyAuLi50Yywgc2FtcGxlQ2FsbFBhaXJzOiBuZXdQYWlycyB9IH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubXNnLCBwYXJ0czogbmV3UGFydHMsIHRoaW5raW5nOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbXNnO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIC0tLS0gRU5EOiBOZXcgY2h1bmsgdHlwZXMgZm9yIHBlci1saW5lIHN0cmVhbSBwcm9jZXNzaW5nIC0tLS1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgc3RyZWFtIGNodW5rIEpTT046JywgZXJyLCAnUmF3IGxpbmU6JywgbGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBtZXNzYWdlIG9yIHByb2Nlc3Npbmcgc3RyZWFtOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yQ29udGVudCA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1NvcnJ5LCBJIGVuY291bnRlcmVkIGFuIGVycm9yIHByb2Nlc3NpbmcgeW91ciByZXF1ZXN0Lic7XG4gICAgICBjb25zdCByZW5kZXJlZEVycm9yQ29udGVudCA9IHJlbmRlclNhbml0aXplZE1hcmtkb3duKGVycm9yQ29udGVudCk7XG4gICAgICBcbiAgICAgIGxldCBib3RNZXNzYWdlRm91bmRBbmRVcGRhdGVkID0gZmFsc2U7XG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG1zZyA9PiB7XG4gICAgICAgIGlmIChtc2cuaWQgPT09IGJvdE1lc3NhZ2VJZCkge1xuICAgICAgICAgIGJvdE1lc3NhZ2VGb3VuZEFuZFVwZGF0ZWQgPSB0cnVlO1xuICAgICAgICAgIGNvbnN0IG5ld0Vycm9yUGFydDogTWVzc2FnZVBhcnQgPSB7IHR5cGU6IFwidGV4dFwiLCBpZDogdXVpZHY0KCksIGNvbnRlbnQ6IHJlbmRlcmVkRXJyb3JDb250ZW50IH07XG4gICAgICAgICAgY29uc3QgdXBkYXRlZFBhcnRzID0gWy4uLihtc2cucGFydHMgfHwgW10pLCBuZXdFcnJvclBhcnRdOyAvLyBFbnN1cmUgbXNnLnBhcnRzIGV4aXN0c1xuICAgICAgICAgIHJldHVybiB7IC4uLm1zZywgcGFydHM6IHVwZGF0ZWRQYXJ0cywgdGhpbmtpbmc6IGZhbHNlLCBpc19lcnJvcl9tZXNzYWdlOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgIH0pKTtcblxuICAgICAgIGlmICghYm90TWVzc2FnZUZvdW5kQW5kVXBkYXRlZCkge1xuICAgICAgICAgICAgc2V0TWVzc2FnZXMocHJldk1lc3NhZ2VzID0+IFtcbiAgICAgICAgICAgICAgICAuLi5wcmV2TWVzc2FnZXMsXG4gICAgICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHV1aWR2NCgpLCBcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVyOiAnYm90JywgXG4gICAgICAgICAgICAgICAgICAgIHBhcnRzOiBbeyB0eXBlOiBcInRleHRcIiwgaWQ6IHV1aWR2NCgpLCBjb250ZW50OiByZW5kZXJlZEVycm9yQ29udGVudCB9XSxcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLCBcbiAgICAgICAgICAgICAgICAgICAgdGhpbmtpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc19lcnJvcl9tZXNzYWdlOiB0cnVlIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0pO1xuICAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVFeGFtcGxlUHJvbXB0Q2xpY2sgPSAodGl0bGU6IHN0cmluZywgZGV0YWlsOiBzdHJpbmcpID0+IHtcbiAgICBzZXRVc2VySW5wdXQoYCR7dGl0bGV9ICR7ZGV0YWlsfWApO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgdmlld3BvcnQgPSBzY3JvbGxBcmVhUmVmLmN1cnJlbnQ7XG4gICAgaWYgKHZpZXdwb3J0KSB7XG4gICAgICAgIC8vIFRoZSB2aWV3cG9ydCBpdHNlbGYgaXMgdGhlIHNjcm9sbGFibGUgY29udGFpbmVyIGluIFNjcm9sbEFyZWFcbiAgICAgICAgdmlld3BvcnQuc2Nyb2xsVG9wID0gdmlld3BvcnQuc2Nyb2xsSGVpZ2h0O1xuICAgIH1cbiAgfSwgW21lc3NhZ2VzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGUuaW5uZXJIVE1MID0gYFxuICAgICAgLmFuaW1hdGVkLWVsbGlwc2lzIHNwYW4ge1xuICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICBhbmltYXRpb246IGFuX2VsbGlwc2lzIDEuMnMgaW5maW5pdGU7XG4gICAgICAgIGFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzOyAvKiBLZWVwIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgYW5pbWF0aW9uICovXG4gICAgICB9XG4gICAgICAuYW5pbWF0ZWQtZWxsaXBzaXMgc3BhbjpudGgtY2hpbGQoMSkgeyBhbmltYXRpb24tZGVsYXk6IDAuMXM7IH1cbiAgICAgIC5hbmltYXRlZC1lbGxpcHNpcyBzcGFuOm50aC1jaGlsZCgyKSB7IGFuaW1hdGlvbi1kZWxheTogMC4yNXM7IH1cbiAgICAgIC5hbmltYXRlZC1lbGxpcHNpcyBzcGFuOm50aC1jaGlsZCgzKSB7IGFuaW1hdGlvbi1kZWxheTogMC40czsgfVxuICAgICAgQGtleWZyYW1lcyBhbl9lbGxpcHNpcyB7XG4gICAgICAgIDAlIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0wLjFlbSk7fVxuICAgICAgICAzMCUgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7fVxuICAgICAgICA3MCUgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7fVxuICAgICAgICAxMDAlIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDAuMWVtKTt9XG4gICAgICB9XG4gICAgICAvKiBBZGQgQ1NTIGZvciB0aG91Z2h0IHN1bW1hcnkgZGV0YWlscyBhcnJvdyByb3RhdGlvbiAqL1xuICAgICAgLnRob3VnaHQtc3VtbWFyeS1kZXRhaWxzW29wZW5dID4gc3VtbWFyeSAuZGV0YWlscy1hcnJvdyB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7XG4gICAgICB9XG4gICAgICAvKiBBZGQgQ1NTIGZvciB0b29sIGNhbGwgZGV0YWlscyBhcnJvdyByb3RhdGlvbiAqL1xuICAgICAgLnRvb2wtY2FsbC1kaXNwbGF5W29wZW5dID4gc3VtbWFyeSAuZGV0YWlscy1hcnJvdyB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7XG4gICAgICB9XG4gICAgICAvKiBFbnN1cmUgdG9vbCBjYWxsIGRpc3BsYXlzIGRvbid0IGNhdXNlIGhvcml6b250YWwgb3ZlcmZsb3cgKi9cbiAgICAgIC50b29sLWNhbGwtZGlzcGxheSB7XG4gICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgd29yZC1icmVhazogYnJlYWstYWxsO1xuICAgICAgfVxuICAgICAgLnRvb2wtY2FsbC1kaXNwbGF5IHByZSB7XG4gICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICAgICAgd29yZC1icmVhazogYnJlYWstYWxsO1xuICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgICAgIG92ZXJmbG93LXdyYXA6IGFueXdoZXJlO1xuICAgICAgfVxuICAgICAgLnRvb2wtY2FsbC1kaXNwbGF5IC50b29sLWNhbGwtY29udGVudCB7XG4gICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgICAgIH1cbiAgICAgIC8qIEFkZCBzb21lIGJhc2ljIHByb3NlIHN0eWxpbmcgZm9yIG1hcmtkb3duIGNvbnRlbnQgaWYgbm90IGFscmVhZHkgZ2xvYmFsbHkgYXZhaWxhYmxlICovXG4gICAgICAucHJvc2Uge1xuICAgICAgICBsaW5lLWhlaWdodDogMS4zNTsgLyogSW5jcmVhc2VkIGZvciBiZXR0ZXIgcmVhZGFiaWxpdHkgKi9cbiAgICAgICAgZm9udC1zaXplOiAwLjk0cmVtO1xuICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7IC8qIEZvcmNlIHdvcmQgd3JhcHBpbmcgKi9cbiAgICAgICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDsgLyogTW9kZXJuIGVxdWl2YWxlbnQgKi9cbiAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsgLyogQnJlYWsgbG9uZyB3b3JkcyAqL1xuICAgICAgfVxuICAgICAgLnByb3NlIHAgeyBcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41ZW07IC8qIFJlZHVjZWQgZm9yIHRpZ2h0ZXIgc3BhY2luZyAqL1xuICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICB9XG4gICAgICAvKiBTcGVjaWZpYyBVUkwgYW5kIGxpbmsgaGFuZGxpbmcgdG8gcHJldmVudCBvdmVyZmxvdyAqL1xuICAgICAgLnByb3NlIGEge1xuICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7IC8qIEJyZWFrIFVSTHMgYWdncmVzc2l2ZWx5ICovXG4gICAgICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICAgIGh5cGhlbnM6IGF1dG87XG4gICAgICB9XG4gICAgICAvKiBMaW5lIGNsYW1wIHV0aWxpdGllcyBmb3IgdGV4dCB0cnVuY2F0aW9uICovXG4gICAgICAubGluZS1jbGFtcC0xIHtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gICAgICAgIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7XG4gICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMTtcbiAgICAgIH1cbiAgICAgIC5saW5lLWNsYW1wLTIge1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWJveDtcbiAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcbiAgICAgICAgLXdlYmtpdC1saW5lLWNsYW1wOiAyO1xuICAgICAgfVxuICAgICAgLmxpbmUtY2xhbXAtMyB7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICAgICAgICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsO1xuICAgICAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDM7XG4gICAgICB9XG4gICAgICAucHJvc2UgdWwge1xuICAgICAgICBsaXN0LXN0eWxlLXR5cGU6IGRpc2M7XG4gICAgICAgIG1hcmdpbi1ibG9jay1zdGFydDogMDtcbiAgICAgICAgbWFyZ2luLWJsb2NrLWVuZDogMC41ZW07IC8qIFJlZHVjZWQgKi9cbiAgICAgICAgcGFkZGluZy1pbmxpbmUtc3RhcnQ6IDEuMjVyZW07XG4gICAgICB9XG4gICAgICAucHJvc2UgdWwgdWwge1xuICAgICAgICBsaXN0LXN0eWxlLXR5cGU6IGNpcmNsZTtcbiAgICAgIH1cbiAgICAgIC5wcm9zZSB1bCB1bCB1bCB7XG4gICAgICAgIGxpc3Qtc3R5bGUtdHlwZTogc3F1YXJlO1xuICAgICAgfVxuICAgICAgLnByb3NlIG9sIHtcbiAgICAgICAgbGlzdC1zdHlsZS10eXBlOiBkZWNpbWFsO1xuICAgICAgICBtYXJnaW4tYmxvY2stc3RhcnQ6IDA7XG4gICAgICAgIG1hcmdpbi1ibG9jay1lbmQ6IDAuNWVtOyAvKiBSZWR1Y2VkICovXG4gICAgICAgIHBhZGRpbmctaW5saW5lLXN0YXJ0OiAxLjI1cmVtO1xuICAgICAgfVxuICAgICAgLnByb3NlIGxpIHAge1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmU7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDAuMmVtO1xuICAgICAgfVxuICAgICAgLnByb3NlIGxpIHtcbiAgICAgICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsgXG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3JtYWw7IFxuICAgICAgfVxuICAgICAgLnByb3NlIHByZSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IGhzbCh2YXIoLS1tdXRlZCkpO1xuICAgICAgICBjb2xvcjogaHNsKHZhcigtLW11dGVkLWZvcmVncm91bmQpKTtcbiAgICAgICAgcGFkZGluZzogMWVtO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTsgXG4gICAgICAgIG92ZXJmbG93LXg6IGF1dG87XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NzVlbTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgaHNsKHZhcigtLWJvcmRlcikpO1xuICAgICAgfVxuICAgICAgLnByb3NlIGNvZGU6bm90KHByZSBjb2RlKSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IGhzbCh2YXIoLS1tdXRlZCkpO1xuICAgICAgICBjb2xvcjogaHNsKHZhcigtLXByaW1hcnkpKTsgLyogVXNpbmcgcHJpbWFyeSBjb2xvciBmb3IgaW5saW5lIGNvZGUgZm9yIGJldHRlciB2aXNpYmlsaXR5ICovXG4gICAgICAgIHBhZGRpbmc6IDAuMmVtIDAuNGVtO1xuICAgICAgICBtYXJnaW46IDAgMC4xZW07XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtO1xuICAgICAgfVxuICAgICAgLmRhcmsgLnByb3NlIHByZSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IGhzbCh2YXIoLS1zZWNvbmRhcnkpKTsgLyogQSBzbGlnaHRseSBkaWZmZXJlbnQgZGFyayBmb3IgcHJlIGJsb2NrcyAqL1xuICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgaHNsKHZhcigtLWJvcmRlcikpO1xuICAgICAgfVxuICAgICAgIC5kYXJrIC5wcm9zZSBjb2RlOm5vdChwcmUgY29kZSkge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBoc2wodmFyKC0tc2Vjb25kYXJ5KSk7XG4gICAgICB9XG4gICAgICAvKiBSZXNwb25zaXZlIGltYWdlcyBpbiBwcm9zZSAqL1xuICAgICAgLnByb3NlIGltZyB7XG4gICAgICAgIG1heC13aWR0aDogMTAwJTsgLyogRW5zdXJlIGltYWdlcyBhcmUgcmVzcG9uc2l2ZSBieSBkZWZhdWx0ICovXG4gICAgICAgIGhlaWdodDogYXV0bzsgICAgLyogQWxsb3cgaW1hZ2UgdG8gc2V0IGl0cyBvd24gaGVpZ2h0IGJhc2VkIG9uIGFzcGVjdCByYXRpbyAqL1xuICAgICAgICBtaW4taGVpZ2h0OiAxNTBweDsgLyogUmVzZXJ2ZSBzb21lIG1pbmltdW0gc3BhY2UgdG8gcmVkdWNlIGxheW91dCBzaGlmdCBvbiBtb2JpbGUgKi9cbiAgICAgICAgbWF4LWhlaWdodDogMzUwcHg7IC8qIFByZXZlbnQgaW1hZ2VzIGZyb20gYmVjb21pbmcgZXhjZXNzaXZlbHkgdGFsbCAqL1xuICAgICAgICBvYmplY3QtZml0OiBjb250YWluOyAvKiBFbnN1cmUgdGhlIGltYWdlIGZpdHMgd2l0aGluIGJvdW5kcyAmIG1haW50YWlucyBhc3BlY3QgcmF0aW8gKi9cbiAgICAgICAgZGlzcGxheTogYmxvY2s7ICAvKiBBbGxvd3MgbWFyZ2luIGF1dG8gdG8gd29yayBmb3IgY2VudGVyaW5nICovXG4gICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgICAgIG1hcmdpbi10b3A6IDAuNWVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVlbTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMC4zNzVyZW07IC8qIEFkZCBhIHNsaWdodCByb3VuZGluZyB0byBpbWFnZXMgKi9cbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogaHNsKHZhcigtLW11dGVkLWZvcmVncm91bmQpIC8gMC4wNSk7IC8qIFN1YnRsZSBiYWNrZ3JvdW5kIGZvciBsb2FkaW5nIHN0YXRlICovXG4gICAgICB9XG5cbiAgICAgIC5kYXJrIC5wcm9zZSBpbWcge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBoc2wodmFyKC0tbXV0ZWQtZm9yZWdyb3VuZCkgLyAwLjEpOyAvKiBTbGlnaHRseSBtb3JlIHZpc2libGUgb24gZGFyayBmb3IgbG9hZGluZyAqL1xuICAgICAgfVxuXG4gICAgICAvKiBWaWRlbyBzdHlsaW5nIHRvIG1hdGNoIGltYWdlcyAqL1xuICAgICAgLnByb3NlIHZpZGVvIHtcbiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IGF1dG87XG4gICAgICAgIG1heC1oZWlnaHQ6IDQwMHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwLjM3NXJlbTtcbiAgICAgICAgbWFyZ2luOiAwLjVlbSBhdXRvO1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogaHNsKHZhcigtLW11dGVkLWZvcmVncm91bmQpIC8gMC4wNSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGhzbCh2YXIoLS1ib3JkZXIpKTtcbiAgICAgIH1cblxuICAgICAgLmRhcmsgLnByb3NlIHZpZGVvIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogaHNsKHZhcigtLW11dGVkLWZvcmVncm91bmQpIC8gMC4xKTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgaHNsKHZhcigtLWJvcmRlcikpO1xuICAgICAgfVxuXG4gICAgICBAbWVkaWEgKG1pbi13aWR0aDogMTAyNHB4KSB7IC8qIERlc2t0b3Agc2NyZWVucyAqL1xuICAgICAgICAucHJvc2UgaW1nIHtcbiAgICAgICAgICBtYXgtd2lkdGg6IDYwJTsgLyogTWFrZSBpbWFnZXMgc21hbGxlciBvbiBkZXNrdG9wICovXG4gICAgICAgICAgbWF4LWhlaWdodDogNTAwcHg7IC8qIEFsbG93IGxhcmdlciBpbWFnZXMgb24gZGVza3RvcCAqL1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAucHJvc2UgdmlkZW8ge1xuICAgICAgICAgIG1heC13aWR0aDogNzAlOyAvKiBNYWtlIHZpZGVvcyBzbGlnaHRseSBsYXJnZXIgdGhhbiBpbWFnZXMgb24gZGVza3RvcCAqL1xuICAgICAgICAgIG1heC1oZWlnaHQ6IDYwMHB4OyAvKiBBbGxvdyBsYXJnZXIgdmlkZW9zIG9uIGRlc2t0b3AgKi9cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cbiAgICAvLyBDbGVhbnVwIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGUgc3R5bGUgd2hlbiB0aGUgY29tcG9uZW50IHVubW91bnRzXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmhlYWQucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuICAgIH07XG4gIH0sIFtdKTsgLy8gRW1wdHkgZGVwZW5kZW5jeSBhcnJheSBlbnN1cmVzIHRoaXMgcnVucyBvbmx5IG9uY2Ugb24gbW91bnQgYW5kIHVubW91bnRcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHNldFZoID0gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXZoJywgYCR7d2luZG93LmlubmVySGVpZ2h0fXB4YCk7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc2V0VmgpO1xuICAgIHNldFZoKCk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBzZXRWaCk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEZvcmNlIHJlLXJlbmRlciBvZiBNYXBEaXNwbGF5IHdoZW4gYXBwVGhlbWUgY2hhbmdlcyB0byBhcHBseSBuZXcgbWFwSWRcbiAgICBzZXRNYXBEaXNwbGF5S2V5KHByZXZLZXkgPT4gcHJldktleSArIDEpO1xuICB9LCBbYXBwVGhlbWVdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLVtjYWxjKHZhcigtLXZoKSldIGJnLWJhY2tncm91bmQgdGV4dC1mb3JlZ3JvdW5kIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTMwMFwiPlxuICAgICAgPGhlYWRlciBjbGFzc05hbWU9XCJweC0yIHB5LTIgc206cHgtNCBzbTpweS0zIGJvcmRlci1iIGJvcmRlci1ib3JkZXIgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGJnLW11dGVkLzQwIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTMwMFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgIDxCdXR0b24gdmFyaWFudD1cImdob3N0XCIgc2l6ZT1cImljb25cIiBjbGFzc05hbWU9XCJob3ZlcjpiZy1tdXRlZFwiPlxuICAgICAgICAgICAgPE1lbnUgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgey8qIFJlcGxhY2UgQnV0dG9uIHdpdGggYSBTZWxlY3QgZHJvcGRvd24gZm9yIG1vZGVsIHNlbGVjdGlvbiAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgIHZhbHVlPXtzZWxlY3RlZE1vZGVsfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNlbGVjdGVkTW9kZWwoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1iYWNrZ3JvdW5kIGJvcmRlciBib3JkZXItaW5wdXQgdGV4dC1mb3JlZ3JvdW5kIHJvdW5kZWQtbWQgcHgtMyBweS0yIHRleHQtc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXJpbmcgaG92ZXI6YmctbXV0ZWQgY3Vyc29yLXBvaW50ZXIgYXBwZWFyYW5jZS1ub25lIHByLTggdy1hdXRvIHNtOm1pbi13LVsxNTBweF1cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7bW9kZWxPcHRpb25zLm1hcChvcHRpb24gPT4gKFxuICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtvcHRpb24udmFsdWV9IHZhbHVlPXtvcHRpb24udmFsdWV9PlxuICAgICAgICAgICAgICAgICAge29wdGlvbi5sYWJlbH1cbiAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgIDxDaGV2cm9uRG93biBjbGFzc05hbWU9XCJ3LTQgaC00IGFic29sdXRlIHJpZ2h0LTIgdG9wLTEvMiB0cmFuc2Zvcm0gLXRyYW5zbGF0ZS15LTEvMiBwb2ludGVyLWV2ZW50cy1ub25lIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgIDxNb2RlVG9nZ2xlIC8+XG4gICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwiZ2hvc3RcIiBzaXplPVwiaWNvblwiIGNsYXNzTmFtZT1cImhvdmVyOmJnLW11dGVkXCI+XG4gICAgICAgICAgICA8TWVudSBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hlYWRlcj5cblxuICAgICAgPG1haW4gY2xhc3NOYW1lPVwiZmxleC1ncm93IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIHAtMiBzbTpwLTQgcmVsYXRpdmUgb3ZlcmZsb3ctaGlkZGVuIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTMwMFwiPlxuICAgICAgICB7c2hvd0luaXRpYWxWaWV3ID8gKFxuICAgICAgICAgIDxkaXYgaWQ9XCJpbml0aWFsVmlld1wiIGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHctZnVsbCBweC0yIGZsZXgtZ3JvdyBmbGV4IGZsZXgtY29sIGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtM3hsIHNtOnRleHQtNHhsIGZvbnQtc2VtaWJvbGQgdGV4dC1mb3JlZ3JvdW5kIG1iLTIgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMzAwXCI+XG4gICAgICAgICAgICAgIEFTVC4gQ2hhdFxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbWQgc206dGV4dC1sZyB0ZXh0LW11dGVkLWZvcmVncm91bmQgbWItNiBzbTptYi0xMCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDBcIj5cbiAgICAgICAgICAgICAgSG93IGNhbiBJIGhlbHAgeW91IHRvZGF5P1xuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIHNtOmdyaWQtY29scy0yIGdhcC0zIHNtOmdhcC00IG1heC13LTR4bCBsZzptYXgtdy01eGwgeGw6bWF4LXctN3hsIG14LWF1dG8gdy1mdWxsXCI+XG4gICAgICAgICAgICAgIHtleGFtcGxlUHJvbXB0cy5tYXAoKHByb21wdCwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC1hdXRvIHRleHQtbGVmdCBwLTMgc206cC00IGJvcmRlci1ib3JkZXIgcm91bmRlZC1sZyBzaGFkb3cgaG92ZXI6c2hhZG93LW1kIGRhcms6aG92ZXI6YmctbXV0ZWQgdHJhbnNpdGlvblwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVFeGFtcGxlUHJvbXB0Q2xpY2socHJvbXB0LnRpdGxlLCBwcm9tcHQuZGV0YWlsKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LWZvcmVncm91bmQgdGV4dC1zbSBzbTp0ZXh0LWJhc2VcIj5cbiAgICAgICAgICAgICAgICAgICAge3Byb21wdC50aXRsZX1cbiAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHNtOnRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XG4gICAgICAgICAgICAgICAgICAgIHtwcm9tcHQuZGV0YWlsfVxuICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxTY3JvbGxBcmVhIGNsYXNzTmFtZT1cInctZnVsbCBteC1hdXRvIGZsZXgtZ3Jvd1wiIHJlZj17c2Nyb2xsQXJlYVJlZn0+XG4gICAgICAgICAgICA8ZGl2IGlkPVwiY2hhdExvZ1wiIGNsYXNzTmFtZT1cInNwYWNlLXktMyBzbTpzcGFjZS15LTQgZmxleCBmbGV4LWNvbCBwYi1bY2FsYyg2OHB4K2VudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tKSldIG1heC13LTR4bCBsZzptYXgtdy01eGwgeGw6bWF4LXctN3hsIG14LWF1dG8gcHgtMiBzbTpweC00XCI+XG4gICAgICAgICAgICAgIHttZXNzYWdlcy5tYXAoKG1zZykgPT4ge1xuICAgICAgICAgICAgICAgIC8vIERlZmluZSBiYXNlIGFuZCBjb25kaXRpb25hbCBjbGFzc2VzIGZvciB0aGUgbWVzc2FnZSBidWJibGVcbiAgICAgICAgICAgICAgICBsZXQgYnViYmxlQ2xhc3NlcyA9IFwiZmxleCBmbGV4LWNvbCBicmVhay13b3Jkc1wiOyAvLyBDb21tb24gYmFzZSBmb3IgYWxsXG4gICAgICAgICAgICAgICAgbGV0IHRoaW5raW5nSW5kaWNhdG9yQ29sb3IgPSBcInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiOyAvLyBEZWZhdWx0IGZvciB0aGlua2luZyBpbmRpY2F0b3JcblxuICAgICAgICAgICAgICAgIGlmIChtc2cuc2VuZGVyID09PSBcInVzZXJcIikge1xuICAgICAgICAgICAgICAgICAgYnViYmxlQ2xhc3NlcyArPSBcIiBwLTIgcm91bmRlZC0yeGwgbWF4LXctWzk1JV0gc206bWF4LXctWzg1JV0gYmctc2t5LTQwMCB0ZXh0LXNreS05MDAgc2VsZi1lbmRcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBCb3QgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgaWYgKG1zZy5pc19lcnJvcl9tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1YmJsZUNsYXNzZXMgKz0gXCIgcHgtMSBweS0xIHNtOnAtMiByb3VuZGVkLXhsIG1heC13LVs5NSVdIHNtOm1heC13LVs4NSVdIGJnLWRlc3RydWN0aXZlIHRleHQtZGVzdHJ1Y3RpdmUtZm9yZWdyb3VuZCBzZWxmLXN0YXJ0IHJvdW5kZWQtYmwtc21cIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpbmtpbmdJbmRpY2F0b3JDb2xvciA9IFwidGV4dC1kZXN0cnVjdGl2ZS1mb3JlZ3JvdW5kXCI7IC8vIE1hdGNoIGVycm9yIGJ1YmJsZSB0ZXh0XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBOb3JtYWwgYm90IG1lc3NhZ2UgLSBsZXNzIFwiYnViYmxlXCIgbGlrZSBDaGF0R1BUXG4gICAgICAgICAgICAgICAgICAgIGJ1YmJsZUNsYXNzZXMgKz0gXCIgdy1mdWxsIHNlbGYtc3RhcnQgcHktMSBzbTpweS0yIHRleHQtZm9yZWdyb3VuZFwiOyAvLyBVc2UgcGFnZSBmb3JlZ3JvdW5kIGNvbG9yXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBzb21lIHZlcnRpY2FsIG1hcmdpbiB0byBkaXN0aW5ndWlzaCBib3QgbWVzc2FnZXMsIGFuZCBob3Jpem9udGFsIHBhZGRpbmcgZm9yIGNvbnRlbnQuXG4gICAgICAgICAgICAgICAgICAgIGJ1YmJsZUNsYXNzZXMgKz0gXCIgbXktMiBzbTpteS0zIHB4LTEgc206cHgtMlwiOyBcbiAgICAgICAgICAgICAgICAgICAgdGhpbmtpbmdJbmRpY2F0b3JDb2xvciA9IFwidGV4dC1mb3JlZ3JvdW5kXCI7IC8vIE1hdGNoIG5vcm1hbCBib3QgdGV4dFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENvbXB1dGUgd2hpY2ggcGFydHMgdG8gcmVuZGVyOiBmb3IgZGlyZWN0aW9uIG1lc3NhZ2VzLCBvbmx5IHNob3cgdGV4dCBiZWZvcmUgdGhlIGdldF9kaXJlY3Rpb25zIHRvb2wgY2FsbFxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzVG9SZW5kZXIgPSBtc2cuZGlyZWN0aW9uc0RhdGFcbiAgICAgICAgICAgICAgICAgID8gKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHggPSBtc2cucGFydHMuZmluZEluZGV4KHAgPT4gcC50eXBlID09PSBcInRvb2xfY2FsbFwiICYmIHAudG9vbENhbGwubmFtZSA9PT0gXCJnZXRfZGlyZWN0aW9uc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWR4ID49IDAgPyBtc2cucGFydHMuc2xpY2UoMCwgaWR4KSA6IG1zZy5wYXJ0cztcbiAgICAgICAgICAgICAgICAgICAgfSkoKVxuICAgICAgICAgICAgICAgICAgOiBtc2cucGFydHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PXttc2cuaWR9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YnViYmxlQ2xhc3Nlc30gLy8gVXNlIHRoZSBkeW5hbWljYWxseSBjb25zdHJ1Y3RlZCBjbGFzc2VzXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtwYXJ0c1RvUmVuZGVyLm1hcCgocGFydCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudCBrZXk9e3BhcnQuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAge3BhcnQudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgcGFydC5jb250ZW50ICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXctZnVsbCBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3BhcnNlVGV4dFdpdGhVUkxzKHBhcnQuY29udGVudCkubWFwKCh0ZXh0UGFydCwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudCBrZXk9e2Ake3BhcnQuaWR9LSR7aW5kZXh9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0ZXh0UGFydC50eXBlID09PSAndGV4dCcgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YCR7cGFydC5pZH0tdGV4dC0ke2luZGV4fWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtZXNzYWdlLWNvbnRlbnQgcHJvc2UgZGFyazpwcm9zZS1pbnZlcnQgdy1mdWxsIG1heC13LWZ1bGwgbWluLXctMCB0ZXh0LXBhcnQtZmFkZS1pblwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd29yZEJyZWFrOiAnYnJlYWstd29yZCcsIG92ZXJmbG93V3JhcDogJ2FueXdoZXJlJyB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiByZW5kZXJTYW5pdGl6ZWRNYXJrZG93bih0ZXh0UGFydC5jb250ZW50KSB9fSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxVUkxQcmV2aWV3IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtwYXJ0LmlkfS11cmwtJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsPXt0ZXh0UGFydC5jb250ZW50fSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm15LTIgdy1mdWxsIG1heC13LWZ1bGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7cGFydC50eXBlID09PSBcInRvb2xfY2FsbFwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9vbENhbGxEaXNwbGF5IHRvb2xDYWxsPXtwYXJ0LnRvb2xDYWxsfSByZW5kZXJTYW5pdGl6ZWRNYXJrZG93bj17cmVuZGVyU2FuaXRpemVkTWFya2Rvd259IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtwYXJ0LnR5cGUgPT09IFwidGhvdWdodF9zdW1tYXJ5XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGV0YWlsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YCR7cGFydC5pZH0tdGhvdWdodC1kZXRhaWxzYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0aG91Z2h0LXN1bW1hcnktZGV0YWlscyBteS0yIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ib3JkZXIgYmctbXV0ZWQvMjAgc2hhZG93LXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdW1tYXJ5IGNsYXNzTmFtZT1cInRob3VnaHQtc3VtbWFyeS1zdW1tYXJ5IGN1cnNvci1wb2ludGVyIHAtMyBsaXN0LW5vbmUgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIGhvdmVyOmJnLW11dGVkLzQwIHJvdW5kZWQtdC1sZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge21zZy50aGlua2luZyA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cInctNCBoLTQgbXItMiBhbmltYXRlLXNwaW5cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIml0YWxpY1wiPkFTVC4gdGhpbmtpbmc8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaXRhbGljXCI+VGhvdWdodCBQcm9jZXNzPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGV2cm9uRG93biBjbGFzc05hbWU9XCJ3LTUgaC01IHRyYW5zaXRpb24tdHJhbnNmb3JtIGR1cmF0aW9uLTIwMCBkZXRhaWxzLWFycm93XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N1bW1hcnk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3BhcnQuY29udGVudCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1mdWxsIG1pbi13LTAgcC0zIGJvcmRlci10IGJvcmRlci1ib3JkZXIgYmctYmFja2dyb3VuZCByb3VuZGVkLWItbGdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3BhcnNlVGV4dFdpdGhVUkxzKHBhcnQuY29udGVudCkubWFwKCh0ZXh0UGFydCwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQga2V5PXtgJHtwYXJ0LmlkfS10aG91Z2h0LSR7aW5kZXh9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGV4dFBhcnQudHlwZSA9PT0gJ3RleHQnID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtwYXJ0LmlkfS10aG91Z2h0LXRleHQtJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1lc3NhZ2UtY29udGVudCBwcm9zZS1zbSBpdGFsaWMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIGRhcms6cHJvc2UtaW52ZXJ0IHctZnVsbCBtYXgtdy1mdWxsIG1pbi13LTAgdGV4dC1wYXJ0LWZhZGUtaW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdvcmRCcmVhazogJ2JyZWFrLXdvcmQnLCBvdmVyZmxvd1dyYXA6ICdhbnl3aGVyZScgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IHJlbmRlclNhbml0aXplZE1hcmtkb3duKHRleHRQYXJ0LmNvbnRlbnQpIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VVJMUHJldmlldyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake3BhcnQuaWR9LXRob3VnaHQtdXJsLSR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw9e3RleHRQYXJ0LmNvbnRlbnR9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm15LTIgdy1mdWxsIG1heC13LWZ1bGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGV0YWlscz5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB7LyogTkVXOiBSZW5kZXIgcGVyc2lzdGVudCBjb250ZW50IHByZXZpZXdzICovfVxuICAgICAgICAgICAgICAgICAgICB7Z2V0UHJldmlld3NGb3JNZXNzYWdlKG1zZy5pZCkubWFwKChwcmV2aWV3KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgPENvbnRlbnRQcmV2aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3ByZXZpZXcuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZD17cHJldmlldy5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9e3ByZXZpZXcudHlwZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE9e3ByZXZpZXcuZGF0YX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsPXtwcmV2aWV3LnRvb2xDYWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGU9e3VwZGF0ZVByZXZpZXd9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB7bXNnLmRpcmVjdGlvbnNEYXRhICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAge2NvbnNvbGUubG9nKFwiW1BBR0UuVFNYXSBSZW5kZXJpbmcgTWFwRGlzcGxheSBmb3IgbWVzc2FnZVwiLCBtc2cuaWQsIG1zZy5kaXJlY3Rpb25zRGF0YSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlciByb3VuZGVkLWxnIHNoYWRvdy1tZCBiZy1tdXRlZC80MCBwLTAgb3ZlcmZsb3ctaGlkZGVuIG10LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPE1hcERpc3BsYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e21hcERpc3BsYXlLZXl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uc1Jlc3BvbnNlPXttc2cuZGlyZWN0aW9uc0RhdGF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlTWFwc0FwaUtleT17Z29vZ2xlTWFwc0FwaUtleX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93VHJhZmZpYz17c2hvd1RyYWZmaWN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU9e2FwcFRoZW1lID09PSAnZGFyaycgPyBuaWdodFRoZW1lIDogZGVmYXVsdFRoZW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bXNnLmRpcmVjdGlvbnNEYXRhPy5yb3V0ZXM/LlswXT8ubGVncz8uWzBdICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGlyZWN0aW9uc1N0ZXBzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwcz17bXNnLmRpcmVjdGlvbnNEYXRhLnJvdXRlc1swXS5sZWdzWzBdLnN0ZXBzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxEdXJhdGlvbj17bXNnLmRpcmVjdGlvbnNEYXRhLnJvdXRlc1swXS5sZWdzWzBdLmR1cmF0aW9uPy50ZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxEaXN0YW5jZT17bXNnLmRpcmVjdGlvbnNEYXRhLnJvdXRlc1swXS5sZWdzWzBdLmRpc3RhbmNlPy50ZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAge21zZy5zaG93SW1hZ2VzRm9yVGhpc01lc3NhZ2UgJiYgbXNnLmdlbmVyYXRlZEltYWdlVXJscyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IGJvcmRlciByb3VuZGVkLWxnIHNoYWRvdy1tZCBiZy1tdXRlZC80MCBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyBiZy1iYWNrZ3JvdW5kIGJvcmRlci1iIGJvcmRlci1ib3JkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LWZvcmVncm91bmRcIj5HZW5lcmF0ZWQgSW1hZ2VzPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1iYWNrZ3JvdW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxJbWFnZURpc3BsYXkgaW1hZ2VVcmxzPXttc2cuZ2VuZXJhdGVkSW1hZ2VVcmxzfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvU2Nyb2xsQXJlYT5cbiAgICAgICAgKX1cbiAgICAgIDwvbWFpbj5cblxuICAgICAgPGZvb3RlciBjbGFzc05hbWU9XCJmbGV4LW5vbmUgcHgtMiBwYi1bZW52KHNhZmUtYXJlYS1pbnNldC1ib3R0b20pXSBwdC0yIHNtOnB4LTQgc206cGItW2VudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tKV0gc206cHQtMyBiZy1tdXRlZC80MCBib3JkZXItdCBib3JkZXItYm9yZGVyIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTMwMFwiPlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU2VuZH0gY2xhc3NOYW1lPVwibWF4LXctNHhsIGxnOm1heC13LTV4bCB4bDptYXgtdy03eGwgbXgtYXV0b1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgYmctYmFja2dyb3VuZCBib3JkZXIgYm9yZGVyLWlucHV0IHJvdW5kZWQteGwgc2hhZG93LXNtIHAtMiB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDAgZm9jdXMtd2l0aGluOnJpbmctMiBmb2N1cy13aXRoaW46cmluZy1yaW5nXCI+XG4gICAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCIgXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJnaG9zdFwiIFxuICAgICAgICAgICAgICBzaXplPVwiaWNvblwiIFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmQgaG92ZXI6dGV4dC1mb3JlZ3JvdW5kXCIgXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGZpbGVJbnB1dFJlZi5jdXJyZW50Py5jbGljaygpfVxuICAgICAgICAgICAgICB0aXRsZT1cIkF0dGFjaCBmaWxlc1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxQYXBlcmNsaXAgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIHsvKiBIaWRkZW4gZmlsZSBpbnB1dCAqL31cbiAgICAgICAgICAgIDxpbnB1dCBcbiAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIiBcbiAgICAgICAgICAgICAgbXVsdGlwbGUgXG4gICAgICAgICAgICAgIHJlZj17ZmlsZUlucHV0UmVmfSBcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUZpbGVTZWxlY3R9IFxuICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnbm9uZScgfX0gXG4gICAgICAgICAgICAgIGFjY2VwdD1cImltYWdlLyosLmhlaWMsLmhlaWYsYXBwbGljYXRpb24vcGRmLC50eHQsLm1kLC5weSwuanMsLmh0bWwsLmNzcywuanNvbiwuY3N2LGFwcGxpY2F0aW9uL21zd29yZCxhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCxhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwsYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQsYXBwbGljYXRpb24vdm5kLm1zLXBvd2VycG9pbnQsYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnByZXNlbnRhdGlvbm1sLnByZXNlbnRhdGlvblwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvbiBcbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiIFxuICAgICAgICAgICAgICB2YXJpYW50PXtzZW5kTG9jYXRpb24gPyBcInNlY29uZGFyeVwiIDogXCJnaG9zdFwifSBcbiAgICAgICAgICAgICAgc2l6ZT1cImljb25cIiBcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2VuZExvY2F0aW9uKCFzZW5kTG9jYXRpb24pfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Btci0yICR7c2VuZExvY2F0aW9uID8gXCJ0ZXh0LXByaW1hcnlcIiA6IFwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCJ9IGhvdmVyOnRleHQtZm9yZWdyb3VuZGB9XG4gICAgICAgICAgICAgIHRpdGxlPXtzZW5kTG9jYXRpb24gPyBcIlN0b3Agc2VuZGluZyBsb2NhdGlvblwiIDogXCJTZW5kIGN1cnJlbnQgbG9jYXRpb24gd2l0aCBxdWVyeVwifVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8TWFwUGluIGNsYXNzTmFtZT1cInctNSBoLTVcIiAvPlxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBpZD1cInVzZXJJbnB1dFwiXG4gICAgICAgICAgICAgIHZhbHVlPXt1c2VySW5wdXR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0VXNlcklucHV0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC1ncm93IHAtMiBiZy10cmFuc3BhcmVudCBmb2N1czpvdXRsaW5lLW5vbmUgYm9yZGVyLTAgZm9jdXM6cmluZy0wIHBsYWNlaG9sZGVyLW11dGVkLWZvcmVncm91bmRcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlbmQgYSBtZXNzYWdlLi4uXCJcbiAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJzdWJtaXRcIiB2YXJpYW50PVwiZGVmYXVsdFwiIHNpemU9XCJpY29uXCIgZGlzYWJsZWQ9eyEodXNlcklucHV0LnRyaW0oKSB8fCBzZWxlY3RlZEZpbGVzLmxlbmd0aCA+IDApIHx8IHN0YXR1cyAhPT0gJ1JlYWR5J30gY2xhc3NOYW1lPVwicm91bmRlZC1sZ1wiPlxuICAgICAgICAgICAgICA8QXJyb3dVcCBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Zvcm0+XG4gICAgICAgIHsvKiBEaXNwbGF5IHNlbGVjdGVkIGZpbGVzIChvcHRpb25hbCBVWCkgKi99XG4gICAgICAgIHtzZWxlY3RlZEZpbGVzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctNHhsIGxnOm1heC13LTV4bCB4bDptYXgtdy03eGwgbXgtYXV0byBtdC0yIHRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb250LW1lZGl1bSBtYi0xXCI+U2VsZWN0ZWQgZmlsZXM6PC9wPlxuICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cImxpc3QtZGlzYyBsaXN0LWluc2lkZSBwbC0xIHNwYWNlLXktMC41XCI+XG4gICAgICAgICAgICAgIHtzZWxlY3RlZEZpbGVzLm1hcChmaWxlID0+IChcbiAgICAgICAgICAgICAgICA8bGkga2V5PXtmaWxlLm5hbWV9IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4+e2ZpbGUubmFtZX0gKHtNYXRoLnJvdW5kKGZpbGUuc2l6ZSAvIDEwMjQpfSBLQik8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJnaG9zdFwiIHNpemU9XCJzbVwiIG9uQ2xpY2s9eygpID0+IHJlbW92ZVNlbGVjdGVkRmlsZShmaWxlLm5hbWUpfSBjbGFzc05hbWU9XCJ0ZXh0LXJlZC01MDAgaG92ZXI6dGV4dC1yZWQtNzAwIHAtMSBoLWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgUmVtb3ZlXG4gICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIHsvKiBEaXNwbGF5IGZpbGUgcHJvY2Vzc2luZyBzdGF0dXMgKi99XG4gICAgICAgIHtmaWxlUHJvY2Vzc2luZ1N0YXR1cyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy00eGwgbGc6bWF4LXctNXhsIHhsOm1heC13LTd4bCBteC1hdXRvIG10LTIgdGV4dC14cyB0ZXh0LWJsdWUtNjAwIGRhcms6dGV4dC1ibHVlLTQwMFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJ3LTMgaC0zIG1yLTEgYW5pbWF0ZS1zcGluXCIgLz5cbiAgICAgICAgICAgICAge2ZpbGVQcm9jZXNzaW5nU3RhdHVzfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZC84MCB0ZXh0LWNlbnRlciBtdC0yIHBiLTFcIj5TdGF0dXM6IHtzdGF0dXN9PC9wPlxuICAgICAgPC9mb290ZXI+XG4gICAgPC9kaXY+XG4gICk7XG59ICJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiTW9kZVRvZ2dsZSIsIkJ1dHRvbiIsIklucHV0IiwiU2Nyb2xsQXJlYSIsIkNoZXZyb25Eb3duIiwiTWVudSIsIlBhcGVyY2xpcCIsIkFycm93VXAiLCJNYXBQaW4iLCJMb2FkZXIyIiwibWFya2VkIiwiRE9NUHVyaWZ5IiwidjQiLCJ1dWlkdjQiLCJUb29sQ2FsbERpc3BsYXkiLCJVUkxQcmV2aWV3IiwiTWFwRGlzcGxheSIsImRlZmF1bHRUaGVtZSIsIm5pZ2h0VGhlbWUiLCJEaXJlY3Rpb25zU3RlcHMiLCJJbWFnZURpc3BsYXkiLCJ1c2VUaGVtZSIsInVzZUNvbnRlbnRQcmV2aWV3cyIsIkNvbnRlbnRQcmV2aWV3IiwiZXh0cmFjdFByZXZpZXdGcm9tVG9vbENhbGwiLCJzaG91bGRFeHRyYWN0UHJldmlldyIsInNldE9wdGlvbnMiLCJhc3luYyIsIkJBQ0tFTkRfQVBJX0JBU0VfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0JBQ0tFTkRfQVBJX1VSTCIsIkNoYXRQYWdlIiwidXNlcklucHV0Iiwic2V0VXNlcklucHV0IiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsInNlbGVjdGVkRmlsZXMiLCJzZXRTZWxlY3RlZEZpbGVzIiwiZmlsZUlucHV0UmVmIiwiZmlsZVByb2Nlc3NpbmdTdGF0dXMiLCJzZXRGaWxlUHJvY2Vzc2luZ1N0YXR1cyIsInNob3dJbml0aWFsVmlldyIsInNldFNob3dJbml0aWFsVmlldyIsInNjcm9sbEFyZWFSZWYiLCJzdGF0dXMiLCJzZXRTdGF0dXMiLCJhcGlTZW5kZXIiLCJjdXJyZW50VXNlckxvY2F0aW9uIiwic2V0Q3VycmVudFVzZXJMb2NhdGlvbiIsInNlbmRMb2NhdGlvbiIsInNldFNlbmRMb2NhdGlvbiIsImRpcmVjdGlvbnNEYXRhIiwic2V0RGlyZWN0aW9uc0RhdGEiLCJnb29nbGVNYXBzQXBpS2V5IiwiTkVYVF9QVUJMSUNfR09PR0xFX01BUFNfQVBJX0tFWSIsIm1hcERpc3BsYXlLZXkiLCJzZXRNYXBEaXNwbGF5S2V5Iiwic2hvd1RyYWZmaWMiLCJzZXRTaG93VHJhZmZpYyIsImlzTWFwU2VjdGlvblZpc2libGUiLCJzZXRJc01hcFNlY3Rpb25WaXNpYmxlIiwidGhlbWUiLCJhcHBUaGVtZSIsInVwc2VydFByZXZpZXciLCJ1cGRhdGVQcmV2aWV3IiwiZ2V0UHJldmlld3NGb3JNZXNzYWdlIiwicmVtb3ZlUHJldmlldyIsIm1vZGVsT3B0aW9ucyIsInZhbHVlIiwibGFiZWwiLCJzZWxlY3RlZE1vZGVsIiwic2V0U2VsZWN0ZWRNb2RlbCIsInByb2Nlc3NUb29sQ2FsbEZvclByZXZpZXciLCJ0b29sQ2FsbCIsIm1lc3NhZ2VJZCIsImV4dHJhY3RlZFByZXZpZXciLCJzaG91bGRTaG93IiwiY29uc29sZSIsImxvZyIsIm5hbWUiLCJpZCIsInR5cGUiLCJkYXRhIiwiY2FsbF9pZCIsImNvbnZlcnRIZWljVG9KcGVnIiwiZmlsZSIsImlzSGVpYyIsInRvTG93ZXJDYXNlIiwiZW5kc1dpdGgiLCJkZWZhdWx0IiwiaGVpYzJhbnkiLCJjb252ZXJ0ZWRCbG9iIiwiYmxvYiIsInRvVHlwZSIsInF1YWxpdHkiLCJvcmlnaW5hbE5hbWUiLCJyZXBsYWNlIiwibmV3RmlsZU5hbWUiLCJjb252ZXJ0ZWRGaWxlIiwiRmlsZSIsImxhc3RNb2RpZmllZCIsIk1hdGgiLCJyb3VuZCIsInNpemUiLCJlcnJvciIsIndhcm4iLCJpbWFnZUJpdG1hcCIsImNyZWF0ZUltYWdlQml0bWFwIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3R4IiwiZ2V0Q29udGV4dCIsIkVycm9yIiwid2lkdGgiLCJoZWlnaHQiLCJkcmF3SW1hZ2UiLCJjYW52YXNCbG9iIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ0b0Jsb2IiLCJjYW52YXNFcnJvciIsImZpbGVXaXRoQ29udmVyc2lvbkZsYWciLCJuZWVkc1NlcnZlckNvbnZlcnNpb24iLCJleGFtcGxlUHJvbXB0cyIsInRpdGxlIiwiZGV0YWlsIiwibm9ybWFsaXplRnJhZ21lbnQiLCJmcmFnbWVudCIsIl9wcmV2Q29udGVudCIsImNvbnZlcnRNZWRpYVVybHMiLCJ0ZXh0IiwiaW1hZ2VFeHRlbnNpb25zIiwidmlkZW9FeHRlbnNpb25zIiwidXJsUGF0dGVybiIsInByb2Nlc3NlZFRleHQiLCJ1cmwiLCJjbGVhblVybCIsInRlc3QiLCJzcGxpdCIsInBvcCIsImFnZ3Jlc3NpdmVVcmxQYXR0ZXJuIiwiaW5jbHVkZXMiLCJyZW5kZXJTYW5pdGl6ZWRNYXJrZG93biIsInRleHRXaXRoTWVkaWEiLCJkaXJ0eUh0bWwiLCJwYXJzZSIsImdmbSIsImJyZWFrcyIsInNhbml0aXplIiwicGFyc2VUZXh0V2l0aFVSTHMiLCJ1cmxSZWdleCIsInBhcnRzIiwibGFzdEluZGV4IiwibWF0Y2giLCJleGVjIiwiaW5kZXgiLCJiZWZvcmVUZXh0Iiwic3Vic3RyaW5nIiwidHJpbSIsInB1c2giLCJjb250ZW50IiwiaXNNZWRpYSIsImxlbmd0aCIsInJlbWFpbmluZ1RleHQiLCJnZXRDdXJyZW50TG9jYXRpb24iLCJuYXZpZ2F0b3IiLCJnZW9sb2NhdGlvbiIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJnZXRDdXJyZW50UG9zaXRpb24iLCJwb3NpdGlvbiIsImNsZWFyVGltZW91dCIsImNvb3JkcyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwibWVzc2FnZSIsImNvZGUiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlBPU0lUSU9OX1VOQVZBSUxBQkxFIiwiVElNRU9VVCIsImVuYWJsZUhpZ2hBY2N1cmFjeSIsInRpbWVvdXQiLCJtYXhpbXVtQWdlIiwiaGFuZGxlRmlsZVNlbGVjdCIsImV2ZW50IiwidGFyZ2V0IiwiZmlsZXMiLCJBcnJheSIsImZyb20iLCJoZWljRmlsZXMiLCJmaWx0ZXIiLCJjb252ZXJ0ZWRGaWxlcyIsImFsbCIsIm1hcCIsInNlcnZlckNvbnZlcnNpb25GaWxlcyIsInByZXZGaWxlcyIsInJlbW92ZVNlbGVjdGVkRmlsZSIsImZpbGVOYW1lVG9SZW1vdmUiLCJmaWxlVG9CYXNlNjQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwicmVhZEFzRGF0YVVSTCIsIm9ubG9hZCIsInJlc3VsdCIsIm9uZXJyb3IiLCJ1cGxvYWRGaWxlcyIsInVwbG9hZFByb21pc2VzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5Iiwib2siLCJqc29uIiwiY29udmVydGVkX2Zyb21faGVpYyIsIm9yaWdpbmFsX2ZpbGVuYW1lIiwiZmlsZW5hbWUiLCJoYW5kbGVTZW5kIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY3VycmVudE1lc3NhZ2VUZXh0IiwiYXR0YWNobWVudFVybHMiLCJlcnJvck1lc3NhZ2VJZCIsInByZXYiLCJzZW5kZXIiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwidGhpbmtpbmciLCJpc19lcnJvcl9tZXNzYWdlIiwicmVzb2x2ZWRPcmlnaW5Gb3JRdWVyeSIsInVuZGVmaW5lZCIsImxvY2F0aW9uIiwibG9jYXRpb25FcnJvciIsInRlbXBCb3RNZXNzYWdlSWQiLCJhdHRhY2htZW50TGlzdCIsImZpbGVOYW1lIiwiam9pbiIsInVzZXJNZXNzYWdlSWQiLCJ1c2VyTWVzc2FnZVBhcnRzIiwidXNlck1lc3NhZ2UiLCJwcmV2TWVzc2FnZXMiLCJib3RNZXNzYWdlSWQiLCJwYXlsb2FkIiwicXVlcnkiLCJzdHJlYW0iLCJtb2RlbCIsImF0dGFjaG1lbnRfdXJscyIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3JUZXh0IiwiZXJyb3JEZXRhaWwiLCJlcnJvckpzb24iLCJwYXJzZUVycm9yIiwiZ2V0UmVhZGVyIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwiYnVmZmVyIiwiZG9uZSIsInJlYWQiLCJwYXJzZWRDaHVuayIsIm1zZyIsImN1cnJlbnRDb250ZW50IiwibmV3UGFydHMiLCJsYXN0UGFydCIsInBhcnQiLCJjb250ZW50RnJvbUNodW5rIiwiYXJndW1lbnRzIiwiY2FsbF9pZF9mcm9tX2NodW5rIiwiZXhpc3RpbmdUb29sQ2FsbFBhcnQiLCJmaW5kIiwibmV3VG9vbENhbGxEYXRhIiwibWF0Y2hlZFRvb2xDYWxsSW5QYXJ0cyIsInRjIiwiZmluYWxSZXN1bHQiLCJpc1BhcnRpYWwiLCJpc19wYXJ0aWFsIiwiaXNFcnJvciIsImlzX2Vycm9yIiwibmV3U3RhdHVzIiwidXBkYXRlZFRvb2xDYWxsIiwidG9vbFJlc3BvbnNlIiwicmVzcG9uc2VLZXkiLCJwcmV2S2V5IiwicmVzdWx0RGF0YSIsInJlc3VsdHMiLCJpbWFnZVVybHMiLCJmb3JFYWNoIiwicmVzdWx0QXJyYXkiLCJpc0FycmF5IiwiZmluYWxNc2dPYmplY3QiLCJzaG93TWFwVG9nZ2xlRm9yVGhpc01lc3NhZ2UiLCJzaG93V2ViQXBwRm9yVGhpc01lc3NhZ2UiLCJ3ZWJBcHBVcmwiLCJzaG93SW1hZ2VzRm9yVGhpc01lc3NhZ2UiLCJnZW5lcmF0ZWRJbWFnZVVybHMiLCJwYXJlbnRfdG9vbF9jYWxsX2lkIiwiY3VycmVudFBhaXJzIiwic2FtcGxlQ2FsbFBhaXJzIiwibmV3UGFpcnMiLCJsYXN0UGFpciIsInVwZGF0ZWRMYXN0UGFpciIsIm91dHB1dCIsInNsaWNlIiwidGhvdWdodHMiLCJlcnJvclRleHRQYXJ0IiwiZXJyIiwiZGVjb2RlIiwibmV3bGluZUluZGV4IiwiaW5kZXhPZiIsImxpbmUiLCJsYXN0UGFydEluZGV4IiwiZXJyb3JDb250ZW50IiwicmVuZGVyZWRFcnJvckNvbnRlbnQiLCJib3RNZXNzYWdlRm91bmRBbmRVcGRhdGVkIiwibmV3RXJyb3JQYXJ0IiwidXBkYXRlZFBhcnRzIiwiaGFuZGxlRXhhbXBsZVByb21wdENsaWNrIiwidmlld3BvcnQiLCJjdXJyZW50Iiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0Iiwic3R5bGUiLCJpbm5lckhUTUwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZCIsInNldFZoIiwiZG9jdW1lbnRFbGVtZW50Iiwic2V0UHJvcGVydHkiLCJ3aW5kb3ciLCJpbm5lckhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGl2IiwiY2xhc3NOYW1lIiwiaGVhZGVyIiwidmFyaWFudCIsInNlbGVjdCIsIm9uQ2hhbmdlIiwib3B0aW9uIiwibWFpbiIsImgxIiwicCIsInByb21wdCIsIm9uQ2xpY2siLCJoMyIsInJlZiIsImJ1YmJsZUNsYXNzZXMiLCJ0aGlua2luZ0luZGljYXRvckNvbG9yIiwicGFydHNUb1JlbmRlciIsImlkeCIsImZpbmRJbmRleCIsIkZyYWdtZW50IiwidGV4dFBhcnQiLCJ3b3JkQnJlYWsiLCJvdmVyZmxvd1dyYXAiLCJkYW5nZXJvdXNseVNldElubmVySFRNTCIsIl9faHRtbCIsImRldGFpbHMiLCJvcGVuIiwic3VtbWFyeSIsInNwYW4iLCJwcmV2aWV3Iiwib25VcGRhdGUiLCJkaXJlY3Rpb25zUmVzcG9uc2UiLCJyb3V0ZXMiLCJsZWdzIiwic3RlcHMiLCJ0b3RhbER1cmF0aW9uIiwiZHVyYXRpb24iLCJ0b3RhbERpc3RhbmNlIiwiZGlzdGFuY2UiLCJoNCIsImZvb3RlciIsImZvcm0iLCJvblN1Ym1pdCIsImNsaWNrIiwiaW5wdXQiLCJtdWx0aXBsZSIsImRpc3BsYXkiLCJhY2NlcHQiLCJwbGFjZWhvbGRlciIsImF1dG9Db21wbGV0ZSIsImRpc2FibGVkIiwidWwiLCJsaSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/page.tsx\n"));

/***/ })

});