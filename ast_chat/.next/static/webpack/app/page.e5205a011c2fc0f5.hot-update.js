"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./hooks/useCardStudioRefactored.ts":
/*!******************************************!*\
  !*** ./hooks/useCardStudioRefactored.ts ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useCardStudio: function() { return /* binding */ useCardStudio; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sonner */ \"(app-pages-browser)/./node_modules/sonner/dist/index.mjs\");\n/* harmony import */ var _cardStudio_useWebSocket__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cardStudio/useWebSocket */ \"(app-pages-browser)/./hooks/cardStudio/useWebSocket.ts\");\n/* harmony import */ var _cardStudio_useJobManagement__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cardStudio/useJobManagement */ \"(app-pages-browser)/./hooks/cardStudio/useJobManagement.ts\");\n/* harmony import */ var _cardStudio_useMessageGeneration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cardStudio/useMessageGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useMessageGeneration.ts\");\n/* harmony import */ var _cardStudio_useFileHandling__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cardStudio/useFileHandling */ \"(app-pages-browser)/./hooks/cardStudio/useFileHandling.ts\");\n/* harmony import */ var _cardStudio_useDraftGeneration__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./cardStudio/useDraftGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useDraftGeneration.ts\");\n/* harmony import */ var _cardStudio_useCardGeneration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./cardStudio/useCardGeneration */ \"(app-pages-browser)/./hooks/cardStudio/useCardGeneration.ts\");\n/* harmony import */ var _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./cardStudio/constants */ \"(app-pages-browser)/./hooks/cardStudio/constants.ts\");\n/* harmony import */ var _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./cardStudio/utils */ \"(app-pages-browser)/./hooks/cardStudio/utils.ts\");\n/* __next_internal_client_entry_do_not_use__ useCardStudio auto */ \n\n// Import modular hooks\n\n\n\n\n\n\n// Import constants and utils\n\n\nfunction useCardStudio() {\n    // Core form state\n    const [prompt, setPrompt] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [toField, setToField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [fromField, setFromField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [relationshipField, setRelationshipField] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedType, setSelectedType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"birthday\");\n    const [customCardType, setCustomCardType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedTone, setSelectedTone] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"funny\");\n    // Advanced options state\n    const [showAdvanced, setShowAdvanced] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [selectedArtisticStyle, setSelectedArtisticStyle] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"watercolor\");\n    const [customStyleDescription, setCustomStyleDescription] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [selectedImageModel, setSelectedImageModel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"gpt-image-1\");\n    const [selectedDraftModel, setSelectedDraftModel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"gpt-image-1\");\n    const [fastPreviewMode, setFastPreviewMode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    // Email state\n    const [userEmail, setUserEmail] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    // Card options\n    const [numberOfCards, setNumberOfCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1);\n    const [isHandwrittenMessage, setIsHandwrittenMessage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isFrontBackOnly, setIsFrontBackOnly] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [selectedPaperSize, setSelectedPaperSize] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"standard\");\n    // UI state\n    const [isTextareaExpanded, setIsTextareaExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isMessageExpanded, setIsMessageExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showSettings, setShowSettings] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showTemplateGallery, setShowTemplateGallery] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showPrintConfirmation, setShowPrintConfirmation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [showTemplateCustomization, setShowTemplateCustomization] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Restoration state\n    const [isRestoringJobs, setIsRestoringJobs] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [selectedTemplate, setSelectedTemplate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isInitialLoadComplete, setIsInitialLoadComplete] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Template state\n    const [templateSearchQuery, setTemplateSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [isSearchingTemplates, setIsSearchingTemplates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [aiFilteredCards, setAiFilteredCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [searchMode, setSearchMode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"text\");\n    const [textFilteredCards, setTextFilteredCards] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [showPrompts, setShowPrompts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [printOption, setPrintOption] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"physical\");\n    // Template customization state\n    const [templateCustomizations, setTemplateCustomizations] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        promptChanges: \"\",\n        messageChanges: \"\",\n        useReferenceImage: false,\n        referenceImageFile: null,\n        referenceImageUrls: [],\n        referenceImageTransformation: \"\"\n    });\n    // Section loading states\n    const [sectionLoadingStates, setSectionLoadingStates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        frontCover: \"idle\",\n        backCover: \"idle\",\n        leftInterior: \"idle\",\n        rightInterior: \"idle\"\n    });\n    // Countdown state\n    const [countdown, setCountdown] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [countdownInterval, setCountdownInterval] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    // Use modular hooks\n    const webSocket = (0,_cardStudio_useWebSocket__WEBPACK_IMPORTED_MODULE_2__.useWebSocket)();\n    const jobManagement = (0,_cardStudio_useJobManagement__WEBPACK_IMPORTED_MODULE_3__.useJobManagement)();\n    const fileHandling = (0,_cardStudio_useFileHandling__WEBPACK_IMPORTED_MODULE_5__.useFileHandling)();\n    const messageGeneration = (0,_cardStudio_useMessageGeneration__WEBPACK_IMPORTED_MODULE_4__.useMessageGeneration)(selectedType, customCardType, selectedTone, prompt, toField, fromField, relationshipField, fileHandling.photoAnalyses);\n    // Draft generation props\n    const draftGenerationProps = {\n        selectedType,\n        customCardType,\n        selectedTone,\n        selectedArtisticStyle,\n        customStyleDescription,\n        selectedDraftModel,\n        selectedImageModel,\n        selectedPaperSize,\n        prompt,\n        toField,\n        fromField,\n        userEmail,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        isHandwrittenMessage,\n        isFrontBackOnly,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        photoAnalyses: fileHandling.photoAnalyses,\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        subscribeToJob: webSocket.subscribeToJob,\n        unsubscribeFromAllJobs: webSocket.unsubscribeFromAllJobs,\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking\n    };\n    const draftGeneration = (0,_cardStudio_useDraftGeneration__WEBPACK_IMPORTED_MODULE_6__.useDraftGeneration)(draftGenerationProps);\n    // Card generation props\n    const cardGenerationProps = {\n        selectedType,\n        customCardType,\n        selectedTone,\n        selectedArtisticStyle,\n        customStyleDescription,\n        selectedImageModel,\n        selectedPaperSize,\n        prompt,\n        toField,\n        fromField,\n        userEmail,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        isHandwrittenMessage,\n        isFrontBackOnly,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        photoAnalyses: fileHandling.photoAnalyses,\n        numberOfCards,\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        removeJobFromStorage: jobManagement.removeJobFromStorage,\n        subscribeToJob: webSocket.subscribeToJob,\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking,\n        setCurrentJobId: jobManagement.setCurrentJobId,\n        setIsDraftMode: draftGeneration.setIsDraftMode,\n        setDraftCards: draftGeneration.setDraftCards,\n        setSelectedDraftIndex: draftGeneration.setSelectedDraftIndex,\n        setIsGeneratingFinalCard: draftGeneration.setIsGeneratingFinalCard,\n        setPreviewingDraftIndex: draftGeneration.setPreviewingDraftIndex,\n        setDraftCompletionShown: draftGeneration.setDraftCompletionShown,\n        setDraftCompletionCount: draftGeneration.setDraftCompletionCount\n    };\n    const cardGeneration = (0,_cardStudio_useCardGeneration__WEBPACK_IMPORTED_MODULE_7__.useCardGeneration)(cardGenerationProps);\n    // Handle job updates from WebSocket\n    const handleJobUpdate = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((data)=>{\n        const { job_id, status, progress, cardData, error, completedAt } = data;\n        if (!job_id) return;\n        // Skip updates if we're still restoring jobs from localStorage\n        if (isRestoringJobs) {\n            console.log(\"⏳ Skipping job update during restoration:\", job_id);\n            return;\n        }\n        // Check if this is a draft job\n        const isDraftJob1 = job_id.startsWith(\"draft-\");\n        const draftIndex = isDraftJob1 ? parseInt(job_id.split(\"-\")[1]) : -1;\n        // Filter out updates from wrong job type\n        // If we're in draft mode, only process draft jobs\n        // If we're in final mode, only process non-draft jobs\n        const isInDraftMode = draftGeneration.isDraftMode;\n        if (isInDraftMode && !isDraftJob1) {\n            console.log(\"\\uD83D\\uDEAB Ignoring non-draft job update in draft mode:\", job_id);\n            return;\n        }\n        if (!isInDraftMode && isDraftJob1) {\n            console.log(\"\\uD83D\\uDEAB Ignoring draft job update in final mode:\", job_id);\n            return;\n        }\n        console.log(\"\\uD83D\\uDD04 Processing job update:\", {\n            job_id,\n            status,\n            isDraftJob: isDraftJob1,\n            draftIndex,\n            progress\n        });\n        // Update progress if provided\n        if (progress) {\n            // IMPORTANT: Don't show \"Generation complete!\" until we've actually processed the card\n            // This prevents the UI from showing completion before the card is ready\n            if (progress.includes(\"Generation complete!\") && status === \"completed\" && !isDraftJob1) {\n                console.log('⏸️ Holding \"Generation complete!\" message until card is processed');\n            // Don't update the progress message yet - it will be set in handleFinalCardCompletion\n            } else {\n                cardGeneration.setGenerationProgress(progress);\n                draftGeneration.setGenerationProgress(progress);\n                console.log(\"\\uD83D\\uDCCA Progress message: \".concat(progress));\n            }\n        }\n        if (status === \"completed\" && cardData) {\n            console.log(\"\\uD83C\\uDF89 Job completed! Card data:\", cardData, \"isDraftJob:\", isDraftJob1);\n            if (isDraftJob1 && draftIndex >= 0) {\n                var _cardData_generatedPrompts;\n                // Handle draft card completion\n                console.log(\"\\uD83C\\uDFA8 Draft variation \".concat(draftIndex + 1, \" completed!\"));\n                // Get style info for smart style mode\n                let styleInfo = undefined;\n                if (selectedArtisticStyle === \"ai-smart-style\") {\n                    const predefinedStyles = [\n                        \"watercolor\",\n                        \"botanical\",\n                        \"comic-book\",\n                        \"dreamy-fantasy\",\n                        \"minimalist\"\n                    ];\n                    const styleLabels = [\n                        \"\\uD83C\\uDFA8 Watercolor\",\n                        \"\\uD83C\\uDF3F Botanical\",\n                        \"\\uD83D\\uDCA5 Comic Book\",\n                        \"\\uD83C\\uDF38 Dreamy Fantasy\",\n                        \"✨ Minimalist\"\n                    ];\n                    if (draftIndex >= 0 && draftIndex < predefinedStyles.length) {\n                        styleInfo = {\n                            styleName: predefinedStyles[draftIndex],\n                            styleLabel: styleLabels[draftIndex]\n                        };\n                    }\n                }\n                const draftCard = {\n                    id: \"draft-\".concat(draftIndex + 1, \"-\").concat(Date.now()),\n                    prompt: cardData.prompt || \"Draft Variation \".concat(draftIndex + 1),\n                    frontCover: cardData.frontCover || \"\",\n                    backCover: \"\",\n                    leftPage: \"\",\n                    rightPage: \"\",\n                    createdAt: new Date(),\n                    generatedPrompts: {\n                        frontCover: ((_cardData_generatedPrompts = cardData.generatedPrompts) === null || _cardData_generatedPrompts === void 0 ? void 0 : _cardData_generatedPrompts.frontCover) || \"\"\n                    },\n                    styleInfo: styleInfo\n                };\n                // Simplified draft tracking - use fixed array positions\n                draftGeneration.setDraftCards((prev)=>{\n                    const updated = [\n                        ...prev\n                    ];\n                    // Ensure array has 5 slots\n                    while(updated.length < 5){\n                        updated.push(null);\n                    }\n                    // Place draft at its correct index\n                    updated[draftIndex] = draftCard;\n                    console.log(\"✅ Draft \".concat(draftIndex + 1, \" completed and stored at index \").concat(draftIndex));\n                    // Save draft to localStorage with expiration\n                    if (true) {\n                        try {\n                            const jobData = localStorage.getItem(\"cardJob_\".concat(job_id));\n                            if (jobData) {\n                                const job = JSON.parse(jobData);\n                                job.draftCards = [\n                                    draftCard\n                                ];\n                                job.draftIndex = draftIndex;\n                                job.lastUpdate = Date.now();\n                                job.expiresAt = Date.now() + 30 * 24 * 60 * 60 * 1000; // 30 days\n                                localStorage.setItem(\"cardJob_\".concat(job_id), JSON.stringify(job));\n                            }\n                        } catch (error) {\n                            console.error(\"Failed to save draft:\", error);\n                        }\n                    }\n                    return updated;\n                });\n                // Simplified completion tracking - count the updated array including the new draft\n                const updatedDrafts = [\n                    ...draftGeneration.draftCards\n                ];\n                updatedDrafts[draftIndex] = draftCard;\n                const completedCount = updatedDrafts.filter(Boolean).length;\n                console.log(\"\\uD83D\\uDCCA Draft progress: \".concat(completedCount, \"/5 variations complete\"));\n                // Update progress\n                const progressMsg = completedCount === 5 ? \"All 5 variations ready! Choose your favorite below.\" : \"\".concat(completedCount, \"/5 variations complete...\").concat(completedCount >= 2 ? \" You can select one now!\" : \"\");\n                draftGeneration.setGenerationProgress(progressMsg);\n                // Override time-based progress with real progress when drafts complete\n                // Don't override time-based progress\n                console.log(\"\\uD83C\\uDFA8 Draft \".concat(completedCount, \"/5 completed\"));\n                // Handle milestones\n                if (completedCount === 1) {\n                    (0,_cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.scrollToCardPreview)();\n                }\n                if (completedCount === 5 && !draftGeneration.isGeneratingFinalCard) {\n                    draftGeneration.setIsGenerating(false);\n                    jobManagement.stopElapsedTimeTracking();\n                    sonner__WEBPACK_IMPORTED_MODULE_1__.toast.success(\"\\uD83C\\uDFA8 All 5 front cover variations ready! Choose your favorite below.\");\n                }\n                // Keep draft jobs in storage for later retrieval\n                // Only unsubscribe from WebSocket\n                webSocket.unsubscribeFromJob(job_id);\n                console.log(\"✅ Keeping draft job \".concat(job_id, \" in storage for future access\"));\n            } else {\n                // Handle final card completion\n                console.log(\"\\uD83D\\uDD0D Final card completion detected. Card data structure:\", {\n                    hasCardData: !!cardData,\n                    cardDataKeys: Object.keys(cardData || {}),\n                    frontCover: (cardData === null || cardData === void 0 ? void 0 : cardData.frontCover) ? \"Present\" : \"Missing\",\n                    backCover: (cardData === null || cardData === void 0 ? void 0 : cardData.backCover) ? \"Present\" : \"Missing\",\n                    leftInterior: (cardData === null || cardData === void 0 ? void 0 : cardData.leftInterior) ? \"Present\" : \"Missing\",\n                    rightInterior: (cardData === null || cardData === void 0 ? void 0 : cardData.rightInterior) ? \"Present\" : \"Missing\",\n                    leftPage: (cardData === null || cardData === void 0 ? void 0 : cardData.leftPage) ? \"Present\" : \"Missing\",\n                    rightPage: (cardData === null || cardData === void 0 ? void 0 : cardData.rightPage) ? \"Present\" : \"Missing\"\n                });\n                console.log(\"\\uD83D\\uDCDD Full card data:\", JSON.stringify(cardData, null, 2));\n                // Map backend field names to frontend field names\n                const mappedCardData = {\n                    ...cardData,\n                    leftInterior: cardData.leftInterior || cardData.leftPage,\n                    rightInterior: cardData.rightInterior || cardData.rightPage,\n                    // Keep original fields for backward compatibility\n                    leftPage: cardData.leftPage || cardData.leftInterior,\n                    rightPage: cardData.rightPage || cardData.rightInterior\n                };\n                console.log(\"\\uD83D\\uDD04 Mapped card data for frontend compatibility:\", {\n                    frontCover: mappedCardData.frontCover ? \"Present\" : \"Missing\",\n                    backCover: mappedCardData.backCover ? \"Present\" : \"Missing\",\n                    leftInterior: mappedCardData.leftInterior ? \"Present\" : \"Missing\",\n                    rightInterior: mappedCardData.rightInterior ? \"Present\" : \"Missing\"\n                });\n                // Call the completion handler\n                console.log(\"\\uD83D\\uDE80 Calling handleFinalCardCompletion...\");\n                cardGeneration.handleFinalCardCompletion(mappedCardData);\n                // Save final card metadata to localStorage for recovery (without large images)\n                try {\n                    const finalCardMetadata = {\n                        jobId: job_id,\n                        completedAt: Date.now(),\n                        isFinalCard: true,\n                        prompt: cardData.prompt,\n                        id: cardData.id,\n                        createdAt: cardData.createdAt,\n                        // Don't save base64 images to avoid quota issues\n                        hasImages: {\n                            frontCover: !!cardData.frontCover,\n                            backCover: !!cardData.backCover,\n                            leftPage: !!cardData.leftPage,\n                            rightPage: !!cardData.rightPage\n                        }\n                    };\n                    localStorage.setItem(\"lastCompletedCard\", JSON.stringify(finalCardMetadata));\n                    console.log(\"\\uD83D\\uDCBE Saved final card metadata to localStorage (without images)\");\n                } catch (error) {\n                    console.error(\"Failed to save final card metadata:\", error);\n                }\n                jobManagement.removeJobFromStorage(job_id);\n                jobManagement.setCurrentJobId(null);\n                webSocket.unsubscribeFromJob(job_id);\n            }\n        } else if (status === \"failed\") {\n            console.error(\"❌ Job failed:\", error);\n            if (isDraftJob1 && draftIndex >= 0) {\n                sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Draft variation \".concat(draftIndex + 1, \" failed. Continuing with others...\"));\n            } else {\n                sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"❌ Card generation failed. Please try again.\");\n                cardGeneration.setIsGenerating(false);\n                draftGeneration.setIsGeneratingFinalCard(false);\n                jobManagement.stopElapsedTimeTracking();\n                cardGeneration.setGenerationProgress(\"\");\n                // Don't reset progress - let time-based progress continue\n                // jobManagement.setProgressPercentage(0);\n                jobManagement.setCurrentJobId(null);\n                webSocket.unsubscribeFromJob(job_id);\n            }\n            jobManagement.removeJobFromStorage(job_id);\n        } else if (status === \"not_found\") {\n            console.warn(\"⚠️ Job not found on server, cleaning up stale reference:\", job_id);\n            // Clean up stale job reference\n            if (webSocket.currentJobRef.current === job_id) {\n                webSocket.currentJobRef.current = null;\n            }\n            // Reset UI state if this was the current job\n            if (jobManagement.currentJobId === job_id) {\n                jobManagement.setCurrentJobId(null);\n                cardGeneration.setIsGenerating(false);\n                draftGeneration.setIsGeneratingFinalCard(false);\n                cardGeneration.setGenerationProgress(\"\");\n                // Don't reset progress - let time-based progress continue\n                // jobManagement.setProgressPercentage(0);\n                jobManagement.stopElapsedTimeTracking();\n            }\n            // Clean up storage\n            jobManagement.removeJobFromStorage(job_id);\n            webSocket.unsubscribeFromJob(job_id);\n        }\n    }, [\n        selectedArtisticStyle,\n        draftGeneration,\n        cardGeneration,\n        jobManagement,\n        webSocket,\n        isRestoringJobs\n    ]);\n    // Set up WebSocket job update handler\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        webSocket.setJobUpdateHandler(handleJobUpdate);\n    }, [\n        webSocket,\n        handleJobUpdate\n    ]);\n    // Track if we've already logged the stale job message\n    const staleJobLoggedRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    // Auto-reconnect WebSocket if disconnected during active generation\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (!webSocket.isSocketConnected && (cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) && webSocket.currentJobRef.current) {\n            // Check if the generation has been running for more than 5 minutes\n            if (jobManagement.generationStartTime) {\n                const jobAge = Date.now() - jobManagement.generationStartTime;\n                if (jobAge > 5 * 60 * 1000) {\n                    if (!staleJobLoggedRef.current) {\n                        console.log(\"⏰ Job is older than 5 minutes, stopping reconnection attempts\");\n                        staleJobLoggedRef.current = true;\n                        // Clean up stale job\n                        const jobId = webSocket.currentJobRef.current;\n                        if (jobId) {\n                            console.log(\"\\uD83E\\uDDF9 Cleaning up stale job:\", jobId);\n                            // Remove from localStorage (only if not a draft job)\n                            if (!jobId.startsWith(\"draft-\")) {\n                                jobManagement.removeJobFromStorage(jobId);\n                            }\n                            // Reset generation states\n                            cardGeneration.setIsGenerating(false);\n                            draftGeneration.setIsGeneratingFinalCard(false);\n                            draftGeneration.setIsDraftMode(false);\n                            draftGeneration.setDraftCards([]);\n                            draftGeneration.setDraftCompletionCount(0);\n                            draftGeneration.setDraftCompletionShown(false);\n                            jobManagement.setCurrentJobId(null);\n                            jobManagement.setGenerationProgress(\"\");\n                            // Don't reset progress - let time-based progress continue\n                            // jobManagement.setProgressPercentage(0);\n                            jobManagement.stopElapsedTimeTracking();\n                            // Unsubscribe from job\n                            webSocket.unsubscribeFromJob(jobId);\n                            // Show error toast\n                            sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Card generation timed out. Please try again.\");\n                        }\n                    }\n                    return;\n                }\n            }\n            console.log(\"\\uD83D\\uDD04 WebSocket disconnected during generation, attempting reconnect...\");\n            const reconnectTimer = setTimeout(()=>{\n                webSocket.connectWebSocket();\n                // Re-subscribe to current job after reconnection\n                const jobId = webSocket.currentJobRef.current;\n                if (jobId) {\n                    setTimeout(()=>{\n                        console.log(\"\\uD83D\\uDCE1 Re-subscribing to job after reconnect:\", jobId);\n                        webSocket.subscribeToJob(jobId);\n                    }, 1000);\n                }\n            }, 2000);\n            return ()=>clearTimeout(reconnectTimer);\n        }\n    }, [\n        webSocket,\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard,\n        jobManagement.generationStartTime\n    ]);\n    // Reset stale job flag when generation starts\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) {\n            staleJobLoggedRef.current = false;\n        }\n    }, [\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard\n    ]);\n    // Monitor for stale job updates\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if ((cardGeneration.isGenerating || draftGeneration.isGeneratingFinalCard) && webSocket.currentJobRef.current) {\n            const checkInterval = setInterval(async ()=>{\n                const timeSinceLastUpdate = Date.now() - webSocket.lastJobUpdateRef.current;\n                const jobId = webSocket.currentJobRef.current;\n                // Very aggressive checking when at 95%+ progress\n                if (jobManagement.progressPercentage >= 95 && timeSinceLastUpdate > 5000) {\n                    console.warn(\"⚠️ No updates for \".concat(Math.round(timeSinceLastUpdate / 1000), \"s at \").concat(jobManagement.progressPercentage, \"% progress - checking job status...\"));\n                    if (jobId) {\n                        try {\n                            const response = await fetch(\"/api/job-status/\".concat(jobId));\n                            if (response.ok) {\n                                const jobStatus = await response.json();\n                                console.log(\"\\uD83D\\uDCCA Direct job status check:\", jobStatus);\n                                if (jobStatus.status === \"completed\" && jobStatus.cardData) {\n                                    console.log(\"✅ Job is actually completed! Processing result...\");\n                                    handleJobUpdate({\n                                        job_id: jobId,\n                                        status: \"completed\",\n                                        progress: \"Card generation complete!\",\n                                        cardData: jobStatus.cardData\n                                    });\n                                    return; // Exit early on completion\n                                }\n                            }\n                        } catch (error) {\n                            console.error(\"Failed to check job status:\", error);\n                        }\n                    }\n                } else if (jobManagement.progressPercentage >= 90 && timeSinceLastUpdate > 10000) {\n                    console.warn(\"⚠️ No updates for \".concat(Math.round(timeSinceLastUpdate / 1000), \"s at \").concat(jobManagement.progressPercentage, \"% progress\"));\n                    if (jobId) {\n                        try {\n                            const response = await fetch(\"/api/job-status/\".concat(jobId));\n                            if (response.ok) {\n                                const jobStatus = await response.json();\n                                console.log(\"\\uD83D\\uDCCA Direct job status check:\", jobStatus);\n                                if (jobStatus.status === \"completed\" && jobStatus.cardData) {\n                                    console.log(\"✅ Job is actually completed! Processing result...\");\n                                    handleJobUpdate({\n                                        job_id: jobId,\n                                        status: \"completed\",\n                                        progress: \"Card generation complete!\",\n                                        cardData: jobStatus.cardData\n                                    });\n                                    return; // Exit early on completion\n                                }\n                            }\n                        } catch (error) {\n                            console.error(\"Failed to check job status:\", error);\n                        }\n                    }\n                }\n                // Standard stale update check\n                if (timeSinceLastUpdate > 30000) {\n                    console.warn(\"⚠️ No job updates for 30 seconds, checking connection...\");\n                    if (!webSocket.isSocketConnected) {\n                        console.log(\"\\uD83D\\uDD04 WebSocket disconnected, reconnecting...\");\n                        webSocket.connectWebSocket();\n                    } else if (jobId) {\n                        console.log(\"\\uD83D\\uDCE1 Re-subscribing to job due to stale updates:\", jobId);\n                        webSocket.subscribeToJob(jobId);\n                    }\n                    // Reset the timer\n                    webSocket.lastJobUpdateRef.current = Date.now();\n                }\n            }, 3000); // Check every 3 seconds for faster detection at high progress\n            return ()=>clearInterval(checkInterval);\n        }\n    }, [\n        cardGeneration.isGenerating,\n        draftGeneration.isGeneratingFinalCard,\n        webSocket,\n        jobManagement.progressPercentage,\n        handleJobUpdate\n    ]);\n    // OLD: Complex job restoration - keeping for reference but not using\n    const checkPendingJobs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        console.log(\"\\uD83D\\uDD04 Starting job restoration...\");\n        setIsRestoringJobs(true);\n        const pendingJobs = await jobManagement.checkPendingJobs();\n        if (pendingJobs.length === 0) {\n            console.log(\"✅ No pending jobs to restore\");\n            setIsRestoringJobs(false);\n            return;\n        }\n        console.log(\"\\uD83D\\uDD04 Found pending jobs to restore:\", pendingJobs);\n        // Separate draft jobs from final jobs\n        const draftJobs = pendingJobs.filter((param)=>{\n            let { jobId } = param;\n            return jobId.startsWith(\"draft-\");\n        });\n        const finalJobs = pendingJobs.filter((param)=>{\n            let { jobId } = param;\n            return !jobId.startsWith(\"draft-\");\n        });\n        // Process draft jobs first to restore draft state\n        if (draftJobs.length > 0) {\n            console.log(\"\\uD83C\\uDFA8 Found \".concat(draftJobs.length, \" draft jobs to restore\"));\n            // Collect all draft cards from all draft jobs\n            const draftsByIndex = new Array(5).fill(null);\n            for (const { job } of draftJobs){\n                if (job.draftCards && Array.isArray(job.draftCards) && job.draftCards.length > 0) {\n                    const draftCard = job.draftCards[0]; // Each job stores one draft\n                    const draftIndex = job.draftIndex;\n                    if (draftIndex >= 0 && draftIndex < 5) {\n                        draftsByIndex[draftIndex] = draftCard;\n                    }\n                }\n            }\n            // Get non-null drafts for counting\n            const allDraftCards = draftsByIndex.filter(Boolean);\n            // Restore all draft cards at once\n            if (allDraftCards.length > 0) {\n                console.log(\"\\uD83D\\uDD04 Restoring \".concat(allDraftCards.length, \" draft cards from \").concat(draftJobs.length, \" jobs\"));\n                // Only set draft mode when we have actual cards\n                console.log(\"\\uD83C\\uDFAF Setting isDraftMode to true - draft cards found\");\n                draftGeneration.setIsDraftMode(true);\n                // Use the draftsByIndex which already has drafts at correct positions\n                draftGeneration.setDraftCards(draftsByIndex);\n                draftGeneration.setDraftCompletionCount(allDraftCards.length);\n                // Set appropriate progress state\n                if (allDraftCards.length === 5) {\n                    draftGeneration.setDraftCompletionShown(true);\n                    draftGeneration.setIsGenerating(false);\n                    cardGeneration.setIsGenerating(false);\n                    draftGeneration.setGenerationProgress(\"\");\n                    cardGeneration.setGenerationProgress(\"\");\n                // Time-based progress will be cleared above\n                } else {\n                    draftGeneration.setIsGenerating(true);\n                    cardGeneration.setIsGenerating(true);\n                    const progressMsg = \"✨ \".concat(allDraftCards.length, \"/5 front cover variations complete... \").concat(allDraftCards.length >= 2 ? \"You can select one now to proceed!\" : \"\");\n                    draftGeneration.setGenerationProgress(progressMsg);\n                    cardGeneration.setGenerationProgress(progressMsg);\n                // Don't override time-based progress\n                }\n            }\n            // If no draft cards were found but we have draft jobs, set appropriate state\n            if (allDraftCards.length === 0 && draftJobs.length > 0) {\n                console.log(\"\\uD83D\\uDD04 Draft jobs found but no cards yet - setting generation state\");\n                // Set draft mode and initialize empty array for draft jobs in progress\n                draftGeneration.setIsDraftMode(true);\n                draftGeneration.setDraftCards([\n                    null,\n                    null,\n                    null,\n                    null,\n                    null\n                ]);\n                draftGeneration.setIsGenerating(true);\n                cardGeneration.setIsGenerating(true);\n                draftGeneration.setGenerationProgress(\"\\uD83C\\uDFA8 Creating 5 front cover variations for you to choose from...\");\n                cardGeneration.setGenerationProgress(\"\\uD83C\\uDFA8 Creating 5 front cover variations for you to choose from...\");\n            // Don't reset progress - let time-based progress continue\n            // jobManagement.setProgressPercentage(0);\n            }\n            // Subscribe to all non-stale draft jobs\n            for (const { jobId, job } of draftJobs){\n                const jobAge = Date.now() - (job.createdAt || Date.now());\n                const isStale = jobAge > 5 * 60 * 1000;\n                if (!isStale) {\n                    var _job_draftCards;\n                    console.log(\"\\uD83D\\uDCE1 Subscribing to draft job: \".concat(jobId, \" (has \").concat(((_job_draftCards = job.draftCards) === null || _job_draftCards === void 0 ? void 0 : _job_draftCards.length) || 0, \" cards)\"));\n                    webSocket.subscribeToJob(jobId);\n                }\n            }\n        }\n        // Process remaining jobs (final card generation)\n        for (const { jobId, job } of finalJobs){\n            console.log(\"\\uD83D\\uDCCB Processing job \".concat(jobId, \":\"), {\n                isDraft: jobId.startsWith(\"draft-\"),\n                status: job.status,\n                hasProgress: !!job.lastProgress,\n                createdAt: job.createdAt\n            });\n            // Check if job is stale (older than 5 minutes without completion)\n            const jobAge = Date.now() - (job.createdAt || Date.now());\n            const isStale = jobAge > 5 * 60 * 1000 && job.status !== \"completed\";\n            if (isStale) {\n                console.log(\"\\uD83E\\uDDF9 Cleaning up stale job: \".concat(jobId, \" (age: \").concat(Math.round(jobAge / 1000), \"s)\"));\n                jobManagement.removeJobFromStorage(jobId);\n                continue;\n            }\n            // Restore progress and state\n            // Don't restore progress - let time-based progress handle it\n            // if (job.lastProgress !== undefined) {\n            //   jobManagement.setProgressPercentage(job.lastProgress);\n            //   cardGeneration.setProgressPercentage(job.lastProgress);\n            //   draftGeneration.setProgressPercentage(job.lastProgress);\n            // }\n            // Only restore progress text if the job is not completed\n            // This prevents showing \"Generation complete! (100%)\" from old completed jobs\n            if (job.lastProgressText && job.status !== \"completed\") {\n                jobManagement.setGenerationProgress(job.lastProgressText);\n                cardGeneration.setGenerationProgress(job.lastProgressText);\n                draftGeneration.setGenerationProgress(job.lastProgressText);\n            }\n            // Restore final card generation state\n            cardGeneration.setIsGenerating(true);\n            draftGeneration.setIsGeneratingFinalCard(true);\n            // If we have a selected draft, restore it\n            if (job.selectedDraftIndex !== undefined) {\n                draftGeneration.setSelectedDraftIndex(job.selectedDraftIndex);\n            }\n            jobManagement.setCurrentJobId(jobId);\n            // Calculate elapsed time since job started\n            const jobStartTime = job.createdAt || Date.now();\n            const elapsedSinceStart = (Date.now() - jobStartTime) / 1000;\n            // Start elapsed time tracking\n            jobManagement.startElapsedTimeTracking();\n            // Subscribe to the job updates\n            webSocket.subscribeToJob(jobId);\n            // Verify job exists on backend\n            try {\n                const response = await fetch(\"\".concat(BACKEND_API_BASE_URL, \"/api/job-status/\").concat(jobId));\n                const result = await response.json();\n                console.log(\"\\uD83D\\uDCE1 Job status check for \".concat(jobId, \":\"), {\n                    ok: response.ok,\n                    status: response.status,\n                    resultStatus: result.status,\n                    url: \"\".concat(BACKEND_API_BASE_URL, \"/api/job-status/\").concat(jobId)\n                });\n                if (result.status === \"not_found\") {\n                    // Job doesn't exist on backend, clean up and notify user\n                    console.log(\"⚠️ Job \".concat(jobId, \" not found on backend, cleaning up...\"));\n                    jobManagement.removeJobFromStorage(jobId);\n                    // Reset generation state\n                    if (isDraftJob) {\n                        draftGeneration.setIsGenerating(false);\n                    } else {\n                        cardGeneration.setIsGenerating(false);\n                        draftGeneration.setIsGeneratingFinalCard(false);\n                    }\n                    // Show helpful message to user\n                    sonner__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Previous \".concat(isDraftJob ? \"draft\" : \"card\", \" generation expired. Please start a new one.\"), {\n                        duration: 5000\n                    });\n                    continue;\n                } else {\n                    // Job exists, show resuming message\n                    sonner__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Resuming \".concat(isDraftJob ? \"draft\" : \"card\", \" generation...\"));\n                }\n            } catch (error) {\n                console.error(\"Failed to verify job status:\", error);\n                // Continue anyway, WebSocket will handle it\n                sonner__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Attempting to resume \".concat(isDraftJob ? \"draft\" : \"card\", \" generation...\"));\n            }\n        }\n        // Restoration complete - allow WebSocket updates to be processed\n        // Add a small delay to ensure state updates have propagated\n        setTimeout(()=>{\n            console.log(\"✅ Job restoration complete, allowing WebSocket updates\");\n            setIsRestoringJobs(false);\n        }, 100);\n    }, [\n        jobManagement,\n        cardGeneration,\n        draftGeneration,\n        webSocket\n    ]);\n    // Load most recent draft batch and final card on component mount\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        console.log(\"\\uD83D\\uDE80 useCardStudio mounted, loading recent cards...\");\n        // Check for completed final card first\n        try {\n            const savedFinalCard = localStorage.getItem(\"lastCompletedCard\");\n            if (savedFinalCard) {\n                const finalCard = JSON.parse(savedFinalCard);\n                console.log(\"\\uD83D\\uDCBE Found saved final card:\", finalCard);\n                // Restore final card state\n                cardGeneration.setGeneratedCard(finalCard);\n                cardGeneration.setGeneratedCards([\n                    finalCard\n                ]);\n                cardGeneration.setIsCardCompleted(true);\n                draftGeneration.setIsDraftMode(false);\n                // Clear the saved card after restoring\n                localStorage.removeItem(\"lastCompletedCard\");\n                console.log(\"✅ Restored final card from localStorage\");\n                return; // Don't load drafts if we have a final card\n            }\n        } catch (error) {\n            console.error(\"Failed to restore final card:\", error);\n        }\n        // If no final card, check for drafts\n        // First, clear any existing draft state to avoid duplicates\n        draftGeneration.setDraftCards([]);\n        draftGeneration.setDraftCompletionCount(0);\n        const recentDrafts = jobManagement.loadMostRecentDraftBatch();\n        console.log(\"\\uD83D\\uDCCA Draft batch result:\", recentDrafts);\n        if (recentDrafts && recentDrafts.cards.length > 0) {\n            console.log(\"\\uD83D\\uDCCB Found recent draft batch with \".concat(recentDrafts.count, \" cards from \").concat(new Date(recentDrafts.createdAt).toLocaleString()));\n            // Set the draft cards and enable draft mode\n            draftGeneration.setDraftCards(recentDrafts.cards);\n            draftGeneration.setIsDraftMode(true);\n            draftGeneration.setDraftCompletionCount(recentDrafts.count);\n            // If we have all 5 cards, mark as complete\n            if (recentDrafts.count === 5) {\n                draftGeneration.setDraftCompletionShown(true);\n                draftGeneration.setIsGenerating(false);\n                cardGeneration.setIsGenerating(false);\n            } else {\n                // Still generating - set generation state and start timer\n                draftGeneration.setIsGenerating(true);\n                cardGeneration.setIsGenerating(true);\n                // Calculate how long generation has been running\n                const elapsedSeconds = Math.floor((Date.now() - recentDrafts.createdAt) / 1000);\n                jobManagement.setCurrentElapsedTime(elapsedSeconds);\n                jobManagement.startElapsedTimeTracking();\n                // Set progress\n                const progressMsg = \"✨ \".concat(recentDrafts.count, \"/5 front cover variations complete...\");\n                draftGeneration.setGenerationProgress(progressMsg);\n                cardGeneration.setGenerationProgress(progressMsg);\n                // Don't override time-based progress\n                // Check for pending jobs to subscribe to\n                const pendingJobs = JSON.parse(localStorage.getItem(\"pendingCardJobs\") || \"[]\");\n                const activeDraftJobs = pendingJobs.filter((id)=>id.startsWith(\"draft-\"));\n                // Subscribe to active draft jobs for real-time updates\n                activeDraftJobs.forEach((jobId)=>{\n                    console.log(\"\\uD83D\\uDCE1 Subscribing to active draft job: \".concat(jobId));\n                    webSocket.subscribeToJob(jobId);\n                });\n            }\n        }\n        // Mark restoration as complete after a small delay\n        setTimeout(()=>{\n            setIsRestoringJobs(false);\n        }, 100);\n    }, []);\n    // Return all the state and functions that the UI needs\n    return {\n        // Core state\n        prompt,\n        setPrompt,\n        finalCardMessage: messageGeneration.finalCardMessage,\n        setFinalCardMessage: messageGeneration.setFinalCardMessage,\n        toField,\n        setToField,\n        fromField,\n        setFromField,\n        relationshipField,\n        setRelationshipField,\n        selectedType,\n        setSelectedType,\n        customCardType,\n        setCustomCardType,\n        selectedTone,\n        setSelectedTone,\n        isGenerating: cardGeneration.isGenerating || draftGeneration.isGenerating,\n        setIsGenerating: cardGeneration.setIsGenerating,\n        isGeneratingMessage: messageGeneration.isGeneratingMessage,\n        setIsGeneratingMessage: messageGeneration.setIsGeneratingMessage,\n        generatedCard: cardGeneration.generatedCard,\n        setGeneratedCard: cardGeneration.setGeneratedCard,\n        numberOfCards,\n        setNumberOfCards,\n        generatedCards: cardGeneration.generatedCards,\n        setGeneratedCards: cardGeneration.setGeneratedCards,\n        selectedCardIndex: cardGeneration.selectedCardIndex,\n        setSelectedCardIndex: cardGeneration.setSelectedCardIndex,\n        // Advanced options\n        showAdvanced,\n        setShowAdvanced,\n        selectedArtisticStyle,\n        setSelectedArtisticStyle,\n        customStyleDescription,\n        setCustomStyleDescription,\n        selectedImageModel,\n        setSelectedImageModel,\n        selectedDraftModel,\n        setSelectedDraftModel,\n        // Draft mode\n        isDraftMode: draftGeneration.isDraftMode,\n        setIsDraftMode: draftGeneration.setIsDraftMode,\n        draftCards: draftGeneration.draftCards,\n        setDraftCards: draftGeneration.setDraftCards,\n        selectedDraftIndex: draftGeneration.selectedDraftIndex,\n        setSelectedDraftIndex: draftGeneration.setSelectedDraftIndex,\n        isGeneratingFinalCard: draftGeneration.isGeneratingFinalCard,\n        setIsGeneratingFinalCard: draftGeneration.setIsGeneratingFinalCard,\n        previewingDraftIndex: draftGeneration.previewingDraftIndex,\n        setPreviewingDraftIndex: draftGeneration.setPreviewingDraftIndex,\n        draftCompletionShown: draftGeneration.draftCompletionShown,\n        setDraftCompletionShown: draftGeneration.setDraftCompletionShown,\n        draftCompletionCount: draftGeneration.draftCompletionCount,\n        setDraftCompletionCount: draftGeneration.setDraftCompletionCount,\n        // Progress tracking\n        generationProgress: draftGeneration.isGenerating ? draftGeneration.generationProgress : cardGeneration.generationProgress,\n        setGenerationProgress: cardGeneration.setGenerationProgress,\n        progressPercentage: jobManagement.progressPercentage,\n        isCardCompleted: cardGeneration.isCardCompleted,\n        setIsCardCompleted: cardGeneration.setIsCardCompleted,\n        // Upload and personalization\n        referenceImages: fileHandling.referenceImages,\n        setReferenceImages: fileHandling.setReferenceImages,\n        referenceImageUrls: fileHandling.referenceImageUrls,\n        setReferenceImageUrls: fileHandling.setReferenceImageUrls,\n        imageTransformation: fileHandling.imageTransformation,\n        setImageTransformation: fileHandling.setImageTransformation,\n        isUploading: fileHandling.isUploading,\n        setIsUploading: fileHandling.setIsUploading,\n        // Email and settings\n        userEmail,\n        setUserEmail,\n        isHandwrittenMessage,\n        setIsHandwrittenMessage,\n        isFrontBackOnly,\n        setIsFrontBackOnly,\n        selectedPaperSize,\n        setSelectedPaperSize,\n        // UI state\n        isTextareaExpanded,\n        setIsTextareaExpanded,\n        isMessageExpanded,\n        setIsMessageExpanded,\n        showSettings,\n        setShowSettings,\n        showTemplateGallery,\n        setShowTemplateGallery,\n        showPrintConfirmation,\n        setShowPrintConfirmation,\n        // Generation time\n        generationDuration: cardGeneration.generationDuration,\n        setGenerationDuration: cardGeneration.setGenerationDuration,\n        currentElapsedTime: jobManagement.currentElapsedTime,\n        setCurrentElapsedTime: jobManagement.setCurrentElapsedTime,\n        // Helper functions\n        formatGenerationTime: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.formatGenerationTime,\n        formatCountdown: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.formatCountdown,\n        sendThankYouEmail: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.sendThankYouEmail,\n        chatWithAI: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.chatWithAI,\n        scrollToCardPreview: _cardStudio_utils__WEBPACK_IMPORTED_MODULE_9__.scrollToCardPreview,\n        // Time tracking functions\n        startElapsedTimeTracking: jobManagement.startElapsedTimeTracking,\n        stopElapsedTimeTracking: jobManagement.stopElapsedTimeTracking,\n        // File handling functions\n        handleFileUpload: fileHandling.handleFileUpload,\n        handleRemoveReferenceImage: fileHandling.handleRemoveReferenceImage,\n        // Photo analysis\n        photoAnalyses: fileHandling.photoAnalyses,\n        setPhotoAnalyses: fileHandling.setPhotoAnalyses,\n        isAnalyzing: fileHandling.isAnalyzing,\n        showAnalysisModal: fileHandling.showAnalysisModal,\n        setShowAnalysisModal: fileHandling.setShowAnalysisModal,\n        pendingAnalysisIndex: fileHandling.pendingAnalysisIndex,\n        setPendingAnalysisIndex: fileHandling.setPendingAnalysisIndex,\n        analyzePhoto: fileHandling.analyzePhoto,\n        savePhotoAnalysis: fileHandling.savePhotoAnalysis,\n        skipPhotoAnalysis: fileHandling.skipPhotoAnalysis,\n        getCombinedPhotoAnalysis: fileHandling.getCombinedPhotoAnalysis,\n        // Message functions\n        handleGetMessageHelp: messageGeneration.handleGetMessageHelp,\n        addMessageToHistory: messageGeneration.addMessageToHistory,\n        undoMessage: messageGeneration.undoMessage,\n        redoMessage: messageGeneration.redoMessage,\n        // Job management\n        saveJobToStorage: jobManagement.saveJobToStorage,\n        removeJobFromStorage: jobManagement.removeJobFromStorage,\n        checkPendingJobs,\n        // Main generation functions\n        handleGenerateCardAsync: cardGeneration.handleGenerateCardAsync,\n        handleGenerateDraftCards: draftGeneration.handleGenerateDraftCards,\n        handleGenerateFinalFromDraft: draftGeneration.handleGenerateFinalFromDraft,\n        // Additional state for message refinement\n        messageHistory: messageGeneration.messageHistory,\n        setMessageHistory: messageGeneration.setMessageHistory,\n        currentMessageIndex: messageGeneration.currentMessageIndex,\n        setCurrentMessageIndex: messageGeneration.setCurrentMessageIndex,\n        refinementPrompt: messageGeneration.refinementPrompt,\n        setRefinementPrompt: messageGeneration.setRefinementPrompt,\n        isRefiningMessage: messageGeneration.isRefiningMessage,\n        setIsRefiningMessage: messageGeneration.setIsRefiningMessage,\n        showRefinementBox: messageGeneration.showRefinementBox,\n        setShowRefinementBox: messageGeneration.setShowRefinementBox,\n        // Template state\n        showTemplateCustomization,\n        setShowTemplateCustomization,\n        selectedTemplate,\n        setSelectedTemplate,\n        templateCustomizations,\n        setTemplateCustomizations,\n        templateSearchQuery,\n        setTemplateSearchQuery,\n        isSearchingTemplates,\n        setIsSearchingTemplates,\n        aiFilteredCards,\n        setAiFilteredCards,\n        searchMode,\n        setSearchMode,\n        textFilteredCards,\n        setTextFilteredCards,\n        showPrompts,\n        setShowPrompts,\n        // Print state\n        printOption,\n        setPrintOption,\n        // Additional draft mode state\n        handwritingSample: fileHandling.handwritingSample,\n        setHandwritingSample: fileHandling.setHandwritingSample,\n        handwritingSampleUrl: fileHandling.handwritingSampleUrl,\n        setHandwritingSampleUrl: fileHandling.setHandwritingSampleUrl,\n        // Photo analysis\n        triggerPhotoAnalysis: fileHandling.triggerPhotoAnalysis,\n        // Job tracking\n        currentJobId: jobManagement.currentJobId,\n        setCurrentJobId: jobManagement.setCurrentJobId,\n        countdown,\n        setCountdown,\n        countdownInterval,\n        setCountdownInterval,\n        // Section loading states\n        sectionLoadingStates,\n        setSectionLoadingStates,\n        // Fast preview mode\n        fastPreviewMode,\n        setFastPreviewMode,\n        // Additional tracking\n        currentCardId: cardGeneration.currentCardId,\n        setCurrentCardId: cardGeneration.setCurrentCardId,\n        isInitialLoadComplete,\n        setIsInitialLoadComplete,\n        // Elapsed time tracking\n        generationStartTime: jobManagement.generationStartTime,\n        setGenerationStartTime: jobManagement.setGenerationStartTime,\n        elapsedTimeInterval: jobManagement.elapsedTimeInterval,\n        setElapsedTimeInterval: jobManagement.setElapsedTimeInterval,\n        // Constants for UI\n        cardTones: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.cardTones,\n        artisticStyles: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.artisticStyles,\n        paperSizes: _cardStudio_constants__WEBPACK_IMPORTED_MODULE_8__.paperSizes,\n        // WebSocket functions and state\n        isSocketConnected: webSocket.isSocketConnected,\n        connectWebSocket: webSocket.connectWebSocket,\n        disconnectWebSocket: webSocket.disconnectWebSocket,\n        subscribeToJob: webSocket.subscribeToJob,\n        unsubscribeFromJob: webSocket.unsubscribeFromJob,\n        handleJobUpdate,\n        handleFinalCardCompletion: cardGeneration.handleFinalCardCompletion\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZUNhcmRTdHVkaW9SZWZhY3RvcmVkLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OzttRUFFaUU7QUFDbEM7QUFHL0IsdUJBQXVCO0FBQ2tDO0FBQ1E7QUFDUTtBQUNWO0FBQ007QUFDRjtBQUVuRSw2QkFBNkI7QUFRRztBQUN3RDtBQUVqRixTQUFTbUI7SUFDZCxrQkFBa0I7SUFDbEIsTUFBTSxDQUFDQyxRQUFRQyxVQUFVLEdBQUdyQiwrQ0FBUUEsQ0FBQztJQUNyQyxNQUFNLENBQUNzQixTQUFTQyxXQUFXLEdBQUd2QiwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLENBQUN3QixXQUFXQyxhQUFhLEdBQUd6QiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUMwQixtQkFBbUJDLHFCQUFxQixHQUFHM0IsK0NBQVFBLENBQUM7SUFDM0QsTUFBTSxDQUFDNEIsY0FBY0MsZ0JBQWdCLEdBQUc3QiwrQ0FBUUEsQ0FBUztJQUN6RCxNQUFNLENBQUM4QixnQkFBZ0JDLGtCQUFrQixHQUFHL0IsK0NBQVFBLENBQVM7SUFDN0QsTUFBTSxDQUFDZ0MsY0FBY0MsZ0JBQWdCLEdBQUdqQywrQ0FBUUEsQ0FBUztJQUV6RCx5QkFBeUI7SUFDekIsTUFBTSxDQUFDa0MsY0FBY0MsZ0JBQWdCLEdBQUduQywrQ0FBUUEsQ0FBQztJQUNqRCxNQUFNLENBQUNvQyx1QkFBdUJDLHlCQUF5QixHQUFHckMsK0NBQVFBLENBQVM7SUFDM0UsTUFBTSxDQUFDc0Msd0JBQXdCQywwQkFBMEIsR0FBR3ZDLCtDQUFRQSxDQUFTO0lBQzdFLE1BQU0sQ0FBQ3dDLG9CQUFvQkMsc0JBQXNCLEdBQUd6QywrQ0FBUUEsQ0FBUztJQUNyRSxNQUFNLENBQUMwQyxvQkFBb0JDLHNCQUFzQixHQUFHM0MsK0NBQVFBLENBQVM7SUFDckUsTUFBTSxDQUFDNEMsaUJBQWlCQyxtQkFBbUIsR0FBRzdDLCtDQUFRQSxDQUFVO0lBRWhFLGNBQWM7SUFDZCxNQUFN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b0I7UUFDdkRDLHNCQUFzQmhOLGFBQWFnTixvQkFBb0I7UUFDdkRDLHlCQUF5QmpOLGFBQWFpTix1QkFBdUI7UUFFN0QsaUJBQWlCO1FBQ2pCQyxzQkFBc0JsTixhQUFha04sb0JBQW9CO1FBRXZELGVBQWU7UUFDZnRILGNBQWM3RixjQUFjNkYsWUFBWTtRQUN4Qy9FLGlCQUFpQmQsY0FBY2MsZUFBZTtRQUM5Q25CO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBRUEseUJBQXlCO1FBQ3pCVDtRQUNBQztRQUVBLG9CQUFvQjtRQUNwQnJEO1FBQ0FDO1FBRUEsc0JBQXNCO1FBQ3RCa1IsZUFBZTlMLGVBQWU4TCxhQUFhO1FBQzNDQyxrQkFBa0IvTCxlQUFlK0wsZ0JBQWdCO1FBQ2pEeFA7UUFDQUM7UUFFQSx3QkFBd0I7UUFDeEJvSSxxQkFBcUJsRyxjQUFja0csbUJBQW1CO1FBQ3REb0gsd0JBQXdCdE4sY0FBY3NOLHNCQUFzQjtRQUM1REMscUJBQXFCdk4sY0FBY3VOLG1CQUFtQjtRQUN0REMsd0JBQXdCeE4sY0FBY3dOLHNCQUFzQjtRQUU1RCxtQkFBbUI7UUFDbkJ4VCxTQUFTQSw4REFBQUE7UUFDVEMsY0FBY0EsbUVBQUFBO1FBQ2RDLFVBQVVBLCtEQUFBQTtRQUVWLGdDQUFnQztRQUNoQzhMLG1CQUFtQmpHLFVBQVVpRyxpQkFBaUI7UUFDOUNNLGtCQUFrQnZHLFVBQVV1RyxnQkFBZ0I7UUFDNUNtSCxxQkFBcUIxTixVQUFVME4sbUJBQW1CO1FBQ2xEbE4sZ0JBQWdCUixVQUFVUSxjQUFjO1FBQ3hDd0Usb0JBQW9CaEYsVUFBVWdGLGtCQUFrQjtRQUNoRHhEO1FBQ0E4RCwyQkFBMkIvRCxlQUFlK0QseUJBQXlCO0lBQ3JFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vaG9va3MvdXNlQ2FyZFN0dWRpb1JlZmFjdG9yZWQudHM/OWNjOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdG9hc3QgfSBmcm9tIFwic29ubmVyXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcblxuLy8gSW1wb3J0IG1vZHVsYXIgaG9va3NcbmltcG9ydCB7IHVzZVdlYlNvY2tldCB9IGZyb20gJy4vY2FyZFN0dWRpby91c2VXZWJTb2NrZXQnO1xuaW1wb3J0IHsgdXNlSm9iTWFuYWdlbWVudCB9IGZyb20gJy4vY2FyZFN0dWRpby91c2VKb2JNYW5hZ2VtZW50JztcbmltcG9ydCB7IHVzZU1lc3NhZ2VHZW5lcmF0aW9uIH0gZnJvbSAnLi9jYXJkU3R1ZGlvL3VzZU1lc3NhZ2VHZW5lcmF0aW9uJztcbmltcG9ydCB7IHVzZUZpbGVIYW5kbGluZyB9IGZyb20gJy4vY2FyZFN0dWRpby91c2VGaWxlSGFuZGxpbmcnO1xuaW1wb3J0IHsgdXNlRHJhZnRHZW5lcmF0aW9uIH0gZnJvbSAnLi9jYXJkU3R1ZGlvL3VzZURyYWZ0R2VuZXJhdGlvbic7XG5pbXBvcnQgeyB1c2VDYXJkR2VuZXJhdGlvbiB9IGZyb20gJy4vY2FyZFN0dWRpby91c2VDYXJkR2VuZXJhdGlvbic7XG5cbi8vIEltcG9ydCBjb25zdGFudHMgYW5kIHV0aWxzXG5pbXBvcnQgeyBcbiAgY2FyZFRvbmVzLCBcbiAgYXJ0aXN0aWNTdHlsZXMsIFxuICBwYXBlclNpemVzLCBcbiAgZm9ybWF0R2VuZXJhdGlvblRpbWUsIFxuICBmb3JtYXRDb3VudGRvd24sXG4gIEdlbmVyYXRlZENhcmQgXG59IGZyb20gJy4vY2FyZFN0dWRpby9jb25zdGFudHMnO1xuaW1wb3J0IHsgc2VuZFRoYW5rWW91RW1haWwsIGNoYXRXaXRoQUksIHNjcm9sbFRvQ2FyZFByZXZpZXcgfSBmcm9tICcuL2NhcmRTdHVkaW8vdXRpbHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQ2FyZFN0dWRpbygpIHtcbiAgLy8gQ29yZSBmb3JtIHN0YXRlXG4gIGNvbnN0IFtwcm9tcHQsIHNldFByb21wdF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3RvRmllbGQsIHNldFRvRmllbGRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtmcm9tRmllbGQsIHNldEZyb21GaWVsZF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3JlbGF0aW9uc2hpcEZpZWxkLCBzZXRSZWxhdGlvbnNoaXBGaWVsZF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3NlbGVjdGVkVHlwZSwgc2V0U2VsZWN0ZWRUeXBlXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJiaXJ0aGRheVwiKTtcbiAgY29uc3QgW2N1c3RvbUNhcmRUeXBlLCBzZXRDdXN0b21DYXJkVHlwZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBjb25zdCBbc2VsZWN0ZWRUb25lLCBzZXRTZWxlY3RlZFRvbmVdID0gdXNlU3RhdGU8c3RyaW5nPihcImZ1bm55XCIpO1xuICBcbiAgLy8gQWR2YW5jZWQgb3B0aW9ucyBzdGF0ZVxuICBjb25zdCBbc2hvd0FkdmFuY2VkLCBzZXRTaG93QWR2YW5jZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2VsZWN0ZWRBcnRpc3RpY1N0eWxlLCBzZXRTZWxlY3RlZEFydGlzdGljU3R5bGVdID0gdXNlU3RhdGU8c3RyaW5nPihcIndhdGVyY29sb3JcIik7XG4gIGNvbnN0IFtjdXN0b21TdHlsZURlc2NyaXB0aW9uLCBzZXRDdXN0b21TdHlsZURlc2NyaXB0aW9uXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJcIik7XG4gIGNvbnN0IFtzZWxlY3RlZEltYWdlTW9kZWwsIHNldFNlbGVjdGVkSW1hZ2VNb2RlbF0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiZ3B0LWltYWdlLTFcIik7XG4gIGNvbnN0IFtzZWxlY3RlZERyYWZ0TW9kZWwsIHNldFNlbGVjdGVkRHJhZnRNb2RlbF0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiZ3B0LWltYWdlLTFcIik7XG4gIGNvbnN0IFtmYXN0UHJldmlld01vZGUsIHNldEZhc3RQcmV2aWV3TW9kZV0gPSB1c2VTdGF0ZTxib29sZWFuPih0cnVlKTtcbiAgXG4gIC8vIEVtYWlsIHN0YXRlXG4gIGNvbnN0IFt1c2VyRW1haWwsIHNldFVzZXJFbWFpbF0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xuICBcbiAgLy8gQ2FyZCBvcHRpb25zXG4gIGNvbnN0IFtudW1iZXJPZkNhcmRzLCBzZXROdW1iZXJPZkNhcmRzXSA9IHVzZVN0YXRlPG51bWJlcj4oMSk7XG4gIGNvbnN0IFtpc0hhbmR3cml0dGVuTWVzc2FnZSwgc2V0SXNIYW5kd3JpdHRlbk1lc3NhZ2VdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNGcm9udEJhY2tPbmx5LCBzZXRJc0Zyb250QmFja09ubHldID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2VsZWN0ZWRQYXBlclNpemUsIHNldFNlbGVjdGVkUGFwZXJTaXplXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJzdGFuZGFyZFwiKTtcbiAgXG4gIC8vIFVJIHN0YXRlXG4gIGNvbnN0IFtpc1RleHRhcmVhRXhwYW5kZWQsIHNldElzVGV4dGFyZWFFeHBhbmRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc01lc3NhZ2VFeHBhbmRlZCwgc2V0SXNNZXNzYWdlRXhwYW5kZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd1NldHRpbmdzLCBzZXRTaG93U2V0dGluZ3NdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd1RlbXBsYXRlR2FsbGVyeSwgc2V0U2hvd1RlbXBsYXRlR2FsbGVyeV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93UHJpbnRDb25maXJtYXRpb24sIHNldFNob3dQcmludENvbmZpcm1hdGlvbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93VGVtcGxhdGVDdXN0b21pemF0aW9uLCBzZXRTaG93VGVtcGxhdGVDdXN0b21pemF0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgXG4gIC8vIFJlc3RvcmF0aW9uIHN0YXRlXG4gIGNvbnN0IFtpc1Jlc3RvcmluZ0pvYnMsIHNldElzUmVzdG9yaW5nSm9ic10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3NlbGVjdGVkVGVtcGxhdGUsIHNldFNlbGVjdGVkVGVtcGxhdGVdID0gdXNlU3RhdGU8R2VuZXJhdGVkQ2FyZCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNJbml0aWFsTG9hZENvbXBsZXRlLCBzZXRJc0luaXRpYWxMb2FkQ29tcGxldGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBcbiAgLy8gVGVtcGxhdGUgc3RhdGVcbiAgY29uc3QgW3RlbXBsYXRlU2VhcmNoUXVlcnksIHNldFRlbXBsYXRlU2VhcmNoUXVlcnldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtpc1NlYXJjaGluZ1RlbXBsYXRlcywgc2V0SXNTZWFyY2hpbmdUZW1wbGF0ZXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYWlGaWx0ZXJlZENhcmRzLCBzZXRBaUZpbHRlcmVkQ2FyZHNdID0gdXNlU3RhdGU8YW55W10+KFtdKTtcbiAgY29uc3QgW3NlYXJjaE1vZGUsIHNldFNlYXJjaE1vZGVdID0gdXNlU3RhdGU8J3RleHQnIHwgJ2FpJyB8ICdoeWJyaWQnPigndGV4dCcpO1xuICBjb25zdCBbdGV4dEZpbHRlcmVkQ2FyZHMsIHNldFRleHRGaWx0ZXJlZENhcmRzXSA9IHVzZVN0YXRlPGFueVtdPihbXSk7XG4gIGNvbnN0IFtzaG93UHJvbXB0cywgc2V0U2hvd1Byb21wdHNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJpbnRPcHRpb24sIHNldFByaW50T3B0aW9uXSA9IHVzZVN0YXRlPCdwaHlzaWNhbCcgfCAnZW1haWwnPigncGh5c2ljYWwnKTtcbiAgXG4gIC8vIFRlbXBsYXRlIGN1c3RvbWl6YXRpb24gc3RhdGVcbiAgY29uc3QgW3RlbXBsYXRlQ3VzdG9taXphdGlvbnMsIHNldFRlbXBsYXRlQ3VzdG9taXphdGlvbnNdID0gdXNlU3RhdGUoe1xuICAgIHByb21wdENoYW5nZXM6IFwiXCIsXG4gICAgbWVzc2FnZUNoYW5nZXM6IFwiXCIsXG4gICAgdXNlUmVmZXJlbmNlSW1hZ2U6IGZhbHNlLFxuICAgIHJlZmVyZW5jZUltYWdlRmlsZTogbnVsbCBhcyBGaWxlIHwgbnVsbCxcbiAgICByZWZlcmVuY2VJbWFnZVVybHM6IFtdIGFzIHN0cmluZ1tdLFxuICAgIHJlZmVyZW5jZUltYWdlVHJhbnNmb3JtYXRpb246IFwiXCJcbiAgfSk7XG4gIFxuICAvLyBTZWN0aW9uIGxvYWRpbmcgc3RhdGVzXG4gIGNvbnN0IFtzZWN0aW9uTG9hZGluZ1N0YXRlcywgc2V0U2VjdGlvbkxvYWRpbmdTdGF0ZXNdID0gdXNlU3RhdGU8e1xuICAgIGZyb250Q292ZXI6ICdpZGxlJyB8ICdsb2FkaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2Vycm9yJztcbiAgICBiYWNrQ292ZXI6ICdpZGxlJyB8ICdsb2FkaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2Vycm9yJztcbiAgICBsZWZ0SW50ZXJpb3I6ICdpZGxlJyB8ICdsb2FkaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2Vycm9yJztcbiAgICByaWdodEludGVyaW9yOiAnaWRsZScgfCAnbG9hZGluZycgfCAnY29tcGxldGVkJyB8ICdlcnJvcic7XG4gIH0+KHtcbiAgICBmcm9udENvdmVyOiAnaWRsZScsXG4gICAgYmFja0NvdmVyOiAnaWRsZScsXG4gICAgbGVmdEludGVyaW9yOiAnaWRsZScsXG4gICAgcmlnaHRJbnRlcmlvcjogJ2lkbGUnLFxuICB9KTtcbiAgXG4gIC8vIENvdW50ZG93biBzdGF0ZVxuICBjb25zdCBbY291bnRkb3duLCBzZXRDb3VudGRvd25dID0gdXNlU3RhdGU8bnVtYmVyPigwKTtcbiAgY29uc3QgW2NvdW50ZG93bkludGVydmFsLCBzZXRDb3VudGRvd25JbnRlcnZhbF0gPSB1c2VTdGF0ZTxOb2RlSlMuVGltZW91dCB8IG51bGw+KG51bGwpO1xuXG4gIC8vIFVzZSBtb2R1bGFyIGhvb2tzXG4gIGNvbnN0IHdlYlNvY2tldCA9IHVzZVdlYlNvY2tldCgpO1xuICBjb25zdCBqb2JNYW5hZ2VtZW50ID0gdXNlSm9iTWFuYWdlbWVudCgpO1xuICBjb25zdCBmaWxlSGFuZGxpbmcgPSB1c2VGaWxlSGFuZGxpbmcoKTtcbiAgY29uc3QgbWVzc2FnZUdlbmVyYXRpb24gPSB1c2VNZXNzYWdlR2VuZXJhdGlvbihcbiAgICBzZWxlY3RlZFR5cGUsXG4gICAgY3VzdG9tQ2FyZFR5cGUsXG4gICAgc2VsZWN0ZWRUb25lLFxuICAgIHByb21wdCxcbiAgICB0b0ZpZWxkLFxuICAgIGZyb21GaWVsZCxcbiAgICByZWxhdGlvbnNoaXBGaWVsZCxcbiAgICBmaWxlSGFuZGxpbmcucGhvdG9BbmFseXNlc1xuICApO1xuICBcbiAgLy8gRHJhZnQgZ2VuZXJhdGlvbiBwcm9wc1xuICBjb25zdCBkcmFmdEdlbmVyYXRpb25Qcm9wcyA9IHtcbiAgICBzZWxlY3RlZFR5cGUsXG4gICAgY3VzdG9tQ2FyZFR5cGUsXG4gICAgc2VsZWN0ZWRUb25lLFxuICAgIHNlbGVjdGVkQXJ0aXN0aWNTdHlsZSxcbiAgICBjdXN0b21TdHlsZURlc2NyaXB0aW9uLFxuICAgIHNlbGVjdGVkRHJhZnRNb2RlbCxcbiAgICBzZWxlY3RlZEltYWdlTW9kZWwsXG4gICAgc2VsZWN0ZWRQYXBlclNpemUsXG4gICAgcHJvbXB0LFxuICAgIHRvRmllbGQsXG4gICAgZnJvbUZpZWxkLFxuICAgIHVzZXJFbWFpbCxcbiAgICBmaW5hbENhcmRNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5maW5hbENhcmRNZXNzYWdlLFxuICAgIGlzSGFuZHdyaXR0ZW5NZXNzYWdlLFxuICAgIGlzRnJvbnRCYWNrT25seSxcbiAgICByZWZlcmVuY2VJbWFnZVVybHM6IGZpbGVIYW5kbGluZy5yZWZlcmVuY2VJbWFnZVVybHMsXG4gICAgcGhvdG9BbmFseXNlczogZmlsZUhhbmRsaW5nLnBob3RvQW5hbHlzZXMsXG4gICAgc2F2ZUpvYlRvU3RvcmFnZTogam9iTWFuYWdlbWVudC5zYXZlSm9iVG9TdG9yYWdlLFxuICAgIHN1YnNjcmliZVRvSm9iOiB3ZWJTb2NrZXQuc3Vic2NyaWJlVG9Kb2IsXG4gICAgdW5zdWJzY3JpYmVGcm9tQWxsSm9iczogd2ViU29ja2V0LnVuc3Vic2NyaWJlRnJvbUFsbEpvYnMsXG4gICAgc3RhcnRFbGFwc2VkVGltZVRyYWNraW5nOiBqb2JNYW5hZ2VtZW50LnN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZyxcbiAgICBzdG9wRWxhcHNlZFRpbWVUcmFja2luZzogam9iTWFuYWdlbWVudC5zdG9wRWxhcHNlZFRpbWVUcmFja2luZyxcbiAgfTtcbiAgXG4gIGNvbnN0IGRyYWZ0R2VuZXJhdGlvbiA9IHVzZURyYWZ0R2VuZXJhdGlvbihkcmFmdEdlbmVyYXRpb25Qcm9wcyk7XG4gIFxuICAvLyBDYXJkIGdlbmVyYXRpb24gcHJvcHNcbiAgY29uc3QgY2FyZEdlbmVyYXRpb25Qcm9wcyA9IHtcbiAgICBzZWxlY3RlZFR5cGUsXG4gICAgY3VzdG9tQ2FyZFR5cGUsXG4gICAgc2VsZWN0ZWRUb25lLFxuICAgIHNlbGVjdGVkQXJ0aXN0aWNTdHlsZSxcbiAgICBjdXN0b21TdHlsZURlc2NyaXB0aW9uLFxuICAgIHNlbGVjdGVkSW1hZ2VNb2RlbCxcbiAgICBzZWxlY3RlZFBhcGVyU2l6ZSxcbiAgICBwcm9tcHQsXG4gICAgdG9GaWVsZCxcbiAgICBmcm9tRmllbGQsXG4gICAgdXNlckVtYWlsLFxuICAgIGZpbmFsQ2FyZE1lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLmZpbmFsQ2FyZE1lc3NhZ2UsXG4gICAgaXNIYW5kd3JpdHRlbk1lc3NhZ2UsXG4gICAgaXNGcm9udEJhY2tPbmx5LFxuICAgIHJlZmVyZW5jZUltYWdlVXJsczogZmlsZUhhbmRsaW5nLnJlZmVyZW5jZUltYWdlVXJscyxcbiAgICBwaG90b0FuYWx5c2VzOiBmaWxlSGFuZGxpbmcucGhvdG9BbmFseXNlcyxcbiAgICBudW1iZXJPZkNhcmRzLFxuICAgIHNhdmVKb2JUb1N0b3JhZ2U6IGpvYk1hbmFnZW1lbnQuc2F2ZUpvYlRvU3RvcmFnZSxcbiAgICByZW1vdmVKb2JGcm9tU3RvcmFnZTogam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZSxcbiAgICBzdWJzY3JpYmVUb0pvYjogd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iLFxuICAgIHN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZzogam9iTWFuYWdlbWVudC5zdGFydEVsYXBzZWRUaW1lVHJhY2tpbmcsXG4gICAgc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmc6IGpvYk1hbmFnZW1lbnQuc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmcsXG4gICAgc2V0Q3VycmVudEpvYklkOiBqb2JNYW5hZ2VtZW50LnNldEN1cnJlbnRKb2JJZCxcbiAgICBzZXRJc0RyYWZ0TW9kZTogZHJhZnRHZW5lcmF0aW9uLnNldElzRHJhZnRNb2RlLFxuICAgIHNldERyYWZ0Q2FyZHM6IGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENhcmRzLFxuICAgIHNldFNlbGVjdGVkRHJhZnRJbmRleDogZHJhZnRHZW5lcmF0aW9uLnNldFNlbGVjdGVkRHJhZnRJbmRleCxcbiAgICBzZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQ6IGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQsXG4gICAgc2V0UHJldmlld2luZ0RyYWZ0SW5kZXg6IGRyYWZ0R2VuZXJhdGlvbi5zZXRQcmV2aWV3aW5nRHJhZnRJbmRleCxcbiAgICBzZXREcmFmdENvbXBsZXRpb25TaG93bjogZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvblNob3duLFxuICAgIHNldERyYWZ0Q29tcGxldGlvbkNvdW50OiBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uQ291bnQsXG4gIH07XG4gIFxuICBjb25zdCBjYXJkR2VuZXJhdGlvbiA9IHVzZUNhcmRHZW5lcmF0aW9uKGNhcmRHZW5lcmF0aW9uUHJvcHMpO1xuXG4gIC8vIEhhbmRsZSBqb2IgdXBkYXRlcyBmcm9tIFdlYlNvY2tldFxuICBjb25zdCBoYW5kbGVKb2JVcGRhdGUgPSB1c2VDYWxsYmFjaygoZGF0YTogYW55KSA9PiB7XG4gICAgY29uc3QgeyBqb2JfaWQsIHN0YXR1cywgcHJvZ3Jlc3MsIGNhcmREYXRhLCBlcnJvciwgY29tcGxldGVkQXQgfSA9IGRhdGE7XG4gICAgXG4gICAgaWYgKCFqb2JfaWQpIHJldHVybjtcbiAgICBcbiAgICAvLyBTa2lwIHVwZGF0ZXMgaWYgd2UncmUgc3RpbGwgcmVzdG9yaW5nIGpvYnMgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICBpZiAoaXNSZXN0b3JpbmdKb2JzKSB7XG4gICAgICBjb25zb2xlLmxvZygn4o+zIFNraXBwaW5nIGpvYiB1cGRhdGUgZHVyaW5nIHJlc3RvcmF0aW9uOicsIGpvYl9pZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBkcmFmdCBqb2JcbiAgICBjb25zdCBpc0RyYWZ0Sm9iID0gam9iX2lkLnN0YXJ0c1dpdGgoJ2RyYWZ0LScpO1xuICAgIGNvbnN0IGRyYWZ0SW5kZXggPSBpc0RyYWZ0Sm9iID8gcGFyc2VJbnQoam9iX2lkLnNwbGl0KCctJylbMV0pIDogLTE7XG4gICAgXG4gICAgLy8gRmlsdGVyIG91dCB1cGRhdGVzIGZyb20gd3Jvbmcgam9iIHR5cGVcbiAgICAvLyBJZiB3ZSdyZSBpbiBkcmFmdCBtb2RlLCBvbmx5IHByb2Nlc3MgZHJhZnQgam9ic1xuICAgIC8vIElmIHdlJ3JlIGluIGZpbmFsIG1vZGUsIG9ubHkgcHJvY2VzcyBub24tZHJhZnQgam9ic1xuICAgIGNvbnN0IGlzSW5EcmFmdE1vZGUgPSBkcmFmdEdlbmVyYXRpb24uaXNEcmFmdE1vZGU7XG4gICAgaWYgKGlzSW5EcmFmdE1vZGUgJiYgIWlzRHJhZnRKb2IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5qrIElnbm9yaW5nIG5vbi1kcmFmdCBqb2IgdXBkYXRlIGluIGRyYWZ0IG1vZGU6Jywgam9iX2lkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFpc0luRHJhZnRNb2RlICYmIGlzRHJhZnRKb2IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5qrIElnbm9yaW5nIGRyYWZ0IGpvYiB1cGRhdGUgaW4gZmluYWwgbW9kZTonLCBqb2JfaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+UhCBQcm9jZXNzaW5nIGpvYiB1cGRhdGU6JywgeyBqb2JfaWQsIHN0YXR1cywgaXNEcmFmdEpvYiwgZHJhZnRJbmRleCwgcHJvZ3Jlc3MgfSk7XG4gICAgXG4gICAgLy8gVXBkYXRlIHByb2dyZXNzIGlmIHByb3ZpZGVkXG4gICAgaWYgKHByb2dyZXNzKSB7XG4gICAgICAvLyBJTVBPUlRBTlQ6IERvbid0IHNob3cgXCJHZW5lcmF0aW9uIGNvbXBsZXRlIVwiIHVudGlsIHdlJ3ZlIGFjdHVhbGx5IHByb2Nlc3NlZCB0aGUgY2FyZFxuICAgICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgVUkgZnJvbSBzaG93aW5nIGNvbXBsZXRpb24gYmVmb3JlIHRoZSBjYXJkIGlzIHJlYWR5XG4gICAgICBpZiAocHJvZ3Jlc3MuaW5jbHVkZXMoJ0dlbmVyYXRpb24gY29tcGxldGUhJykgJiYgc3RhdHVzID09PSAnY29tcGxldGVkJyAmJiAhaXNEcmFmdEpvYikge1xuICAgICAgICBjb25zb2xlLmxvZygn4o+477iPIEhvbGRpbmcgXCJHZW5lcmF0aW9uIGNvbXBsZXRlIVwiIG1lc3NhZ2UgdW50aWwgY2FyZCBpcyBwcm9jZXNzZWQnKTtcbiAgICAgICAgLy8gRG9uJ3QgdXBkYXRlIHRoZSBwcm9ncmVzcyBtZXNzYWdlIHlldCAtIGl0IHdpbGwgYmUgc2V0IGluIGhhbmRsZUZpbmFsQ2FyZENvbXBsZXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhwcm9ncmVzcyk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+TiiBQcm9ncmVzcyBtZXNzYWdlOiAke3Byb2dyZXNzfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGVkJyAmJiBjYXJkRGF0YSkge1xuICAgICAgY29uc29sZS5sb2coJ/CfjokgSm9iIGNvbXBsZXRlZCEgQ2FyZCBkYXRhOicsIGNhcmREYXRhLCAnaXNEcmFmdEpvYjonLCBpc0RyYWZ0Sm9iKTtcbiAgICAgIFxuICAgICAgaWYgKGlzRHJhZnRKb2IgJiYgZHJhZnRJbmRleCA+PSAwKSB7XG4gICAgICAgIC8vIEhhbmRsZSBkcmFmdCBjYXJkIGNvbXBsZXRpb25cbiAgICAgICAgY29uc29sZS5sb2coYPCfjqggRHJhZnQgdmFyaWF0aW9uICR7ZHJhZnRJbmRleCArIDF9IGNvbXBsZXRlZCFgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBzdHlsZSBpbmZvIGZvciBzbWFydCBzdHlsZSBtb2RlXG4gICAgICAgIGxldCBzdHlsZUluZm86IHsgc3R5bGVOYW1lOiBzdHJpbmc7IHN0eWxlTGFiZWw6IHN0cmluZyB9IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc2VsZWN0ZWRBcnRpc3RpY1N0eWxlID09PSBcImFpLXNtYXJ0LXN0eWxlXCIpIHtcbiAgICAgICAgICBjb25zdCBwcmVkZWZpbmVkU3R5bGVzID0gW1xuICAgICAgICAgICAgXCJ3YXRlcmNvbG9yXCIsIFwiYm90YW5pY2FsXCIsIFwiY29taWMtYm9va1wiLCBcImRyZWFteS1mYW50YXN5XCIsIFwibWluaW1hbGlzdFwiXG4gICAgICAgICAgXTtcbiAgICAgICAgICBjb25zdCBzdHlsZUxhYmVscyA9IFtcbiAgICAgICAgICAgIFwi8J+OqCBXYXRlcmNvbG9yXCIsIFwi8J+MvyBCb3RhbmljYWxcIiwgXCLwn5KlIENvbWljIEJvb2tcIiwgXCLwn4y4IERyZWFteSBGYW50YXN5XCIsIFwi4pyoIE1pbmltYWxpc3RcIlxuICAgICAgICAgIF07XG4gICAgICAgICAgaWYgKGRyYWZ0SW5kZXggPj0gMCAmJiBkcmFmdEluZGV4IDwgcHJlZGVmaW5lZFN0eWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHN0eWxlSW5mbyA9IHtcbiAgICAgICAgICAgICAgc3R5bGVOYW1lOiBwcmVkZWZpbmVkU3R5bGVzW2RyYWZ0SW5kZXhdLFxuICAgICAgICAgICAgICBzdHlsZUxhYmVsOiBzdHlsZUxhYmVsc1tkcmFmdEluZGV4XVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkcmFmdENhcmQ6IEdlbmVyYXRlZENhcmQgPSB7XG4gICAgICAgICAgaWQ6IGBkcmFmdC0ke2RyYWZ0SW5kZXggKyAxfS0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICBwcm9tcHQ6IGNhcmREYXRhLnByb21wdCB8fCBgRHJhZnQgVmFyaWF0aW9uICR7ZHJhZnRJbmRleCArIDF9YCxcbiAgICAgICAgICBmcm9udENvdmVyOiBjYXJkRGF0YS5mcm9udENvdmVyIHx8IFwiXCIsXG4gICAgICAgICAgYmFja0NvdmVyOiBcIlwiLFxuICAgICAgICAgIGxlZnRQYWdlOiBcIlwiLFxuICAgICAgICAgIHJpZ2h0UGFnZTogXCJcIixcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgZ2VuZXJhdGVkUHJvbXB0czoge1xuICAgICAgICAgICAgZnJvbnRDb3ZlcjogY2FyZERhdGEuZ2VuZXJhdGVkUHJvbXB0cz8uZnJvbnRDb3ZlciB8fCBcIlwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdHlsZUluZm86IHN0eWxlSW5mb1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gU2ltcGxpZmllZCBkcmFmdCB0cmFja2luZyAtIHVzZSBmaXhlZCBhcnJheSBwb3NpdGlvbnNcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMocHJldiA9PiB7XG4gICAgICAgICAgY29uc3QgdXBkYXRlZCA9IFsuLi5wcmV2XTtcbiAgICAgICAgICAvLyBFbnN1cmUgYXJyYXkgaGFzIDUgc2xvdHNcbiAgICAgICAgICB3aGlsZSAodXBkYXRlZC5sZW5ndGggPCA1KSB7XG4gICAgICAgICAgICB1cGRhdGVkLnB1c2gobnVsbCBhcyBhbnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBQbGFjZSBkcmFmdCBhdCBpdHMgY29ycmVjdCBpbmRleFxuICAgICAgICAgIHVwZGF0ZWRbZHJhZnRJbmRleF0gPSBkcmFmdENhcmQ7XG4gICAgICAgICAgY29uc29sZS5sb2coYOKchSBEcmFmdCAke2RyYWZ0SW5kZXggKyAxfSBjb21wbGV0ZWQgYW5kIHN0b3JlZCBhdCBpbmRleCAke2RyYWZ0SW5kZXh9YCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2F2ZSBkcmFmdCB0byBsb2NhbFN0b3JhZ2Ugd2l0aCBleHBpcmF0aW9uXG4gICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCBqb2JEYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYGNhcmRKb2JfJHtqb2JfaWR9YCk7XG4gICAgICAgICAgICAgIGlmIChqb2JEYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9iID0gSlNPTi5wYXJzZShqb2JEYXRhKTtcbiAgICAgICAgICAgICAgICBqb2IuZHJhZnRDYXJkcyA9IFtkcmFmdENhcmRdO1xuICAgICAgICAgICAgICAgIGpvYi5kcmFmdEluZGV4ID0gZHJhZnRJbmRleDtcbiAgICAgICAgICAgICAgICBqb2IubGFzdFVwZGF0ZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgam9iLmV4cGlyZXNBdCA9IERhdGUubm93KCkgKyAoMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKTsgLy8gMzAgZGF5c1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBjYXJkSm9iXyR7am9iX2lkfWAsIEpTT04uc3RyaW5naWZ5KGpvYikpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBkcmFmdDonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNpbXBsaWZpZWQgY29tcGxldGlvbiB0cmFja2luZyAtIGNvdW50IHRoZSB1cGRhdGVkIGFycmF5IGluY2x1ZGluZyB0aGUgbmV3IGRyYWZ0XG4gICAgICAgIGNvbnN0IHVwZGF0ZWREcmFmdHMgPSBbLi4uZHJhZnRHZW5lcmF0aW9uLmRyYWZ0Q2FyZHNdO1xuICAgICAgICB1cGRhdGVkRHJhZnRzW2RyYWZ0SW5kZXhdID0gZHJhZnRDYXJkO1xuICAgICAgICBjb25zdCBjb21wbGV0ZWRDb3VudCA9IHVwZGF0ZWREcmFmdHMuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aDtcbiAgICAgICAgY29uc29sZS5sb2coYPCfk4ogRHJhZnQgcHJvZ3Jlc3M6ICR7Y29tcGxldGVkQ291bnR9LzUgdmFyaWF0aW9ucyBjb21wbGV0ZWApO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIHByb2dyZXNzXG4gICAgICAgIGNvbnN0IHByb2dyZXNzTXNnID0gY29tcGxldGVkQ291bnQgPT09IDUgXG4gICAgICAgICAgPyBcIkFsbCA1IHZhcmlhdGlvbnMgcmVhZHkhIENob29zZSB5b3VyIGZhdm9yaXRlIGJlbG93LlwiXG4gICAgICAgICAgOiBgJHtjb21wbGV0ZWRDb3VudH0vNSB2YXJpYXRpb25zIGNvbXBsZXRlLi4uJHtjb21wbGV0ZWRDb3VudCA+PSAyID8gXCIgWW91IGNhbiBzZWxlY3Qgb25lIG5vdyFcIiA6IFwiXCJ9YDtcbiAgICAgICAgXG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MocHJvZ3Jlc3NNc2cpO1xuICAgICAgICBcbiAgICAgICAgLy8gT3ZlcnJpZGUgdGltZS1iYXNlZCBwcm9ncmVzcyB3aXRoIHJlYWwgcHJvZ3Jlc3Mgd2hlbiBkcmFmdHMgY29tcGxldGVcbiAgICAgICAgLy8gRG9uJ3Qgb3ZlcnJpZGUgdGltZS1iYXNlZCBwcm9ncmVzc1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+OqCBEcmFmdCAke2NvbXBsZXRlZENvdW50fS81IGNvbXBsZXRlZGApO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIG1pbGVzdG9uZXNcbiAgICAgICAgaWYgKGNvbXBsZXRlZENvdW50ID09PSAxKSB7XG4gICAgICAgICAgc2Nyb2xsVG9DYXJkUHJldmlldygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tcGxldGVkQ291bnQgPT09IDUgJiYgIWRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQpIHtcbiAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKGZhbHNlKTtcbiAgICAgICAgICBqb2JNYW5hZ2VtZW50LnN0b3BFbGFwc2VkVGltZVRyYWNraW5nKCk7XG4gICAgICAgICAgdG9hc3Quc3VjY2VzcyhcIvCfjqggQWxsIDUgZnJvbnQgY292ZXIgdmFyaWF0aW9ucyByZWFkeSEgQ2hvb3NlIHlvdXIgZmF2b3JpdGUgYmVsb3cuXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBLZWVwIGRyYWZ0IGpvYnMgaW4gc3RvcmFnZSBmb3IgbGF0ZXIgcmV0cmlldmFsXG4gICAgICAgIC8vIE9ubHkgdW5zdWJzY3JpYmUgZnJvbSBXZWJTb2NrZXRcbiAgICAgICAgd2ViU29ja2V0LnVuc3Vic2NyaWJlRnJvbUpvYihqb2JfaWQpO1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEtlZXBpbmcgZHJhZnQgam9iICR7am9iX2lkfSBpbiBzdG9yYWdlIGZvciBmdXR1cmUgYWNjZXNzYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgZmluYWwgY2FyZCBjb21wbGV0aW9uXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEZpbmFsIGNhcmQgY29tcGxldGlvbiBkZXRlY3RlZC4gQ2FyZCBkYXRhIHN0cnVjdHVyZTonLCB7XG4gICAgICAgICAgaGFzQ2FyZERhdGE6ICEhY2FyZERhdGEsXG4gICAgICAgICAgY2FyZERhdGFLZXlzOiBPYmplY3Qua2V5cyhjYXJkRGF0YSB8fCB7fSksXG4gICAgICAgICAgZnJvbnRDb3ZlcjogY2FyZERhdGE/LmZyb250Q292ZXIgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgYmFja0NvdmVyOiBjYXJkRGF0YT8uYmFja0NvdmVyID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgIGxlZnRJbnRlcmlvcjogY2FyZERhdGE/LmxlZnRJbnRlcmlvciA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgICByaWdodEludGVyaW9yOiBjYXJkRGF0YT8ucmlnaHRJbnRlcmlvciA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgICBsZWZ0UGFnZTogY2FyZERhdGE/LmxlZnRQYWdlID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnLFxuICAgICAgICAgIHJpZ2h0UGFnZTogY2FyZERhdGE/LnJpZ2h0UGFnZSA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OdIEZ1bGwgY2FyZCBkYXRhOicsIEpTT04uc3RyaW5naWZ5KGNhcmREYXRhLCBudWxsLCAyKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBNYXAgYmFja2VuZCBmaWVsZCBuYW1lcyB0byBmcm9udGVuZCBmaWVsZCBuYW1lc1xuICAgICAgICBjb25zdCBtYXBwZWRDYXJkRGF0YSA9IHtcbiAgICAgICAgICAuLi5jYXJkRGF0YSxcbiAgICAgICAgICBsZWZ0SW50ZXJpb3I6IGNhcmREYXRhLmxlZnRJbnRlcmlvciB8fCBjYXJkRGF0YS5sZWZ0UGFnZSxcbiAgICAgICAgICByaWdodEludGVyaW9yOiBjYXJkRGF0YS5yaWdodEludGVyaW9yIHx8IGNhcmREYXRhLnJpZ2h0UGFnZSxcbiAgICAgICAgICAvLyBLZWVwIG9yaWdpbmFsIGZpZWxkcyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgICAgICAgIGxlZnRQYWdlOiBjYXJkRGF0YS5sZWZ0UGFnZSB8fCBjYXJkRGF0YS5sZWZ0SW50ZXJpb3IsXG4gICAgICAgICAgcmlnaHRQYWdlOiBjYXJkRGF0YS5yaWdodFBhZ2UgfHwgY2FyZERhdGEucmlnaHRJbnRlcmlvcixcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIE1hcHBlZCBjYXJkIGRhdGEgZm9yIGZyb250ZW5kIGNvbXBhdGliaWxpdHk6Jywge1xuICAgICAgICAgIGZyb250Q292ZXI6IG1hcHBlZENhcmREYXRhLmZyb250Q292ZXIgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgYmFja0NvdmVyOiBtYXBwZWRDYXJkRGF0YS5iYWNrQ292ZXIgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgbGVmdEludGVyaW9yOiBtYXBwZWRDYXJkRGF0YS5sZWZ0SW50ZXJpb3IgPyAnUHJlc2VudCcgOiAnTWlzc2luZycsXG4gICAgICAgICAgcmlnaHRJbnRlcmlvcjogbWFwcGVkQ2FyZERhdGEucmlnaHRJbnRlcmlvciA/ICdQcmVzZW50JyA6ICdNaXNzaW5nJyxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDYWxsIHRoZSBjb21wbGV0aW9uIGhhbmRsZXJcbiAgICAgICAgY29uc29sZS5sb2coJ/CfmoAgQ2FsbGluZyBoYW5kbGVGaW5hbENhcmRDb21wbGV0aW9uLi4uJyk7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLmhhbmRsZUZpbmFsQ2FyZENvbXBsZXRpb24obWFwcGVkQ2FyZERhdGEpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2F2ZSBmaW5hbCBjYXJkIG1ldGFkYXRhIHRvIGxvY2FsU3RvcmFnZSBmb3IgcmVjb3ZlcnkgKHdpdGhvdXQgbGFyZ2UgaW1hZ2VzKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGZpbmFsQ2FyZE1ldGFkYXRhID0ge1xuICAgICAgICAgICAgam9iSWQ6IGpvYl9pZCxcbiAgICAgICAgICAgIGNvbXBsZXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgaXNGaW5hbENhcmQ6IHRydWUsXG4gICAgICAgICAgICBwcm9tcHQ6IGNhcmREYXRhLnByb21wdCxcbiAgICAgICAgICAgIGlkOiBjYXJkRGF0YS5pZCxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogY2FyZERhdGEuY3JlYXRlZEF0LFxuICAgICAgICAgICAgLy8gRG9uJ3Qgc2F2ZSBiYXNlNjQgaW1hZ2VzIHRvIGF2b2lkIHF1b3RhIGlzc3Vlc1xuICAgICAgICAgICAgaGFzSW1hZ2VzOiB7XG4gICAgICAgICAgICAgIGZyb250Q292ZXI6ICEhY2FyZERhdGEuZnJvbnRDb3ZlcixcbiAgICAgICAgICAgICAgYmFja0NvdmVyOiAhIWNhcmREYXRhLmJhY2tDb3ZlcixcbiAgICAgICAgICAgICAgbGVmdFBhZ2U6ICEhY2FyZERhdGEubGVmdFBhZ2UsXG4gICAgICAgICAgICAgIHJpZ2h0UGFnZTogISFjYXJkRGF0YS5yaWdodFBhZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsYXN0Q29tcGxldGVkQ2FyZCcsIEpTT04uc3RyaW5naWZ5KGZpbmFsQ2FyZE1ldGFkYXRhKSk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/Cfkr4gU2F2ZWQgZmluYWwgY2FyZCBtZXRhZGF0YSB0byBsb2NhbFN0b3JhZ2UgKHdpdGhvdXQgaW1hZ2VzKScpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGZpbmFsIGNhcmQgbWV0YWRhdGE6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBqb2JNYW5hZ2VtZW50LnJlbW92ZUpvYkZyb21TdG9yYWdlKGpvYl9pZCk7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEpvYklkKG51bGwpO1xuICAgICAgICB3ZWJTb2NrZXQudW5zdWJzY3JpYmVGcm9tSm9iKGpvYl9pZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICdmYWlsZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgSm9iIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIGlmIChpc0RyYWZ0Sm9iICYmIGRyYWZ0SW5kZXggPj0gMCkge1xuICAgICAgICB0b2FzdC5lcnJvcihgRHJhZnQgdmFyaWF0aW9uICR7ZHJhZnRJbmRleCArIDF9IGZhaWxlZC4gQ29udGludWluZyB3aXRoIG90aGVycy4uLmApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9hc3QuZXJyb3IoXCLinYwgQ2FyZCBnZW5lcmF0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQoZmFsc2UpO1xuICAgICAgICBqb2JNYW5hZ2VtZW50LnN0b3BFbGFwc2VkVGltZVRyYWNraW5nKCk7XG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhcIlwiKTtcbiAgICAgICAgLy8gRG9uJ3QgcmVzZXQgcHJvZ3Jlc3MgLSBsZXQgdGltZS1iYXNlZCBwcm9ncmVzcyBjb250aW51ZVxuICAgICAgICAvLyBqb2JNYW5hZ2VtZW50LnNldFByb2dyZXNzUGVyY2VudGFnZSgwKTtcbiAgICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQobnVsbCk7XG4gICAgICAgIHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21Kb2Ioam9iX2lkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZShqb2JfaWQpO1xuICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAnbm90X2ZvdW5kJykge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gSm9iIG5vdCBmb3VuZCBvbiBzZXJ2ZXIsIGNsZWFuaW5nIHVwIHN0YWxlIHJlZmVyZW5jZTonLCBqb2JfaWQpO1xuICAgICAgXG4gICAgICAvLyBDbGVhbiB1cCBzdGFsZSBqb2IgcmVmZXJlbmNlXG4gICAgICBpZiAod2ViU29ja2V0LmN1cnJlbnRKb2JSZWYuY3VycmVudCA9PT0gam9iX2lkKSB7XG4gICAgICAgIHdlYlNvY2tldC5jdXJyZW50Sm9iUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZXNldCBVSSBzdGF0ZSBpZiB0aGlzIHdhcyB0aGUgY3VycmVudCBqb2JcbiAgICAgIGlmIChqb2JNYW5hZ2VtZW50LmN1cnJlbnRKb2JJZCA9PT0gam9iX2lkKSB7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEpvYklkKG51bGwpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcoZmFsc2UpO1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkKGZhbHNlKTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKFwiXCIpO1xuICAgICAgICAvLyBEb24ndCByZXNldCBwcm9ncmVzcyAtIGxldCB0aW1lLWJhc2VkIHByb2dyZXNzIGNvbnRpbnVlXG4gICAgICAgIC8vIGpvYk1hbmFnZW1lbnQuc2V0UHJvZ3Jlc3NQZXJjZW50YWdlKDApO1xuICAgICAgICBqb2JNYW5hZ2VtZW50LnN0b3BFbGFwc2VkVGltZVRyYWNraW5nKCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENsZWFuIHVwIHN0b3JhZ2VcbiAgICAgIGpvYk1hbmFnZW1lbnQucmVtb3ZlSm9iRnJvbVN0b3JhZ2Uoam9iX2lkKTtcbiAgICAgIHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21Kb2Ioam9iX2lkKTtcbiAgICB9XG4gIH0sIFtzZWxlY3RlZEFydGlzdGljU3R5bGUsIGRyYWZ0R2VuZXJhdGlvbiwgY2FyZEdlbmVyYXRpb24sIGpvYk1hbmFnZW1lbnQsIHdlYlNvY2tldCwgaXNSZXN0b3JpbmdKb2JzXSk7XG5cbiAgLy8gU2V0IHVwIFdlYlNvY2tldCBqb2IgdXBkYXRlIGhhbmRsZXJcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB3ZWJTb2NrZXQuc2V0Sm9iVXBkYXRlSGFuZGxlcihoYW5kbGVKb2JVcGRhdGUpO1xuICB9LCBbd2ViU29ja2V0LCBoYW5kbGVKb2JVcGRhdGVdKTtcblxuICAvLyBUcmFjayBpZiB3ZSd2ZSBhbHJlYWR5IGxvZ2dlZCB0aGUgc3RhbGUgam9iIG1lc3NhZ2VcbiAgY29uc3Qgc3RhbGVKb2JMb2dnZWRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuXG4gIC8vIEF1dG8tcmVjb25uZWN0IFdlYlNvY2tldCBpZiBkaXNjb25uZWN0ZWQgZHVyaW5nIGFjdGl2ZSBnZW5lcmF0aW9uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF3ZWJTb2NrZXQuaXNTb2NrZXRDb25uZWN0ZWQgJiYgXG4gICAgICAgIChjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcgfHwgZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZ0ZpbmFsQ2FyZCkgJiYgXG4gICAgICAgIHdlYlNvY2tldC5jdXJyZW50Sm9iUmVmLmN1cnJlbnQpIHtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGdlbmVyYXRpb24gaGFzIGJlZW4gcnVubmluZyBmb3IgbW9yZSB0aGFuIDUgbWludXRlc1xuICAgICAgaWYgKGpvYk1hbmFnZW1lbnQuZ2VuZXJhdGlvblN0YXJ0VGltZSkge1xuICAgICAgICBjb25zdCBqb2JBZ2UgPSBEYXRlLm5vdygpIC0gam9iTWFuYWdlbWVudC5nZW5lcmF0aW9uU3RhcnRUaW1lO1xuICAgICAgICBpZiAoam9iQWdlID4gNSAqIDYwICogMTAwMCkgeyAvLyA1IG1pbnV0ZXNcbiAgICAgICAgICBpZiAoIXN0YWxlSm9iTG9nZ2VkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfij7AgSm9iIGlzIG9sZGVyIHRoYW4gNSBtaW51dGVzLCBzdG9wcGluZyByZWNvbm5lY3Rpb24gYXR0ZW1wdHMnKTtcbiAgICAgICAgICAgIHN0YWxlSm9iTG9nZ2VkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDbGVhbiB1cCBzdGFsZSBqb2JcbiAgICAgICAgICAgIGNvbnN0IGpvYklkID0gd2ViU29ja2V0LmN1cnJlbnRKb2JSZWYuY3VycmVudDtcbiAgICAgICAgICAgIGlmIChqb2JJZCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+nuSBDbGVhbmluZyB1cCBzdGFsZSBqb2I6Jywgam9iSWQpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gbG9jYWxTdG9yYWdlIChvbmx5IGlmIG5vdCBhIGRyYWZ0IGpvYilcbiAgICAgICAgICAgICAgaWYgKCFqb2JJZC5zdGFydHNXaXRoKCdkcmFmdC0nKSkge1xuICAgICAgICAgICAgICAgIGpvYk1hbmFnZW1lbnQucmVtb3ZlSm9iRnJvbVN0b3JhZ2Uoam9iSWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBSZXNldCBnZW5lcmF0aW9uIHN0YXRlc1xuICAgICAgICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkKGZhbHNlKTtcbiAgICAgICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzRHJhZnRNb2RlKGZhbHNlKTtcbiAgICAgICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMoW10pO1xuICAgICAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uQ291bnQoMCk7XG4gICAgICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25TaG93bihmYWxzZSk7XG4gICAgICAgICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEpvYklkKG51bGwpO1xuICAgICAgICAgICAgICBqb2JNYW5hZ2VtZW50LnNldEdlbmVyYXRpb25Qcm9ncmVzcygnJyk7XG4gICAgICAgICAgICAgIC8vIERvbid0IHJlc2V0IHByb2dyZXNzIC0gbGV0IHRpbWUtYmFzZWQgcHJvZ3Jlc3MgY29udGludWVcbiAgICAgICAgLy8gam9iTWFuYWdlbWVudC5zZXRQcm9ncmVzc1BlcmNlbnRhZ2UoMCk7XG4gICAgICAgICAgICAgIGpvYk1hbmFnZW1lbnQuc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmcoKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFVuc3Vic2NyaWJlIGZyb20gam9iXG4gICAgICAgICAgICAgIHdlYlNvY2tldC51bnN1YnNjcmliZUZyb21Kb2Ioam9iSWQpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gU2hvdyBlcnJvciB0b2FzdFxuICAgICAgICAgICAgICB0b2FzdC5lcnJvcignQ2FyZCBnZW5lcmF0aW9uIHRpbWVkIG91dC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFdlYlNvY2tldCBkaXNjb25uZWN0ZWQgZHVyaW5nIGdlbmVyYXRpb24sIGF0dGVtcHRpbmcgcmVjb25uZWN0Li4uJyk7XG4gICAgICBjb25zdCByZWNvbm5lY3RUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB3ZWJTb2NrZXQuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmUtc3Vic2NyaWJlIHRvIGN1cnJlbnQgam9iIGFmdGVyIHJlY29ubmVjdGlvblxuICAgICAgICBjb25zdCBqb2JJZCA9IHdlYlNvY2tldC5jdXJyZW50Sm9iUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmIChqb2JJZCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/Cfk6EgUmUtc3Vic2NyaWJpbmcgdG8gam9iIGFmdGVyIHJlY29ubmVjdDonLCBqb2JJZCk7XG4gICAgICAgICAgICB3ZWJTb2NrZXQuc3Vic2NyaWJlVG9Kb2Ioam9iSWQpO1xuICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9XG4gICAgICB9LCAyMDAwKTtcbiAgICAgIFxuICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dChyZWNvbm5lY3RUaW1lcik7XG4gICAgfVxuICB9LCBbd2ViU29ja2V0LCBjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcsIGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQsIGpvYk1hbmFnZW1lbnQuZ2VuZXJhdGlvblN0YXJ0VGltZV0pO1xuXG4gIC8vIFJlc2V0IHN0YWxlIGpvYiBmbGFnIHdoZW4gZ2VuZXJhdGlvbiBzdGFydHNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2FyZEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nIHx8IGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQpIHtcbiAgICAgIHN0YWxlSm9iTG9nZ2VkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICB9XG4gIH0sIFtjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcsIGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmRdKTtcblxuICAvLyBNb25pdG9yIGZvciBzdGFsZSBqb2IgdXBkYXRlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICgoY2FyZEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nIHx8IGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQpICYmIFxuICAgICAgICB3ZWJTb2NrZXQuY3VycmVudEpvYlJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zdCBjaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0VXBkYXRlID0gRGF0ZS5ub3coKSAtIHdlYlNvY2tldC5sYXN0Sm9iVXBkYXRlUmVmLmN1cnJlbnQ7XG4gICAgICAgIGNvbnN0IGpvYklkID0gd2ViU29ja2V0LmN1cnJlbnRKb2JSZWYuY3VycmVudDtcbiAgICAgICAgXG4gICAgICAgIC8vIFZlcnkgYWdncmVzc2l2ZSBjaGVja2luZyB3aGVuIGF0IDk1JSsgcHJvZ3Jlc3NcbiAgICAgICAgaWYgKGpvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlID49IDk1ICYmIHRpbWVTaW5jZUxhc3RVcGRhdGUgPiA1MDAwKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gTm8gdXBkYXRlcyBmb3IgJHtNYXRoLnJvdW5kKHRpbWVTaW5jZUxhc3RVcGRhdGUvMTAwMCl9cyBhdCAke2pvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlfSUgcHJvZ3Jlc3MgLSBjaGVja2luZyBqb2Igc3RhdHVzLi4uYCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGpvYklkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2pvYi1zdGF0dXMvJHtqb2JJZH1gKTtcbiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9iU3RhdHVzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OKIERpcmVjdCBqb2Igc3RhdHVzIGNoZWNrOicsIGpvYlN0YXR1cyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGpvYlN0YXR1cy5zdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmIGpvYlN0YXR1cy5jYXJkRGF0YSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBKb2IgaXMgYWN0dWFsbHkgY29tcGxldGVkISBQcm9jZXNzaW5nIHJlc3VsdC4uLicpO1xuICAgICAgICAgICAgICAgICAgaGFuZGxlSm9iVXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgam9iX2lkOiBqb2JJZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6ICdDYXJkIGdlbmVyYXRpb24gY29tcGxldGUhJyxcbiAgICAgICAgICAgICAgICAgICAgY2FyZERhdGE6IGpvYlN0YXR1cy5jYXJkRGF0YVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47IC8vIEV4aXQgZWFybHkgb24gY29tcGxldGlvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNoZWNrIGpvYiBzdGF0dXM6JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBNb3JlIGFnZ3Jlc3NpdmUgY2hlY2tpbmcgd2hlbiBhdCBoaWdoIHByb2dyZXNzXG4gICAgICAgIGVsc2UgaWYgKGpvYk1hbmFnZW1lbnQucHJvZ3Jlc3NQZXJjZW50YWdlID49IDkwICYmIHRpbWVTaW5jZUxhc3RVcGRhdGUgPiAxMDAwMCkge1xuICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIE5vIHVwZGF0ZXMgZm9yICR7TWF0aC5yb3VuZCh0aW1lU2luY2VMYXN0VXBkYXRlLzEwMDApfXMgYXQgJHtqb2JNYW5hZ2VtZW50LnByb2dyZXNzUGVyY2VudGFnZX0lIHByb2dyZXNzYCk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGpvYklkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2pvYi1zdGF0dXMvJHtqb2JJZH1gKTtcbiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgam9iU3RhdHVzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OKIERpcmVjdCBqb2Igc3RhdHVzIGNoZWNrOicsIGpvYlN0YXR1cyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGpvYlN0YXR1cy5zdGF0dXMgPT09ICdjb21wbGV0ZWQnICYmIGpvYlN0YXR1cy5jYXJkRGF0YSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBKb2IgaXMgYWN0dWFsbHkgY29tcGxldGVkISBQcm9jZXNzaW5nIHJlc3VsdC4uLicpO1xuICAgICAgICAgICAgICAgICAgaGFuZGxlSm9iVXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgam9iX2lkOiBqb2JJZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6ICdDYXJkIGdlbmVyYXRpb24gY29tcGxldGUhJyxcbiAgICAgICAgICAgICAgICAgICAgY2FyZERhdGE6IGpvYlN0YXR1cy5jYXJkRGF0YVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47IC8vIEV4aXQgZWFybHkgb24gY29tcGxldGlvblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNoZWNrIGpvYiBzdGF0dXM6JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU3RhbmRhcmQgc3RhbGUgdXBkYXRlIGNoZWNrXG4gICAgICAgIGlmICh0aW1lU2luY2VMYXN0VXBkYXRlID4gMzAwMDApIHsgLy8gMzAgc2Vjb25kcyB3aXRob3V0IHVwZGF0ZVxuICAgICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIE5vIGpvYiB1cGRhdGVzIGZvciAzMCBzZWNvbmRzLCBjaGVja2luZyBjb25uZWN0aW9uLi4uJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCF3ZWJTb2NrZXQuaXNTb2NrZXRDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFdlYlNvY2tldCBkaXNjb25uZWN0ZWQsIHJlY29ubmVjdGluZy4uLicpO1xuICAgICAgICAgICAgd2ViU29ja2V0LmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGpvYklkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+ToSBSZS1zdWJzY3JpYmluZyB0byBqb2IgZHVlIHRvIHN0YWxlIHVwZGF0ZXM6Jywgam9iSWQpO1xuICAgICAgICAgICAgd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iKGpvYklkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHRpbWVyXG4gICAgICAgICAgd2ViU29ja2V0Lmxhc3RKb2JVcGRhdGVSZWYuY3VycmVudCA9IERhdGUubm93KCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDMwMDApOyAvLyBDaGVjayBldmVyeSAzIHNlY29uZHMgZm9yIGZhc3RlciBkZXRlY3Rpb24gYXQgaGlnaCBwcm9ncmVzc1xuICAgICAgXG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChjaGVja0ludGVydmFsKTtcbiAgICB9XG4gIH0sIFtjYXJkR2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcsIGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmdGaW5hbENhcmQsIFxuICAgICAgd2ViU29ja2V0LCBqb2JNYW5hZ2VtZW50LnByb2dyZXNzUGVyY2VudGFnZSwgaGFuZGxlSm9iVXBkYXRlXSk7XG5cbiAgLy8gT0xEOiBDb21wbGV4IGpvYiByZXN0b3JhdGlvbiAtIGtlZXBpbmcgZm9yIHJlZmVyZW5jZSBidXQgbm90IHVzaW5nXG4gIGNvbnN0IGNoZWNrUGVuZGluZ0pvYnMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ/CflIQgU3RhcnRpbmcgam9iIHJlc3RvcmF0aW9uLi4uJyk7XG4gICAgc2V0SXNSZXN0b3JpbmdKb2JzKHRydWUpO1xuICAgIFxuICAgIGNvbnN0IHBlbmRpbmdKb2JzID0gYXdhaXQgam9iTWFuYWdlbWVudC5jaGVja1BlbmRpbmdKb2JzKCk7XG4gICAgXG4gICAgaWYgKHBlbmRpbmdKb2JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5sb2coJ+KchSBObyBwZW5kaW5nIGpvYnMgdG8gcmVzdG9yZScpO1xuICAgICAgc2V0SXNSZXN0b3JpbmdKb2JzKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/CflIQgRm91bmQgcGVuZGluZyBqb2JzIHRvIHJlc3RvcmU6JywgcGVuZGluZ0pvYnMpO1xuICAgIFxuICAgIC8vIFNlcGFyYXRlIGRyYWZ0IGpvYnMgZnJvbSBmaW5hbCBqb2JzXG4gICAgY29uc3QgZHJhZnRKb2JzID0gcGVuZGluZ0pvYnMuZmlsdGVyKCh7IGpvYklkIH0pID0+IGpvYklkLnN0YXJ0c1dpdGgoJ2RyYWZ0LScpKTtcbiAgICBjb25zdCBmaW5hbEpvYnMgPSBwZW5kaW5nSm9icy5maWx0ZXIoKHsgam9iSWQgfSkgPT4gIWpvYklkLnN0YXJ0c1dpdGgoJ2RyYWZ0LScpKTtcbiAgICBcbiAgICAvLyBQcm9jZXNzIGRyYWZ0IGpvYnMgZmlyc3QgdG8gcmVzdG9yZSBkcmFmdCBzdGF0ZVxuICAgIGlmIChkcmFmdEpvYnMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coYPCfjqggRm91bmQgJHtkcmFmdEpvYnMubGVuZ3RofSBkcmFmdCBqb2JzIHRvIHJlc3RvcmVgKTtcbiAgICAgIFxuICAgICAgLy8gQ29sbGVjdCBhbGwgZHJhZnQgY2FyZHMgZnJvbSBhbGwgZHJhZnQgam9ic1xuICAgICAgY29uc3QgZHJhZnRzQnlJbmRleDogKEdlbmVyYXRlZENhcmQgfCBudWxsKVtdID0gbmV3IEFycmF5KDUpLmZpbGwobnVsbCk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgeyBqb2IgfSBvZiBkcmFmdEpvYnMpIHtcbiAgICAgICAgaWYgKGpvYi5kcmFmdENhcmRzICYmIEFycmF5LmlzQXJyYXkoam9iLmRyYWZ0Q2FyZHMpICYmIGpvYi5kcmFmdENhcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBkcmFmdENhcmQgPSBqb2IuZHJhZnRDYXJkc1swXTsgLy8gRWFjaCBqb2Igc3RvcmVzIG9uZSBkcmFmdFxuICAgICAgICAgIGNvbnN0IGRyYWZ0SW5kZXggPSBqb2IuZHJhZnRJbmRleDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZHJhZnRJbmRleCA+PSAwICYmIGRyYWZ0SW5kZXggPCA1KSB7XG4gICAgICAgICAgICBkcmFmdHNCeUluZGV4W2RyYWZ0SW5kZXhdID0gZHJhZnRDYXJkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZXQgbm9uLW51bGwgZHJhZnRzIGZvciBjb3VudGluZ1xuICAgICAgY29uc3QgYWxsRHJhZnRDYXJkcyA9IGRyYWZ0c0J5SW5kZXguZmlsdGVyKEJvb2xlYW4pIGFzIEdlbmVyYXRlZENhcmRbXTtcbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBhbGwgZHJhZnQgY2FyZHMgYXQgb25jZVxuICAgICAgaWYgKGFsbERyYWZ0Q2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+UhCBSZXN0b3JpbmcgJHthbGxEcmFmdENhcmRzLmxlbmd0aH0gZHJhZnQgY2FyZHMgZnJvbSAke2RyYWZ0Sm9icy5sZW5ndGh9IGpvYnNgKTtcbiAgICAgICAgLy8gT25seSBzZXQgZHJhZnQgbW9kZSB3aGVuIHdlIGhhdmUgYWN0dWFsIGNhcmRzXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn46vIFNldHRpbmcgaXNEcmFmdE1vZGUgdG8gdHJ1ZSAtIGRyYWZ0IGNhcmRzIGZvdW5kJyk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0RyYWZ0TW9kZSh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVzZSB0aGUgZHJhZnRzQnlJbmRleCB3aGljaCBhbHJlYWR5IGhhcyBkcmFmdHMgYXQgY29ycmVjdCBwb3NpdGlvbnNcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMoZHJhZnRzQnlJbmRleCk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25Db3VudChhbGxEcmFmdENhcmRzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgYXBwcm9wcmlhdGUgcHJvZ3Jlc3Mgc3RhdGVcbiAgICAgICAgaWYgKGFsbERyYWZ0Q2FyZHMubGVuZ3RoID09PSA1KSB7XG4gICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvblNob3duKHRydWUpO1xuICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcoZmFsc2UpO1xuICAgICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhcIlwiKTtcbiAgICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MoXCJcIik7XG4gICAgICAgICAgLy8gVGltZS1iYXNlZCBwcm9ncmVzcyB3aWxsIGJlIGNsZWFyZWQgYWJvdmVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyh0cnVlKTtcbiAgICAgICAgICBjb25zdCBwcm9ncmVzc01zZyA9IGDinKggJHthbGxEcmFmdENhcmRzLmxlbmd0aH0vNSBmcm9udCBjb3ZlciB2YXJpYXRpb25zIGNvbXBsZXRlLi4uICR7YWxsRHJhZnRDYXJkcy5sZW5ndGggPj0gMiA/IFwiWW91IGNhbiBzZWxlY3Qgb25lIG5vdyB0byBwcm9jZWVkIVwiIDogXCJcIn1gO1xuICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MocHJvZ3Jlc3NNc2cpO1xuICAgICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhwcm9ncmVzc01zZyk7XG4gICAgICAgICAgLy8gRG9uJ3Qgb3ZlcnJpZGUgdGltZS1iYXNlZCBwcm9ncmVzc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIElmIG5vIGRyYWZ0IGNhcmRzIHdlcmUgZm91bmQgYnV0IHdlIGhhdmUgZHJhZnQgam9icywgc2V0IGFwcHJvcHJpYXRlIHN0YXRlXG4gICAgICBpZiAoYWxsRHJhZnRDYXJkcy5sZW5ndGggPT09IDAgJiYgZHJhZnRKb2JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflIQgRHJhZnQgam9icyBmb3VuZCBidXQgbm8gY2FyZHMgeWV0IC0gc2V0dGluZyBnZW5lcmF0aW9uIHN0YXRlJyk7XG4gICAgICAgIC8vIFNldCBkcmFmdCBtb2RlIGFuZCBpbml0aWFsaXplIGVtcHR5IGFycmF5IGZvciBkcmFmdCBqb2JzIGluIHByb2dyZXNzXG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0RyYWZ0TW9kZSh0cnVlKTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMoW251bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGxdKTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZyh0cnVlKTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKFwi8J+OqCBDcmVhdGluZyA1IGZyb250IGNvdmVyIHZhcmlhdGlvbnMgZm9yIHlvdSB0byBjaG9vc2UgZnJvbS4uLlwiKTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKFwi8J+OqCBDcmVhdGluZyA1IGZyb250IGNvdmVyIHZhcmlhdGlvbnMgZm9yIHlvdSB0byBjaG9vc2UgZnJvbS4uLlwiKTtcbiAgICAgICAgLy8gRG9uJ3QgcmVzZXQgcHJvZ3Jlc3MgLSBsZXQgdGltZS1iYXNlZCBwcm9ncmVzcyBjb250aW51ZVxuICAgICAgICAvLyBqb2JNYW5hZ2VtZW50LnNldFByb2dyZXNzUGVyY2VudGFnZSgwKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU3Vic2NyaWJlIHRvIGFsbCBub24tc3RhbGUgZHJhZnQgam9ic1xuICAgICAgZm9yIChjb25zdCB7IGpvYklkLCBqb2IgfSBvZiBkcmFmdEpvYnMpIHtcbiAgICAgICAgY29uc3Qgam9iQWdlID0gRGF0ZS5ub3coKSAtIChqb2IuY3JlYXRlZEF0IHx8IERhdGUubm93KCkpO1xuICAgICAgICBjb25zdCBpc1N0YWxlID0gam9iQWdlID4gNSAqIDYwICogMTAwMDtcbiAgICAgICAgXG4gICAgICAgIGlmICghaXNTdGFsZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OhIFN1YnNjcmliaW5nIHRvIGRyYWZ0IGpvYjogJHtqb2JJZH0gKGhhcyAke2pvYi5kcmFmdENhcmRzPy5sZW5ndGggfHwgMH0gY2FyZHMpYCk7XG4gICAgICAgICAgd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iKGpvYklkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBQcm9jZXNzIHJlbWFpbmluZyBqb2JzIChmaW5hbCBjYXJkIGdlbmVyYXRpb24pXG4gICAgZm9yIChjb25zdCB7IGpvYklkLCBqb2IgfSBvZiBmaW5hbEpvYnMpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OLIFByb2Nlc3Npbmcgam9iICR7am9iSWR9OmAsIHtcbiAgICAgICAgaXNEcmFmdDogam9iSWQuc3RhcnRzV2l0aCgnZHJhZnQtJyksXG4gICAgICAgIHN0YXR1czogam9iLnN0YXR1cyxcbiAgICAgICAgaGFzUHJvZ3Jlc3M6ICEham9iLmxhc3RQcm9ncmVzcyxcbiAgICAgICAgY3JlYXRlZEF0OiBqb2IuY3JlYXRlZEF0XG4gICAgICB9KTtcbiAgICAgIC8vIENoZWNrIGlmIGpvYiBpcyBzdGFsZSAob2xkZXIgdGhhbiA1IG1pbnV0ZXMgd2l0aG91dCBjb21wbGV0aW9uKVxuICAgICAgY29uc3Qgam9iQWdlID0gRGF0ZS5ub3coKSAtIChqb2IuY3JlYXRlZEF0IHx8IERhdGUubm93KCkpO1xuICAgICAgY29uc3QgaXNTdGFsZSA9IGpvYkFnZSA+IDUgKiA2MCAqIDEwMDAgJiYgam9iLnN0YXR1cyAhPT0gJ2NvbXBsZXRlZCc7XG4gICAgICBcbiAgICAgIGlmIChpc1N0YWxlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn6e5IENsZWFuaW5nIHVwIHN0YWxlIGpvYjogJHtqb2JJZH0gKGFnZTogJHtNYXRoLnJvdW5kKGpvYkFnZSAvIDEwMDApfXMpYCk7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQucmVtb3ZlSm9iRnJvbVN0b3JhZ2Uoam9iSWQpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVzdG9yZSBwcm9ncmVzcyBhbmQgc3RhdGVcbiAgICAgIC8vIERvbid0IHJlc3RvcmUgcHJvZ3Jlc3MgLSBsZXQgdGltZS1iYXNlZCBwcm9ncmVzcyBoYW5kbGUgaXRcbiAgICAgIC8vIGlmIChqb2IubGFzdFByb2dyZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vICAgam9iTWFuYWdlbWVudC5zZXRQcm9ncmVzc1BlcmNlbnRhZ2Uoam9iLmxhc3RQcm9ncmVzcyk7XG4gICAgICAvLyAgIGNhcmRHZW5lcmF0aW9uLnNldFByb2dyZXNzUGVyY2VudGFnZShqb2IubGFzdFByb2dyZXNzKTtcbiAgICAgIC8vICAgZHJhZnRHZW5lcmF0aW9uLnNldFByb2dyZXNzUGVyY2VudGFnZShqb2IubGFzdFByb2dyZXNzKTtcbiAgICAgIC8vIH1cbiAgICAgIFxuICAgICAgLy8gT25seSByZXN0b3JlIHByb2dyZXNzIHRleHQgaWYgdGhlIGpvYiBpcyBub3QgY29tcGxldGVkXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIHNob3dpbmcgXCJHZW5lcmF0aW9uIGNvbXBsZXRlISAoMTAwJSlcIiBmcm9tIG9sZCBjb21wbGV0ZWQgam9ic1xuICAgICAgaWYgKGpvYi5sYXN0UHJvZ3Jlc3NUZXh0ICYmIGpvYi5zdGF0dXMgIT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0R2VuZXJhdGlvblByb2dyZXNzKGpvYi5sYXN0UHJvZ3Jlc3NUZXh0KTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvblByb2dyZXNzKGpvYi5sYXN0UHJvZ3Jlc3NUZXh0KTtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldEdlbmVyYXRpb25Qcm9ncmVzcyhqb2IubGFzdFByb2dyZXNzVGV4dCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFJlc3RvcmUgZmluYWwgY2FyZCBnZW5lcmF0aW9uIHN0YXRlXG4gICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcodHJ1ZSk7XG4gICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nRmluYWxDYXJkKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBJZiB3ZSBoYXZlIGEgc2VsZWN0ZWQgZHJhZnQsIHJlc3RvcmUgaXRcbiAgICAgIGlmIChqb2Iuc2VsZWN0ZWREcmFmdEluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZHJhZnRHZW5lcmF0aW9uLnNldFNlbGVjdGVkRHJhZnRJbmRleChqb2Iuc2VsZWN0ZWREcmFmdEluZGV4KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQoam9iSWQpO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgZWxhcHNlZCB0aW1lIHNpbmNlIGpvYiBzdGFydGVkXG4gICAgICBjb25zdCBqb2JTdGFydFRpbWUgPSBqb2IuY3JlYXRlZEF0IHx8IERhdGUubm93KCk7XG4gICAgICBjb25zdCBlbGFwc2VkU2luY2VTdGFydCA9IChEYXRlLm5vdygpIC0gam9iU3RhcnRUaW1lKSAvIDEwMDA7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IGVsYXBzZWQgdGltZSB0cmFja2luZ1xuICAgICAgam9iTWFuYWdlbWVudC5zdGFydEVsYXBzZWRUaW1lVHJhY2tpbmcoKTtcbiAgICAgIFxuICAgICAgLy8gU3Vic2NyaWJlIHRvIHRoZSBqb2IgdXBkYXRlc1xuICAgICAgd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iKGpvYklkKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGpvYiBleGlzdHMgb24gYmFja2VuZFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtCQUNLRU5EX0FQSV9CQVNFX1VSTH0vYXBpL2pvYi1zdGF0dXMvJHtqb2JJZH1gKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYPCfk6EgSm9iIHN0YXR1cyBjaGVjayBmb3IgJHtqb2JJZH06YCwge1xuICAgICAgICAgIG9rOiByZXNwb25zZS5vayxcbiAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICByZXN1bHRTdGF0dXM6IHJlc3VsdC5zdGF0dXMsXG4gICAgICAgICAgdXJsOiBgJHtCQUNLRU5EX0FQSV9CQVNFX1VSTH0vYXBpL2pvYi1zdGF0dXMvJHtqb2JJZH1gXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdub3RfZm91bmQnKSB7XG4gICAgICAgICAgLy8gSm9iIGRvZXNuJ3QgZXhpc3Qgb24gYmFja2VuZCwgY2xlYW4gdXAgYW5kIG5vdGlmeSB1c2VyXG4gICAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBKb2IgJHtqb2JJZH0gbm90IGZvdW5kIG9uIGJhY2tlbmQsIGNsZWFuaW5nIHVwLi4uYCk7XG4gICAgICAgICAgam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZShqb2JJZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVzZXQgZ2VuZXJhdGlvbiBzdGF0ZVxuICAgICAgICAgIGlmIChpc0RyYWZ0Sm9iKSB7XG4gICAgICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKGZhbHNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKGZhbHNlKTtcbiAgICAgICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTaG93IGhlbHBmdWwgbWVzc2FnZSB0byB1c2VyXG4gICAgICAgICAgdG9hc3QuZXJyb3IoXG4gICAgICAgICAgICBgUHJldmlvdXMgJHtpc0RyYWZ0Sm9iID8gJ2RyYWZ0JyA6ICdjYXJkJ30gZ2VuZXJhdGlvbiBleHBpcmVkLiBQbGVhc2Ugc3RhcnQgYSBuZXcgb25lLmAsXG4gICAgICAgICAgICB7IGR1cmF0aW9uOiA1MDAwIH1cbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEpvYiBleGlzdHMsIHNob3cgcmVzdW1pbmcgbWVzc2FnZVxuICAgICAgICAgIHRvYXN0LmluZm8oYFJlc3VtaW5nICR7aXNEcmFmdEpvYiA/ICdkcmFmdCcgOiAnY2FyZCd9IGdlbmVyYXRpb24uLi5gKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHZlcmlmeSBqb2Igc3RhdHVzOicsIGVycm9yKTtcbiAgICAgICAgLy8gQ29udGludWUgYW55d2F5LCBXZWJTb2NrZXQgd2lsbCBoYW5kbGUgaXRcbiAgICAgICAgdG9hc3QuaW5mbyhgQXR0ZW1wdGluZyB0byByZXN1bWUgJHtpc0RyYWZ0Sm9iID8gJ2RyYWZ0JyA6ICdjYXJkJ30gZ2VuZXJhdGlvbi4uLmApO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBSZXN0b3JhdGlvbiBjb21wbGV0ZSAtIGFsbG93IFdlYlNvY2tldCB1cGRhdGVzIHRvIGJlIHByb2Nlc3NlZFxuICAgIC8vIEFkZCBhIHNtYWxsIGRlbGF5IHRvIGVuc3VyZSBzdGF0ZSB1cGRhdGVzIGhhdmUgcHJvcGFnYXRlZFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ+KchSBKb2IgcmVzdG9yYXRpb24gY29tcGxldGUsIGFsbG93aW5nIFdlYlNvY2tldCB1cGRhdGVzJyk7XG4gICAgICBzZXRJc1Jlc3RvcmluZ0pvYnMoZmFsc2UpO1xuICAgIH0sIDEwMCk7XG4gIH0sIFtqb2JNYW5hZ2VtZW50LCBjYXJkR2VuZXJhdGlvbiwgZHJhZnRHZW5lcmF0aW9uLCB3ZWJTb2NrZXRdKTtcblxuICAvLyBMb2FkIG1vc3QgcmVjZW50IGRyYWZ0IGJhdGNoIGFuZCBmaW5hbCBjYXJkIG9uIGNvbXBvbmVudCBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5qAIHVzZUNhcmRTdHVkaW8gbW91bnRlZCwgbG9hZGluZyByZWNlbnQgY2FyZHMuLi4nKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgY29tcGxldGVkIGZpbmFsIGNhcmQgZmlyc3RcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2F2ZWRGaW5hbENhcmQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFzdENvbXBsZXRlZENhcmQnKTtcbiAgICAgIGlmIChzYXZlZEZpbmFsQ2FyZCkge1xuICAgICAgICBjb25zdCBmaW5hbENhcmQgPSBKU09OLnBhcnNlKHNhdmVkRmluYWxDYXJkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfkr4gRm91bmQgc2F2ZWQgZmluYWwgY2FyZDonLCBmaW5hbENhcmQpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVzdG9yZSBmaW5hbCBjYXJkIHN0YXRlXG4gICAgICAgIGNhcmRHZW5lcmF0aW9uLnNldEdlbmVyYXRlZENhcmQoZmluYWxDYXJkKTtcbiAgICAgICAgY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGVkQ2FyZHMoW2ZpbmFsQ2FyZF0pO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0NhcmRDb21wbGV0ZWQodHJ1ZSk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0RyYWZ0TW9kZShmYWxzZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbGVhciB0aGUgc2F2ZWQgY2FyZCBhZnRlciByZXN0b3JpbmdcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2xhc3RDb21wbGV0ZWRDYXJkJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgUmVzdG9yZWQgZmluYWwgY2FyZCBmcm9tIGxvY2FsU3RvcmFnZScpO1xuICAgICAgICByZXR1cm47IC8vIERvbid0IGxvYWQgZHJhZnRzIGlmIHdlIGhhdmUgYSBmaW5hbCBjYXJkXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZXN0b3JlIGZpbmFsIGNhcmQ6JywgZXJyb3IpO1xuICAgIH1cbiAgICBcbiAgICAvLyBJZiBubyBmaW5hbCBjYXJkLCBjaGVjayBmb3IgZHJhZnRzXG4gICAgLy8gRmlyc3QsIGNsZWFyIGFueSBleGlzdGluZyBkcmFmdCBzdGF0ZSB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q2FyZHMoW10pO1xuICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25Db3VudCgwKTtcbiAgICBcbiAgICBjb25zdCByZWNlbnREcmFmdHMgPSBqb2JNYW5hZ2VtZW50LmxvYWRNb3N0UmVjZW50RHJhZnRCYXRjaCgpO1xuICAgIGNvbnNvbGUubG9nKCfwn5OKIERyYWZ0IGJhdGNoIHJlc3VsdDonLCByZWNlbnREcmFmdHMpO1xuICAgIFxuICAgIGlmIChyZWNlbnREcmFmdHMgJiYgcmVjZW50RHJhZnRzLmNhcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OLIEZvdW5kIHJlY2VudCBkcmFmdCBiYXRjaCB3aXRoICR7cmVjZW50RHJhZnRzLmNvdW50fSBjYXJkcyBmcm9tICR7bmV3IERhdGUocmVjZW50RHJhZnRzLmNyZWF0ZWRBdCkudG9Mb2NhbGVTdHJpbmcoKX1gKTtcbiAgICAgIFxuICAgICAgLy8gU2V0IHRoZSBkcmFmdCBjYXJkcyBhbmQgZW5hYmxlIGRyYWZ0IG1vZGVcbiAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENhcmRzKHJlY2VudERyYWZ0cy5jYXJkcyk7XG4gICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNEcmFmdE1vZGUodHJ1ZSk7XG4gICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uQ291bnQocmVjZW50RHJhZnRzLmNvdW50KTtcbiAgICAgIFxuICAgICAgLy8gSWYgd2UgaGF2ZSBhbGwgNSBjYXJkcywgbWFyayBhcyBjb21wbGV0ZVxuICAgICAgaWYgKHJlY2VudERyYWZ0cy5jb3VudCA9PT0gNSkge1xuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0RHJhZnRDb21wbGV0aW9uU2hvd24odHJ1ZSk7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcoZmFsc2UpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcoZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU3RpbGwgZ2VuZXJhdGluZyAtIHNldCBnZW5lcmF0aW9uIHN0YXRlIGFuZCBzdGFydCB0aW1lclxuICAgICAgICBkcmFmdEdlbmVyYXRpb24uc2V0SXNHZW5lcmF0aW5nKHRydWUpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcodHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDYWxjdWxhdGUgaG93IGxvbmcgZ2VuZXJhdGlvbiBoYXMgYmVlbiBydW5uaW5nXG4gICAgICAgIGNvbnN0IGVsYXBzZWRTZWNvbmRzID0gTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIHJlY2VudERyYWZ0cy5jcmVhdGVkQXQpIC8gMTAwMCk7XG4gICAgICAgIGpvYk1hbmFnZW1lbnQuc2V0Q3VycmVudEVsYXBzZWRUaW1lKGVsYXBzZWRTZWNvbmRzKTtcbiAgICAgICAgam9iTWFuYWdlbWVudC5zdGFydEVsYXBzZWRUaW1lVHJhY2tpbmcoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBwcm9ncmVzc1xuICAgICAgICBjb25zdCBwcm9ncmVzc01zZyA9IGDinKggJHtyZWNlbnREcmFmdHMuY291bnR9LzUgZnJvbnQgY292ZXIgdmFyaWF0aW9ucyBjb21wbGV0ZS4uLmA7XG4gICAgICAgIGRyYWZ0R2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MocHJvZ3Jlc3NNc2cpO1xuICAgICAgICBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MocHJvZ3Jlc3NNc2cpO1xuICAgICAgICAvLyBEb24ndCBvdmVycmlkZSB0aW1lLWJhc2VkIHByb2dyZXNzXG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBmb3IgcGVuZGluZyBqb2JzIHRvIHN1YnNjcmliZSB0b1xuICAgICAgICBjb25zdCBwZW5kaW5nSm9icyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BlbmRpbmdDYXJkSm9icycpIHx8ICdbXScpO1xuICAgICAgICBjb25zdCBhY3RpdmVEcmFmdEpvYnMgPSBwZW5kaW5nSm9icy5maWx0ZXIoKGlkOiBzdHJpbmcpID0+IGlkLnN0YXJ0c1dpdGgoJ2RyYWZ0LScpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN1YnNjcmliZSB0byBhY3RpdmUgZHJhZnQgam9icyBmb3IgcmVhbC10aW1lIHVwZGF0ZXNcbiAgICAgICAgYWN0aXZlRHJhZnRKb2JzLmZvckVhY2goKGpvYklkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg8J+ToSBTdWJzY3JpYmluZyB0byBhY3RpdmUgZHJhZnQgam9iOiAke2pvYklkfWApO1xuICAgICAgICAgIHdlYlNvY2tldC5zdWJzY3JpYmVUb0pvYihqb2JJZCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBNYXJrIHJlc3RvcmF0aW9uIGFzIGNvbXBsZXRlIGFmdGVyIGEgc21hbGwgZGVsYXlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNldElzUmVzdG9yaW5nSm9icyhmYWxzZSk7XG4gICAgfSwgMTAwKTtcbiAgfSwgW10pO1xuXG4gIC8vIFJldHVybiBhbGwgdGhlIHN0YXRlIGFuZCBmdW5jdGlvbnMgdGhhdCB0aGUgVUkgbmVlZHNcbiAgcmV0dXJuIHtcbiAgICAvLyBDb3JlIHN0YXRlXG4gICAgcHJvbXB0LFxuICAgIHNldFByb21wdCxcbiAgICBmaW5hbENhcmRNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5maW5hbENhcmRNZXNzYWdlLFxuICAgIHNldEZpbmFsQ2FyZE1lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldEZpbmFsQ2FyZE1lc3NhZ2UsXG4gICAgdG9GaWVsZCxcbiAgICBzZXRUb0ZpZWxkLFxuICAgIGZyb21GaWVsZCxcbiAgICBzZXRGcm9tRmllbGQsXG4gICAgcmVsYXRpb25zaGlwRmllbGQsXG4gICAgc2V0UmVsYXRpb25zaGlwRmllbGQsXG4gICAgc2VsZWN0ZWRUeXBlLFxuICAgIHNldFNlbGVjdGVkVHlwZSxcbiAgICBjdXN0b21DYXJkVHlwZSxcbiAgICBzZXRDdXN0b21DYXJkVHlwZSxcbiAgICBzZWxlY3RlZFRvbmUsXG4gICAgc2V0U2VsZWN0ZWRUb25lLFxuICAgIGlzR2VuZXJhdGluZzogY2FyZEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nIHx8IGRyYWZ0R2VuZXJhdGlvbi5pc0dlbmVyYXRpbmcsXG4gICAgc2V0SXNHZW5lcmF0aW5nOiBjYXJkR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmcsXG4gICAgaXNHZW5lcmF0aW5nTWVzc2FnZTogbWVzc2FnZUdlbmVyYXRpb24uaXNHZW5lcmF0aW5nTWVzc2FnZSxcbiAgICBzZXRJc0dlbmVyYXRpbmdNZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5zZXRJc0dlbmVyYXRpbmdNZXNzYWdlLFxuICAgIGdlbmVyYXRlZENhcmQ6IGNhcmRHZW5lcmF0aW9uLmdlbmVyYXRlZENhcmQsXG4gICAgc2V0R2VuZXJhdGVkQ2FyZDogY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGVkQ2FyZCxcbiAgICBudW1iZXJPZkNhcmRzLFxuICAgIHNldE51bWJlck9mQ2FyZHMsXG4gICAgZ2VuZXJhdGVkQ2FyZHM6IGNhcmRHZW5lcmF0aW9uLmdlbmVyYXRlZENhcmRzLFxuICAgIHNldEdlbmVyYXRlZENhcmRzOiBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0ZWRDYXJkcyxcbiAgICBzZWxlY3RlZENhcmRJbmRleDogY2FyZEdlbmVyYXRpb24uc2VsZWN0ZWRDYXJkSW5kZXgsXG4gICAgc2V0U2VsZWN0ZWRDYXJkSW5kZXg6IGNhcmRHZW5lcmF0aW9uLnNldFNlbGVjdGVkQ2FyZEluZGV4LFxuICAgIFxuICAgIC8vIEFkdmFuY2VkIG9wdGlvbnNcbiAgICBzaG93QWR2YW5jZWQsXG4gICAgc2V0U2hvd0FkdmFuY2VkLFxuICAgIHNlbGVjdGVkQXJ0aXN0aWNTdHlsZSxcbiAgICBzZXRTZWxlY3RlZEFydGlzdGljU3R5bGUsXG4gICAgY3VzdG9tU3R5bGVEZXNjcmlwdGlvbixcbiAgICBzZXRDdXN0b21TdHlsZURlc2NyaXB0aW9uLFxuICAgIHNlbGVjdGVkSW1hZ2VNb2RlbCxcbiAgICBzZXRTZWxlY3RlZEltYWdlTW9kZWwsXG4gICAgc2VsZWN0ZWREcmFmdE1vZGVsLFxuICAgIHNldFNlbGVjdGVkRHJhZnRNb2RlbCxcbiAgICBcbiAgICAvLyBEcmFmdCBtb2RlXG4gICAgaXNEcmFmdE1vZGU6IGRyYWZ0R2VuZXJhdGlvbi5pc0RyYWZ0TW9kZSxcbiAgICBzZXRJc0RyYWZ0TW9kZTogZHJhZnRHZW5lcmF0aW9uLnNldElzRHJhZnRNb2RlLFxuICAgIGRyYWZ0Q2FyZHM6IGRyYWZ0R2VuZXJhdGlvbi5kcmFmdENhcmRzLFxuICAgIHNldERyYWZ0Q2FyZHM6IGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENhcmRzLFxuICAgIHNlbGVjdGVkRHJhZnRJbmRleDogZHJhZnRHZW5lcmF0aW9uLnNlbGVjdGVkRHJhZnRJbmRleCxcbiAgICBzZXRTZWxlY3RlZERyYWZ0SW5kZXg6IGRyYWZ0R2VuZXJhdGlvbi5zZXRTZWxlY3RlZERyYWZ0SW5kZXgsXG4gICAgaXNHZW5lcmF0aW5nRmluYWxDYXJkOiBkcmFmdEdlbmVyYXRpb24uaXNHZW5lcmF0aW5nRmluYWxDYXJkLFxuICAgIHNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZDogZHJhZnRHZW5lcmF0aW9uLnNldElzR2VuZXJhdGluZ0ZpbmFsQ2FyZCxcbiAgICBwcmV2aWV3aW5nRHJhZnRJbmRleDogZHJhZnRHZW5lcmF0aW9uLnByZXZpZXdpbmdEcmFmdEluZGV4LFxuICAgIHNldFByZXZpZXdpbmdEcmFmdEluZGV4OiBkcmFmdEdlbmVyYXRpb24uc2V0UHJldmlld2luZ0RyYWZ0SW5kZXgsXG4gICAgZHJhZnRDb21wbGV0aW9uU2hvd246IGRyYWZ0R2VuZXJhdGlvbi5kcmFmdENvbXBsZXRpb25TaG93bixcbiAgICBzZXREcmFmdENvbXBsZXRpb25TaG93bjogZHJhZnRHZW5lcmF0aW9uLnNldERyYWZ0Q29tcGxldGlvblNob3duLFxuICAgIGRyYWZ0Q29tcGxldGlvbkNvdW50OiBkcmFmdEdlbmVyYXRpb24uZHJhZnRDb21wbGV0aW9uQ291bnQsXG4gICAgc2V0RHJhZnRDb21wbGV0aW9uQ291bnQ6IGRyYWZ0R2VuZXJhdGlvbi5zZXREcmFmdENvbXBsZXRpb25Db3VudCxcbiAgICBcbiAgICAvLyBQcm9ncmVzcyB0cmFja2luZ1xuICAgIGdlbmVyYXRpb25Qcm9ncmVzczogZHJhZnRHZW5lcmF0aW9uLmlzR2VuZXJhdGluZyA/IGRyYWZ0R2VuZXJhdGlvbi5nZW5lcmF0aW9uUHJvZ3Jlc3MgOiBjYXJkR2VuZXJhdGlvbi5nZW5lcmF0aW9uUHJvZ3Jlc3MsXG4gICAgc2V0R2VuZXJhdGlvblByb2dyZXNzOiBjYXJkR2VuZXJhdGlvbi5zZXRHZW5lcmF0aW9uUHJvZ3Jlc3MsXG4gICAgcHJvZ3Jlc3NQZXJjZW50YWdlOiBqb2JNYW5hZ2VtZW50LnByb2dyZXNzUGVyY2VudGFnZSwgLy8gU2luZ2xlIHNvdXJjZSBvZiB0cnV0aCBiYXNlZCBvbiBlbGFwc2VkIHRpbWVcbiAgICBpc0NhcmRDb21wbGV0ZWQ6IGNhcmRHZW5lcmF0aW9uLmlzQ2FyZENvbXBsZXRlZCxcbiAgICBzZXRJc0NhcmRDb21wbGV0ZWQ6IGNhcmRHZW5lcmF0aW9uLnNldElzQ2FyZENvbXBsZXRlZCxcbiAgICBcbiAgICAvLyBVcGxvYWQgYW5kIHBlcnNvbmFsaXphdGlvblxuICAgIHJlZmVyZW5jZUltYWdlczogZmlsZUhhbmRsaW5nLnJlZmVyZW5jZUltYWdlcyxcbiAgICBzZXRSZWZlcmVuY2VJbWFnZXM6IGZpbGVIYW5kbGluZy5zZXRSZWZlcmVuY2VJbWFnZXMsXG4gICAgcmVmZXJlbmNlSW1hZ2VVcmxzOiBmaWxlSGFuZGxpbmcucmVmZXJlbmNlSW1hZ2VVcmxzLFxuICAgIHNldFJlZmVyZW5jZUltYWdlVXJsczogZmlsZUhhbmRsaW5nLnNldFJlZmVyZW5jZUltYWdlVXJscyxcbiAgICBpbWFnZVRyYW5zZm9ybWF0aW9uOiBmaWxlSGFuZGxpbmcuaW1hZ2VUcmFuc2Zvcm1hdGlvbixcbiAgICBzZXRJbWFnZVRyYW5zZm9ybWF0aW9uOiBmaWxlSGFuZGxpbmcuc2V0SW1hZ2VUcmFuc2Zvcm1hdGlvbixcbiAgICBpc1VwbG9hZGluZzogZmlsZUhhbmRsaW5nLmlzVXBsb2FkaW5nLFxuICAgIHNldElzVXBsb2FkaW5nOiBmaWxlSGFuZGxpbmcuc2V0SXNVcGxvYWRpbmcsXG4gICAgXG4gICAgLy8gRW1haWwgYW5kIHNldHRpbmdzXG4gICAgdXNlckVtYWlsLFxuICAgIHNldFVzZXJFbWFpbCxcbiAgICBpc0hhbmR3cml0dGVuTWVzc2FnZSxcbiAgICBzZXRJc0hhbmR3cml0dGVuTWVzc2FnZSxcbiAgICBpc0Zyb250QmFja09ubHksXG4gICAgc2V0SXNGcm9udEJhY2tPbmx5LFxuICAgIHNlbGVjdGVkUGFwZXJTaXplLFxuICAgIHNldFNlbGVjdGVkUGFwZXJTaXplLFxuICAgIFxuICAgIC8vIFVJIHN0YXRlXG4gICAgaXNUZXh0YXJlYUV4cGFuZGVkLFxuICAgIHNldElzVGV4dGFyZWFFeHBhbmRlZCxcbiAgICBpc01lc3NhZ2VFeHBhbmRlZCxcbiAgICBzZXRJc01lc3NhZ2VFeHBhbmRlZCxcbiAgICBzaG93U2V0dGluZ3MsXG4gICAgc2V0U2hvd1NldHRpbmdzLFxuICAgIHNob3dUZW1wbGF0ZUdhbGxlcnksXG4gICAgc2V0U2hvd1RlbXBsYXRlR2FsbGVyeSxcbiAgICBzaG93UHJpbnRDb25maXJtYXRpb24sXG4gICAgc2V0U2hvd1ByaW50Q29uZmlybWF0aW9uLFxuICAgIFxuICAgIC8vIEdlbmVyYXRpb24gdGltZVxuICAgIGdlbmVyYXRpb25EdXJhdGlvbjogY2FyZEdlbmVyYXRpb24uZ2VuZXJhdGlvbkR1cmF0aW9uLFxuICAgIHNldEdlbmVyYXRpb25EdXJhdGlvbjogY2FyZEdlbmVyYXRpb24uc2V0R2VuZXJhdGlvbkR1cmF0aW9uLFxuICAgIGN1cnJlbnRFbGFwc2VkVGltZTogam9iTWFuYWdlbWVudC5jdXJyZW50RWxhcHNlZFRpbWUsXG4gICAgc2V0Q3VycmVudEVsYXBzZWRUaW1lOiBqb2JNYW5hZ2VtZW50LnNldEN1cnJlbnRFbGFwc2VkVGltZSxcbiAgICBcbiAgICAvLyBIZWxwZXIgZnVuY3Rpb25zXG4gICAgZm9ybWF0R2VuZXJhdGlvblRpbWUsXG4gICAgZm9ybWF0Q291bnRkb3duLFxuICAgIHNlbmRUaGFua1lvdUVtYWlsLFxuICAgIGNoYXRXaXRoQUksXG4gICAgc2Nyb2xsVG9DYXJkUHJldmlldyxcbiAgICBcbiAgICAvLyBUaW1lIHRyYWNraW5nIGZ1bmN0aW9uc1xuICAgIHN0YXJ0RWxhcHNlZFRpbWVUcmFja2luZzogam9iTWFuYWdlbWVudC5zdGFydEVsYXBzZWRUaW1lVHJhY2tpbmcsXG4gICAgc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmc6IGpvYk1hbmFnZW1lbnQuc3RvcEVsYXBzZWRUaW1lVHJhY2tpbmcsXG4gICAgXG4gICAgLy8gRmlsZSBoYW5kbGluZyBmdW5jdGlvbnNcbiAgICBoYW5kbGVGaWxlVXBsb2FkOiBmaWxlSGFuZGxpbmcuaGFuZGxlRmlsZVVwbG9hZCxcbiAgICBoYW5kbGVSZW1vdmVSZWZlcmVuY2VJbWFnZTogZmlsZUhhbmRsaW5nLmhhbmRsZVJlbW92ZVJlZmVyZW5jZUltYWdlLFxuICAgIFxuICAgIC8vIFBob3RvIGFuYWx5c2lzXG4gICAgcGhvdG9BbmFseXNlczogZmlsZUhhbmRsaW5nLnBob3RvQW5hbHlzZXMsXG4gICAgc2V0UGhvdG9BbmFseXNlczogZmlsZUhhbmRsaW5nLnNldFBob3RvQW5hbHlzZXMsXG4gICAgaXNBbmFseXppbmc6IGZpbGVIYW5kbGluZy5pc0FuYWx5emluZyxcbiAgICBzaG93QW5hbHlzaXNNb2RhbDogZmlsZUhhbmRsaW5nLnNob3dBbmFseXNpc01vZGFsLFxuICAgIHNldFNob3dBbmFseXNpc01vZGFsOiBmaWxlSGFuZGxpbmcuc2V0U2hvd0FuYWx5c2lzTW9kYWwsXG4gICAgcGVuZGluZ0FuYWx5c2lzSW5kZXg6IGZpbGVIYW5kbGluZy5wZW5kaW5nQW5hbHlzaXNJbmRleCxcbiAgICBzZXRQZW5kaW5nQW5hbHlzaXNJbmRleDogZmlsZUhhbmRsaW5nLnNldFBlbmRpbmdBbmFseXNpc0luZGV4LFxuICAgIGFuYWx5emVQaG90bzogZmlsZUhhbmRsaW5nLmFuYWx5emVQaG90byxcbiAgICBzYXZlUGhvdG9BbmFseXNpczogZmlsZUhhbmRsaW5nLnNhdmVQaG90b0FuYWx5c2lzLFxuICAgIHNraXBQaG90b0FuYWx5c2lzOiBmaWxlSGFuZGxpbmcuc2tpcFBob3RvQW5hbHlzaXMsXG4gICAgZ2V0Q29tYmluZWRQaG90b0FuYWx5c2lzOiBmaWxlSGFuZGxpbmcuZ2V0Q29tYmluZWRQaG90b0FuYWx5c2lzLFxuICAgIFxuICAgIC8vIE1lc3NhZ2UgZnVuY3Rpb25zXG4gICAgaGFuZGxlR2V0TWVzc2FnZUhlbHA6IG1lc3NhZ2VHZW5lcmF0aW9uLmhhbmRsZUdldE1lc3NhZ2VIZWxwLFxuICAgIGFkZE1lc3NhZ2VUb0hpc3Rvcnk6IG1lc3NhZ2VHZW5lcmF0aW9uLmFkZE1lc3NhZ2VUb0hpc3RvcnksXG4gICAgdW5kb01lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLnVuZG9NZXNzYWdlLFxuICAgIHJlZG9NZXNzYWdlOiBtZXNzYWdlR2VuZXJhdGlvbi5yZWRvTWVzc2FnZSxcbiAgICBcbiAgICAvLyBKb2IgbWFuYWdlbWVudFxuICAgIHNhdmVKb2JUb1N0b3JhZ2U6IGpvYk1hbmFnZW1lbnQuc2F2ZUpvYlRvU3RvcmFnZSxcbiAgICByZW1vdmVKb2JGcm9tU3RvcmFnZTogam9iTWFuYWdlbWVudC5yZW1vdmVKb2JGcm9tU3RvcmFnZSxcbiAgICBjaGVja1BlbmRpbmdKb2JzLFxuICAgIFxuICAgIC8vIE1haW4gZ2VuZXJhdGlvbiBmdW5jdGlvbnNcbiAgICBoYW5kbGVHZW5lcmF0ZUNhcmRBc3luYzogY2FyZEdlbmVyYXRpb24uaGFuZGxlR2VuZXJhdGVDYXJkQXN5bmMsXG4gICAgaGFuZGxlR2VuZXJhdGVEcmFmdENhcmRzOiBkcmFmdEdlbmVyYXRpb24uaGFuZGxlR2VuZXJhdGVEcmFmdENhcmRzLFxuICAgIGhhbmRsZUdlbmVyYXRlRmluYWxGcm9tRHJhZnQ6IGRyYWZ0R2VuZXJhdGlvbi5oYW5kbGVHZW5lcmF0ZUZpbmFsRnJvbURyYWZ0LFxuICAgIFxuICAgIC8vIEFkZGl0aW9uYWwgc3RhdGUgZm9yIG1lc3NhZ2UgcmVmaW5lbWVudFxuICAgIG1lc3NhZ2VIaXN0b3J5OiBtZXNzYWdlR2VuZXJhdGlvbi5tZXNzYWdlSGlzdG9yeSxcbiAgICBzZXRNZXNzYWdlSGlzdG9yeTogbWVzc2FnZUdlbmVyYXRpb24uc2V0TWVzc2FnZUhpc3RvcnksXG4gICAgY3VycmVudE1lc3NhZ2VJbmRleDogbWVzc2FnZUdlbmVyYXRpb24uY3VycmVudE1lc3NhZ2VJbmRleCxcbiAgICBzZXRDdXJyZW50TWVzc2FnZUluZGV4OiBtZXNzYWdlR2VuZXJhdGlvbi5zZXRDdXJyZW50TWVzc2FnZUluZGV4LFxuICAgIHJlZmluZW1lbnRQcm9tcHQ6IG1lc3NhZ2VHZW5lcmF0aW9uLnJlZmluZW1lbnRQcm9tcHQsXG4gICAgc2V0UmVmaW5lbWVudFByb21wdDogbWVzc2FnZUdlbmVyYXRpb24uc2V0UmVmaW5lbWVudFByb21wdCxcbiAgICBpc1JlZmluaW5nTWVzc2FnZTogbWVzc2FnZUdlbmVyYXRpb24uaXNSZWZpbmluZ01lc3NhZ2UsXG4gICAgc2V0SXNSZWZpbmluZ01lc3NhZ2U6IG1lc3NhZ2VHZW5lcmF0aW9uLnNldElzUmVmaW5pbmdNZXNzYWdlLFxuICAgIHNob3dSZWZpbmVtZW50Qm94OiBtZXNzYWdlR2VuZXJhdGlvbi5zaG93UmVmaW5lbWVudEJveCxcbiAgICBzZXRTaG93UmVmaW5lbWVudEJveDogbWVzc2FnZUdlbmVyYXRpb24uc2V0U2hvd1JlZmluZW1lbnRCb3gsXG4gICAgXG4gICAgLy8gVGVtcGxhdGUgc3RhdGVcbiAgICBzaG93VGVtcGxhdGVDdXN0b21pemF0aW9uLFxuICAgIHNldFNob3dUZW1wbGF0ZUN1c3RvbWl6YXRpb24sXG4gICAgc2VsZWN0ZWRUZW1wbGF0ZSxcbiAgICBzZXRTZWxlY3RlZFRlbXBsYXRlLFxuICAgIHRlbXBsYXRlQ3VzdG9taXphdGlvbnMsXG4gICAgc2V0VGVtcGxhdGVDdXN0b21pemF0aW9ucyxcbiAgICB0ZW1wbGF0ZVNlYXJjaFF1ZXJ5LFxuICAgIHNldFRlbXBsYXRlU2VhcmNoUXVlcnksXG4gICAgaXNTZWFyY2hpbmdUZW1wbGF0ZXMsXG4gICAgc2V0SXNTZWFyY2hpbmdUZW1wbGF0ZXMsXG4gICAgYWlGaWx0ZXJlZENhcmRzLFxuICAgIHNldEFpRmlsdGVyZWRDYXJkcyxcbiAgICBzZWFyY2hNb2RlLFxuICAgIHNldFNlYXJjaE1vZGUsXG4gICAgdGV4dEZpbHRlcmVkQ2FyZHMsXG4gICAgc2V0VGV4dEZpbHRlcmVkQ2FyZHMsXG4gICAgc2hvd1Byb21wdHMsXG4gICAgc2V0U2hvd1Byb21wdHMsXG4gICAgXG4gICAgLy8gUHJpbnQgc3RhdGVcbiAgICBwcmludE9wdGlvbixcbiAgICBzZXRQcmludE9wdGlvbixcbiAgICBcbiAgICAvLyBBZGRpdGlvbmFsIGRyYWZ0IG1vZGUgc3RhdGVcbiAgICBoYW5kd3JpdGluZ1NhbXBsZTogZmlsZUhhbmRsaW5nLmhhbmR3cml0aW5nU2FtcGxlLFxuICAgIHNldEhhbmR3cml0aW5nU2FtcGxlOiBmaWxlSGFuZGxpbmcuc2V0SGFuZHdyaXRpbmdTYW1wbGUsXG4gICAgaGFuZHdyaXRpbmdTYW1wbGVVcmw6IGZpbGVIYW5kbGluZy5oYW5kd3JpdGluZ1NhbXBsZVVybCxcbiAgICBzZXRIYW5kd3JpdGluZ1NhbXBsZVVybDogZmlsZUhhbmRsaW5nLnNldEhhbmR3cml0aW5nU2FtcGxlVXJsLFxuICAgIFxuICAgIC8vIFBob3RvIGFuYWx5c2lzXG4gICAgdHJpZ2dlclBob3RvQW5hbHlzaXM6IGZpbGVIYW5kbGluZy50cmlnZ2VyUGhvdG9BbmFseXNpcyxcbiAgICBcbiAgICAvLyBKb2IgdHJhY2tpbmdcbiAgICBjdXJyZW50Sm9iSWQ6IGpvYk1hbmFnZW1lbnQuY3VycmVudEpvYklkLFxuICAgIHNldEN1cnJlbnRKb2JJZDogam9iTWFuYWdlbWVudC5zZXRDdXJyZW50Sm9iSWQsXG4gICAgY291bnRkb3duLFxuICAgIHNldENvdW50ZG93bixcbiAgICBjb3VudGRvd25JbnRlcnZhbCxcbiAgICBzZXRDb3VudGRvd25JbnRlcnZhbCxcbiAgICBcbiAgICAvLyBTZWN0aW9uIGxvYWRpbmcgc3RhdGVzXG4gICAgc2VjdGlvbkxvYWRpbmdTdGF0ZXMsXG4gICAgc2V0U2VjdGlvbkxvYWRpbmdTdGF0ZXMsXG4gICAgXG4gICAgLy8gRmFzdCBwcmV2aWV3IG1vZGVcbiAgICBmYXN0UHJldmlld01vZGUsXG4gICAgc2V0RmFzdFByZXZpZXdNb2RlLFxuICAgIFxuICAgIC8vIEFkZGl0aW9uYWwgdHJhY2tpbmdcbiAgICBjdXJyZW50Q2FyZElkOiBjYXJkR2VuZXJhdGlvbi5jdXJyZW50Q2FyZElkLFxuICAgIHNldEN1cnJlbnRDYXJkSWQ6IGNhcmRHZW5lcmF0aW9uLnNldEN1cnJlbnRDYXJkSWQsXG4gICAgaXNJbml0aWFsTG9hZENvbXBsZXRlLFxuICAgIHNldElzSW5pdGlhbExvYWRDb21wbGV0ZSxcbiAgICBcbiAgICAvLyBFbGFwc2VkIHRpbWUgdHJhY2tpbmdcbiAgICBnZW5lcmF0aW9uU3RhcnRUaW1lOiBqb2JNYW5hZ2VtZW50LmdlbmVyYXRpb25TdGFydFRpbWUsXG4gICAgc2V0R2VuZXJhdGlvblN0YXJ0VGltZTogam9iTWFuYWdlbWVudC5zZXRHZW5lcmF0aW9uU3RhcnRUaW1lLFxuICAgIGVsYXBzZWRUaW1lSW50ZXJ2YWw6IGpvYk1hbmFnZW1lbnQuZWxhcHNlZFRpbWVJbnRlcnZhbCxcbiAgICBzZXRFbGFwc2VkVGltZUludGVydmFsOiBqb2JNYW5hZ2VtZW50LnNldEVsYXBzZWRUaW1lSW50ZXJ2YWwsXG4gICAgXG4gICAgLy8gQ29uc3RhbnRzIGZvciBVSVxuICAgIGNhcmRUb25lcyxcbiAgICBhcnRpc3RpY1N0eWxlcyxcbiAgICBwYXBlclNpemVzLFxuICAgIFxuICAgIC8vIFdlYlNvY2tldCBmdW5jdGlvbnMgYW5kIHN0YXRlXG4gICAgaXNTb2NrZXRDb25uZWN0ZWQ6IHdlYlNvY2tldC5pc1NvY2tldENvbm5lY3RlZCxcbiAgICBjb25uZWN0V2ViU29ja2V0OiB3ZWJTb2NrZXQuY29ubmVjdFdlYlNvY2tldCxcbiAgICBkaXNjb25uZWN0V2ViU29ja2V0OiB3ZWJTb2NrZXQuZGlzY29ubmVjdFdlYlNvY2tldCxcbiAgICBzdWJzY3JpYmVUb0pvYjogd2ViU29ja2V0LnN1YnNjcmliZVRvSm9iLFxuICAgIHVuc3Vic2NyaWJlRnJvbUpvYjogd2ViU29ja2V0LnVuc3Vic2NyaWJlRnJvbUpvYixcbiAgICBoYW5kbGVKb2JVcGRhdGUsXG4gICAgaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvbjogY2FyZEdlbmVyYXRpb24uaGFuZGxlRmluYWxDYXJkQ29tcGxldGlvbixcbiAgfTtcbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsInVzZVJlZiIsInRvYXN0IiwidXNlV2ViU29ja2V0IiwidXNlSm9iTWFuYWdlbWVudCIsInVzZU1lc3NhZ2VHZW5lcmF0aW9uIiwidXNlRmlsZUhhbmRsaW5nIiwidXNlRHJhZnRHZW5lcmF0aW9uIiwidXNlQ2FyZEdlbmVyYXRpb24iLCJjYXJkVG9uZXMiLCJhcnRpc3RpY1N0eWxlcyIsInBhcGVyU2l6ZXMiLCJmb3JtYXRHZW5lcmF0aW9uVGltZSIsImZvcm1hdENvdW50ZG93biIsInNlbmRUaGFua1lvdUVtYWlsIiwiY2hhdFdpdGhBSSIsInNjcm9sbFRvQ2FyZFByZXZpZXciLCJ1c2VDYXJkU3R1ZGlvIiwicHJvbXB0Iiwic2V0UHJvbXB0IiwidG9GaWVsZCIsInNldFRvRmllbGQiLCJmcm9tRmllbGQiLCJzZXRGcm9tRmllbGQiLCJyZWxhdGlvbnNoaXBGaWVsZCIsInNldFJlbGF0aW9uc2hpcEZpZWxkIiwic2VsZWN0ZWRUeXBlIiwic2V0U2VsZWN0ZWRUeXBlIiwiY3VzdG9tQ2FyZFR5cGUiLCJzZXRDdXN0b21DYXJkVHlwZSIsInNlbGVjdGVkVG9uZSIsInNldFNlbGVjdGVkVG9uZSIsInNob3dBZHZhbmNlZCIsInNldFNob3dBZHZhbmNlZCIsInNlbGVjdGVkQXJ0aXN0aWNTdHlsZSIsInNldFNlbGVjdGVkQXJ0aXN0aWNTdHlsZSIsImN1c3RvbVN0eWxlRGVzY3JpcHRpb24iLCJzZXRDdXN0b21TdHlsZURlc2NyaXB0aW9uIiwic2VsZWN0ZWRJbWFnZU1vZGVsIiwic2V0U2VsZWN0ZWRJbWFnZU1vZGVsIiwic2VsZWN0ZWREcmFmdE1vZGVsIiwic2V0U2VsZWN0ZWREcmFmdE1vZGVsIiwiZmFzdFByZXZpZXdNb2RlIiwic2V0RmFzdFByZXZpZXdNb2RlIiwidXNlckVtYWlsIiwic2V0VXNlckVtYWlsIiwibnVtYmVyT2ZDYXJkcyIsInNldE51bWJlck9mQ2FyZHMiLCJpc0hhbmR3cml0dGVuTWVzc2FnZSIsInNldElzSGFuZHdyaXR0ZW5NZXNzYWdlIiwiaXNGcm9udEJhY2tPbmx5Iiwic2V0SXNGcm9udEJhY2tPbmx5Iiwic2VsZWN0ZWRQYXBlclNpemUiLCJzZXRTZWxlY3RlZFBhcGVyU2l6ZSIsImlzVGV4dGFyZWFFeHBhbmRlZCIsInNldElzVGV4dGFyZWFFeHBhbmRlZCIsImlzTWVzc2FnZUV4cGFuZGVkIiwic2V0SXNNZXNzYWdlRXhwYW5kZWQiLCJzaG93U2V0dGluZ3MiLCJzZXRTaG93U2V0dGluZ3MiLCJzaG93VGVtcGxhdGVHYWxsZXJ5Iiwic2V0U2hvd1RlbXBsYXRlR2FsbGVyeSIsInNob3dQcmludENvbmZpcm1hdGlvbiIsInNldFNob3dQcmludENvbmZpcm1hdGlvbiIsInNob3dUZW1wbGF0ZUN1c3RvbWl6YXRpb24iLCJzZXRTaG93VGVtcGxhdGVDdXN0b21pemF0aW9uIiwiaXNSZXN0b3JpbmdKb2JzIiwic2V0SXNSZXN0b3JpbmdKb2JzIiwic2VsZWN0ZWRUZW1wbGF0ZSIsInNldFNlbGVjdGVkVGVtcGxhdGUiLCJpc0luaXRpYWxMb2FkQ29tcGxldGUiLCJzZXRJc0luaXRpYWxMb2FkQ29tcGxldGUiLCJ0ZW1wbGF0ZVNlYXJjaFF1ZXJ5Iiwic2V0VGVtcGxhdGVTZWFyY2hRdWVyeSIsImlzU2VhcmNoaW5nVGVtcGxhdGVzIiwic2V0SXNTZWFyY2hpbmdUZW1wbGF0ZXMiLCJhaUZpbHRlcmVkQ2FyZHMiLCJzZXRBaUZpbHRlcmVkQ2FyZHMiLCJzZWFyY2hNb2RlIiwic2V0U2VhcmNoTW9kZSIsInRleHRGaWx0ZXJlZENhcmRzIiwic2V0VGV4dEZpbHRlcmVkQ2FyZHMiLCJzaG93UHJvbXB0cyIsInNldFNob3dQcm9tcHRzIiwicHJpbnRPcHRpb24iLCJzZXRQcmludE9wdGlvbiIsInRlbXBsYXRlQ3VzdG9taXphdGlvbnMiLCJzZXRUZW1wbGF0ZUN1c3RvbWl6YXRpb25zIiwicHJvbXB0Q2hhbmdlcyIsIm1lc3NhZ2VDaGFuZ2VzIiwidXNlUmVmZXJlbmNlSW1hZ2UiLCJyZWZlcmVuY2VJbWFnZUZpbGUiLCJyZWZlcmVuY2VJbWFnZVVybHMiLCJyZWZlcmVuY2VJbWFnZVRyYW5zZm9ybWF0aW9uIiwic2VjdGlvbkxvYWRpbmdTdGF0ZXMiLCJzZXRTZWN0aW9uTG9hZGluZ1N0YXRlcyIsImZyb250Q292ZXIiLCJiYWNrQ292ZXIiLCJsZWZ0SW50ZXJpb3IiLCJyaWdodEludGVyaW9yIiwiY291bnRkb3duIiwic2V0Q291bnRkb3duIiwiY291bnRkb3duSW50ZXJ2YWwiLCJzZXRDb3VudGRvd25JbnRlcnZhbCIsIndlYlNvY2tldCIsImpvYk1hbmFnZW1lbnQiLCJmaWxlSGFuZGxpbmciLCJtZXNzYWdlR2VuZXJhdGlvbiIsInBob3RvQW5hbHlzZXMiLCJkcmFmdEdlbmVyYXRpb25Qcm9wcyIsImZpbmFsQ2FyZE1lc3NhZ2UiLCJzYXZlSm9iVG9TdG9yYWdlIiwic3Vic2NyaWJlVG9Kb2IiLCJ1bnN1YnNjcmliZUZyb21BbGxKb2JzIiwic3RhcnRFbGFwc2VkVGltZVRyYWNraW5nIiwic3RvcEVsYXBzZWRUaW1lVHJhY2tpbmciLCJkcmFmdEdlbmVyYXRpb24iLCJjYXJkR2VuZXJhdGlvblByb3BzIiwicmVtb3ZlSm9iRnJvbVN0b3JhZ2UiLCJzZXRDdXJyZW50Sm9iSWQiLCJzZXRJc0RyYWZ0TW9kZSIsInNldERyYWZ0Q2FyZHMiLCJzZXRTZWxlY3RlZERyYWZ0SW5kZXgiLCJzZXRJc0dlbmVyYXRpbmdGaW5hbENhcmQiLCJzZXRQcmV2aWV3aW5nRHJhZnRJbmRleCIsInNldERyYWZ0Q29tcGxldGlvblNob3duIiwic2V0RHJhZnRDb21wbGV0aW9uQ291bnQiLCJjYXJkR2VuZXJhdGlvbiIsImhhbmRsZUpvYlVwZGF0ZSIsImRhdGEiLCJqb2JfaWQiLCJzdGF0dXMiLCJwcm9ncmVzcyIsImNhcmREYXRhIiwiZXJyb3IiLCJjb21wbGV0ZWRBdCIsImNvbnNvbGUiLCJsb2ciLCJpc0RyYWZ0Sm9iIiwic3RhcnRzV2l0aCIsImRyYWZ0SW5kZXgiLCJwYXJzZUludCIsInNwbGl0IiwiaXNJbkRyYWZ0TW9kZSIsImlzRHJhZnRNb2RlIiwiaW5jbHVkZXMiLCJzZXRHZW5lcmF0aW9uUHJvZ3Jlc3MiLCJzdHlsZUluZm8iLCJ1bmRlZmluZWQiLCJwcmVkZWZpbmVkU3R5bGVzIiwic3R5bGVMYWJlbHMiLCJsZW5ndGgiLCJzdHlsZU5hbWUiLCJzdHlsZUxhYmVsIiwiZHJhZnRDYXJkIiwiaWQiLCJEYXRlIiwibm93IiwibGVmdFBhZ2UiLCJyaWdodFBhZ2UiLCJjcmVhdGVkQXQiLCJnZW5lcmF0ZWRQcm9tcHRzIiwicHJldiIsInVwZGF0ZWQiLCJwdXNoIiwiam9iRGF0YSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJqb2IiLCJKU09OIiwicGFyc2UiLCJkcmFmdENhcmRzIiwibGFzdFVwZGF0ZSIsImV4cGlyZXNBdCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJ1cGRhdGVkRHJhZnRzIiwiY29tcGxldGVkQ291bnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwicHJvZ3Jlc3NNc2ciLCJpc0dlbmVyYXRpbmdGaW5hbENhcmQiLCJzZXRJc0dlbmVyYXRpbmciLCJzdWNjZXNzIiwidW5zdWJzY3JpYmVGcm9tSm9iIiwiaGFzQ2FyZERhdGEiLCJjYXJkRGF0YUtleXMiLCJPYmplY3QiLCJrZXlzIiwibWFwcGVkQ2FyZERhdGEiLCJoYW5kbGVGaW5hbENhcmRDb21wbGV0aW9uIiwiZmluYWxDYXJkTWV0YWRhdGEiLCJqb2JJZCIsImlzRmluYWxDYXJkIiwiaGFzSW1hZ2VzIiwid2FybiIsImN1cnJlbnRKb2JSZWYiLCJjdXJyZW50IiwiY3VycmVudEpvYklkIiwic2V0Sm9iVXBkYXRlSGFuZGxlciIsInN0YWxlSm9iTG9nZ2VkUmVmIiwiaXNTb2NrZXRDb25uZWN0ZWQiLCJpc0dlbmVyYXRpbmciLCJnZW5lcmF0aW9uU3RhcnRUaW1lIiwiam9iQWdlIiwicmVjb25uZWN0VGltZXIiLCJzZXRUaW1lb3V0IiwiY29ubmVjdFdlYlNvY2tldCIsImNsZWFyVGltZW91dCIsImNoZWNrSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInRpbWVTaW5jZUxhc3RVcGRhdGUiLCJsYXN0Sm9iVXBkYXRlUmVmIiwicHJvZ3Jlc3NQZXJjZW50YWdlIiwiTWF0aCIsInJvdW5kIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiam9iU3RhdHVzIiwianNvbiIsImNsZWFySW50ZXJ2YWwiLCJjaGVja1BlbmRpbmdKb2JzIiwicGVuZGluZ0pvYnMiLCJkcmFmdEpvYnMiLCJmaW5hbEpvYnMiLCJkcmFmdHNCeUluZGV4IiwiQXJyYXkiLCJmaWxsIiwiaXNBcnJheSIsImFsbERyYWZ0Q2FyZHMiLCJpc1N0YWxlIiwiaXNEcmFmdCIsImhhc1Byb2dyZXNzIiwibGFzdFByb2dyZXNzIiwibGFzdFByb2dyZXNzVGV4dCIsInNlbGVjdGVkRHJhZnRJbmRleCIsImpvYlN0YXJ0VGltZSIsImVsYXBzZWRTaW5jZVN0YXJ0IiwiQkFDS0VORF9BUElfQkFTRV9VUkwiLCJyZXN1bHQiLCJyZXN1bHRTdGF0dXMiLCJ1cmwiLCJkdXJhdGlvbiIsImluZm8iLCJzYXZlZEZpbmFsQ2FyZCIsImZpbmFsQ2FyZCIsInNldEdlbmVyYXRlZENhcmQiLCJzZXRHZW5lcmF0ZWRDYXJkcyIsInNldElzQ2FyZENvbXBsZXRlZCIsInJlbW92ZUl0ZW0iLCJyZWNlbnREcmFmdHMiLCJsb2FkTW9zdFJlY2VudERyYWZ0QmF0Y2giLCJjYXJkcyIsImNvdW50IiwidG9Mb2NhbGVTdHJpbmciLCJlbGFwc2VkU2Vjb25kcyIsImZsb29yIiwic2V0Q3VycmVudEVsYXBzZWRUaW1lIiwiYWN0aXZlRHJhZnRKb2JzIiwiZm9yRWFjaCIsInNldEZpbmFsQ2FyZE1lc3NhZ2UiLCJpc0dlbmVyYXRpbmdNZXNzYWdlIiwic2V0SXNHZW5lcmF0aW5nTWVzc2FnZSIsImdlbmVyYXRlZENhcmQiLCJnZW5lcmF0ZWRDYXJkcyIsInNlbGVjdGVkQ2FyZEluZGV4Iiwic2V0U2VsZWN0ZWRDYXJkSW5kZXgiLCJwcmV2aWV3aW5nRHJhZnRJbmRleCIsImRyYWZ0Q29tcGxldGlvblNob3duIiwiZHJhZnRDb21wbGV0aW9uQ291bnQiLCJnZW5lcmF0aW9uUHJvZ3Jlc3MiLCJpc0NhcmRDb21wbGV0ZWQiLCJyZWZlcmVuY2VJbWFnZXMiLCJzZXRSZWZlcmVuY2VJbWFnZXMiLCJzZXRSZWZlcmVuY2VJbWFnZVVybHMiLCJpbWFnZVRyYW5zZm9ybWF0aW9uIiwic2V0SW1hZ2VUcmFuc2Zvcm1hdGlvbiIsImlzVXBsb2FkaW5nIiwic2V0SXNVcGxvYWRpbmciLCJnZW5lcmF0aW9uRHVyYXRpb24iLCJzZXRHZW5lcmF0aW9uRHVyYXRpb24iLCJjdXJyZW50RWxhcHNlZFRpbWUiLCJoYW5kbGVGaWxlVXBsb2FkIiwiaGFuZGxlUmVtb3ZlUmVmZXJlbmNlSW1hZ2UiLCJzZXRQaG90b0FuYWx5c2VzIiwiaXNBbmFseXppbmciLCJzaG93QW5hbHlzaXNNb2RhbCIsInNldFNob3dBbmFseXNpc01vZGFsIiwicGVuZGluZ0FuYWx5c2lzSW5kZXgiLCJzZXRQZW5kaW5nQW5hbHlzaXNJbmRleCIsImFuYWx5emVQaG90byIsInNhdmVQaG90b0FuYWx5c2lzIiwic2tpcFBob3RvQW5hbHlzaXMiLCJnZXRDb21iaW5lZFBob3RvQW5hbHlzaXMiLCJoYW5kbGVHZXRNZXNzYWdlSGVscCIsImFkZE1lc3NhZ2VUb0hpc3RvcnkiLCJ1bmRvTWVzc2FnZSIsInJlZG9NZXNzYWdlIiwiaGFuZGxlR2VuZXJhdGVDYXJkQXN5bmMiLCJoYW5kbGVHZW5lcmF0ZURyYWZ0Q2FyZHMiLCJoYW5kbGVHZW5lcmF0ZUZpbmFsRnJvbURyYWZ0IiwibWVzc2FnZUhpc3RvcnkiLCJzZXRNZXNzYWdlSGlzdG9yeSIsImN1cnJlbnRNZXNzYWdlSW5kZXgiLCJzZXRDdXJyZW50TWVzc2FnZUluZGV4IiwicmVmaW5lbWVudFByb21wdCIsInNldFJlZmluZW1lbnRQcm9tcHQiLCJpc1JlZmluaW5nTWVzc2FnZSIsInNldElzUmVmaW5pbmdNZXNzYWdlIiwic2hvd1JlZmluZW1lbnRCb3giLCJzZXRTaG93UmVmaW5lbWVudEJveCIsImhhbmR3cml0aW5nU2FtcGxlIiwic2V0SGFuZHdyaXRpbmdTYW1wbGUiLCJoYW5kd3JpdGluZ1NhbXBsZVVybCIsInNldEhhbmR3cml0aW5nU2FtcGxlVXJsIiwidHJpZ2dlclBob3RvQW5hbHlzaXMiLCJjdXJyZW50Q2FyZElkIiwic2V0Q3VycmVudENhcmRJZCIsInNldEdlbmVyYXRpb25TdGFydFRpbWUiLCJlbGFwc2VkVGltZUludGVydmFsIiwic2V0RWxhcHNlZFRpbWVJbnRlcnZhbCIsImRpc2Nvbm5lY3RXZWJTb2NrZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useCardStudioRefactored.ts\n"));

/***/ })

});