(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7727:function(e,t,a){Promise.resolve().then(a.bind(a,43453))},43453:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eb}});var r=a(57437),s=a(2265),i=a(62869),n=a(95186),o=a(94508);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});l.displayName="Textarea";var c=a(66070),d=a(53647),m=a(962);let u=m.fC,h=m.wy,g=m.Fw;var p=a(29525),f=a(35900),x=a(31810),y=a(88997),b=a(49474),v=a(53057),w=a(95337),j=a(23959),N=a(55900),k=a(33741),C=a(34838),S=a(87414),E=a(99637),D=a(82718),T=a(42208),A=a(32660),I=a(82023),P=a(77440),R=a(62883),_=a(32489),F=a(98728),z=a(40875),O=a(17689),Z=a(2207),L=a(91723),M=a(27648),Y=a(14438),B=a(35974),U=a(26110),q=a(51817),V=a(41671),H=a(49322),W=a(89227),G=a(33276),Q=a(69076),J=a(47416),K=a(92451),$=a(10407),X=a(17625),ee=a(68919),et=a(78867),ea=a(89345),er=a(14368),es=a(48614);let ei={enter:e=>({x:e>0?1e3:-1e3,opacity:0,scale:.8}),center:{zIndex:1,x:0,opacity:1,scale:1},exit:e=>({zIndex:0,x:e<0?1e3:-1e3,opacity:0,scale:.8})},en=(e,t)=>Math.abs(e)*t;function eo(e){var t,a;let{card:o,onCardUpdate:c,isFrontBackOnly:d=!1,onPrint:m,paperConfig:u,sectionLoadingStates:h}=e,[g,p]=(0,s.useState)(0),[f,x]=(0,s.useState)(0),[y,b]=(0,s.useState)(!1),[v,w]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)(null),[S,E]=(0,s.useState)(""),[D,T]=(0,s.useState)(!1),[A,I]=(0,s.useState)({}),[P,F]=(0,s.useState)({}),[z,O]=(0,s.useState)(!1),[L,M]=(0,s.useState)(""),[eo,el]=(0,s.useState)(!1),[ec,ed]=(0,s.useState)(""),[em,eu]=(0,s.useState)(!1),eh=(e,t)=>{let a=A[e],r=P[e];return a&&a.length>0&&void 0!==r?a[r]:t},eg=e=>{let t=P[e];return void 0!==t&&t>0},ep=e=>{let t=A[e],a=P[e];return t&&void 0!==a&&a<t.length-1},ef=e=>{eg(e)&&F(t=>({...t,[e]:t[e]-1}))},ex=e=>{ep(e)&&F(t=>({...t,[e]:t[e]+1}))},ey=(e,t)=>{let a=A[e]||[],r=P[e]||-1,s=[...a.slice(0,r+1),t];I(t=>({...t,[e]:s})),F(t=>({...t,[e]:s.length-1}))},eb=e=>{switch(e){case"front-cover":return o.frontCover;case"back-cover":return o.backCover;case"left-interior":return o.leftPage;case"right-interior":return o.rightPage;default:return null}},ev=[{id:"front-cover",title:"Front Cover",subtitle:"What recipients see first",image:eh("front-cover",o.frontCover),originalImage:o.frontCover,description:"The front cover design that recipients will see first.",color:"bg-blue-500",type:"single",editLabel:"Edit Front Cover"},{id:"left-interior",title:"Left Interior",subtitle:"Decorative page",image:eh("left-interior",o.leftPage),originalImage:o.leftPage,description:"The decorative left page when the card is opened.",color:"bg-emerald-500",type:"single",editLabel:"Edit Left Interior"},{id:"right-interior",title:"Right Interior",subtitle:"Message page",image:eh("right-interior",o.rightPage),originalImage:o.rightPage,description:"The right page with your message when the card is opened.",color:"bg-emerald-600",type:"single",editLabel:"Edit Right Interior"},{id:"back-cover",title:"Back Cover",subtitle:"What's on the back",image:eh("back-cover",o.backCover),originalImage:o.backCover,description:"The back of the card with subtle design elements.",color:"bg-gray-500",type:"single",editLabel:"Edit Back Cover"}],ew=d?ev.filter(e=>!e.id.includes("interior")):ev,ej=e=>{x(e),p(t=>1===e?t===ew.length-1?0:t+1:0===t?ew.length-1:t-1)},eN=e=>{x(e>g?1:-1),p(e)},ek=()=>{y?(v&&(clearInterval(v),w(null)),b(!1)):(w(setInterval(()=>{ej(1)},3e3)),b(!0))};(0,s.useEffect)(()=>()=>{v&&clearInterval(v)},[v]);let eC=()=>{N(!0),document.body.style.overflow="hidden"},eS=()=>{N(!1),document.body.style.overflow="unset"};(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&j&&eS()};if(j)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[j]);let eE=e=>{C(e),E("")},eD=async()=>{if(!k||!S.trim()){Y.Am.error("Please enter an edit prompt");return}let e=eb(k);if(!e){Y.Am.error("Could not find source image for editing");return}T(!0);try{var t;let a;let r="CRITICAL: This is a greeting card ".concat(k.replace("-"," "),' in portrait format.\n\nYour edit request: "').concat(S,'"\n\nIMPORTANT INSTRUCTIONS:\n- This is a portrait (vertical) image for a greeting card\n- You must PRESERVE the portrait format and dimensions\n- Only modify what was specifically requested in the edit\n- Keep the overall layout structure intact - do not crop or cut off any sections\n- Maintain the aspect ratio and size of the original image\n- Ensure the edited result is suitable for printing as part of a greeting card\n- Position any text elements safely away from edges with generous margins\n- The image should remain focused on its specific purpose: ').concat(k.replace("-"," "),"\n\nApply the requested changes while preserving the complete image structure and portrait format."),s=await fetch("/internal/call_mcp_tool",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool_name:"edit_images",arguments:{images:[e],edit_prompt:r,user_number:"+17145986105",model:"gpt-image-1",output_format:"jpeg",quality:"auto",output_compression:100,size:(null==u?void 0:u.dimensions)||"1024x1536",n:1}})});if(!s.ok)throw Error("HTTP ".concat(s.status));let i=await s.json();if(i.error&&"None"!==i.error&&null!==i.error)throw Error(i.error);if("string"==typeof i.result)try{a=JSON.parse(i.result)}catch(e){throw Error("Invalid JSON response")}else a=i.result;if("error"===a.status)throw Error(a.message);let n=a.results[0];if("error"===n.status)throw Error(n.message);let l=n.edited_url;if(!l)throw Error("No edited image URL returned");if(ey(k,l),c){let e={...o};switch(k){case"front-cover":e.frontCover=l;break;case"back-cover":e.backCover=l;break;case"left-interior":e.leftPage=l;break;case"right-interior":e.rightPage=l}c(e)}Y.Am.success("✨ ".concat(null===(t=ew.find(e=>e.id===k))||void 0===t?void 0:t.title," edited successfully!")),C(null),E("")}catch(e){console.error("Edit failed:",e),Y.Am.error("Failed to edit image: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{T(!1)}},eT=e=>{I(t=>{let a={...t};return delete a[e],a}),F(t=>{let a={...t};return delete a[e],a}),Y.Am.success("Reset to original image")},eA=e=>{if(!h)return"idle";switch(e){case"front-cover":return h.frontCover;case"back-cover":return h.backCover;case"left-interior":return h.leftInterior;case"right-interior":return h.rightInterior;case"interior":let t=h.leftInterior,a=h.rightInterior;if("loading"===t||"loading"===a)return"loading";if("error"===t||"error"===a)return"error";if("completed"===t&&"completed"===a)return"completed";return"idle";default:return"idle"}},eI=async()=>{O(!0);try{if(o.shareUrl){M(o.shareUrl),el(!0),Y.Am.success("Card is ready to share!"),O(!1);return}let e=await fetch("/api/cards/store",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:o.prompt,frontCover:o.frontCover,backCover:o.backCover,leftPage:o.leftPage,rightPage:o.rightPage})});if(!e.ok)throw Error("Failed to store card");let t=await e.json();M(t.share_url),c&&c({...o,shareUrl:t.share_url}),el(!0),Y.Am.success("Card is ready to share!")}catch(e){console.error("Error sharing card:",e),Y.Am.error("Failed to prepare card for sharing")}finally{O(!1)}},eP=async()=>{try{await navigator.clipboard.writeText(L),Y.Am.success("Link copied to clipboard!")}catch(e){Y.Am.error("Failed to copy link")}},eR=async()=>{if(!ec.trim()){Y.Am.error("Please enter an email address");return}eu(!0);try{let e=await fetch("/api/cards/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:ec,share_url:L,card_prompt:o.prompt})}),t=await e.json();e.ok&&"success"===t.status?(Y.Am.success("✉️ Card sent successfully via email!"),el(!1),ed("")):Y.Am.error("Failed to send email: ".concat(t.message||"Unknown error"))}catch(e){console.error("Error sending email:",e),Y.Am.error("Failed to send email. Please try again.")}finally{eu(!1)}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(er.E.div,{className:"text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Card Preview"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d?"Swipe through your card: front cover and back cover":"Swipe through your card: front cover, left interior, right interior, and back cover"})]}),(0,r.jsxs)(er.E.div,{className:"relative bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl p-6 overflow-hidden shadow-xl",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:ew.map((e,t)=>(0,r.jsx)(er.E.button,{className:"w-3 h-3 rounded-full transition-all duration-300 ".concat(t===g?"bg-blue-500 scale-125":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400"),onClick:()=>eN(t),whileHover:{scale:1.2},whileTap:{scale:.9}},t))}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[g+1," / ",ew.length]}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:ek,className:"h-8 w-8 p-0",children:y?(0,r.jsx)(W.Z,{className:"w-4 h-4"}):(0,r.jsx)(G.Z,{className:"w-4 h-4"})}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>p(0),className:"h-8 w-8 p-0",children:(0,r.jsx)(Q.Z,{className:"w-4 h-4"})}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:eC,className:"h-8 w-8 p-0",title:"View in fullscreen",children:(0,r.jsx)(J.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("div",{className:"relative h-[60vh] sm:h-80 md:h-96 overflow-hidden rounded-xl",children:(0,r.jsx)(es.M,{initial:!1,custom:f,children:(0,r.jsx)(er.E.div,{custom:f,variants:ei,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2},scale:{duration:.2}},drag:"x",dragConstraints:{left:0,right:0},dragElastic:1,onDragEnd:(e,t)=>{let{offset:a,velocity:r}=t,s=en(a.x,r.x);s<-1e4?ej(1):s>1e4&&ej(-1)},className:"absolute inset-0 cursor-grab active:cursor-grabbing",children:(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsx)(er.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,r.jsxs)(B.C,{className:"".concat(ew[g].color," text-white w-full justify-center py-2 mb-4 text-sm font-medium"),children:[ew[g].title," (",ew[g].subtitle,")"]})}),(0,r.jsx)(er.E.div,{className:"flex-1 relative border-2 border-white/20 rounded-lg overflow-hidden shadow-2xl bg-white group",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.4},children:ew[g].image?(0,r.jsxs)("div",{className:"w-full h-full relative cursor-pointer group/image",onClick:eC,title:"Click to view fullscreen",children:[(0,r.jsx)("img",{src:ew[g].image,alt:ew[g].title,className:"w-full h-full object-contain bg-white",draggable:!1}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover/image:bg-black/10 transition-all duration-200 flex items-center justify-center",children:(0,r.jsx)("div",{className:"opacity-0 group-hover/image:opacity-100 transition-opacity duration-200 bg-white/90 rounded-full p-3 shadow-lg",children:(0,r.jsx)(J.Z,{className:"w-6 h-6 text-gray-700"})})}),(0,r.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute top-3 left-3 pointer-events-auto",children:(e=>{switch(e){case"loading":return(0,r.jsx)("div",{className:"absolute top-3 left-16 bg-blue-500/90 text-white rounded-full p-2 shadow-lg",children:(0,r.jsx)(q.Z,{className:"w-4 h-4 animate-spin"})});case"completed":return(0,r.jsx)("div",{className:"absolute top-3 left-16 bg-green-500/90 text-white rounded-full p-2 shadow-lg",children:(0,r.jsx)(V.Z,{className:"w-4 h-4"})});case"error":return(0,r.jsx)("div",{className:"absolute top-3 left-16 bg-red-500/90 text-white rounded-full p-2 shadow-lg",children:(0,r.jsx)(H.Z,{className:"w-4 h-4"})});default:return null}})(eA(ew[g].id))}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),eE(ew[g].id)},className:"absolute top-3 right-3 bg-white/90 hover:bg-white text-gray-700 rounded-full p-2 shadow-lg transition-all duration-200 pointer-events-auto",title:ew[g].editLabel,children:(0,r.jsx)(Z.Z,{className:"w-4 h-4"})}),A[ew[g].id]&&A[ew[g].id].length>0&&(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),eT(ew[g].id)},className:"absolute top-3 left-3 bg-amber-500/90 hover:bg-amber-500 text-white rounded-full p-2 shadow-lg transition-all duration-200 pointer-events-auto",title:"Reset to original",children:(0,r.jsx)(Q.Z,{className:"w-3 h-3"})}),A[ew[g].id]&&A[ew[g].id].length>0&&(0,r.jsxs)("div",{className:"absolute bottom-3 left-3 bg-white/90 rounded-lg shadow-lg p-2 flex items-center gap-2 pointer-events-auto",children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),ef(ew[g].id)},disabled:!eg(ew[g].id),className:"p-1 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",title:"Previous version",children:(0,r.jsx)(K.Z,{className:"w-3 h-3"})}),(0,r.jsxs)("span",{className:"text-xs text-gray-700 px-1",children:[(P[ew[g].id]||0)+1,"/",A[ew[g].id].length]}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),ex(ew[g].id)},disabled:!ep(ew[g].id),className:"p-1 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",title:"Next version",children:(0,r.jsx)($.Z,{className:"w-3 h-3"})})]}),A[ew[g].id]&&A[ew[g].id].length>0&&(0,r.jsxs)("div",{className:"absolute bottom-3 right-3 bg-emerald-500 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 pointer-events-auto",children:[(0,r.jsx)(R.Z,{className:"w-3 h-3"}),"Edited"]})]})]}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading section..."})})}),(0,r.jsx)(er.E.p,{className:"text-sm text-gray-600 dark:text-gray-400 text-center mt-3 px-4 leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:ew[g].description})]})},g)})}),(0,r.jsx)(er.E.button,{className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full p-2 shadow-lg hover:bg-white dark:hover:bg-gray-700 transition-colors z-10",onClick:()=>ej(-1),whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,r.jsx)(K.Z,{className:"w-5 h-5"})}),(0,r.jsx)(er.E.button,{className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full p-2 shadow-lg hover:bg-white dark:hover:bg-gray-700 transition-colors z-10",onClick:()=>ej(1),whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,r.jsx)($.Z,{className:"w-5 h-5"})})]}),(0,r.jsx)(er.E.div,{className:"grid ".concat(d?"grid-cols-2":"grid-cols-2 sm:grid-cols-4"," gap-3"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:ew.map((e,t)=>{let a=eA(e.id);return(0,r.jsxs)(er.E.button,{onClick:()=>eN(t),className:"p-3 rounded-lg border-2 transition-all duration-300 text-left relative ".concat(t===g?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,r.jsxs)("div",{className:"absolute top-2 right-2",children:["loading"===a&&(0,r.jsx)(q.Z,{className:"w-3 h-3 animate-spin text-blue-500"}),"completed"===a&&(0,r.jsx)(V.Z,{className:"w-3 h-3 text-green-500"}),"error"===a&&(0,r.jsx)(H.Z,{className:"w-3 h-3 text-red-500"})]}),(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mb-2 ".concat(e.color)}),(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.subtitle})]},e.id)})}),(0,r.jsxs)(er.E.div,{className:"flex flex-col sm:flex-row gap-3 pt-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[m&&(0,r.jsxs)(i.z,{onClick:m,className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white",children:[(0,r.jsx)(X.Z,{className:"w-4 h-4 mr-2"}),"Print Card"]}),(0,r.jsx)(i.z,{onClick:eI,disabled:z,variant:"outline",className:"flex-1 border-blue-500 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20",children:z?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Preparing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.Z,{className:"w-4 h-4 mr-2"}),"Share Card"]})})]}),(0,r.jsx)(U.Vq,{open:eo,onOpenChange:el,children:(0,r.jsxs)(U.cZ,{className:"sm:max-w-md",children:[(0,r.jsxs)(U.fK,{children:[(0,r.jsxs)(U.$N,{className:"flex items-center gap-2",children:[(0,r.jsx)(ee.Z,{className:"w-5 h-5"}),"Share Your Card"]}),(0,r.jsx)(U.Be,{children:"Your card is ready to share! Copy the link or send it via email."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Share URL"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(n.I,{value:L,readOnly:!0,className:"flex-1"}),(0,r.jsx)(i.z,{onClick:eP,variant:"outline",size:"sm",children:(0,r.jsx)(et.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Send via Email"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(n.I,{type:"email",placeholder:"recipient@example.com",value:ec,onChange:e=>ed(e.target.value),className:"flex-1"}),(0,r.jsx)(i.z,{onClick:eR,variant:"outline",size:"sm",disabled:!ec.trim()||em,children:em?(0,r.jsx)(q.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(ea.Z,{className:"w-4 h-4"})})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:em?"Sending email...":"Sends the card directly via email"})]})]})]})}),(0,r.jsx)(es.M,{children:j&&(0,r.jsx)(er.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-sm",onClick:eS,children:(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(B.C,{className:"".concat(ew[g].color," text-white px-4 py-2"),children:ew[g].title}),(0,r.jsx)("span",{className:"text-white/80 text-sm hidden md:block",children:ew[g].subtitle})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"text-white/80 text-sm",children:[g+1," / ",ew.length]}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),ek()},className:"h-9 w-9 p-0 text-white hover:bg-white/10",children:y?(0,r.jsx)(W.Z,{className:"w-5 h-5"}):(0,r.jsx)(G.Z,{className:"w-5 h-5"})}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),eS()},className:"h-9 w-9 p-0 text-white hover:bg-white/10",children:(0,r.jsx)(_.Z,{className:"w-5 h-5"})})]})]}),(0,r.jsx)("div",{className:"flex-1 relative px-4 md:px-6 pb-6",children:(0,r.jsxs)("div",{className:"h-full relative",children:[(0,r.jsx)(es.M,{initial:!1,custom:f,children:(0,r.jsx)(er.E.div,{custom:f,variants:ei,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2},scale:{duration:.2}},drag:"x",dragConstraints:{left:0,right:0},dragElastic:1,onDragEnd:(e,t)=>{let{offset:a,velocity:r}=t,s=en(a.x,r.x);s<-1e4?ej(1):s>1e4&&ej(-1)},className:"absolute inset-0 cursor-grab active:cursor-grabbing",onClick:e=>e.stopPropagation(),children:(0,r.jsx)("div",{className:"h-full flex items-center justify-center",children:ew[g].image?(0,r.jsx)("img",{src:ew[g].image,alt:ew[g].title,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl",draggable:!1}):(0,r.jsx)("div",{className:"flex items-center justify-center bg-gray-800 rounded-lg p-8",children:(0,r.jsx)("p",{className:"text-white/70",children:"Loading section..."})})})},"fullscreen-".concat(g))}),(0,r.jsx)(er.E.button,{className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 backdrop-blur-sm rounded-full p-3 text-white hover:bg-black/70 transition-colors z-10",onClick:e=>{e.stopPropagation(),ej(-1)},whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,r.jsx)(K.Z,{className:"w-6 h-6"})}),(0,r.jsx)(er.E.button,{className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 backdrop-blur-sm rounded-full p-3 text-white hover:bg-black/70 transition-colors z-10",onClick:e=>{e.stopPropagation(),ej(1)},whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,r.jsx)($.Z,{className:"w-6 h-6"})})]})}),(0,r.jsx)("div",{className:"flex items-center justify-center gap-3 pb-6",children:ew.map((e,t)=>(0,r.jsx)(er.E.button,{className:"transition-all duration-300 ".concat(t===g?"w-8 h-3 bg-white rounded-full":"w-3 h-3 bg-white/40 rounded-full hover:bg-white/60"),onClick:e=>{e.stopPropagation(),eN(t)},whileHover:{scale:1.2},whileTap:{scale:.9}},"fullscreen-indicator-".concat(e.id)))}),(0,r.jsx)("div",{className:"px-6 pb-6",children:(0,r.jsx)(er.E.p,{className:"text-white/80 text-center text-sm md:text-base leading-relaxed max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:ew[g].description})})]})})}),(0,r.jsx)(U.Vq,{open:!!k,onOpenChange:e=>!e&&C(null),children:(0,r.jsxs)(U.cZ,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(U.fK,{children:[(0,r.jsxs)(U.$N,{className:"flex items-center gap-2",children:[(0,r.jsx)(R.Z,{className:"w-5 h-5 text-blue-600"}),k?null===(t=ew.find(e=>e.id===k))||void 0===t?void 0:t.editLabel:"Edit Section"]}),(0,r.jsx)(U.Be,{children:"interior"===k?(0,r.jsxs)(r.Fragment,{children:["Describe how you'd like to modify this section of your card. This interior has ",(0,r.jsx)("strong",{children:"two areas"}),": decorative artwork on the left and your message on the right. Be specific about which area you want to change and what modifications you want.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsxs)("span",{className:"text-amber-600 dark:text-amber-400 text-sm",children:["\uD83D\uDCA1 ",(0,r.jsx)("strong",{children:"Tip:"}),' Specify "left side" for decorative changes or "right side" for message changes to ensure both areas are preserved.']})]}):"Describe how you'd like to modify this section of your card. Be specific about colors, style, content, or any changes you want to make."})]}),(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[k&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Current Image","left-interior"===k||"right-interior"===k?"s":""]}),(0,r.jsx)("div",{className:"border-2 border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden bg-white",children:"left-interior"===k||"right-interior"===k?(0,r.jsxs)("div",{className:"flex h-64",children:[(0,r.jsxs)("div",{className:"w-1/2 relative",children:[(0,r.jsx)("img",{src:eh("left-interior",o.leftPage),alt:"Left Interior",className:"w-full h-full object-contain"}),"left-interior"===k&&(0,r.jsx)("div",{className:"absolute inset-0 border-4 border-blue-500 bg-blue-500/10"})]}),(0,r.jsx)("div",{className:"w-px bg-gray-300"}),(0,r.jsxs)("div",{className:"w-1/2 relative",children:[(0,r.jsx)("img",{src:eh("right-interior",o.rightPage),alt:"Right Interior",className:"w-full h-full object-contain"}),"right-interior"===k&&(0,r.jsx)("div",{className:"absolute inset-0 border-4 border-blue-500 bg-blue-500/10"})]})]}):(0,r.jsx)("img",{src:(null===(a=ew.find(e=>e.id===k))||void 0===a?void 0:a.image)||"",alt:"Current section",className:"w-full h-64 object-contain"})}),("left-interior"===k||"right-interior"===k)&&(0,r.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"The highlighted area shows which side you're editing. Both sides are shown for context."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Edit Instructions"}),(0,r.jsx)(l,{placeholder:"e.g., Change the background to a sunset sky, make the flowers more colorful, add sparkles, change the text style to handwritten...",value:S,onChange:e=>E(e.target.value),rows:4,className:"resize-none",style:{fontSize:"16px"}}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Be specific about what you want to change. Only the areas you describe will be modified while keeping the rest intact."})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)(i.z,{onClick:()=>C(null),variant:"outline",className:"flex-1",disabled:D,children:"Cancel"}),(0,r.jsx)(i.z,{onClick:eD,disabled:!S.trim()||D,className:"flex-1 bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700",children:D?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Editing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R.Z,{className:"w-4 h-4 mr-2"}),"Apply Edit"]})})]})]})]})})]})}var el=a(35819),ec=a(93837),ed=a(11696);let em="https://vibecarding.com",eu=[{id:"custom",label:"Custom",description:"Create your own unique card type",icon:p.Z},{id:"birthday",label:"Birthday",description:"Celebrate another year of life",icon:f.Z},{id:"thank-you",label:"Thank You",description:"Express gratitude and appreciation",icon:x.Z},{id:"anniversary",label:"Anniversary",description:"Commemorate special milestones",icon:y.Z},{id:"congratulations",label:"Congratulations",description:"Celebrate achievements and success",icon:b.Z},{id:"holiday",label:"Holiday",description:"Seasonal and holiday greetings",icon:v.Z},{id:"get-well",label:"Get Well Soon",description:"Send healing wishes and support",icon:w.Z},{id:"sympathy",label:"Sympathy",description:"Offer comfort during difficult times",icon:j.Z},{id:"love",label:"Love & Romance",description:"Express romantic feelings",icon:y.Z},{id:"graduation",label:"Graduation",description:"Celebrate educational achievements",icon:N.Z},{id:"new-baby",label:"New Baby",description:"Welcome new arrivals",icon:k.Z},{id:"wedding",label:"Wedding",description:"Celebrate unions and marriages",icon:C.Z},{id:"retirement",label:"Retirement",description:"Honor career achievements",icon:S.Z},{id:"housewarming",label:"Housewarming",description:"Welcome to new homes",icon:E.Z},{id:"apology",label:"Apology",description:"Make amends and seek forgiveness",icon:D.Z},{id:"thinking-of-you",label:"Thinking of You",description:"Show you care and remember",icon:T.Z}],eh=[{id:"funny",label:"\uD83D\uDE04 Funny",description:"Humorous and lighthearted"},{id:"genz-humor",label:"\uD83D\uDC80 GenZ Humor",description:"Internet memes, chaotic energy, and unhinged vibes"},{id:"romantic",label:"\uD83D\uDC95 Romantic",description:"Sweet and loving"},{id:"professional",label:"\uD83D\uDC54 Professional",description:"Formal and business-appropriate"},{id:"heartfelt",label:"❤️ Heartfelt",description:"Sincere and emotional"},{id:"playful",label:"\uD83C\uDF89 Playful",description:"Fun and energetic"},{id:"elegant",label:"✨ Elegant",description:"Sophisticated and refined"},{id:"casual",label:"\uD83D\uDE0A Casual",description:"Relaxed and friendly"},{id:"inspirational",label:"\uD83C\uDF1F Inspirational",description:"Motivating and uplifting"},{id:"quirky",label:"\uD83E\uDD2A Quirky",description:"Unique and unconventional"},{id:"traditional",label:"\uD83C\uDFAD Traditional",description:"Classic and timeless"}],eg=[{id:"ai-smart-style",label:"✨ Smart Style",description:"Let our experts choose the perfect style for your card",promptModifier:""},{id:"custom",label:"✨ Custom Style",description:"Define your own unique artistic style",promptModifier:""},{id:"watercolor",label:"\uD83C\uDFA8 Watercolor",description:"Soft, flowing paint effects (our personal favorite)",promptModifier:"in watercolor painting style, with soft flowing colors, artistic brush strokes, paper texture, and organic paint bleeds"},{id:"minimalist",label:"✨ Minimalist",description:"Clean, simple, elegant design",promptModifier:"in minimalist style with clean lines, simple shapes, plenty of white space, sophisticated typography, and elegant simplicity"},{id:"dreamy-fantasy",label:"\uD83C\uDF38 Dreamy Fantasy",description:"Enchanting anime-inspired art",promptModifier:"in dreamy fantasy anime style, with soft pastels, magical atmosphere, detailed nature elements, whimsical characters, and enchanting fairy-tale qualities"},{id:"art-deco",label:"✨ Art Deco",description:"Elegant 1920s geometric luxury",promptModifier:"in vintage Art Deco style with geometric patterns, gold accents, elegant typography, luxurious details, and 1920s glamour"},{id:"pop-art",label:"\uD83C\uDFAD Pop Art",description:"Bold, colorful comic book style",promptModifier:"in pop art style like Andy Warhol and Roy Lichtenstein, with bold colors, comic book elements, halftone dots, and graphic design aesthetics"},{id:"impressionist",label:"\uD83D\uDDBC️ Impressionist",description:"Soft brushstrokes like Monet",promptModifier:"in impressionist painting style like Monet and Renoir, with soft brush strokes, light and shadow play, and dreamy atmospheric effects"},{id:"retro-vintage",label:"\uD83D\uDCFB Retro Vintage",description:"Classic 1950s-60s nostalgia",promptModifier:"in retro vintage style with 1950s-60s aesthetics, classic typography, warm nostalgic colors, and mid-century design elements"}],ep=[{id:"standard",label:"5\xd77 Card (Standard)",description:"Standard 5\xd77 greeting card (10\xd77 print layout)",aspectRatio:"9:16",dimensions:"1024x1536",printWidth:"10in",printHeight:"7in"},{id:"a6",label:"A6 Card (4\xd76)",description:"A6 paper size (8.3\xd75.8 print layout)",aspectRatio:"2:3",dimensions:"768x1152",printWidth:"8.3in",printHeight:"5.8in"}],ef=[{id:"gpt-image-1",label:"GPT Image 1",description:"Highest quality variant : Recommended"},{id:"imagen-4.0-ultra-generate-preview-06-06",label:"Imagen 4.0 Ultra",description:"Experimental, not recommended for text-heavy cards."}];async function ex(e,t,a){if(e.trim())try{let r=await fetch("https://16504442930.work/send_email_with_attachments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e,from:"vibecarding@ast.engineer",subject:"Your ".concat(t," card is ready! \uD83C\uDF89"),body:"Hi there!\n\nThank you for using VibeCarding to create your beautiful ".concat(t," card! \n\nWe hope you love how it turned out. Your card has been generated and is ready for printing or sharing.\n\nView your card: ").concat(a,"\n\nIf you have any questions or feedback, feel free to reach out to us.\n\nHappy card making! ✨\n\nBest regards,\nThe VibeCarding Team\nvibecarding@ast.engineer"),html:!1})});await fetch("https://16504442930.work/send_email_with_attachments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:"jordan@ast.engineer",from:"vibecarding@ast.engineer",subject:"Card Created - ".concat(t," for ").concat(e),body:"New card created on VibeCarding:\n\nUser: ".concat(e,"\nCard Type: ").concat(t,"\nCard URL: ").concat(a,"\n\nThis is an automated notification of card creation activity."),html:!1})}),r.ok&&Y.Am.success("✉️ Thank you email sent!")}catch(e){console.error("Failed to send thank you email:",e)}}async function ey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{systemPrompt:a=null,model:r="gemini-2.5-pro",includeThoughts:s=!1,jsonSchema:i=null}=t;try{let t;let n=await fetch("/internal/call_mcp_tool",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool_name:"ai_chat",arguments:{messages:e,system_prompt:a,model:r,include_thoughts:s,json_schema:i}})});if(!n.ok)throw Error("HTTP ".concat(n.status));let o=await n.json();if(o.error&&"None"!==o.error&&null!==o.error)throw Error(o.error);if("string"==typeof o.result)try{t=JSON.parse(o.result)}catch(e){t={status:"error",message:"Invalid JSON response"}}else t=o.result;if("error"===t.status)throw Error(t.message);return t.response}catch(e){throw console.error("AI chat failed:",e),e}}function eb(){let[e,t]=(0,s.useState)(""),[a,o]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[f,x]=(0,s.useState)(""),[y,b]=(0,s.useState)("birthday"),[v,w]=(0,s.useState)(""),[j,N]=(0,s.useState)("funny"),[k,C]=(0,s.useState)(!1),[S,E]=(0,s.useState)(null),[D,T]=(0,s.useState)(1),[B,U]=(0,s.useState)([]),[q,V]=(0,s.useState)(0),[H,W]=(0,s.useState)(!1),[G,Q]=(0,s.useState)(!1),[J,K]=(0,s.useState)("ai-smart-style"),[$,X]=(0,s.useState)(""),[ee,et]=(0,s.useState)("gpt-image-1"),[ea,er]=(0,s.useState)(""),[es,ei]=(0,s.useState)(0),[en,eb]=(0,s.useState)(null),ev=async(e,t)=>{console.log("\uD83D\uDD27 Starting QR overlay for:",t);try{console.log("\uD83D\uDCF1 Generating QR code...");let a=await el.toDataURL(t,{width:120,margin:1,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"});console.log("✅ QR code generated successfully");let r=document.createElement("canvas"),s=r.getContext("2d");if(!s)throw Error("Failed to get canvas context");let i=new Image;return new Promise((t,n)=>{i.onload=()=>{console.log("\uD83D\uDDBC️ Back cover image loaded, size:",i.width,"x",i.height),r.width=i.width,r.height=i.height,s.drawImage(i,0,0);let e=new Image;e.onload=()=>{console.log("\uD83D\uDCF1 QR code image loaded, overlaying...");let a=r.width-120-40,i=r.height-120-40-30;console.log("\uD83D\uDCCD QR position:",a,i,"on canvas:",r.width,"x",r.height),s.fillStyle="#FFFFFF",s.beginPath(),s.roundRect(a-15,i-15,150,175,8),s.fill(),s.strokeStyle="rgba(0, 0, 0, 0.1)",s.lineWidth=1,s.stroke(),s.drawImage(e,a,i,120,120),s.fillStyle="#666666",s.font="16px system-ui, -apple-system, sans-serif",s.textAlign="center",s.fillText("Scan me :)",a+60,i+120+15);let n=r.toDataURL("image/png",.9);console.log("✅ QR overlay complete, result length:",n.length),t(n)},e.onerror=e=>{console.error("❌ Failed to load QR code image:",e),n(Error("Failed to load QR code"))},e.src=a},i.onerror=e=>{console.error("❌ Failed to load back cover image:",e),n(Error("Failed to load back cover image"))},i.src=e})}catch(t){return console.error("❌ Error overlaying QR code:",t),e}},[ew,ej]=(0,s.useState)(null),[eN,ek]=(0,s.useState)(null),[eC,eS]=(0,s.useState)(null),[eE,eD]=(0,s.useState)(null),[eT,eA]=(0,s.useState)(""),[eI,eP]=(0,s.useState)(!1),[eR,e_]=(0,s.useState)(""),[eF,ez]=(0,s.useState)(null),[eO,eZ]=(0,s.useState)(!1),[eL,eM]=(0,s.useState)(!1),[eY,eB]=(0,s.useState)("standard"),[eU,eq]=(0,s.useState)({frontCover:"idle",backCover:"idle",leftInterior:"idle",rightInterior:"idle"});(0,s.useEffect)(()=>()=>{en&&clearInterval(en)},[en]);let eV=async()=>{if(!e.trim()){Y.Am.error("Please describe your card first!");return}if("custom"===y&&!v.trim()){Y.Am.error("Please describe your custom card type first!");return}W(!0);try{let t="custom"===y?v:y,a=eh.find(e=>e.id===j),r=a?a.description.toLowerCase():"heartfelt and sincere",s="Create a ".concat(r," message for a ").concat(t,' greeting card.\n\nCard Theme/Description: "').concat(e,'"\n').concat(m?"Recipient: ".concat(m):"Recipient: [not specified]","\n").concat(f?"Sender: ".concat(f):"Sender: [not specified]","\nCard Tone: ").concat(a?a.label:"Heartfelt"," - ").concat(r,"\n\nInstructions:\n- Write a message that is ").concat(r," and feels personal and genuine\n- ").concat(m?"Address the message to ".concat(m," directly, using their name naturally"):"Write in a way that could be personalized to any recipient","\n- ").concat(f?"Write as if ".concat(f," is personally writing this message"):"Write in a ".concat(r," tone"),"\n- Match the ").concat(r," tone and occasion of the ").concat(t,' card type\n- Be inspired by the theme: "').concat(e,'"\n- Keep it concise but meaningful (2-4 sentences ideal)\n- Make it feel authentic, not generic\n- SAFETY: Never include brand names, character names, trademarked terms, or inappropriate content. If the theme references these, use generic alternatives or focus on the emotions/concepts instead\n- Keep content family-friendly and appropriate for all ages\n- ').concat("funny"===j?"Include appropriate humor that fits the occasion":"","\n- ").concat("genz-humor"===j?'Use GenZ humor with internet slang, memes, and chaotic energy - think "no cap", "periodt", "it\'s giving...", "slay", etc. Be unhinged but endearing':"","\n- ").concat("professional"===j?"Keep it formal and business-appropriate":"","\n- ").concat("romantic"===j?"Include loving and romantic language":"","\n- ").concat("playful"===j?"Use fun and energetic language":"","\n- ").concat(m&&f?"Show the relationship between ".concat(f," and ").concat(m," through the ").concat(r," message tone"):"","\n- ").concat(f?'End the message with a signature line like "Love, '.concat(f,'" or "- ').concat(f,'" or similar, naturally integrated into the message.'):"","\n\nReturn ONLY the message text that should appear inside the card - no quotes, no explanations, no markdown formatting (no *bold*, _italics_, or other markdown), just the complete ").concat(r," message in plain text.\n\nIMPORTANT: Wrap your final message in <MESSAGE> </MESSAGE> tags. Everything outside these tags will be ignored."),i=await ey(s,{model:"gemini-2.5-pro",includeThoughts:!1});if(null==i?void 0:i.trim()){let e=i.match(/<MESSAGE>([\s\S]*?)<\/MESSAGE>/),t=e?e[1].trim():i.trim();o(t),Y.Am.success("✨ Personalized message created!")}}catch(e){Y.Am.error("Failed to generate message. Please try again.")}finally{W(!1)}},eH=async e=>{try{let t;let a=await fetch("/internal/call_mcp_tool",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool_name:"analyze_images",arguments:{urls:[e],analysis_prompt:"Analyze this reference photo and provide a detailed description of the people and visual elements that can be used to recreate them as stylized cartoon/illustrated characters in a greeting card.\n\nFocus on:\n- Number of people and their approximate ages/relationships\n- Hair colors, styles, and lengths\n- Eye colors and facial features (in general terms)\n- Clothing colors and styles\n- Body language and poses\n- Background elements or setting\n- Overall mood and atmosphere\n\nProvide a detailed but concise description that would help an artist recreate these people as charming, stylized cartoon characters while maintaining their key identifying features. Avoid realistic depictions - focus on cartoon/illustration style descriptions.\n\nFormat as a single paragraph description suitable for an image generation prompt."}})});if(!a.ok)throw Error("Analysis failed: ".concat(a.status));let r=await a.json();if(r.error&&"None"!==r.error&&null!==r.error)throw Error(r.error);if("string"==typeof r.result)try{t=JSON.parse(r.result)}catch(e){t={status:"error",message:"Invalid JSON response"}}else t=r.result;if("error"===t.status)throw Error(t.message);if("success"===t.status&&t.results&&t.results.length>0){let e=t.results[0];if("success"===e.status&&e.analysis)return e.analysis;throw Error(e.message||"Image analysis failed")}throw Error("No analysis results returned")}catch(e){return console.error("Image analysis failed:",e),null}},eW=async(e,t)=>{if(!e.type.startsWith("image/")){Y.Am.error("Please upload an image file");return}eP(!0);try{let a=new FormData;a.append("file",e);let r=await fetch("".concat(em,"/upload"),{method:"POST",body:a});if(!r.ok)throw Error("Upload failed: ".concat(r.status));let s=await r.json();"handwriting"===t?(ej(e),ek(s.url),Y.Am.success("Handwriting sample uploaded!")):(eS(e),eD(s.url),Y.Am.success("Reference image uploaded!"))}catch(e){Y.Am.error("Upload failed. Please try again.")}finally{eP(!1)}},eG=async()=>{if(!e.trim()){Y.Am.error("Please describe your card");return}if(!eR.trim()){Y.Am.error("Please enter your email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(eR)){Y.Am.error("Please enter a valid email address");return}if("custom"===J&&!$.trim()){Y.Am.error("Please describe your custom artistic style");return}let t="custom"===y?v:y,r=eh.find(e=>e.id===j),s=r?r.description.toLowerCase():"heartfelt and sincere",i=a;if(eO)i="[Blank space for handwritten message]";else if(!i.trim()&&!eL){er("✍️ Penning the perfect words just for you..."),W(!0);try{let a="Create a ".concat(s," message for a ").concat(t,' greeting card.\n\nCard Theme/Description: "').concat(e,'"\n').concat(m?"Recipient: ".concat(m):"Recipient: [not specified]","\n").concat(f?"Sender: ".concat(f):"Sender: [not specified]","\nCard Tone: ").concat(r?r.label:"Heartfelt"," - ").concat(s,"\n\nInstructions:\n- Write a message that is ").concat(s," and feels personal and genuine\n- ").concat(m?"Address the message to ".concat(m," directly, using their name naturally"):"Write in a way that could be personalized to any recipient","\n- ").concat(f?"Write as if ".concat(f," is personally writing this message"):"Write in a ".concat(s," tone"),"\n- Match the ").concat(s," tone and occasion of the ").concat(t,' card type\n- Be inspired by the theme: "').concat(e,'"\n- Keep it concise but meaningful (2-4 sentences ideal)\n- Make it feel authentic, not generic\n- SAFETY: Never include brand names, character names, trademarked terms, or inappropriate content. If the theme references these, use generic alternatives or focus on the emotions/concepts instead\n- Keep content family-friendly and appropriate for all ages\n- ').concat("funny"===j?"Include appropriate humor that fits the occasion":"","\n- ").concat("genz-humor"===j?'Use GenZ humor with internet slang, memes, and chaotic energy - think "no cap", "periodt", "it\'s giving...", "slay", etc. Be unhinged but endearing':"","\n- ").concat("professional"===j?"Keep it formal and business-appropriate":"","\n- ").concat("romantic"===j?"Include loving and romantic language":"","\n- ").concat("playful"===j?"Use fun and energetic language":"","\n- ").concat(m&&f?"Show the relationship between ".concat(f," and ").concat(m," through the ").concat(s," message tone"):"","\n- ").concat(f?'End the message with a signature line like "Love, '.concat(f,'" or "- ').concat(f,'" or similar, naturally integrated into the message.'):"","\n\nReturn ONLY the message text that should appear inside the card - no quotes, no explanations, no markdown formatting (no *bold*, _italics_, or other markdown), just the complete ").concat(s," message in plain text.\n\nIMPORTANT: Wrap your final message in <MESSAGE> </MESSAGE> tags. Everything outside these tags will be ignored."),n=await ey(a,{model:"gemini-2.5-pro",includeThoughts:!1});if(null==n?void 0:n.trim()){let e=n.match(/<MESSAGE>([\s\S]*?)<\/MESSAGE>/);i=e?e[1].trim():n.trim(),o(i),er("✅ Perfect message crafted! Now for the magic visuals..."),Y.Am.success("✨ Generated a personalized message for your card!")}else i=e;W(!1)}catch(t){i=e,W(!1)}}C(!0),er("\uD83C\uDFA8 Gathering artistic inspiration...");let n=(0,ec.Z)();ez(n);let l="".concat(em,"/card/").concat(n);U([]),V(0);try{er("\uD83C\uDFA8 Applying your artistic style...");let o=eg.find(e=>e.id===J),d=o?o.promptModifier:"";if("ai-smart-style"===J){er("✨ Style experts selecting the perfect look...");try{let r="You are an expert art director specializing in beautiful, heartfelt greeting cards. Your job is to choose the perfect artistic style that will create a warm, emotional, and memorable card.\n\nCard Details:\n- Type: ".concat(t,'\n- Theme/Description: "').concat(e,'"\n').concat(m?"- Recipient: ".concat(m):"","\n").concat(f?"- Sender: ".concat(f):"","\n").concat(eE?"- Has reference photo for transformation":"","\n").concat(eO?"- Will have handwritten message":'- Message: "'.concat(a,'"'),"\n\nIMPORTANT GUIDELINES:\n- Choose styles that are WARM, EMOTIONAL, and PERSONAL (greeting cards are about human connection)\n- AVOID: robots, tech, cyberpunk, futuristic, sci-fi, digital, mechanical themes\n- PREFER: watercolor, oil painting, hand-drawn, illustrated, artistic, painterly, natural, organic styles\n- Consider the emotional tone: joyful, loving, celebratory, peaceful, artistic\n- Think about what would make someone smile when they receive this card\n\nGreat card styles include:\n- Watercolor illustrations with soft, flowing colors\n- Hand-painted artwork with visible brushstrokes\n- Charming illustrated characters and scenes\n- Beautiful botanical and nature themes\n- Vintage artistic styles with character\n- Warm, inviting color palettes\n- Artistic techniques that feel handmade and personal\n\nChoose ONE artistic style that perfectly matches this ").concat(t,' card\'s emotional purpose. Respond with:\n"in [detailed artistic style description focusing on warmth, beauty, and emotional appeal]"\n\nMake it feel like something created with love for someone special.'),s=await ey(r,{model:"gemini-2.5-pro",includeThoughts:!1});(null==s?void 0:s.trim())?(d=s.trim(),er("✨ Perfect style chosen! Time to bring your card to life..."),Y.Am.success("\uD83C\uDFA8 Perfect artistic style chosen for your card!")):d="in a sophisticated artistic style with harmonious colors, elegant composition, and beautiful visual elements perfectly suited for this special card"}catch(e){console.error("Style selection failed:",e),d="in a sophisticated artistic style with harmonious colors, elegant composition, and beautiful visual elements perfectly suited for this special card",Y.Am.info("Using a beautiful default style for your card")}}else"custom"===J&&$.trim()?d="in ".concat($.trim()):"custom"!==J||$.trim()||(d="in artistic style with creative and unique visual elements");let u=ep.find(e=>e.id===eY)||ep[0];er("\uD83C\uDFAF Crafting ".concat(D," masterpiece design").concat(D>1?"s":"","..."));let h="Create ".concat(eL?"2":"4"," prompts for a cohesive, chronologically flowing ").concat(t," greeting card that tells a visual story (").concat(u.aspectRatio,' ratio):\n\n\uD83C\uDFA8 CREATIVITY MANDATE: Be genuinely creative, unique, and innovative! Avoid generic or clich\xe9 designs. Think outside the box, surprise with unexpected elements, use bold artistic choices, and create something truly memorable and special. Push creative boundaries while staying appropriate for the card type and tone.\n\nTheme: "').concat(e,'"\nStyle: ').concat((null==o?void 0:o.label)||"Default","\nTone: ").concat(r?r.label:"Heartfelt"," - ").concat(s,"\n").concat(m?"To: ".concat(m):"","\n").concat(f?"From: ".concat(f):"","\n").concat(eL?"":'Message: "'.concat(i,'"'),"\n").concat(eO?"Note: Include space for handwritten message":"","\n").concat(eE?'Reference: "'.concat(eT||"artistic transformation",'"'):"",'\n\nCRITICAL: Create a cohesive visual narrative that flows chronologically through the card experience:\n1. FRONT COVER: First impression - sets the scene/introduces the story\n2. INTERIOR SPREAD: The heart of the experience - continuation and climax of the visual story\n3. BACK COVER: Conclusion - peaceful resolution or complementary ending\n\nRequirements:\n- Flat 2D artwork for printing (not 3D card images)\n- Full-bleed backgrounds extending to edges\n- IMPORTANT: Keep text, faces, and key elements at least 10% away from top/bottom edges (small amount may be cropped in printing)\n- Keep text/faces 0.5" from left/right edges for safe printing\n- CONSISTENT visual elements throughout: same characters, color palette, lighting, art style\n- Progressive visual storytelling from front → interior → back\n- Put any text in quotes and make it clear/readable\n- Each section should feel like part of the same artistic universe\n- TONE: Ensure the visual mood and atmosphere matches the ').concat(s,' tone throughout all sections\n- INTELLECTUAL PROPERTY SAFETY: If the user mentions specific characters, brands, logos, or products, automatically replace them with original generic alternatives in your prompts. For example: replace specific character names with "cartoon mouse character" or "superhero character", replace brand names with "colorful cereal" or "sports car", etc. Create inspired-by designs that capture the essence without referencing any protected names or specific copyrighted elements. Never include actual brand names, character names, or trademarked terms in the image generation prompts\n- CONTENT SAFETY: Ensure all prompts are family-friendly and appropriate for greeting cards. Avoid any content that could be flagged by safety systems including: violence, weapons, inappropriate imagery, political content, controversial topics, scary or disturbing elements, or anything not suitable for all ages. If the user requests something potentially inappropriate, redirect to positive, wholesome alternatives that capture their intent in a family-friendly way\n').concat("funny"===j?"- Include visual humor, playful elements, and whimsical details":"","\n").concat("genz-humor"===j?"- Include GenZ visual elements like chaotic energy, internet meme references, bold contrasting colors, and unhinged but endearing visual style":"","\n").concat("romantic"===j?"- Include romantic elements like soft lighting, hearts, flowers, or intimate scenes":"","\n").concat("professional"===j?"- Keep visuals clean, sophisticated, and business-appropriate":"","\n").concat("playful"===j?"- Include bright colors, dynamic poses, and energetic visual elements":"","\n").concat("elegant"===j?"- Focus on sophisticated design, refined color palettes, and graceful compositions":"","\n").concat(eE?"- Create cartoon/illustrated characters inspired by reference image - DO NOT make realistic depictions":"",'\n\nCreate prompts that flow chronologically:\n\n1. Front Cover (Opening Scene): BE GENUINELY CREATIVE AND UNIQUE! Include "').concat(t,'" greeting text positioned safely in the center area (avoid top/bottom 10% of image). ').concat(eE?"I have included my own reference image. Create a stylized cartoon/illustrated character inspired by the reference image - DO NOT make realistic depictions of real people, instead create charming cartoon-style characters with simplified, friendly features.":"Create charming cartoon-style or stylized illustrated figures if people are needed for the theme."," This is the story opening - introduce key visual elements (colors, motifs, artistic style) that will continue throughout the other sections. Think of something unexpected, innovative, and memorable that will surprise and delight the recipient. Avoid generic designs! Style: ").concat(d,"\n\n2. ").concat(eL?"":"Left Interior (Story Development): UNLEASH YOUR CREATIVITY! You have complete creative freedom to design whatever you want for this left interior page! This is your artistic playground - create something genuinely innovative and unexpected that feels right for a ".concat(t," card with ").concat(s," tone. You can include: scenes, landscapes, objects, patterns, quotes, text, illustrations, realistic art, abstract art, or anything else that inspires you - but NO PEOPLE or characters unless the user specifically mentioned wanting people in their card description. Position any text safely in center area (avoid top/bottom 10%). Think of something no one has done before! Surprise us with bold, imaginative, and memorable artistic choices while maintaining visual harmony with the overall card style and tone. Style: ").concat(d,"\n\n3. Right Interior (Story Climax): BE CREATIVE WITH MESSAGE DESIGN! ").concat(eO?"Design with elegant writing space that complements the visual story from left interior. Position decorative elements safely away from top/bottom edges. Create innovative and artistic decorative elements, borders, or flourishes that are unique and memorable - NO PEOPLE or characters.":'Include message text: "'.concat(i,'" positioned safely in center area (avoid top/bottom 10% of image) integrated into beautiful, innovative decorative artwork. Think beyond typical florals and patterns - create something unexpected and artistic that perfectly frames the message - NO PEOPLE or characters.')," This should feel like the emotional peak of the card experience, harmonizing with the left interior as a cohesive spread. Avoid clich\xe9 designs and create something genuinely special!").concat(eN?" Match handwriting style.":""," Style: ").concat(d,"\n\n4. "),"Back Cover (Story Resolution): BE SUBTLY CREATIVE! Create a simple yet innovative decorative design that brings peaceful closure to the visual story. Reference subtle elements from the front cover but keep it minimal and serene - NO PEOPLE, just beautiful, unexpected artistic elements that go beyond typical patterns or florals. Think of something quietly beautiful and memorable that complements the overall design while being genuinely unique. This should feel like a peaceful, artistic ending that surprises with its subtle creativity. Style: ").concat(d,'\n\nVISUAL CONTINUITY CHECKLIST:\n- Same color palette across all sections\n- Consistent lighting/time of day\n- Same artistic techniques and brushwork\n- Recurring visual motifs or symbols (but make them unique and memorable!)\n- Progressive emotional journey from introduction to resolution\n- Front cover: stylized cartoon/illustrated characters if people are needed for the theme\n- Left interior: CREATIVE FREEDOM but NO PEOPLE unless user specifically requested people in their description\n- Right interior: focus on message space with innovative decorative elements (NO PEOPLE)\n- Back cover: simple yet creative decorative design without text or people\n- Use simplified, friendly, charming character design if including people (front cover only)\n- CREATIVITY PRIORITY: Always choose the more innovative, surprising, and memorable option over generic designs\n\nReturn JSON:\n{\n  "frontCover": "detailed prompt with story opening elements",\n  "backCover": "detailed prompt with story conclusion elements"').concat(eL?"":',\n  "leftInterior": "detailed prompt with story development elements",\n  "rightInterior": "detailed prompt with story climax elements"',"\n}\n\nIMPORTANT: Create a completely unique and different interpretation for this specific card variant. Use different creative approaches, color schemes, compositions, and artistic elements while maintaining the same core theme and requirements."),g=Array.from({length:D},(e,t)=>{let a=h+"\n\n\uD83C\uDFA8 CARD VARIANT ".concat(t+1,' CREATIVE DIRECTION: \nCreate a completely unique visual interpretation that\'s distinctly different from other possible variants. Use different:\n- Color palettes and mood lighting\n- Artistic composition and layout approaches  \n- Creative visual metaphors and symbols\n- Character designs and poses (if applicable)\n- Background elements and settings\n- Typography styles and text placement\n- Overall creative theme while keeping same core message\n\nMake this card variant stand out as its own unique artistic vision!\n\nReturn JSON:\n{\n  "frontCover": "detailed prompt with story opening elements",\n  "backCover": "detailed prompt with story conclusion elements"').concat(eL?"":',\n  "leftInterior": "detailed prompt with story development elements",\n  "rightInterior": "detailed prompt with story climax elements"',"\n}");return ey(a,{jsonSchema:{type:"object",properties:{frontCover:{type:"string"},backCover:{type:"string"},...eL?{}:{leftInterior:{type:"string"},rightInterior:{type:"string"}}},required:["frontCover","backCover",...eL?[]:["leftInterior","rightInterior"]]},includeThoughts:!1})}),p=await Promise.all(g);er("✅ ".concat(D," brilliant design").concat(D>1?"s":""," ready! Now painting them into reality...")),er("\uD83D\uDDBC️ Generating your ".concat(D," card").concat(D>1?"s":""," with ").concat(eL?"2":"4"," images each..."));let x=null;eE&&(er("\uD83D\uDD0D Analyzing reference photo..."),Y.Am.info("Analyzing reference photo..."),(x=await eH(eE))?(er("✨ Reference photo analyzed."),Y.Am.success("\uD83D\uDCDD Reference photo analyzed successfully!")):Y.Am.info("Using reference photo as-is (analysis not available)"));let b=[],w=[],N=[];"gpt-image-1"===ee&&eN&&!eL&&N.push(eN);let k=[];p.forEach((e,t)=>{let a=e.frontCover;x&&(a="".concat(e.frontCover,'\n\nIMPORTANT: Based on this detailed description of people from the reference photo, create stylized cartoon/illustrated characters with these specific features: "').concat(x,'". Transform these real people into charming, friendly cartoon-style characters while maintaining their key identifying characteristics (hair color, clothing, poses, etc.).'));let r=[{tool_name:"generate_images_with_prompts",arguments:{user_number:"+17145986105",prompts:[a],model_version:ee,aspect_ratio:u.aspectRatio,quality:"high",output_format:"jpeg",output_compression:100,moderation:"auto"},user_id_context:"+17145986105",cardIndex:t,sectionIndex:0,sectionName:"Front Cover"},{tool_name:"generate_images_with_prompts",arguments:{user_number:"+17145986105",prompts:[e.backCover],model_version:ee,aspect_ratio:u.aspectRatio,quality:"high",output_format:"jpeg",output_compression:100,moderation:"auto",...b.length>0&&{input_images:[b]}},user_id_context:"+17145986105",cardIndex:t,sectionIndex:1,sectionName:"Back Cover"}];!eL&&e.leftInterior&&e.rightInterior&&r.push({tool_name:"generate_images_with_prompts",arguments:{user_number:"+17145986105",prompts:[e.leftInterior],model_version:ee,aspect_ratio:u.aspectRatio,quality:"high",output_format:"jpeg",output_compression:100,moderation:"auto",...w.length>0&&{input_images:[w]}},user_id_context:"+17145986105",cardIndex:t,sectionIndex:2,sectionName:"Left Interior"},{tool_name:"generate_images_with_prompts",arguments:{user_number:"+17145986105",prompts:[e.rightInterior],model_version:ee,aspect_ratio:u.aspectRatio,quality:"high",output_format:"jpeg",output_compression:100,moderation:"auto",...N.length>0&&{input_images:[N]}},user_id_context:"+17145986105",cardIndex:t,sectionIndex:3,sectionName:"Right Interior"}),k.push(...r)});let C=new Map,T=0,A=[];U([]),E(null),V(0),er("\uD83C\uDFA8 Artists at work! Creating ".concat(k.length," stunning images for your ").concat(D," card").concat(D>1?"s":"","...")),ei(150);let I=setInterval(()=>{ei(e=>e<=1?(clearInterval(I),0):e-1)},1e3);eb(I);let P=async(e,t)=>{try{let t=await ey('The following image prompt was blocked by the safety system. Please rewrite it to be more appropriate while keeping the same artistic intent and style:\n\nBLOCKED PROMPT: "'.concat(e,"\"\n\nRequirements:\n- Keep the same artistic style and visual goals\n- Remove any content that might trigger safety filters\n- Maintain the full-bleed design requirements\n- IMPORTANT: Keep text, faces, and key elements at least 10% away from top/bottom edges (small amount may be cropped in printing)\n- Focus on safe, family-friendly imagery\n- Keep the same color palette and mood\n- Ensure it's appropriate for a greeting card\n\nReturn only the rewritten prompt, no explanations."),{model:"gemini-2.5-pro",includeThoughts:!1});return(null==t?void 0:t.trim())||e}catch(t){return console.error("Failed to regenerate prompt:",t),e}},R=async function(t,a,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t,n=0;for(;n<=2;)try{let t=await fetch("".concat(em,"/internal/call_mcp_tool"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!t.ok)throw Error("HTTP ".concat(t.status));let d=await t.json();if(d.result&&"string"==typeof d.result){var o,l,c;let e=JSON.parse(d.result);if("error"===e.status&&(null===(c=e.results)||void 0===c?void 0:null===(l=c[0])||void 0===l?void 0:null===(o=l.error)||void 0===o?void 0:o.includes("moderation_blocked"))){if(n<2){let e=i.arguments.prompts[0],t=await P(e,r);i={...i,arguments:{...i.arguments,prompts:[t]}},n++;continue}throw Error("Safety system blocked ".concat(r," after ").concat(2," attempts"))}}if(d.error&&"None"!==d.error&&null!==d.error)throw Error(d.error);let m=JSON.parse(d.result);if("success"!==m.status)throw Error("".concat(r," generation failed"));let u=Array.isArray(m.results[0])?m.results[0][0]:m.results[0],h="".concat(s,"-").concat(a);C.set(h,u),T++;let g=k.length;er("\uD83C\uDFA8 ".concat(T,"/").concat(g," masterpieces complete! Just finished Card ").concat(s+1," ").concat(r,"..."));let p=eL?2:4,f=s*p,x=f+p-1,y=!0;for(let e=f;e<=x;e++){let t="".concat(s,"-").concat(e-f);if(!C.has(t)){y=!1;break}}return y&&(U(t=>{let a=[...t];a[s]||(a[s]={id:"card-".concat(s,"-").concat(Date.now()),prompt:e,frontCover:"",backCover:"",leftPage:"",rightPage:"",createdAt:new Date});let r={...a[s]};return r.frontCover=C.get("".concat(s,"-0"))||"",r.backCover=C.get("".concat(s,"-1"))||"",eL?(r.leftPage=r.backCover,r.rightPage=r.frontCover):(r.leftPage=C.get("".concat(s,"-2"))||"",r.rightPage=C.get("".concat(s,"-3"))||""),a[s]=r,A[s]=r,S&&s!==q||E(r),a}),Y.Am.success("\uD83C\uDF89 Card ".concat(s+1," is complete and ready!"))),u}catch(e){if(2===n)throw Error("Failed to generate ".concat(r,": ").concat(e instanceof Error?e.message:"Unknown error"));n++}},_=k.map(e=>R(e,e.sectionIndex,e.sectionName,e.cardIndex));await Promise.all(_);let F=[];for(let e=0;e<D;e++){let t={id:"card-".concat(e,"-").concat(Date.now()),prompt:h,frontCover:C.get("".concat(e,"-0"))||"",backCover:C.get("".concat(e,"-1"))||"",leftPage:eL?C.get("".concat(e,"-1"))||"":C.get("".concat(e,"-2"))||"",rightPage:eL?C.get("".concat(e,"-0"))||"":C.get("".concat(e,"-3"))||"",createdAt:new Date};F.push(t)}er("✨ Adding interactive QR codes to your cards..."),console.log("\uD83D\uDD04 Starting QR overlay process for",F.length,"cards"),console.log("\uD83D\uDD17 Card URL:",l);for(let e=0;e<F.length;e++){var c;console.log("\uD83C\uDFAF Processing card ".concat(e+1,":"),{hasBackCover:!!F[e].backCover,hasCardUrl:!!l,backCoverLength:null===(c=F[e].backCover)||void 0===c?void 0:c.length})}if(er(""),1===D?Y.Am.success("\uD83C\uDF89 Your complete card with QR code is ready!"):Y.Am.success("\uD83C\uDF89 All ".concat(D," cards with QR codes are ready! Choose your favorite below.")),eR.trim()){let e="custom"===y?v:y;try{let t=F[0];if(!t||!t.frontCover){console.log("No card data available for sharing"),ex(eR,e,"https://vibecarding.com");return}let a={id:n,prompt:h,frontCover:t.frontCover||"",backCover:t.backCover||"",leftPage:t.leftPage||"",rightPage:t.rightPage||""};console.log("Storing card data:",a);let r=await fetch("/api/cards/store",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){let t=await r.json();console.log("Card stored successfully, API response:",t);let a=t.share_url||l;console.log("Using actual share URL for QR code:",a);for(let e=0;e<F.length;e++)if(F[e].backCover&&a)try{let t=F[e].backCover;console.log("\uD83D\uDD04 Applying QR overlay to card ".concat(e+1," after API storage...")),F[e].backCover=await ev(t,a),console.log("✅ QR overlay complete for card ".concat(e+1))}catch(t){console.error("❌ Failed to overlay QR code on card ".concat(e+1,":"),t)}else console.log("⚠️ Skipping QR overlay for card ".concat(e+1," - missing back cover or URL"));console.log("\uD83D\uDD04 Updating displayed cards with QR codes after API storage..."),U([...F]),F.length>0&&E(F[0]),F[0]&&(F[0].shareUrl=a,U(e=>{let t=[...e];return t[0]&&(t[0].shareUrl=a),t})),ex(eR,e,a)}else console.error("Failed to store card:",r.status,await r.text()),ex(eR,e,"https://vibecarding.com")}catch(t){console.error("Error storing card for email:",t),ex(eR,e,"https://vibecarding.com")}}en&&(clearInterval(en),eb(null)),ei(0)}catch(e){er(""),Y.Am.error("Failed to generate card. Please try again."),console.error("Card generation error:",e)}finally{C(!1),en&&(clearInterval(en),eb(null)),ei(0)}},eQ=async()=>{if(S)try{let t={front_cover:S.frontCover,back_cover:S.backCover,left_page:S.leftPage,right_page:S.rightPage,card_name:e.substring(0,50)+(e.length>50?"...":""),paper_size:eY,is_front_back_only:eL,copies:1,color_mode:"color",quality:"high"},a=await fetch("/api/print-queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("HTTP ".concat(a.status));let r=await a.json();if("queued"===r.status){r.duplex,Y.Am.success("\uD83D\uDDA8️ Your card is now printing! You can pick it up shortly.");let e=0,t=async()=>{try{let a=await fetch("/api/print-status/".concat(r.job_id));if(a.ok){let r=await a.json();if("found"===r.status){if("completed"===r.job.status){Y.Am.success("✅ Your card has been added to the print queue and should be available for pickup shortly.");return}if("failed"===r.job.status){Y.Am.error("❌ There was an issue with printing. Please try again or contact us for help.");return}"pending"===r.job.status&&e<6&&(e++,setTimeout(t,1e4))}}}catch(e){console.log("Could not check print status:",e)}};setTimeout(t,1e4)}else throw Error(r.error||"Unknown error")}catch(e){console.error("Print error:",e),Y.Am.error("Failed to queue print job")}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50 dark:from-gray-900 dark:via-slate-800 dark:to-gray-800",children:[(0,r.jsx)("header",{className:"border-b bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm sticky top-0 z-50",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(M.default,{href:"/",children:(0,r.jsxs)(i.z,{variant:"ghost",size:"sm",className:"gap-2",children:[(0,r.jsx)(A.Z,{className:"w-4 h-4"}),"Back"]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(I.Z,{className:"w-5 h-5 text-white"})}),(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"VibeCarding"})})]})]}),(0,r.jsx)(ed.l,{})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-2xl",children:[(0,r.jsxs)(c.Zb,{className:"shadow-lg mb-6",children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(I.Z,{className:"w-5 h-5 text-blue-600"}),"Create Your Card"]}),(0,r.jsx)(c.SZ,{children:"Describe your card and we'll create it for you"})]}),(0,r.jsxs)(c.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Card Type"}),(0,r.jsxs)(d.Ph,{value:y,onValueChange:b,children:[(0,r.jsx)(d.i4,{children:(0,r.jsx)(d.ki,{children:(()=>{let e=eu.find(e=>e.id===y);if(!e)return(0,r.jsx)("span",{className:"text-gray-400",children:"Choose card type"});let t=e.icon;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(t,{className:"w-4 h-4 text-gray-500"}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]})})()})}),(0,r.jsx)(d.Bw,{children:eu.map(e=>{let t=e.icon;return(0,r.jsx)(d.Ql,{value:e.id,children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(t,{className:"w-4 h-4 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})]})},e.id)})})]}),"custom"===y&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Describe Your Card Type"}),(0,r.jsx)(n.I,{placeholder:"e.g., Promotion, Moving Away, First Day of School...",value:v,onChange:e=>w(e.target.value),style:{fontSize:"16px"}}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"What type of card is this? This helps personalize the message and style."})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Card Tone & Style"}),(0,r.jsxs)(d.Ph,{value:j,onValueChange:N,children:[(0,r.jsx)(d.i4,{children:(0,r.jsx)(d.ki,{children:(()=>{let e=eh.find(e=>e.id===j);return e?(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"font-medium",children:e.label})}):(0,r.jsx)("span",{className:"text-gray-400",children:"Choose card tone"})})()})}),(0,r.jsx)(d.Bw,{children:eh.map(e=>(0,r.jsx)(d.Ql,{value:e.id,children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})},e.id))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Artistic Style"}),(0,r.jsxs)(d.Ph,{value:J,onValueChange:K,children:[(0,r.jsx)(d.i4,{children:(0,r.jsx)(d.ki,{placeholder:"Choose artistic style"})}),(0,r.jsx)(d.Bw,{children:eg.map(e=>(0,r.jsx)(d.Ql,{value:e.id,children:(0,r.jsxs)("div",{className:"text-left w-full",children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})},e.id))})]}),"custom"===J&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Describe Your Custom Style"}),(0,r.jsx)(l,{placeholder:"e.g., in vintage 1920s art deco style with gold accents and geometric patterns...",value:$,onChange:e=>X(e.target.value),rows:3,className:"resize-none",style:{fontSize:"16px"}}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Describe the artistic style you want for your card (colors, techniques, era, mood, etc.)"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"To"}),(0,r.jsx)(n.I,{placeholder:"Sarah",value:m,onChange:e=>p(e.target.value),style:{fontSize:"16px"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"From"}),(0,r.jsx)(n.I,{placeholder:"Alex",value:f,onChange:e=>x(e.target.value),style:{fontSize:"16px"}})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Your Email (Required)"}),(0,r.jsx)(n.I,{type:"email",placeholder:"your.email@example.com",required:!0,value:eR,onChange:e=>e_(e.target.value),style:{fontSize:"16px"}}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Required to generate your card. We'll send you a thank you note when it's ready!"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Describe Your Card"}),(0,r.jsx)(l,{placeholder:"A cheerful birthday card with flowers and sunshine for my best friend who loves gardening...",value:e,onChange:e=>t(e.target.value),rows:3,className:"resize-none",style:{fontSize:"16px"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Card Message"}),(0,r.jsxs)(i.z,{variant:"ghost",size:"sm",onClick:eV,disabled:H||!e.trim()||eO,className:"gap-1 text-xs",children:[(0,r.jsx)(P.Z,{className:"w-3 h-3"}),H?"Writing...":"Help me write"]})]}),(0,r.jsx)(l,{placeholder:eO?"Leave blank - you'll handwrite your message":"Write your message here, or click 'Help me write' for inspiration...",value:a,onChange:e=>o(e.target.value),rows:3,className:"resize-none",style:{fontSize:"16px"},disabled:eO}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"handwritten-message",checked:eO,onChange:e=>{eZ(e.target.checked),e.target.checked&&o("")},className:"rounded"}),(0,r.jsx)("label",{htmlFor:"handwritten-message",className:"text-sm text-gray-600 dark:text-gray-400",children:"Leave blank space for handwritten message"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Reference Photo (Optional)"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Upload a photo to transform into stylized card artwork!"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mb-3",children:"✨ For your privacy, photos are transformed into cartoon or illustrated style - not exact replicas"}),eC?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(R.Z,{className:"w-4 h-4 text-purple-600"}),(0,r.jsx)("span",{className:"text-sm text-purple-800 dark:text-purple-200",children:eC.name})]}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{eS(null),eD(null),eA("")},children:(0,r.jsx)(_.Z,{className:"w-4 h-4"})})]}),(0,r.jsx)(l,{placeholder:"How should we transform your photo? (e.g., 'Turn us into cute cartoon characters while keeping our faces recognizable')",value:eT,onChange:e=>eA(e.target.value),rows:2,className:"resize-none",style:{fontSize:"16px"}})]}):(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return(null===(t=e.target.files)||void 0===t?void 0:t[0])&&eW(e.target.files[0],"reference")},disabled:eI,className:"hidden",id:"reference-upload"}),(0,r.jsxs)("label",{htmlFor:"reference-upload",className:"cursor-pointer",children:[(0,r.jsx)(R.Z,{className:"w-6 h-6 mx-auto mb-2 text-gray-400"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:eI?"Uploading...":"Upload photo to transform"})]})]})]}),(0,r.jsxs)(u,{open:G,onOpenChange:Q,children:[(0,r.jsx)(h,{asChild:!0,children:(0,r.jsxs)(i.z,{variant:"ghost",className:"w-full justify-between p-0 h-auto",children:[(0,r.jsxs)("span",{className:"flex items-center gap-2 text-sm font-medium",children:[(0,r.jsx)(F.Z,{className:"w-4 h-4"}),"Advanced Options"]}),(0,r.jsx)(z.Z,{className:"w-4 h-4 transition-transform ".concat(G?"rotate-180":"")})]})}),(0,r.jsxs)(g,{className:"space-y-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Image Model"}),(0,r.jsxs)(d.Ph,{value:ee,onValueChange:et,children:[(0,r.jsx)(d.i4,{children:(0,r.jsx)(d.ki,{})}),(0,r.jsx)(d.Bw,{children:ef.map(e=>(0,r.jsx)(d.Ql,{value:e.id,children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})},e.id))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Paper Size"}),(0,r.jsxs)(d.Ph,{value:eY,onValueChange:eB,children:[(0,r.jsx)(d.i4,{children:(0,r.jsx)(d.ki,{placeholder:"Choose paper size"})}),(0,r.jsx)(d.Bw,{children:ep.map(e=>(0,r.jsx)(d.Ql,{value:e.id,children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.label}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})},e.id))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Number of Cards to Generate"}),(0,r.jsxs)(d.Ph,{value:D.toString(),onValueChange:e=>T(parseInt(e)),children:[(0,r.jsx)(d.i4,{children:(0,r.jsx)(d.ki,{placeholder:"Choose number of cards"})}),(0,r.jsxs)(d.Bw,{children:[(0,r.jsx)(d.Ql,{value:"1",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"1 Card"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Single card generation"})]})}),(0,r.jsx)(d.Ql,{value:"2",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"2 Cards"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Generate 2 variations to choose from"})]})}),(0,r.jsx)(d.Ql,{value:"3",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"3 Cards"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Generate 3 variations to choose from"})]})}),(0,r.jsx)(d.Ql,{value:"4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"4 Cards"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Generate 4 variations to choose from"})]})})]})]}),D>1&&(0,r.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2",children:"✨ Multiple cards will be generated in parallel with the same prompt for creative variety"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block",children:"Print Options"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"front-back-only",checked:eL,onChange:e=>eM(e.target.checked),className:"rounded"}),(0,r.jsx)("label",{htmlFor:"front-back-only",className:"text-sm text-gray-600 dark:text-gray-400",children:"Front/Back only (for single-sided printers)"})]}),eL&&(0,r.jsx)("p",{className:"text-xs text-amber-600 dark:text-amber-400 ml-6",children:"\uD83D\uDCA1 Perfect for single-sided printers - you can write your message inside the folded card"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Handwriting Sample (Optional)"}),ew?(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(Z.Z,{className:"w-4 h-4 text-green-600"}),(0,r.jsx)("span",{className:"text-sm text-green-800 dark:text-green-200",children:ew.name})]}),(0,r.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{ej(null),ek(null)},children:(0,r.jsx)(_.Z,{className:"w-4 h-4"})})]}):(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return(null===(t=e.target.files)||void 0===t?void 0:t[0])&&eW(e.target.files[0],"handwriting")},disabled:eI,className:"hidden",id:"handwriting-upload"}),(0,r.jsxs)("label",{htmlFor:"handwriting-upload",className:"cursor-pointer",children:[(0,r.jsx)(O.Z,{className:"w-6 h-6 mx-auto mb-2 text-gray-400"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:eI?"Uploading...":"Upload handwriting sample"})]})]})]})]})]}),(0,r.jsxs)(u,{className:"space-y-2",children:[(0,r.jsx)(h,{asChild:!0,children:(0,r.jsxs)(i.z,{variant:"ghost",className:"w-full justify-between text-xs text-gray-500 dark:text-gray-400 h-8",children:[(0,r.jsx)("span",{children:"Privacy & Terms"}),(0,r.jsx)(z.Z,{className:"h-3 w-3"})]})}),(0,r.jsx)(g,{className:"space-y-3",children:(0,r.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-300 space-y-3 p-4 border rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2 text-gray-800 dark:text-gray-200",children:"Privacy Policy"}),(0,r.jsxs)("ul",{className:"space-y-1 text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("li",{children:"• We collect your email address and card content to provide our service"}),(0,r.jsx)("li",{children:"• Images and messages are processed using third-party AI services"}),(0,r.jsx)("li",{children:"• Cards are stored temporarily for delivery and may be cached for performance"}),(0,r.jsx)("li",{children:"• We do not sell, share, or use your personal data for marketing purposes"}),(0,r.jsx)("li",{children:"• Your email is only used for card delivery and service communications"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2 text-gray-800 dark:text-gray-200",children:"Terms of Service"}),(0,r.jsxs)("ul",{className:"space-y-1 text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("li",{children:"• You must be 13+ years old to use this service"}),(0,r.jsx)("li",{children:"• You are responsible for the content you submit"}),(0,r.jsx)("li",{children:'• Service is provided "as-is" without warranties'}),(0,r.jsx)("li",{children:"• We reserve the right to refuse service for policy violations"}),(0,r.jsx)("li",{children:"• These terms may be updated with notice on our website"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2 text-gray-800 dark:text-gray-200",children:"Content Policy"}),(0,r.jsxs)("ul",{className:"space-y-1 text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("li",{children:"• All content must be family-friendly and appropriate for all audiences"}),(0,r.jsx)("li",{children:"• No copyrighted characters, logos, or trademarked content"}),(0,r.jsx)("li",{children:"• No hate speech, harassment, or discriminatory content"}),(0,r.jsx)("li",{children:"• No illegal, harmful, or explicit material"}),(0,r.jsx)("li",{children:"• Content may be filtered to ensure compliance with these guidelines"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2 text-gray-800 dark:text-gray-200",children:"Intellectual Property"}),(0,r.jsxs)("ul",{className:"space-y-1 text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("li",{children:"• You retain rights to your original content and ideas"}),(0,r.jsx)("li",{children:"• Generated images are created using AI and may not be copyrightable"}),(0,r.jsx)("li",{children:"• You grant us license to process and deliver your cards"}),(0,r.jsx)("li",{children:"• Respect third-party intellectual property rights"})]})]}),(0,r.jsx)("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("p",{className:"text-center text-gray-500 dark:text-gray-400",children:["By creating a card, you agree to these terms and policies.",(0,r.jsx)("br",{}),"Last updated: ",new Date().toLocaleDateString()]})})]})})]}),(0,r.jsx)(i.z,{onClick:eG,disabled:k||H||!e.trim()||!eR.trim(),className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 h-12",size:"lg",children:k||H?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),H?(0,r.jsx)("span",{children:"✨ Crafting the perfect message..."}):es>0?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(L.Z,{className:"w-4 h-4 mr-2"}),(0,r.jsxs)("span",{className:es<=10?"text-yellow-200 animate-pulse":"",children:["✨ ","".concat(Math.floor(es/60),":").concat((es%60).toString().padStart(2,"0"))," of magic remaining"]})]}):ea?(0,r.jsx)("span",{children:ea}):(0,r.jsx)("span",{children:"✨ Crafting magic..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.Z,{className:"w-5 h-5 mr-2"}),D>1?"Create ".concat(D," Cards"):"Create Card"]})})]})]}),S&&(0,r.jsxs)(c.Zb,{className:"shadow-lg",children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(c.ll,{children:D>1?"Your Cards (".concat(B.length," Generated)"):"Your Card"}),(0,r.jsxs)(c.SZ,{children:["Created ",S.createdAt.toLocaleDateString(),D>1&&" • Viewing Card ".concat(q+1," of ").concat(B.length)]})]})}),D>1&&B.length>1&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Choose Your Favorite Card"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:B.map((e,t)=>(0,r.jsxs)("div",{className:"relative cursor-pointer rounded-lg border-2 p-2 transition-all ".concat(q===t?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),onClick:()=>{V(t),E(e)},children:[(0,r.jsx)("div",{className:"aspect-[2/3] relative overflow-hidden rounded",children:e.frontCover?(0,r.jsx)("img",{src:e.frontCover,alt:"Card ".concat(t+1," Preview"),className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})})}),(0,r.jsxs)("div",{className:"text-center mt-1",children:[(0,r.jsxs)("span",{className:"text-xs font-medium",children:["Card ",t+1]}),q===t&&(0,r.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Selected"})]})]},e.id))})]})]}),(0,r.jsx)(c.aY,{children:(0,r.jsx)(eo,{card:S,onCardUpdate:e=>{E(e),U(t=>{let a=[...t];return a[q]=e,a})},isFrontBackOnly:eL,onPrint:eQ,paperConfig:ep.find(e=>e.id===eY)||ep[0],sectionLoadingStates:eU})})]}),!S&&(0,r.jsx)(c.Zb,{className:"shadow-lg",children:(0,r.jsxs)(c.aY,{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(I.Z,{className:"w-8 h-8 text-white"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Ready to Create?"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm max-w-sm",children:"Describe your perfect card above and we'll bring it to life with creative magic!"})]})})]})]})}},11696:function(e,t,a){"use strict";a.d(t,{l:function(){return o}});var r=a(57437);a(2265);var s=a(20653),i=a(25922),n=a(62869);function o(){let{theme:e,setTheme:t}=(0,i.F)();return(0,r.jsxs)(n.z,{variant:"outline",size:"icon",onClick:()=>t("light"===e?"dark":"light"),children:[(0,r.jsx)(s.NWY,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,r.jsx)(s.kLh,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}},35974:function(e,t,a){"use strict";a.d(t,{C:function(){return o}});var r=a(57437);a(2265);var s=a(90535),i=a(94508);let n=(0,s.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,i.cn)(n({variant:a}),t),...s})}},62869:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var r=a(57437),s=a(2265),i=a(37053),n=a(90535),o=a(94508);let l=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:c=!1,...d}=e,m=c?i.g7:"button";return(0,r.jsx)(m,{className:(0,o.cn)(l({variant:s,size:n,className:a})),ref:t,...d})});c.displayName="Button"},66070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},ll:function(){return l}});var r=a(57437),s=a(2265),i=a(94508);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});n.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",a),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},26110:function(e,t,a){"use strict";a.d(t,{$N:function(){return g},Be:function(){return p},Vq:function(){return l},cZ:function(){return u},fK:function(){return h},hg:function(){return c}});var r=a(57437),s=a(2265),i=a(49027),n=a(32489),o=a(94508);let l=i.fC,c=i.xz,d=i.h_;i.x8;let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});m.displayName=i.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(i.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[s,(0,r.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=i.VY.displayName;let h=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};h.displayName="DialogHeader";let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});g.displayName=i.Dx.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});p.displayName=i.dk.displayName},95186:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var r=a(57437),s=a(2265),i=a(94508);let n=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},53647:function(e,t,a){"use strict";a.d(t,{Bw:function(){return p},Ph:function(){return d},Ql:function(){return f},i4:function(){return u},ki:function(){return m}});var r=a(57437),s=a(2265),i=a(28951),n=a(40875),o=a(22135),l=a(30401),c=a(94508);let d=i.fC;i.ZA;let m=i.B4,u=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(i.xz,{ref:t,className:(0,c.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[s,(0,r.jsx)(i.JO,{asChild:!0,children:(0,r.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=i.xz.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})});h.displayName=i.u_.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})})});g.displayName=i.$G.displayName;let p=s.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...o}=e;return(0,r.jsx)(i.h_,{children:(0,r.jsxs)(i.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...o,children:[(0,r.jsx)(h,{}),(0,r.jsx)(i.l_,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(g,{})]})})});p.displayName=i.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.__,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",a),...s})}).displayName=i.__.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(i.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.wU,{children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(i.eT,{children:s})]})});f.displayName=i.ck.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=i.Z0.displayName},94508:function(e,t,a){"use strict";a.d(t,{cn:function(){return i}});var r=a(61994),s=a(53335);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}},function(e){e.O(0,[310,523,62,534,971,117,744],function(){return e(e.s=7727)}),_N_E=e.O()}]);